/*! For license information please see main.5cb9d422.js.LICENSE.txt */
(()=>{"use strict";var e={579:(e,t,n)=>{e.exports=n(2799)},2799:(e,t)=>{var n=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function r(e,t,o){var r=null;if(void 0!==o&&(r=""+o),void 0!==t.key&&(r=""+t.key),"key"in t)for(var i in o={},t)"key"!==i&&(o[i]=t[i]);else o=t;return t=o.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:o}}t.Fragment=o,t.jsx=r,t.jsxs=r},3986:(e,t,n)=>{function o(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.d(t,{A:()=>o})},4288:(e,t)=>{var n=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var k=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},x=Object.prototype.hasOwnProperty;function S(e,t,o,r,i,s){return o=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==o?o:null,props:s}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function D(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function M(){}function N(e,t,r,i,s){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var a,c,u=!1;if(null===e)u=!0;else switch(l){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case o:u=!0;break;case h:return N((u=e._init)(e._payload),t,r,i,s)}}if(u)return s=s(e),u=""===i?"."+D(e,0):i,k(s)?(r="",null!=u&&(r=u.replace(E,"$&/")+"/"),N(s,t,r,"",function(e){return e})):null!=s&&(A(s)&&(a=s,c=r+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+u,s=S(a.type,c,void 0,0,0,a.props)),t.push(s)),1;u=0;var d,f=""===i?".":i+":";if(k(e))for(var m=0;m<e.length;m++)u+=N(i=e[m],t,r,l=f+D(i,m),s);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=N(i=i.value,t,r,l=f+D(i,m++),s);else if("object"===l){if("function"===typeof e.then)return N(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(M,M):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function T(e,t,n){if(null==e)return e;var o=[],r=0;return N(e,o,"","",function(e){return t.call(n,e,r++)}),o}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function _(){}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var o=m({},e.props),r=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(r=""+t.key),t)!x.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(o[i]=t[i]);var i=arguments.length-2;if(1===i)o.children=n;else if(1<i){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+2];o.children=s}return S(e.type,r,void 0,0,0,o)},t.createContext=function(e){return(e={$$typeof:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:l,_context:e},e},t.createElement=function(e,t,n){var o,r={},i=null;if(null!=t)for(o in void 0!==t.key&&(i=""+t.key),t)x.call(t,o)&&"key"!==o&&"__self"!==o&&"__source"!==o&&(r[o]=t[o]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var l=Array(s),a=0;a<s;a++)l[a]=arguments[a+2];r.children=l}if(e&&e.defaultProps)for(o in s=e.defaultProps)void 0===r[o]&&(r[o]=s[o]);return S(e,i,void 0,0,0,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=C.T,n={};C.T=n;try{var o=e(),r=C.S;null!==r&&r(n,o),"object"===typeof o&&null!==o&&"function"===typeof o.then&&o.then(_,P)}catch(i){P(i)}finally{C.T=t}},t.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},t.use=function(e){return C.H.use(e)},t.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},t.useCallback=function(e,t){return C.H.useCallback(e,t)},t.useContext=function(e){return C.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var o=C.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return o.useEffect(e,t)},t.useId=function(){return C.H.useId()},t.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.H.useMemo(e,t)},t.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},t.useRef=function(e){return C.H.useRef(e)},t.useState=function(e){return C.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return C.H.useTransition()},t.version="19.1.0"},4391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},5043:(e,t,n)=>{e.exports=n(4288)},5896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var o=n-1>>>1,r=e[o];if(!(0<i(r,t)))break e;e[o]=t,e[n]=r,n=o}}function o(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var o=0,r=e.length,s=r>>>1;o<s;){var l=2*(o+1)-1,a=e[l],c=l+1,u=e[c];if(0>i(a,n))c<r&&0>i(u,a)?(e[o]=u,e[c]=n,o=c):(e[o]=a,e[l]=n,o=l);else{if(!(c<r&&0>i(u,n)))break e;e[o]=u,e[c]=n,o=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,a=l.now();t.unstable_now=function(){return l.now()-a}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=o(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=o(u)}}function C(e){if(g=!1,k(e),!m)if(null!==o(c))m=!0,S||(S=!0,x());else{var t=o(u);null!==t&&P(C,t.startTime-e)}}var x,S=!1,A=-1,E=5,D=-1;function M(){return!!v||!(t.unstable_now()-D<E)}function N(){if(v=!1,S){var e=t.unstable_now();D=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(A),A=-1),f=!0;var i=p;try{t:{for(k(e),h=o(c);null!==h&&!(h.expirationTime>e&&M());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var l=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof l){h.callback=l,k(e),n=!0;break t}h===o(c)&&r(c),k(e)}else r(c);h=o(c)}if(null!==h)n=!0;else{var a=o(u);null!==a&&P(C,a.startTime-e),n=!1}}break e}finally{h=null,p=i,f=!1}n=void 0}}finally{n?x():S=!1}}}if("function"===typeof w)x=function(){w(N)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,O=T.port2;T.port1.onmessage=N,x=function(){O.postMessage(null)}}else x=function(){y(N,0)};function P(e,n){A=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:i,expirationTime:l=i+l,sortIndex:-1},i>s?(e.sortIndex=i,n(u,e),null===o(c)&&e===o(u)&&(g?(b(A),A=-1):g=!0,P(C,i-s))):(e.sortIndex=l,n(c,e),m||f||(m=!0,S||(S=!0,x()))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},6672:(e,t,n)=>{var o=n(5043);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");var a=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==o?null:""+o,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=a.T,n=s.p;try{if(a.T=null,s.p=2,e)return e()}finally{a.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,o=c(n,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:o,integrity:r,fetchPriority:i}):"script"===n&&s.d.X(e,{crossOrigin:o,integrity:r,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,o=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:o,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return a.H.useFormState(e,t,n)},t.useFormStatus=function(){return a.H.useHostTransitionStatus()},t.version="19.1.0"},7004:(e,t,n)=>{var o=n(8853),r=n(5043),i=n(7950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function a(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(a(e)!==e)throw Error(s(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),E=Symbol.for("react.lazy");Symbol.for("react.scope");var D=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var M=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var O=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===O?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case x:return"Suspense";case S:return"SuspenseList";case D:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case k:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case E:t=e._payload,e=e._init;try{return P(e(t))}catch(n){}}return null}var _=Array.isArray,L=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},I=[],F=-1;function j(e){return{current:e}}function z(e){0>F||(e.current=I[F],I[F]=null,F--)}function H(e,t){F++,I[F]=e.current,e.current=t}var V=j(null),U=j(null),$=j(null),W=j(null);function q(e,t){switch(H($,t),H(U,e),H(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?rd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=rd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(V),H(V,e)}function G(){z(V),z(U),z($)}function K(e){null!==e.memoizedState&&H(W,e);var t=V.current,n=id(t,e.type);t!==n&&(H(U,e),H(V,n))}function Z(e){U.current===e&&(z(V),z(U)),W.current===e&&(z(W),Kd._currentValue=B)}var J=Object.prototype.hasOwnProperty,X=o.unstable_scheduleCallback,Q=o.unstable_cancelCallback,Y=o.unstable_shouldYield,ee=o.unstable_requestPaint,te=o.unstable_now,ne=o.unstable_getCurrentPriorityLevel,oe=o.unstable_ImmediatePriority,re=o.unstable_UserBlockingPriority,ie=o.unstable_NormalPriority,se=o.unstable_LowPriority,le=o.unstable_IdlePriority,ae=o.log,ce=o.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof ae&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/me|0)|0},fe=Math.log,me=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var o=e.pendingLanes;if(0===o)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var l=134217727&o;return 0!==l?0!==(o=l&~i)?r=ye(o):0!==(s&=l)?r=ye(s):n||0!==(n=l&~e)&&(r=ye(n)):0!==(l=o&~i)?r=ye(l):0!==s?r=ye(s):n||0!==(n=o&~e)&&(r=ye(n)),0===r?0:0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:r}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ce(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function xe(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ae(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ee(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-pe(t);e.entangledLanes|=t,e.entanglements[o]=1073741824|e.entanglements[o]|4194090&n}function De(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-pe(n),r=1<<o;r&t|e[o]&t&&(e[o]|=t),n&=~r}}function Me(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Te(){var e=R.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Oe=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Oe,_e="__reactProps$"+Oe,Le="__reactContainer$"+Oe,Re="__reactEvents$"+Oe,Be="__reactListeners$"+Oe,Ie="__reactHandles$"+Oe,Fe="__reactResources$"+Oe,je="__reactMarker$"+Oe;function ze(e){delete e[Pe],delete e[_e],delete e[Re],delete e[Be],delete e[Ie]}function He(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Le]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Pe])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function Ve(e){if(e=e[Pe]||e[Le]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function $e(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[je]=!0}var qe=new Set,Ge={};function Ke(e,t){Ze(e,t),Ze(e+"Capture",t)}function Ze(e,t){for(Ge[e]=t,e=0;e<t.length;e++)qe.add(t[e])}var Je,Xe,Qe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ye={},et={};function tt(e,t,n){if(r=t,J.call(et,r)||!J.call(Ye,r)&&(Qe.test(r)?et[r]=!0:(Ye[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var o=t.toLowerCase().slice(0,5);if("data-"!==o&&"aria-"!==o)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ot(e,t,n,o){if(null===o)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+o)}}function rt(e){if(void 0===Je)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Xe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+Xe}var it=!1;function st(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var o=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){o=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){o=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(l){if(l&&o&&"string"===typeof l.stack)return[l.stack,o.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=o.DetermineComponentFrameRoot(),s=i[0],l=i[1];if(s&&l){var a=s.split("\n"),c=l.split("\n");for(r=o=0;o<a.length&&!a[o].includes("DetermineComponentFrameRoot");)o++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(o===a.length||r===c.length)for(o=a.length-1,r=c.length-1;1<=o&&0<=r&&a[o]!==c[r];)r--;for(;1<=o&&0<=r;o--,r--)if(a[o]!==c[r]){if(1!==o||1!==r)do{if(o--,0>--r||a[o]!==c[r]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=r);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rt(n):""}function lt(e){switch(e.tag){case 26:case 27:case 5:return rt(e.type);case 16:return rt("Lazy");case 13:return rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return rt("Activity");default:return""}}function at(e){try{var t="";do{t+=lt(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){o=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(e){o=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=ut(e)?e.checked?"true":"false":e.value),(e=o)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function mt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,o,r,i,s,l){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?yt(e,s,ct(t)):null!=n?yt(e,s,ct(n)):null!=o&&e.removeAttribute("value"),null==r&&null!=i&&(e.defaultChecked=!!i),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l?e.name=""+ct(l):e.removeAttribute("name")}function vt(e,t,n,o,r,i,s,l){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}o="function"!==typeof(o=null!=o?o:r)&&"symbol"!==typeof o&&!!o,e.checked=l?e.checked:!!o,e.defaultChecked=!!o,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function yt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,o){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&o&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(o&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,n,o){if(null==t){if(null!=o){if(null!=n)throw Error(s(92));if(_(o)){if(1<o.length)throw Error(s(93));o=o[0]}n=o}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(o=e.textContent)===n&&""!==o&&null!==o&&(e.value=o)}function Ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var o=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?o?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":o?e.setProperty(t,n):"number"!==typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function At(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var o in n)!n.hasOwnProperty(o)||null!=t&&t.hasOwnProperty(o)||(0===o.indexOf("--")?e.setProperty(o,""):"float"===o?e.cssFloat="":e[o]="");for(var r in t)o=t[r],t.hasOwnProperty(r)&&n[r]!==o&&St(e,r,o)}else for(var i in t)t.hasOwnProperty(i)&&St(e,i,t[i])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nt(e){return Mt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Tt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,_t=null;function Lt(e){var t=Ve(e);if(t&&(e=t.stateNode)){var n=e[_e]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var r=o[_e]||null;if(!r)throw Error(s(90));gt(o,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(o=n[t]).form===e.form&&ht(o)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Rt=!1;function Bt(e,t,n){if(Rt)return e(t,n);Rt=!0;try{return e(t)}finally{if(Rt=!1,(null!==Pt||null!==_t)&&(Hc(),Pt&&(t=Pt,e=_t,_t=Pt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function It(e,t){var n=e.stateNode;if(null===n)return null;var o=n[_e]||null;if(null===o)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),jt=!1;if(Ft)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(_h){jt=!1}var Ht=null,Vt=null,Ut=null;function $t(){if(Ut)return Ut;var e,t,n=Vt,o=n.length,r="value"in Ht?Ht.value:Ht.textContent,i=r.length;for(e=0;e<o&&n[e]===r[e];e++);var s=o-e;for(t=1;t<=s&&n[o-t]===r[i-t];t++);return Ut=r.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function Gt(){return!1}function Kt(e){function t(t,n,o,r,i){for(var s in this._reactName=t,this._targetInst=o,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?qt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var Zt,Jt,Xt,Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yt=Kt(Qt),en=h({},Qt,{view:0,detail:0}),tn=Kt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?(Zt=e.screenX-Xt.screenX,Jt=e.screenY-Xt.screenY):Jt=Zt=0,Xt=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),on=Kt(nn),rn=Kt(h({},nn,{dataTransfer:0})),sn=Kt(h({},en,{relatedTarget:0})),ln=Kt(h({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0})),an=Kt(h({},Qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Kt(h({},Qt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function fn(){return pn}var mn=Kt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Kt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Kt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),yn=Kt(h({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Kt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Kt(h({},Qt,{newState:0,oldState:0})),kn=[9,13,27,32],Cn=Ft&&"CompositionEvent"in window,xn=null;Ft&&"documentMode"in document&&(xn=document.documentMode);var Sn=Ft&&"TextEvent"in window&&!xn,An=Ft&&(!Cn||xn&&8<xn&&11>=xn),En=String.fromCharCode(32),Dn=!1;function Mn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Tn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function _n(e,t,n,o){Pt?_t?_t.push(o):_t=[o]:Pt=o,0<(t=$u(t,"onChange")).length&&(n=new Yt("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Ln=null,Rn=null;function Bn(e){Bu(e,0)}function In(e){if(ht(Ue(e)))return e}function Fn(e,t){if("change"===e)return t}var jn=!1;if(Ft){var zn;if(Ft){var Hn="oninput"in document;if(!Hn){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),Hn="function"===typeof Vn.oninput}zn=Hn}else zn=!1;jn=zn&&(!document.documentMode||9<document.documentMode)}function Un(){Ln&&(Ln.detachEvent("onpropertychange",$n),Rn=Ln=null)}function $n(e){if("value"===e.propertyName&&In(Rn)){var t=[];_n(t,Rn,e,Ot(e)),Bt(Bn,t)}}function Wn(e,t,n){"focusin"===e?(Un(),Rn=n,(Ln=t).attachEvent("onpropertychange",$n)):"focusout"===e&&Un()}function qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return In(Rn)}function Gn(e,t){if("click"===e)return In(t)}function Kn(e,t){if("input"===e||"change"===e)return In(t)}var Zn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if(Zn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!J.call(t,r)||!Zn(e[r],t[r]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qn(e,t){var n,o=Xn(e);for(e=0;o;){if(3===o.nodeType){if(n=e+o.textContent.length,e<=t&&n>=t)return{node:o,offset:t-e};e=n}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Xn(o)}}function Yn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Yn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function eo(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(o){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function to(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var no=Ft&&"documentMode"in document&&11>=document.documentMode,oo=null,ro=null,io=null,so=!1;function lo(e,t,n){var o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;so||null==oo||oo!==pt(o)||("selectionStart"in(o=oo)&&to(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},io&&Jn(io,o)||(io=o,0<(o=$u(ro,"onSelect")).length&&(t=new Yt("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=oo)))}function ao(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var co={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionrun:ao("Transition","TransitionRun"),transitionstart:ao("Transition","TransitionStart"),transitioncancel:ao("Transition","TransitionCancel"),transitionend:ao("Transition","TransitionEnd")},uo={},ho={};function po(e){if(uo[e])return uo[e];if(!co[e])return e;var t,n=co[e];for(t in n)if(n.hasOwnProperty(t)&&t in ho)return uo[e]=n[t];return e}Ft&&(ho=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);var fo=po("animationend"),mo=po("animationiteration"),go=po("animationstart"),vo=po("transitionrun"),yo=po("transitionstart"),bo=po("transitioncancel"),wo=po("transitionend"),ko=new Map,Co="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(e,t){ko.set(e,t),Ke(t,[e])}Co.push("scrollEnd");var So=new WeakMap;function Ao(e,t){if("object"===typeof e&&null!==e){var n=So.get(e);return void 0!==n?n:(t={value:e,source:t,stack:at(t)},So.set(e,t),t)}return{value:e,source:t,stack:at(t)}}var Eo=[],Do=0,Mo=0;function No(){for(var e=Do,t=Mo=Do=0;t<e;){var n=Eo[t];Eo[t++]=null;var o=Eo[t];Eo[t++]=null;var r=Eo[t];Eo[t++]=null;var i=Eo[t];if(Eo[t++]=null,null!==o&&null!==r){var s=o.pending;null===s?r.next=r:(r.next=s.next,s.next=r),o.pending=r}0!==i&&_o(n,r,i)}}function To(e,t,n,o){Eo[Do++]=e,Eo[Do++]=t,Eo[Do++]=n,Eo[Do++]=o,Mo|=o,e.lanes|=o,null!==(e=e.alternate)&&(e.lanes|=o)}function Oo(e,t,n,o){return To(e,t,n,o),Lo(e)}function Po(e,t){return To(e,null,null,t),Lo(e)}function _o(e,t,n){e.lanes|=n;var o=e.alternate;null!==o&&(o.lanes|=n);for(var r=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(o=i.alternate)&&(o.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(r=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,r&&null!==t&&(r=31-pe(n),null===(o=(e=i.hiddenUpdates)[r])?e[r]=[t]:o.push(t),t.lane=536870912|n),i):null}function Lo(e){if(50<Pc)throw Pc=0,_c=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ro={};function Bo(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Io(e,t,n,o){return new Bo(e,t,n,o)}function Fo(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jo(e,t){var n=e.alternate;return null===n?((n=Io(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zo(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ho(e,t,n,o,r,i){var l=0;if(o=e,"function"===typeof e)Fo(e)&&(l=1);else if("string"===typeof e)l=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case D:return(e=Io(31,n,t,r)).elementType=D,e.lanes=i,e;case g:return Vo(n.children,r,i,t);case v:l=8,r|=24;break;case y:return(e=Io(12,n,t,2|r)).elementType=y,e.lanes=i,e;case x:return(e=Io(13,n,t,r)).elementType=x,e.lanes=i,e;case S:return(e=Io(19,n,t,r)).elementType=S,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case k:l=10;break e;case w:l=9;break e;case C:l=11;break e;case A:l=14;break e;case E:l=16,o=null;break e}l=29,n=Error(s(130,null===e?"null":typeof e,"")),o=null}return(t=Io(l,n,t,r)).elementType=e,t.type=o,t.lanes=i,t}function Vo(e,t,n,o){return(e=Io(7,e,o,t)).lanes=n,e}function Uo(e,t,n){return(e=Io(6,e,null,t)).lanes=n,e}function $o(e,t,n){return(t=Io(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wo=[],qo=0,Go=null,Ko=0,Zo=[],Jo=0,Xo=null,Qo=1,Yo="";function er(e,t){Wo[qo++]=Ko,Wo[qo++]=Go,Go=e,Ko=t}function tr(e,t,n){Zo[Jo++]=Qo,Zo[Jo++]=Yo,Zo[Jo++]=Xo,Xo=e;var o=Qo;e=Yo;var r=32-pe(o)-1;o&=~(1<<r),n+=1;var i=32-pe(t)+r;if(30<i){var s=r-r%5;i=(o&(1<<s)-1).toString(32),o>>=s,r-=s,Qo=1<<32-pe(t)+r|n<<r|o,Yo=i+e}else Qo=1<<i|n<<r|o,Yo=e}function nr(e){null!==e.return&&(er(e,1),tr(e,1,0))}function or(e){for(;e===Go;)Go=Wo[--qo],Wo[qo]=null,Ko=Wo[--qo],Wo[qo]=null;for(;e===Xo;)Xo=Zo[--Jo],Zo[Jo]=null,Yo=Zo[--Jo],Zo[Jo]=null,Qo=Zo[--Jo],Zo[Jo]=null}var rr=null,ir=null,sr=!1,lr=null,ar=!1,cr=Error(s(519));function ur(e){throw gr(Ao(Error(s(418,"")),e)),cr}function dr(e){var t=e.stateNode,n=e.type,o=e.memoizedProps;switch(t[Pe]=e,t[_e]=o,n){case"dialog":Iu("cancel",t),Iu("close",t);break;case"iframe":case"object":case"embed":Iu("load",t);break;case"video":case"audio":for(n=0;n<Lu.length;n++)Iu(Lu[n],t);break;case"source":Iu("error",t);break;case"img":case"image":case"link":Iu("error",t),Iu("load",t);break;case"details":Iu("toggle",t);break;case"input":Iu("invalid",t),vt(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),dt(t);break;case"select":Iu("invalid",t);break;case"textarea":Iu("invalid",t),kt(t,o.value,o.defaultValue,o.children),dt(t)}"string"!==typeof(n=o.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===o.suppressHydrationWarning||Ju(t.textContent,n)?(null!=o.popover&&(Iu("beforetoggle",t),Iu("toggle",t)),null!=o.onScroll&&Iu("scroll",t),null!=o.onScrollEnd&&Iu("scrollend",t),null!=o.onClick&&(t.onclick=Xu),t=!0):t=!1,t||ur(e)}function hr(e){for(rr=e.return;rr;)switch(rr.tag){case 5:case 13:return void(ar=!1);case 27:case 3:return void(ar=!0);default:rr=rr.return}}function pr(e){if(e!==rr)return!1;if(!sr)return hr(e),sr=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||sd(e.type,e.memoizedProps)),t=!t),t&&ir&&ur(e),hr(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ir=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ir=null}}else 27===n?(n=ir,pd(e.type)?(e=yd,yd=null,ir=e):ir=n):ir=rr?vd(e.stateNode.nextSibling):null;return!0}function fr(){ir=rr=null,sr=!1}function mr(){var e=lr;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),lr=null),e}function gr(e){null===lr?lr=[e]:lr.push(e)}var vr=j(null),yr=null,br=null;function wr(e,t,n){H(vr,t._currentValue),t._currentValue=n}function kr(e){e._currentValue=vr.current,z(vr)}function Cr(e,t,n){for(;null!==e;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==o&&(o.childLanes|=t)):null!==o&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function xr(e,t,n,o){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var i=r.dependencies;if(null!==i){var l=r.child;i=i.firstContext;e:for(;null!==i;){var a=i;i=r;for(var c=0;c<t.length;c++)if(a.context===t[c]){i.lanes|=n,null!==(a=i.alternate)&&(a.lanes|=n),Cr(i.return,n,e),o||(l=null);break e}i=a.next}}else if(18===r.tag){if(null===(l=r.return))throw Error(s(341));l.lanes|=n,null!==(i=l.alternate)&&(i.lanes|=n),Cr(l,n,e),l=null}else l=r.child;if(null!==l)l.return=r;else for(l=r;null!==l;){if(l===e){l=null;break}if(null!==(r=l.sibling)){r.return=l.return,l=r;break}l=l.return}r=l}}function Sr(e,t,n,o){e=null;for(var r=t,i=!1;null!==r;){if(!i)if(0!==(524288&r.flags))i=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var l=r.alternate;if(null===l)throw Error(s(387));if(null!==(l=l.memoizedProps)){var a=r.type;Zn(r.pendingProps.value,l.value)||(null!==e?e.push(a):e=[a])}}else if(r===W.current){if(null===(l=r.alternate))throw Error(s(387));l.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(Kd):e=[Kd])}r=r.return}null!==e&&xr(t,e,n,o),t.flags|=262144}function Ar(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Er(e){yr=e,br=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Dr(e){return Nr(yr,e)}function Mr(e,t){return null===yr&&Er(e),Nr(e,t)}function Nr(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===br){if(null===e)throw Error(s(308));br=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else br=br.next=t;return n}var Tr="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Or=o.unstable_scheduleCallback,Pr=o.unstable_NormalPriority,_r={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lr(){return{controller:new Tr,data:new Map,refCount:0}}function Rr(e){e.refCount--,0===e.refCount&&Or(Pr,function(){e.controller.abort()})}var Br=null,Ir=0,Fr=0,jr=null;function zr(){if(0===--Ir&&null!==Br){null!==jr&&(jr.status="fulfilled");var e=Br;Br=null,Fr=0,jr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Hr=L.S;L.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Br){var n=Br=[];Ir=0,Fr=Nu(),jr={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ir++,t.then(zr,zr)}(0,t),null!==Hr&&Hr(e,t)};var Vr=j(null);function Ur(){var e=Vr.current;return null!==e?e:oc.pooledCache}function $r(e,t){H(Vr,null===t?Vr.current:t.pool)}function Wr(){var e=Ur();return null===e?null:{parent:_r._currentValue,pool:e}}var qr=Error(s(460)),Gr=Error(s(474)),Kr=Error(s(542)),Zr={then:function(){}};function Jr(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xr(){}function Qr(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xr,Xr),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ti(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xr,Xr);else{if(null!==(e=oc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ti(e=t.reason),e}throw Yr=t,qr}}var Yr=null;function ei(){if(null===Yr)throw Error(s(459));var e=Yr;return Yr=null,e}function ti(e){if(e===qr||e===Kr)throw Error(s(483))}var ni=!1;function oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ii(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function si(e,t,n){var o=e.updateQueue;if(null===o)return null;if(o=o.shared,0!==(2&nc)){var r=o.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),o.pending=t,t=Lo(e),_o(e,null,n),t}return To(e,o,t,n),Lo(e)}function li(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var o=t.lanes;n|=o&=e.pendingLanes,t.lanes=n,De(e,n)}}function ai(e,t){var n=e.updateQueue,o=e.alternate;if(null!==o&&n===(o=o.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?r=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?r=i=t:i=i.next=t}else r=i=t;return n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,callbacks:o.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ci=!1;function ui(){if(ci){if(null!==jr)throw jr}}function di(e,t,n,o){ci=!1;var r=e.updateQueue;ni=!1;var i=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var a=l,c=a.next;a.next=null,null===s?i=c:s.next=c,s=a;var u=e.alternate;null!==u&&((l=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===l?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(null!==i){var d=r.baseState;for(s=0,u=c=a=null,l=i;;){var p=-536870913&l.lane,f=p!==l.lane;if(f?(ic&p)===p:(o&p)===p){0!==p&&p===Fr&&(ci=!0),null!==u&&(u=u.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var m=e,g=l;p=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(v,d,p);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=g.payload)?m.call(v,d,p):m)||void 0===p)break e;d=h({},d,p);break e;case 2:ni=!0}}null!==(p=l.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=r.callbacks)?r.callbacks=[p]:f.push(p))}else f={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===u?(c=u=f,a=d):u=u.next=f,s|=p;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(f=l).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}null===u&&(a=d),r.baseState=a,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===i&&(r.shared.lanes=0),pc|=s,e.lanes=s,e.memoizedState=d}}function hi(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function pi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hi(n[e],t)}var fi=j(null),mi=j(0);function gi(e,t){H(mi,e=dc),H(fi,t),dc=e|t.baseLanes}function vi(){H(mi,dc),H(fi,fi.current)}function yi(){dc=mi.current,z(fi),z(mi)}var bi=0,wi=null,ki=null,Ci=null,xi=!1,Si=!1,Ai=!1,Ei=0,Di=0,Mi=null,Ni=0;function Ti(){throw Error(s(321))}function Oi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function Pi(e,t,n,o,r,i){return bi=i,wi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=null===e||null===e.memoizedState?qs:Gs,Ai=!1,i=n(o,r),Ai=!1,Si&&(i=Li(t,n,o,r)),_i(e),i}function _i(e){L.H=Ws;var t=null!==ki&&null!==ki.next;if(bi=0,Ci=ki=wi=null,xi=!1,Di=0,Mi=null,t)throw Error(s(300));null===e||Dl||null!==(e=e.dependencies)&&Ar(e)&&(Dl=!0)}function Li(e,t,n,o){wi=e;var r=0;do{if(Si&&(Mi=null),Di=0,Si=!1,25<=r)throw Error(s(301));if(r+=1,Ci=ki=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}L.H=Ks,i=t(n,o)}while(Si);return i}function Ri(){var e=L.H,t=e.useState()[0];return t="function"===typeof t.then?Hi(t):t,e=e.useState()[0],(null!==ki?ki.memoizedState:null)!==e&&(wi.flags|=1024),t}function Bi(){var e=0!==Ei;return Ei=0,e}function Ii(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fi(e){if(xi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}xi=!1}bi=0,Ci=ki=wi=null,Si=!1,Di=Ei=0,Mi=null}function ji(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ci?wi.memoizedState=Ci=e:Ci=Ci.next=e,Ci}function zi(){if(null===ki){var e=wi.alternate;e=null!==e?e.memoizedState:null}else e=ki.next;var t=null===Ci?wi.memoizedState:Ci.next;if(null!==t)Ci=t,ki=e;else{if(null===e){if(null===wi.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(ki=e).memoizedState,baseState:ki.baseState,baseQueue:ki.baseQueue,queue:ki.queue,next:null},null===Ci?wi.memoizedState=Ci=e:Ci=Ci.next=e}return Ci}function Hi(e){var t=Di;return Di+=1,null===Mi&&(Mi=[]),e=Qr(Mi,e,t),t=wi,null===(null===Ci?t.memoizedState:Ci.next)&&(t=t.alternate,L.H=null===t||null===t.memoizedState?qs:Gs),e}function Vi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Hi(e);if(e.$$typeof===k)return Dr(e)}throw Error(s(438,String(e)))}function Ui(e){var t=null,n=wi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var o=wi.alternate;null!==o&&(null!==(o=o.updateQueue)&&(null!=(o=o.memoCache)&&(t={data:o.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),o=0;o<e;o++)n[o]=M;return t.index++,n}function $i(e,t){return"function"===typeof t?t(e):t}function Wi(e){return qi(zi(),ki,e)}function qi(e,t,n){var o=e.queue;if(null===o)throw Error(s(311));o.lastRenderedReducer=n;var r=e.baseQueue,i=o.pending;if(null!==i){if(null!==r){var l=r.next;r.next=i.next,i.next=l}t.baseQueue=r=i,o.pending=null}if(i=e.baseState,null===r)e.memoizedState=i;else{var a=l=null,c=null,u=t=r.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ic&h)===h:(bi&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Fr&&(d=!0);else{if((bi&p)===p){u=u.next,p===Fr&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(a=c=h,l=i):c=c.next=h,wi.lanes|=p,pc|=p}h=u.action,Ai&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else p={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(a=c=p,l=i):c=c.next=p,wi.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?l=i:c.next=a,!Zn(i,e.memoizedState)&&(Dl=!0,d&&null!==(n=jr)))throw n;e.memoizedState=i,e.baseState=l,e.baseQueue=c,o.lastRenderedState=i}return null===r&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Gi(e){var t=zi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var o=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var l=r=r.next;do{i=e(i,l.action),l=l.next}while(l!==r);Zn(i,t.memoizedState)||(Dl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,o]}function Ki(e,t,n){var o=wi,r=zi(),i=sr;if(i){if(void 0===n)throw Error(s(407));n=n()}else n=t();var l=!Zn((ki||r).memoizedState,n);if(l&&(r.memoizedState=n,Dl=!0),r=r.queue,vs(2048,8,Xi.bind(null,o,r,e),[e]),r.getSnapshot!==t||l||null!==Ci&&1&Ci.memoizedState.tag){if(o.flags|=2048,fs(9,{destroy:void 0,resource:void 0},Ji.bind(null,o,r,n,t),null),null===oc)throw Error(s(349));i||0!==(124&bi)||Zi(o,t,n)}return n}function Zi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ji(e,t,n,o){t.value=n,t.getSnapshot=o,Qi(t)&&Yi(e)}function Xi(e,t,n){return n(function(){Qi(t)&&Yi(e)})}function Qi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(o){return!0}}function Yi(e){var t=Po(e,2);null!==t&&Bc(t,e,2)}function es(e){var t=ji();if("function"===typeof e){var n=e;if(e=n(),Ai){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:e},t}function ts(e,t,n,o){return e.baseState=n,qi(e,ki,"function"===typeof o?o:$i)}function ns(e,t,n,o,r){if(Vs(e))throw Error(s(485));if(null!==(e=t.action)){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==L.T?n(!0):i.isTransition=!1,o(i),null===(n=t.pending)?(i.next=t.pending=i,os(t,i)):(i.next=n.next,t.pending=n.next=i)}}function os(e,t){var n=t.action,o=t.payload,r=e.state;if(t.isTransition){var i=L.T,s={};L.T=s;try{var l=n(r,o),a=L.S;null!==a&&a(s,l),rs(e,t,l)}catch(c){ss(e,t,c)}finally{L.T=i}}else try{rs(e,t,i=n(r,o))}catch(u){ss(e,t,u)}}function rs(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){is(e,t,n)},function(n){return ss(e,t,n)}):is(e,t,n)}function is(e,t,n){t.status="fulfilled",t.value=n,ls(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,os(e,n)))}function ss(e,t,n){var o=e.pending;if(e.pending=null,null!==o){o=o.next;do{t.status="rejected",t.reason=n,ls(t),t=t.next}while(t!==o)}e.action=null}function ls(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function as(e,t){return t}function cs(e,t){if(sr){var n=oc.formState;if(null!==n){e:{var o=wi;if(sr){if(ir){t:{for(var r=ir,i=ar;8!==r.nodeType;){if(!i){r=null;break t}if(null===(r=vd(r.nextSibling))){r=null;break t}}r="F!"===(i=r.data)||"F"===i?r:null}if(r){ir=vd(r.nextSibling),o="F!"===r.data;break e}}ur(o)}o=!1}o&&(t=n[0])}}return(n=ji()).memoizedState=n.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:t},n.queue=o,n=js.bind(null,wi,o),o.dispatch=n,o=es(!1),i=Hs.bind(null,wi,!1,o.queue),r={state:t,dispatch:null,action:e,pending:null},(o=ji()).queue=r,n=ns.bind(null,wi,r,i,n),r.dispatch=n,o.memoizedState=e,[t,n,!1]}function us(e){return ds(zi(),ki,e)}function ds(e,t,n){if(t=qi(e,t,as)[0],e=Wi($i)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var o=Hi(t)}catch(s){if(s===qr)throw Kr;throw s}else o=t;var r=(t=zi()).queue,i=r.dispatch;return n!==t.memoizedState&&(wi.flags|=2048,fs(9,{destroy:void 0,resource:void 0},hs.bind(null,r,n),null)),[o,i,e]}function hs(e,t){e.action=t}function ps(e){var t=zi(),n=ki;if(null!==n)return ds(t,n,e);zi(),t=t.memoizedState;var o=(n=zi()).queue.dispatch;return n.memoizedState=e,[t,o,!1]}function fs(e,t,n,o){return e={tag:e,create:n,deps:o,inst:t,next:null},null===(t=wi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e),e}function ms(){return zi().memoizedState}function gs(e,t,n,o){var r=ji();o=void 0===o?null:o,wi.flags|=e,r.memoizedState=fs(1|t,{destroy:void 0,resource:void 0},n,o)}function vs(e,t,n,o){var r=zi();o=void 0===o?null:o;var i=r.memoizedState.inst;null!==ki&&null!==o&&Oi(o,ki.memoizedState.deps)?r.memoizedState=fs(t,i,n,o):(wi.flags|=e,r.memoizedState=fs(1|t,i,n,o))}function ys(e,t){gs(8390656,8,e,t)}function bs(e,t){vs(2048,8,e,t)}function ws(e,t){return vs(4,2,e,t)}function ks(e,t){return vs(4,4,e,t)}function Cs(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function xs(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,vs(4,4,Cs.bind(null,t,e),n)}function Ss(){}function As(e,t){var n=zi();t=void 0===t?null:t;var o=n.memoizedState;return null!==t&&Oi(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function Es(e,t){var n=zi();t=void 0===t?null:t;var o=n.memoizedState;if(null!==t&&Oi(t,o[1]))return o[0];if(o=e(),Ai){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[o,t],o}function Ds(e,t,n){return void 0===n||0!==(1073741824&bi)?e.memoizedState=t:(e.memoizedState=n,e=Rc(),wi.lanes|=e,pc|=e,n)}function Ms(e,t,n,o){return Zn(n,t)?n:null!==fi.current?(e=Ds(e,n,o),Zn(e,t)||(Dl=!0),e):0===(42&bi)?(Dl=!0,e.memoizedState=n):(e=Rc(),wi.lanes|=e,pc|=e,t)}function Ns(e,t,n,o,r){var i=R.p;R.p=0!==i&&8>i?i:8;var s=L.T,l={};L.T=l,Hs(e,!1,t,n);try{var a=r(),c=L.S;if(null!==c&&c(l,a),null!==a&&"object"===typeof a&&"function"===typeof a.then){var u=function(e,t){var n=[],o={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(o.status="rejected",o.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),o}(a,o);zs(e,t,u,Lc())}else zs(e,t,o,Lc())}catch(d){zs(e,t,{then:function(){},status:"rejected",reason:d},Lc())}finally{R.p=i,L.T=s}}function Ts(){}function Os(e,t,n,o){if(5!==e.tag)throw Error(s(476));var r=Ps(e).queue;Ns(e,r,t,B,null===n?Ts:function(){return _s(e),n(o)})}function Ps(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:B},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function _s(e){zs(e,Ps(e).next.queue,{},Lc())}function Ls(){return Dr(Kd)}function Rs(){return zi().memoizedState}function Bs(){return zi().memoizedState}function Is(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lc(),o=si(t,e=ii(n),n);return null!==o&&(Bc(o,t,n),li(o,t,n)),t={cache:Lr()},void(e.payload=t)}t=t.return}}function Fs(e,t,n){var o=Lc();n={lane:o,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Vs(e)?Us(t,n):null!==(n=Oo(e,t,n,o))&&(Bc(n,e,o),$s(n,t,o))}function js(e,t,n){zs(e,t,n,Lc())}function zs(e,t,n,o){var r={lane:o,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vs(e))Us(t,r);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=i(s,n);if(r.hasEagerState=!0,r.eagerState=l,Zn(l,s))return To(e,t,r,0),null===oc&&No(),!1}catch(a){}if(null!==(n=Oo(e,t,r,o)))return Bc(n,e,o),$s(n,t,o),!0}return!1}function Hs(e,t,n,o){if(o={lane:2,revertLane:Nu(),action:o,hasEagerState:!1,eagerState:null,next:null},Vs(e)){if(t)throw Error(s(479))}else null!==(t=Oo(e,n,o,2))&&Bc(t,e,2)}function Vs(e){var t=e.alternate;return e===wi||null!==t&&t===wi}function Us(e,t){Si=xi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $s(e,t,n){if(0!==(4194048&n)){var o=t.lanes;n|=o&=e.pendingLanes,t.lanes=n,De(e,n)}}var Ws={readContext:Dr,use:Vi,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useLayoutEffect:Ti,useInsertionEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useSyncExternalStore:Ti,useId:Ti,useHostTransitionStatus:Ti,useFormState:Ti,useActionState:Ti,useOptimistic:Ti,useMemoCache:Ti,useCacheRefresh:Ti},qs={readContext:Dr,use:Vi,useCallback:function(e,t){return ji().memoizedState=[e,void 0===t?null:t],e},useContext:Dr,useEffect:ys,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,gs(4194308,4,Cs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gs(4194308,4,e,t)},useInsertionEffect:function(e,t){gs(4,2,e,t)},useMemo:function(e,t){var n=ji();t=void 0===t?null:t;var o=e();if(Ai){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[o,t],o},useReducer:function(e,t,n){var o=ji();if(void 0!==n){var r=n(t);if(Ai){he(!0);try{n(t)}finally{he(!1)}}}else r=t;return o.memoizedState=o.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},o.queue=e,e=e.dispatch=Fs.bind(null,wi,e),[o.memoizedState,e]},useRef:function(e){return e={current:e},ji().memoizedState=e},useState:function(e){var t=(e=es(e)).queue,n=js.bind(null,wi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ss,useDeferredValue:function(e,t){return Ds(ji(),e,t)},useTransition:function(){var e=es(!1);return e=Ns.bind(null,wi,e.queue,!0,!1),ji().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var o=wi,r=ji();if(sr){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===oc)throw Error(s(349));0!==(124&ic)||Zi(o,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,ys(Xi.bind(null,o,i,e),[e]),o.flags|=2048,fs(9,{destroy:void 0,resource:void 0},Ji.bind(null,o,i,n,t),null),n},useId:function(){var e=ji(),t=oc.identifierPrefix;if(sr){var n=Yo;t="\xab"+t+"R"+(n=(Qo&~(1<<32-pe(Qo)-1)).toString(32)+n),0<(n=Ei++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ni++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ls,useFormState:cs,useActionState:cs,useOptimistic:function(e){var t=ji();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Hs.bind(null,wi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ui,useCacheRefresh:function(){return ji().memoizedState=Is.bind(null,wi)}},Gs={readContext:Dr,use:Vi,useCallback:As,useContext:Dr,useEffect:bs,useImperativeHandle:xs,useInsertionEffect:ws,useLayoutEffect:ks,useMemo:Es,useReducer:Wi,useRef:ms,useState:function(){return Wi($i)},useDebugValue:Ss,useDeferredValue:function(e,t){return Ms(zi(),ki.memoizedState,e,t)},useTransition:function(){var e=Wi($i)[0],t=zi().memoizedState;return["boolean"===typeof e?e:Hi(e),t]},useSyncExternalStore:Ki,useId:Rs,useHostTransitionStatus:Ls,useFormState:us,useActionState:us,useOptimistic:function(e,t){return ts(zi(),0,e,t)},useMemoCache:Ui,useCacheRefresh:Bs},Ks={readContext:Dr,use:Vi,useCallback:As,useContext:Dr,useEffect:bs,useImperativeHandle:xs,useInsertionEffect:ws,useLayoutEffect:ks,useMemo:Es,useReducer:Gi,useRef:ms,useState:function(){return Gi($i)},useDebugValue:Ss,useDeferredValue:function(e,t){var n=zi();return null===ki?Ds(n,e,t):Ms(n,ki.memoizedState,e,t)},useTransition:function(){var e=Gi($i)[0],t=zi().memoizedState;return["boolean"===typeof e?e:Hi(e),t]},useSyncExternalStore:Ki,useId:Rs,useHostTransitionStatus:Ls,useFormState:ps,useActionState:ps,useOptimistic:function(e,t){var n=zi();return null!==ki?ts(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ui,useCacheRefresh:Bs},Zs=null,Js=0;function Xs(e){var t=Js;return Js+=1,null===Zs&&(Zs=[]),Qr(Zs,e,t)}function Qs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ys(e,t){if(t.$$typeof===p)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function el(e){return(0,e._init)(e._payload)}function tl(e){function t(t,n){if(e){var o=t.deletions;null===o?(t.deletions=[n],t.flags|=16):o.push(n)}}function n(n,o){if(!e)return null;for(;null!==o;)t(n,o),o=o.sibling;return null}function o(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=jo(e,t)).index=0,e.sibling=null,e}function i(t,n,o){return t.index=o,e?null!==(o=t.alternate)?(o=o.index)<n?(t.flags|=67108866,n):o:(t.flags|=67108866,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function a(e,t,n,o){return null===t||6!==t.tag?((t=Uo(n,e.mode,o)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,o){var i=n.type;return i===g?d(e,t,n.props.children,o,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===E&&el(i)===t.type)?(Qs(t=r(t,n.props),n),t.return=e,t):(Qs(t=Ho(n.type,n.key,n.props,null,e.mode,o),n),t.return=e,t)}function u(e,t,n,o){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$o(n,e.mode,o)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,o,i){return null===t||7!==t.tag?((t=Vo(n,e.mode,o,i)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Uo(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return Qs(n=Ho(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=$o(t,e.mode,n)).return=e,t;case E:return h(e,t=(0,t._init)(t._payload),n)}if(_(t)||T(t))return(t=Vo(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Xs(t),n);if(t.$$typeof===k)return h(e,Mr(e,t),n);Ys(e,t)}return null}function p(e,t,n,o){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:a(e,t,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===r?c(e,t,n,o):null;case m:return n.key===r?u(e,t,n,o):null;case E:return p(e,t,n=(r=n._init)(n._payload),o)}if(_(n)||T(n))return null!==r?null:d(e,t,n,o,null);if("function"===typeof n.then)return p(e,t,Xs(n),o);if(n.$$typeof===k)return p(e,t,Mr(e,n),o);Ys(e,n)}return null}function v(e,t,n,o,r){if("string"===typeof o&&""!==o||"number"===typeof o||"bigint"===typeof o)return a(t,e=e.get(n)||null,""+o,r);if("object"===typeof o&&null!==o){switch(o.$$typeof){case f:return c(t,e=e.get(null===o.key?n:o.key)||null,o,r);case m:return u(t,e=e.get(null===o.key?n:o.key)||null,o,r);case E:return v(e,t,n,o=(0,o._init)(o._payload),r)}if(_(o)||T(o))return d(t,e=e.get(n)||null,o,r,null);if("function"===typeof o.then)return v(e,t,n,Xs(o),r);if(o.$$typeof===k)return v(e,t,n,Mr(t,o),r);Ys(t,o)}return null}function y(a,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(a,c.sibling),(d=r(c,u.props.children)).return=a,a=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===E&&el(b)===c.type){n(a,c.sibling),Qs(d=r(c,u.props),u),d.return=a,a=d;break e}n(a,c);break}t(a,c),c=c.sibling}u.type===g?((d=Vo(u.props.children,a.mode,d,u.key)).return=a,a=d):(Qs(d=Ho(u.type,u.key,u.props,null,a.mode,d),u),d.return=a,a=d)}return l(a);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(a,c.sibling),(d=r(c,u.children||[])).return=a,a=d;break e}n(a,c);break}t(a,c),c=c.sibling}(d=$o(u,a.mode,d)).return=a,a=d}return l(a);case E:return y(a,c,u=(b=u._init)(u._payload),d)}if(_(u))return function(r,s,l,a){for(var c=null,u=null,d=s,f=s=0,m=null;null!==d&&f<l.length;f++){d.index>f?(m=d,d=null):m=d.sibling;var g=p(r,d,l[f],a);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(r,d),s=i(g,s,f),null===u?c=g:u.sibling=g,u=g,d=m}if(f===l.length)return n(r,d),sr&&er(r,f),c;if(null===d){for(;f<l.length;f++)null!==(d=h(r,l[f],a))&&(s=i(d,s,f),null===u?c=d:u.sibling=d,u=d);return sr&&er(r,f),c}for(d=o(d);f<l.length;f++)null!==(m=v(d,r,f,l[f],a))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),s=i(m,s,f),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(r,e)}),sr&&er(r,f),c}(a,c,u,d);if(T(u)){if("function"!==typeof(b=T(u)))throw Error(s(150));return function(r,l,a,c){if(null==a)throw Error(s(151));for(var u=null,d=null,f=l,m=l=0,g=null,y=a.next();null!==f&&!y.done;m++,y=a.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=p(r,f,y.value,c);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(r,f),l=i(b,l,m),null===d?u=b:d.sibling=b,d=b,f=g}if(y.done)return n(r,f),sr&&er(r,m),u;if(null===f){for(;!y.done;m++,y=a.next())null!==(y=h(r,y.value,c))&&(l=i(y,l,m),null===d?u=y:d.sibling=y,d=y);return sr&&er(r,m),u}for(f=o(f);!y.done;m++,y=a.next())null!==(y=v(f,r,m,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),l=i(y,l,m),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(r,e)}),sr&&er(r,m),u}(a,c,u=b.call(u),d)}if("function"===typeof u.then)return y(a,c,Xs(u),d);if(u.$$typeof===k)return y(a,c,Mr(a,u),d);Ys(a,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(a,c.sibling),(d=r(c,u)).return=a,a=d):(n(a,c),(d=Uo(u,a.mode,d)).return=a,a=d),l(a)):n(a,c)}return function(e,t,n,o){try{Js=0;var r=y(e,t,n,o);return Zs=null,r}catch(s){if(s===qr||s===Kr)throw s;var i=Io(29,s,null,e.mode);return i.lanes=o,i.return=e,i}}}var nl=tl(!0),ol=tl(!1),rl=j(null),il=null;function sl(e){var t=e.alternate;H(ul,1&ul.current),H(rl,e),null===il&&(null===t||null!==fi.current||null!==t.memoizedState)&&(il=e)}function ll(e){if(22===e.tag){if(H(ul,ul.current),H(rl,e),null===il){var t=e.alternate;null!==t&&null!==t.memoizedState&&(il=e)}}else al()}function al(){H(ul,ul.current),H(rl,rl.current)}function cl(e){z(rl),il===e&&(il=null),z(ul)}var ul=j(0);function dl(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hl(e,t,n,o){n=null===(n=n(o,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pl={enqueueSetState:function(e,t,n){e=e._reactInternals;var o=Lc(),r=ii(o);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=si(e,r,o))&&(Bc(t,e,o),li(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=Lc(),r=ii(o);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=si(e,r,o))&&(Bc(t,e,o),li(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lc(),o=ii(n);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=si(e,o,n))&&(Bc(t,e,n),li(t,e,n))}};function fl(e,t,n,o,r,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(o,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,o)||!Jn(r,i))}function ml(e,t,n,o){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,o),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&pl.enqueueReplaceState(t,t.state,null)}function gl(e,t){var n=t;if("ref"in t)for(var o in n={},t)"ref"!==o&&(n[o]=t[o]);if(e=e.defaultProps)for(var r in n===t&&(n=h({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}var vl="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yl(e){vl(e)}function bl(e){console.error(e)}function wl(e){vl(e)}function kl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Cl(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function xl(e,t,n){return(n=ii(n)).tag=3,n.payload={element:null},n.callback=function(){kl(e,t)},n}function Sl(e){return(e=ii(e)).tag=3,e}function Al(e,t,n,o){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var i=o.value;e.payload=function(){return r(i)},e.callback=function(){Cl(t,n,o)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Cl(t,n,o),"function"!==typeof r&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=o.stack;this.componentDidCatch(o.value,{componentStack:null!==e?e:""})})}var El=Error(s(461)),Dl=!1;function Ml(e,t,n,o){t.child=null===e?ol(t,null,n,o):nl(t,e.child,n,o)}function Nl(e,t,n,o,r){n=n.render;var i=t.ref;if("ref"in o){var s={};for(var l in o)"ref"!==l&&(s[l]=o[l])}else s=o;return Er(t),o=Pi(e,t,n,s,i,r),l=Bi(),null===e||Dl?(sr&&l&&nr(t),t.flags|=1,Ml(e,t,o,r),t.child):(Ii(e,t,r),Zl(e,t,r))}function Tl(e,t,n,o,r){if(null===e){var i=n.type;return"function"!==typeof i||Fo(i)||void 0!==i.defaultProps||null!==n.compare?((e=Ho(n.type,null,o,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ol(e,t,i,o,r))}if(i=e.child,!Jl(e,r)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(s,o)&&e.ref===t.ref)return Zl(e,t,r)}return t.flags|=1,(e=jo(i,o)).ref=t.ref,e.return=t,t.child=e}function Ol(e,t,n,o,r){if(null!==e){var i=e.memoizedProps;if(Jn(i,o)&&e.ref===t.ref){if(Dl=!1,t.pendingProps=o=i,!Jl(e,r))return t.lanes=e.lanes,Zl(e,t,r);0!==(131072&e.flags)&&(Dl=!0)}}return Rl(e,t,n,o,r)}function Pl(e,t,n){var o=t.pendingProps,r=o.children,i=null!==e?e.memoizedState:null;if("hidden"===o.mode){if(0!==(128&t.flags)){if(o=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;t.childLanes=i&~o}else t.childLanes=0,t.child=null;return _l(e,t,o,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,_l(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$r(0,null!==i?i.cachePool:null),null!==i?gi(t,i):vi(),ll(t)}else null!==i?($r(0,i.cachePool),gi(t,i),al(),t.memoizedState=null):(null!==e&&$r(0,null),vi(),al());return Ml(e,t,r,n),t.child}function _l(e,t,n,o){var r=Ur();return r=null===r?null:{parent:_r._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&$r(0,null),vi(),ll(t),null!==e&&Sr(e,t,o,!0),null}function Ll(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Rl(e,t,n,o,r){return Er(t),n=Pi(e,t,n,o,void 0,r),o=Bi(),null===e||Dl?(sr&&o&&nr(t),t.flags|=1,Ml(e,t,n,r),t.child):(Ii(e,t,r),Zl(e,t,r))}function Bl(e,t,n,o,r,i){return Er(t),t.updateQueue=null,n=Li(t,o,n,r),_i(e),o=Bi(),null===e||Dl?(sr&&o&&nr(t),t.flags|=1,Ml(e,t,n,i),t.child):(Ii(e,t,i),Zl(e,t,i))}function Il(e,t,n,o,r){if(Er(t),null===t.stateNode){var i=Ro,s=n.contextType;"object"===typeof s&&null!==s&&(i=Dr(s)),i=new n(o,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=pl,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=o,i.state=t.memoizedState,i.refs={},oi(t),s=n.contextType,i.context="object"===typeof s&&null!==s?Dr(s):Ro,i.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(hl(t,n,s,o),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(s=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),s!==i.state&&pl.enqueueReplaceState(i,i.state,null),di(t,o,i,r),ui(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),o=!0}else if(null===e){i=t.stateNode;var l=t.memoizedProps,a=gl(n,l);i.props=a;var c=i.context,u=n.contextType;s=Ro,"object"===typeof u&&null!==u&&(s=Dr(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,l=t.pendingProps!==l,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l||c!==s)&&ml(t,i,o,s),ni=!1;var h=t.memoizedState;i.state=h,di(t,o,i,r),ui(),c=t.memoizedState,l||h!==c||ni?("function"===typeof d&&(hl(t,n,d,o),c=t.memoizedState),(a=ni||fl(t,n,a,o,h,c,s))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=c),i.props=o,i.state=c,i.context=s,o=a):("function"===typeof i.componentDidMount&&(t.flags|=4194308),o=!1)}else{i=t.stateNode,ri(e,t),u=gl(n,s=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,a=Ro,"object"===typeof c&&null!==c&&(a=Dr(c)),(c="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||h!==a)&&ml(t,i,o,a),ni=!1,h=t.memoizedState,i.state=h,di(t,o,i,r),ui();var p=t.memoizedState;s!==d||h!==p||ni||null!==e&&null!==e.dependencies&&Ar(e.dependencies)?("function"===typeof l&&(hl(t,n,l,o),p=t.memoizedState),(u=ni||fl(t,n,u,o,h,p,a)||null!==e&&null!==e.dependencies&&Ar(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(o,p,a),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(o,p,a)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=p),i.props=o,i.state=p,i.context=a,o=u):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),o=!1)}return i=o,Ll(e,t),o=0!==(128&t.flags),i||o?(i=t.stateNode,n=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&o?(t.child=nl(t,e.child,null,r),t.child=nl(t,null,n,r)):Ml(e,t,n,r),t.memoizedState=i.state,e=t.child):e=Zl(e,t,r),e}function Fl(e,t,n,o){return fr(),t.flags|=256,Ml(e,t,n,o),t.child}var jl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zl(e){return{baseLanes:e,cachePool:Wr()}}function Hl(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Vl(e,t,n){var o,r=t.pendingProps,i=!1,l=0!==(128&t.flags);if((o=l)||(o=(null===e||null!==e.memoizedState)&&0!==(2&ul.current)),o&&(i=!0,t.flags&=-129),o=0!==(32&t.flags),t.flags&=-33,null===e){if(sr){if(i?sl(t):al(),sr){var a,c=ir;if(a=c){e:{for(a=c,c=ar;8!==a.nodeType;){if(!c){c=null;break e}if(null===(a=vd(a.nextSibling))){c=null;break e}}c=a}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xo?{id:Qo,overflow:Yo}:null,retryLane:536870912,hydrationErrors:null},(a=Io(18,null,null,0)).stateNode=c,a.return=t,t.child=a,rr=t,ir=null,a=!0):a=!1}a||ur(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;cl(t)}return c=r.children,r=r.fallback,i?(al(),c=$l({mode:"hidden",children:c},i=t.mode),r=Vo(r,i,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,(i=t.child).memoizedState=zl(n),i.childLanes=Hl(e,o,n),t.memoizedState=jl,r):(sl(t),Ul(t,c))}if(null!==(a=e.memoizedState)&&null!==(c=a.dehydrated)){if(l)256&t.flags?(sl(t),t.flags&=-257,t=Wl(e,t,n)):null!==t.memoizedState?(al(),t.child=e.child,t.flags|=128,t=null):(al(),i=r.fallback,c=t.mode,r=$l({mode:"visible",children:r.children},c),(i=Vo(i,c,n,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,nl(t,e.child,null,n),(r=t.child).memoizedState=zl(n),r.childLanes=Hl(e,o,n),t.memoizedState=jl,t=i);else if(sl(t),gd(c)){if(o=c.nextSibling&&c.nextSibling.dataset)var u=o.dgst;o=u,(r=Error(s(419))).stack="",r.digest=o,gr({value:r,source:null,stack:null}),t=Wl(e,t,n)}else if(Dl||Sr(e,t,n,!1),o=0!==(n&e.childLanes),Dl||o){if(null!==(o=oc)&&(0!==(r=0!==((r=0!==(42&(r=n&-n))?1:Me(r))&(o.suspendedLanes|n))?0:r)&&r!==a.retryLane))throw a.retryLane=r,Po(e,r),Bc(o,e,r),El;"$?"===c.data||Gc(),t=Wl(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=a.treeContext,ir=vd(c.nextSibling),rr=t,sr=!0,lr=null,ar=!1,null!==e&&(Zo[Jo++]=Qo,Zo[Jo++]=Yo,Zo[Jo++]=Xo,Qo=e.id,Yo=e.overflow,Xo=t),(t=Ul(t,r.children)).flags|=4096);return t}return i?(al(),i=r.fallback,c=t.mode,u=(a=e.child).sibling,(r=jo(a,{mode:"hidden",children:r.children})).subtreeFlags=65011712&a.subtreeFlags,null!==u?i=jo(u,i):(i=Vo(i,c,n,null)).flags|=2,i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,null===(c=e.child.memoizedState)?c=zl(n):(null!==(a=c.cachePool)?(u=_r._currentValue,a=a.parent!==u?{parent:u,pool:u}:a):a=Wr(),c={baseLanes:c.baseLanes|n,cachePool:a}),i.memoizedState=c,i.childLanes=Hl(e,o,n),t.memoizedState=jl,r):(sl(t),e=(n=e.child).sibling,(n=jo(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(o=t.deletions)?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function Ul(e,t){return(t=$l({mode:"visible",children:t},e.mode)).return=e,e.child=t}function $l(e,t){return(e=Io(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wl(e,t,n){return nl(t,e.child,null,n),(e=Ul(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ql(e,t,n){e.lanes|=t;var o=e.alternate;null!==o&&(o.lanes|=t),Cr(e.return,t,n)}function Gl(e,t,n,o,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function Kl(e,t,n){var o=t.pendingProps,r=o.revealOrder,i=o.tail;if(Ml(e,t,o.children,n),0!==(2&(o=ul.current)))o=1&o|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ql(e,n,t);else if(19===e.tag)ql(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(H(ul,o),r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===dl(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Gl(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===dl(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Gl(t,!0,n,null,i);break;case"together":Gl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Sr(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=jo(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jo(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Jl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ar(e))}function Xl(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Dl=!0;else{if(!Jl(e,n)&&0===(128&t.flags))return Dl=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),wr(0,_r,e.memoizedState.cache),fr();break;case 27:case 5:K(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:wr(0,t.type,t.memoizedProps.value);break;case 13:var o=t.memoizedState;if(null!==o)return null!==o.dehydrated?(sl(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Vl(e,t,n):(sl(t),null!==(e=Zl(e,t,n))?e.sibling:null);sl(t);break;case 19:var r=0!==(128&e.flags);if((o=0!==(n&t.childLanes))||(Sr(e,t,n,!1),o=0!==(n&t.childLanes)),r){if(o)return Kl(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),H(ul,ul.current),o)break;return null;case 22:case 23:return t.lanes=0,Pl(e,t,n);case 24:wr(0,_r,e.memoizedState.cache)}return Zl(e,t,n)}(e,t,n);Dl=0!==(131072&e.flags)}else Dl=!1,sr&&0!==(1048576&t.flags)&&tr(t,Ko,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var o=t.elementType,r=o._init;if(o=r(o._payload),t.type=o,"function"!==typeof o){if(void 0!==o&&null!==o){if((r=o.$$typeof)===C){t.tag=11,t=Nl(null,t,o,e,n);break e}if(r===A){t.tag=14,t=Tl(null,t,o,e,n);break e}}throw t=P(o)||o,Error(s(306,t,""))}Fo(o)?(e=gl(o,e),t.tag=1,t=Il(null,t,o,e,n)):(t.tag=0,t=Rl(null,t,o,e,n))}return t;case 0:return Rl(e,t,t.type,t.pendingProps,n);case 1:return Il(e,t,o=t.type,r=gl(o,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(s(387));o=t.pendingProps;var i=t.memoizedState;r=i.element,ri(e,t),di(t,o,null,n);var l=t.memoizedState;if(o=l.cache,wr(0,_r,o),o!==i.cache&&xr(t,[_r],n,!0),ui(),o=l.element,i.isDehydrated){if(i={element:o,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Fl(e,t,o,n);break e}if(o!==r){gr(r=Ao(Error(s(424)),t)),t=Fl(e,t,o,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ir=vd(e.firstChild),rr=t,sr=!0,lr=null,ar=!0,n=ol(t,null,o,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fr(),o===r){t=Zl(e,t,n);break e}Ml(e,t,o,n)}t=t.child}return t;case 26:return Ll(e,t),null===e?(n=Md(t.type,null,t.pendingProps,null))?t.memoizedState=n:sr||(n=t.type,e=t.pendingProps,(o=od($.current).createElement(n))[Pe]=t,o[_e]=e,ed(o,n,e),We(o),t.stateNode=o):t.memoizedState=Md(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&sr&&(o=t.stateNode=wd(t.type,t.pendingProps,$.current),rr=t,ar=!0,r=ir,pd(t.type)?(yd=r,ir=vd(o.firstChild)):ir=r),Ml(e,t,t.pendingProps.children,n),Ll(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&sr&&((r=o=ir)&&(null!==(o=function(e,t,n,o){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(o){if(!e[je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===i)return e}if(null===(e=vd(e.nextSibling)))break}return null}(o,t.type,t.pendingProps,ar))?(t.stateNode=o,rr=t,ir=vd(o.firstChild),ar=!1,r=!0):r=!1),r||ur(t)),K(t),r=t.type,i=t.pendingProps,l=null!==e?e.memoizedProps:null,o=i.children,sd(r,i)?o=null:null!==l&&sd(r,l)&&(t.flags|=32),null!==t.memoizedState&&(r=Pi(e,t,Ri,null,null,n),Kd._currentValue=r),Ll(e,t),Ml(e,t,o,n),t.child;case 6:return null===e&&sr&&((e=n=ir)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,ar))?(t.stateNode=n,rr=t,ir=null,e=!0):e=!1),e||ur(t)),null;case 13:return Vl(e,t,n);case 4:return q(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=nl(t,null,o,n):Ml(e,t,o,n),t.child;case 11:return Nl(e,t,t.type,t.pendingProps,n);case 7:return Ml(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ml(e,t,t.pendingProps.children,n),t.child;case 10:return o=t.pendingProps,wr(0,t.type,o.value),Ml(e,t,o.children,n),t.child;case 9:return r=t.type._context,o=t.pendingProps.children,Er(t),o=o(r=Dr(r)),t.flags|=1,Ml(e,t,o,n),t.child;case 14:return Tl(e,t,t.type,t.pendingProps,n);case 15:return Ol(e,t,t.type,t.pendingProps,n);case 19:return Kl(e,t,n);case 31:return o=t.pendingProps,n=t.mode,o={mode:o.mode,children:o.children},null===e?((n=$l(o,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=jo(e.child,o)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Pl(e,t,n);case 24:return Er(t),o=Dr(_r),null===e?(null===(r=Ur())&&(r=oc,i=Lr(),r.pooledCache=i,i.refCount++,null!==i&&(r.pooledCacheLanes|=n),r=i),t.memoizedState={parent:o,cache:r},oi(t),wr(0,_r,r)):(0!==(e.lanes&n)&&(ri(e,t),di(t,null,null,n),ui()),r=e.memoizedState,i=t.memoizedState,r.parent!==o?(r={parent:o,cache:o},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),wr(0,_r,o)):(o=i.cache,wr(0,_r,o),o!==r.cache&&xr(t,[_r],n,!0))),Ml(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Ql(e){e.flags|=4}function Yl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Hd(t)){if(null!==(t=rl.current)&&((4194048&ic)===ic?null!==il:(62914560&ic)!==ic&&0===(536870912&ic)||t!==il))throw Yr=Zr,Gr;e.flags|=8192}}function ea(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?xe():536870912,e.lanes|=t,vc|=t)}function ta(e,t){if(!sr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;null!==n;)null!==n.alternate&&(o=n),n=n.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function na(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,o=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,o|=65011712&r.subtreeFlags,o|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function oa(e,t,n){var o=t.pendingProps;switch(or(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return na(t),null;case 3:return n=t.stateNode,o=null,null!==e&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),kr(_r),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(pr(t)?Ql(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,mr())),na(t),null;case 26:return n=t.memoizedState,null===e?(Ql(t),null!==n?(na(t),Yl(t,n)):(na(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ql(t),na(t),Yl(t,n)):(na(t),t.flags&=-16777217):(e.memoizedProps!==o&&Ql(t),na(t),t.flags&=-16777217),null;case 27:Z(t),n=$.current;var r=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==o&&Ql(t);else{if(!o){if(null===t.stateNode)throw Error(s(166));return na(t),null}e=V.current,pr(t)?dr(t):(e=wd(r,o,n),t.stateNode=e,Ql(t))}return na(t),null;case 5:if(Z(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==o&&Ql(t);else{if(!o){if(null===t.stateNode)throw Error(s(166));return na(t),null}if(e=V.current,pr(t))dr(t);else{switch(r=od($.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=r.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof o.is?r.createElement("select",{is:o.is}):r.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e="string"===typeof o.is?r.createElement(n,{is:o.is}):r.createElement(n)}}e[Pe]=t,e[_e]=o;e:for(r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&27!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;null===r.sibling;){if(null===r.return||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(ed(e,n,o),n){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ql(t)}}return na(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==o&&Ql(t);else{if("string"!==typeof o&&null===t.stateNode)throw Error(s(166));if(e=$.current,pr(t)){if(e=t.stateNode,n=t.memoizedProps,o=null,null!==(r=rr))switch(r.tag){case 27:case 5:o=r.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==o&&!0===o.suppressHydrationWarning||Ju(e.nodeValue,n)))||ur(t)}else(e=od(e).createTextNode(o))[Pe]=t,t.stateNode=e}return na(t),null;case 13:if(o=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=pr(t),null!==o&&null!==o.dehydrated){if(null===e){if(!r)throw Error(s(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(s(317));r[Pe]=t}else fr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;na(t),r=!1}else r=mr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(cl(t),t):(cl(t),null)}if(cl(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==o,e=null!==e&&null!==e.memoizedState,n){r=null,null!==(o=t.child).alternate&&null!==o.alternate.memoizedState&&null!==o.alternate.memoizedState.cachePool&&(r=o.alternate.memoizedState.cachePool.pool);var i=null;null!==o.memoizedState&&null!==o.memoizedState.cachePool&&(i=o.memoizedState.cachePool.pool),i!==r&&(o.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),ea(t,t.updateQueue),na(t),null;case 4:return G(),null===e&&zu(t.stateNode.containerInfo),na(t),null;case 10:return kr(t.type),na(t),null;case 19:if(z(ul),null===(r=t.memoizedState))return na(t),null;if(o=0!==(128&t.flags),null===(i=r.rendering))if(o)ta(r,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=dl(e))){for(t.flags|=128,ta(r,!1),e=i.updateQueue,t.updateQueue=e,ea(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zo(n,e),n=n.sibling;return H(ul,1&ul.current|2),t.child}e=e.sibling}null!==r.tail&&te()>Cc&&(t.flags|=128,o=!0,ta(r,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=dl(i))){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,ea(t,e),ta(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!sr)return na(t),null}else 2*te()-r.renderingStartTime>Cc&&536870912!==n&&(t.flags|=128,o=!0,ta(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=te(),t.sibling=null,e=ul.current,H(ul,o?1&e|2:1&e),t):(na(t),null);case 22:case 23:return cl(t),yi(),o=null!==t.memoizedState,null!==e?null!==e.memoizedState!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?0!==(536870912&n)&&0===(128&t.flags)&&(na(t),6&t.subtreeFlags&&(t.flags|=8192)):na(t),null!==(n=t.updateQueue)&&ea(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),o=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(o=t.memoizedState.cachePool.pool),o!==n&&(t.flags|=2048),null!==e&&z(Vr),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),kr(_r),na(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function ra(e,t){switch(or(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return kr(_r),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Z(t),null;case 13:if(cl(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(ul),null;case 4:return G(),null;case 10:return kr(t.type),null;case 22:case 23:return cl(t),yi(),null!==e&&z(Vr),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return kr(_r),null;default:return null}}function ia(e,t){switch(or(t),t.tag){case 3:kr(_r),G();break;case 26:case 27:case 5:Z(t);break;case 4:G();break;case 13:cl(t);break;case 19:z(ul);break;case 10:kr(t.type);break;case 22:case 23:cl(t),yi(),null!==e&&z(Vr);break;case 24:kr(_r)}}function sa(e,t){try{var n=t.updateQueue,o=null!==n?n.lastEffect:null;if(null!==o){var r=o.next;n=r;do{if((n.tag&e)===e){o=void 0;var i=n.create,s=n.inst;o=i(),s.destroy=o}n=n.next}while(n!==r)}}catch(l){uu(t,t.return,l)}}function la(e,t,n){try{var o=t.updateQueue,r=null!==o?o.lastEffect:null;if(null!==r){var i=r.next;o=i;do{if((o.tag&e)===e){var s=o.inst,l=s.destroy;if(void 0!==l){s.destroy=void 0,r=t;var a=n,c=l;try{c()}catch(u){uu(r,a,u)}}}o=o.next}while(o!==i)}}catch(u){uu(t,t.return,u)}}function aa(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{pi(t,n)}catch(o){uu(e,e.return,o)}}}function ca(e,t,n){n.props=gl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(o){uu(e,t,o)}}function ua(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;default:o=e.stateNode}"function"===typeof n?e.refCleanup=n(o):n.current=o}}catch(r){uu(e,t,r)}}function da(e,t){var n=e.ref,o=e.refCleanup;if(null!==n)if("function"===typeof o)try{o()}catch(r){uu(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){uu(e,t,i)}else n.current=null}function ha(e){var t=e.type,n=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&o.focus();break e;case"img":n.src?o.src=n.src:n.srcSet&&(o.srcset=n.srcSet)}}catch(r){uu(e,e.return,r)}}function pa(e,t,n){try{var o=e.stateNode;!function(e,t,n,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,l=null,a=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:o.hasOwnProperty(f)||Qu(e,t,f,null,o,h)}}for(var p in o){var f=o[p];if(h=n[p],o.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":i=f;break;case"name":r=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":l=f;break;case"defaultValue":a=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:f!==h&&Qu(e,t,p,f,o,h)}}return void gt(e,l,a,c,u,d,i,r);case"select":for(i in f=l=a=p=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":f=c;default:o.hasOwnProperty(i)||Qu(e,t,i,null,o,c)}for(r in o)if(i=o[r],c=n[r],o.hasOwnProperty(r)&&(null!=i||null!=c))switch(r){case"value":p=i;break;case"defaultValue":a=i;break;case"multiple":l=i;default:i!==c&&Qu(e,t,r,i,o,c)}return t=a,n=l,o=f,void(null!=p?bt(e,!!n,p,!1):!!o!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(a in f=p=null,n)if(r=n[a],n.hasOwnProperty(a)&&null!=r&&!o.hasOwnProperty(a))switch(a){case"value":case"children":break;default:Qu(e,t,a,null,o,r)}for(l in o)if(r=o[l],i=n[l],o.hasOwnProperty(l)&&(null!=r||null!=i))switch(l){case"value":p=r;break;case"defaultValue":f=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(s(91));break;default:r!==i&&Qu(e,t,l,r,o,i)}return void wt(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!o.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Qu(e,t,m,null,o,p);for(c in o)if(p=o[c],f=n[c],o.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Qu(e,t,c,p,o,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!o.hasOwnProperty(g)&&Qu(e,t,g,null,o,p);for(u in o)if(p=o[u],f=n[u],o.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:Qu(e,t,u,p,o,f)}return;default:if(Et(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!o.hasOwnProperty(v)&&Yu(e,t,v,void 0,o,p);for(d in o)p=o[d],f=n[d],!o.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||Yu(e,t,d,p,o,f);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!o.hasOwnProperty(y)&&Qu(e,t,y,null,o,p);for(h in o)p=o[h],f=n[h],!o.hasOwnProperty(h)||p===f||null==p&&null==f||Qu(e,t,h,p,o,f)}(o,e.type,n,t),o[_e]=t}catch(r){uu(e,e.return,r)}}function fa(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function ma(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fa(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ga(e,t,n){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xu));else if(4!==o&&(27===o&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ga(e,t,n),e=e.sibling;null!==e;)ga(e,t,n),e=e.sibling}function va(e,t,n){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==o&&(27===o&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(va(e,t,n),e=e.sibling;null!==e;)va(e,t,n),e=e.sibling}function ya(e){var t=e.stateNode,n=e.memoizedProps;try{for(var o=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ed(t,o,n),t[Pe]=e,t[_e]=n}catch(i){uu(e,e.return,i)}}var ba=!1,wa=!1,ka=!1,Ca="function"===typeof WeakSet?WeakSet:Set,xa=null;function Sa(e,t,n){var o=n.flags;switch(n.tag){case 0:case 11:case 15:Ia(e,n),4&o&&sa(5,n);break;case 1:if(Ia(e,n),4&o)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){uu(n,n.return,s)}else{var r=gl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){uu(n,n.return,l)}}64&o&&aa(n),512&o&&ua(n,n.return);break;case 3:if(Ia(e,n),64&o&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{pi(e,t)}catch(s){uu(n,n.return,s)}}break;case 27:null===t&&4&o&&ya(n);case 26:case 5:Ia(e,n),null===t&&4&o&&ha(n),512&o&&ua(n,n.return);break;case 12:Ia(e,n);break;case 13:Ia(e,n),4&o&&Ta(e,n),64&o&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var o=function(){t(),n.removeEventListener("DOMContentLoaded",o)};n.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}(e,n=fu.bind(null,n))));break;case 22:if(!(o=null!==n.memoizedState||ba)){t=null!==t&&null!==t.memoizedState||wa,r=ba;var i=wa;ba=o,(wa=t)&&!i?ja(e,n,0!==(8772&n.subtreeFlags)):Ia(e,n),ba=r,wa=i}break;case 30:break;default:Ia(e,n)}}function Aa(e){var t=e.alternate;null!==t&&(e.alternate=null,Aa(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ea=null,Da=!1;function Ma(e,t,n){for(n=n.child;null!==n;)Na(e,t,n),n=n.sibling}function Na(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:wa||da(n,t),Ma(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wa||da(n,t);var o=Ea,r=Da;pd(n.type)&&(Ea=n.stateNode,Da=!1),Ma(e,t,n),kd(n.stateNode),Ea=o,Da=r;break;case 5:wa||da(n,t);case 6:if(o=Ea,r=Da,Ea=null,Ma(e,t,n),Da=r,null!==(Ea=o))if(Da)try{(9===Ea.nodeType?Ea.body:"HTML"===Ea.nodeName?Ea.ownerDocument.body:Ea).removeChild(n.stateNode)}catch(s){uu(n,t,s)}else try{Ea.removeChild(n.stateNode)}catch(s){uu(n,t,s)}break;case 18:null!==Ea&&(Da?(fd(9===(e=Ea).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Dh(e)):fd(Ea,n.stateNode));break;case 4:o=Ea,r=Da,Ea=n.stateNode.containerInfo,Da=!0,Ma(e,t,n),Ea=o,Da=r;break;case 0:case 11:case 14:case 15:wa||la(2,n,t),wa||la(4,n,t),Ma(e,t,n);break;case 1:wa||(da(n,t),"function"===typeof(o=n.stateNode).componentWillUnmount&&ca(n,t,o)),Ma(e,t,n);break;case 21:Ma(e,t,n);break;case 22:wa=(o=wa)||null!==n.memoizedState,Ma(e,t,n),wa=o;break;default:Ma(e,t,n)}}function Ta(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Dh(e)}catch(n){uu(t,t.return,n)}}function Oa(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ca),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ca),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){var o=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(o,o))})}function Pa(e,t){var n=t.deletions;if(null!==n)for(var o=0;o<n.length;o++){var r=n[o],i=e,l=t,a=l;e:for(;null!==a;){switch(a.tag){case 27:if(pd(a.type)){Ea=a.stateNode,Da=!1;break e}break;case 5:Ea=a.stateNode,Da=!1;break e;case 3:case 4:Ea=a.stateNode.containerInfo,Da=!0;break e}a=a.return}if(null===Ea)throw Error(s(160));Na(i,l,r),Ea=null,Da=!1,null!==(i=r.alternate)&&(i.return=null),r.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)La(t,e),t=t.sibling}var _a=null;function La(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pa(t,e),Ra(e),4&o&&(la(3,e,e.return),sa(3,e),la(5,e,e.return));break;case 1:Pa(t,e),Ra(e),512&o&&(wa||null===n||da(n,n.return)),64&o&&ba&&(null!==(e=e.updateQueue)&&(null!==(o=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?o:n.concat(o))));break;case 26:var r=_a;if(Pa(t,e),Ra(e),512&o&&(wa||null===n||da(n,n.return)),4&o){var i=null!==n?n.memoizedState:null;if(o=e.memoizedState,null===n)if(null===o)if(null===e.stateNode){e:{o=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(o){case"title":(!(i=r.getElementsByTagName("title")[0])||i[je]||i[Pe]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=r.createElement(o),r.head.insertBefore(i,r.querySelector("head > title"))),ed(i,o,n),i[Pe]=e,We(i),o=i;break e;case"link":var l=jd("link","href",r).get(o+(n.href||""));if(l)for(var a=0;a<l.length;a++)if((i=l[a]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){l.splice(a,1);break t}ed(i=r.createElement(o),o,n),r.head.appendChild(i);break;case"meta":if(l=jd("meta","content",r).get(o+(n.content||"")))for(a=0;a<l.length;a++)if((i=l[a]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){l.splice(a,1);break t}ed(i=r.createElement(o),o,n),r.head.appendChild(i);break;default:throw Error(s(468,o))}i[Pe]=e,We(i),o=i}e.stateNode=o}else zd(r,e.type,e.stateNode);else e.stateNode=Ld(r,o,e.memoizedProps);else i!==o?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===o?zd(r,e.type,e.stateNode):Ld(r,o,e.memoizedProps)):null===o&&null!==e.stateNode&&pa(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pa(t,e),Ra(e),512&o&&(wa||null===n||da(n,n.return)),null!==n&&4&o&&pa(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pa(t,e),Ra(e),512&o&&(wa||null===n||da(n,n.return)),32&e.flags){r=e.stateNode;try{Ct(r,"")}catch(f){uu(e,e.return,f)}}4&o&&null!=e.stateNode&&pa(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&o&&(ka=!0);break;case 6:if(Pa(t,e),Ra(e),4&o){if(null===e.stateNode)throw Error(s(162));o=e.memoizedProps,n=e.stateNode;try{n.nodeValue=o}catch(f){uu(e,e.return,f)}}break;case 3:if(Fd=null,r=_a,_a=Sd(t.containerInfo),Pa(t,e),_a=r,Ra(e),4&o&&null!==n&&n.memoizedState.isDehydrated)try{Dh(t.containerInfo)}catch(f){uu(e,e.return,f)}ka&&(ka=!1,Ba(e));break;case 4:o=_a,_a=Sd(e.stateNode.containerInfo),Pa(t,e),Ra(e),_a=o;break;case 12:default:Pa(t,e),Ra(e);break;case 13:Pa(t,e),Ra(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(kc=te()),4&o&&(null!==(o=e.updateQueue)&&(e.updateQueue=null,Oa(e,o)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=ba,d=wa;if(ba=u||r,wa=d||c,Pa(t,e),wa=d,ba=u,Ra(e),8192&o)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||ba||wa||Fa(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,r)"function"===typeof(l=i.style).setProperty?l.setProperty("display","none","important"):l.display="none";else{a=c.stateNode;var h=c.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;a.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){uu(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(f){uu(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&o&&(null!==(o=e.updateQueue)&&(null!==(n=o.retryQueue)&&(o.retryQueue=null,Oa(e,n))));break;case 19:Pa(t,e),Ra(e),4&o&&(null!==(o=e.updateQueue)&&(e.updateQueue=null,Oa(e,o)));case 30:case 21:}}function Ra(e){var t=e.flags;if(2&t){try{for(var n,o=e.return;null!==o;){if(fa(o)){n=o;break}o=o.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var r=n.stateNode;va(e,ma(e),r);break;case 5:var i=n.stateNode;32&n.flags&&(Ct(i,""),n.flags&=-33),va(e,ma(e),i);break;case 3:case 4:var l=n.stateNode.containerInfo;ga(e,ma(e),l);break;default:throw Error(s(161))}}catch(a){uu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ba(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ba(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ia(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sa(e,t.alternate,t),t=t.sibling}function Fa(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:la(4,t,t.return),Fa(t);break;case 1:da(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ca(t,t.return,n),Fa(t);break;case 27:kd(t.stateNode);case 26:case 5:da(t,t.return),Fa(t);break;case 22:null===t.memoizedState&&Fa(t);break;default:Fa(t)}e=e.sibling}}function ja(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var o=t.alternate,r=e,i=t,s=i.flags;switch(i.tag){case 0:case 11:case 15:ja(r,i,n),sa(4,i);break;case 1:if(ja(r,i,n),"function"===typeof(r=(o=i).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){uu(o,o.return,c)}if(null!==(r=(o=i).updateQueue)){var l=o.stateNode;try{var a=r.shared.hiddenCallbacks;if(null!==a)for(r.shared.hiddenCallbacks=null,r=0;r<a.length;r++)hi(a[r],l)}catch(c){uu(o,o.return,c)}}n&&64&s&&aa(i),ua(i,i.return);break;case 27:ya(i);case 26:case 5:ja(r,i,n),n&&null===o&&4&s&&ha(i),ua(i,i.return);break;case 12:ja(r,i,n);break;case 13:ja(r,i,n),n&&4&s&&Ta(r,i);break;case 22:null===i.memoizedState&&ja(r,i,n),ua(i,i.return);break;case 30:break;default:ja(r,i,n)}t=t.sibling}}function za(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Rr(n))}function Ha(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rr(e))}function Va(e,t,n,o){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ua(e,t,n,o),t=t.sibling}function Ua(e,t,n,o){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Va(e,t,n,o),2048&r&&sa(9,t);break;case 1:case 13:default:Va(e,t,n,o);break;case 3:Va(e,t,n,o),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rr(e)));break;case 12:if(2048&r){Va(e,t,n,o),e=t.stateNode;try{var i=t.memoizedProps,s=i.id,l=i.onPostCommit;"function"===typeof l&&l(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(a){uu(t,t.return,a)}}else Va(e,t,n,o);break;case 23:break;case 22:i=t.stateNode,s=t.alternate,null!==t.memoizedState?2&i._visibility?Va(e,t,n,o):Wa(e,t):2&i._visibility?Va(e,t,n,o):(i._visibility|=2,$a(e,t,n,o,0!==(10256&t.subtreeFlags))),2048&r&&za(s,t);break;case 24:Va(e,t,n,o),2048&r&&Ha(t.alternate,t)}}function $a(e,t,n,o,r){for(r=r&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,s=t,l=n,a=o,c=s.flags;switch(s.tag){case 0:case 11:case 15:$a(i,s,l,a,r),sa(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?$a(i,s,l,a,r):Wa(i,s):(u._visibility|=2,$a(i,s,l,a,r)),r&&2048&c&&za(s.alternate,s);break;case 24:$a(i,s,l,a,r),r&&2048&c&&Ha(s.alternate,s);break;default:$a(i,s,l,a,r)}t=t.sibling}}function Wa(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,o=t,r=o.flags;switch(o.tag){case 22:Wa(n,o),2048&r&&za(o.alternate,o);break;case 24:Wa(n,o),2048&r&&Ha(o.alternate,o);break;default:Wa(n,o)}t=t.sibling}}var qa=8192;function Ga(e){if(e.subtreeFlags&qa)for(e=e.child;null!==e;)Ka(e),e=e.sibling}function Ka(e){switch(e.tag){case 26:Ga(e),e.flags&qa&&null!==e.memoizedState&&function(e,t,n){if(null===Vd)throw Error(s(475));var o=Vd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var r=Nd(n.href),i=e.querySelector(Td(r));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(o.count++,o=$d.bind(o),e.then(o,o)),t.state.loading|=4,t.instance=i,void We(i);i=e.ownerDocument||e,n=Od(n),(r=Cd.get(r))&&Bd(n,r),We(i=i.createElement("link"));var l=i;l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),ed(i,"link",n),t.instance=i}null===o.stylesheets&&(o.stylesheets=new Map),o.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(o.count++,t=$d.bind(o),e.addEventListener("load",t),e.addEventListener("error",t))}}(_a,e.memoizedState,e.memoizedProps);break;case 5:default:Ga(e);break;case 3:case 4:var t=_a;_a=Sd(e.stateNode.containerInfo),Ga(e),_a=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=qa,qa=16777216,Ga(e),qa=t):Ga(e))}}function Za(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ja(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var o=t[n];xa=o,Ya(o,e)}Za(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xa(e),e=e.sibling}function Xa(e){switch(e.tag){case 0:case 11:case 15:Ja(e),2048&e.flags&&la(9,e,e.return);break;case 3:case 12:default:Ja(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Qa(e)):Ja(e)}}function Qa(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var o=t[n];xa=o,Ya(o,e)}Za(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:la(8,t,t.return),Qa(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Qa(t));break;default:Qa(t)}e=e.sibling}}function Ya(e,t){for(;null!==xa;){var n=xa;switch(n.tag){case 0:case 11:case 15:la(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var o=n.memoizedState.cachePool.pool;null!=o&&o.refCount++}break;case 24:Rr(n.memoizedState.cache)}if(null!==(o=n.child))o.return=n,xa=o;else e:for(n=e;null!==xa;){var r=(o=xa).sibling,i=o.return;if(Aa(o),o===n){xa=null;break e}if(null!==r){r.return=i,xa=r;break e}xa=i}}}var ec={getCacheForType:function(e){var t=Dr(_r),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,oc=null,rc=null,ic=0,sc=0,lc=null,ac=!1,cc=!1,uc=!1,dc=0,hc=0,pc=0,fc=0,mc=0,gc=0,vc=0,yc=null,bc=null,wc=!1,kc=0,Cc=1/0,xc=null,Sc=null,Ac=0,Ec=null,Dc=null,Mc=0,Nc=0,Tc=null,Oc=null,Pc=0,_c=null;function Lc(){if(0!==(2&nc)&&0!==ic)return ic&-ic;if(null!==L.T){return 0!==Fr?Fr:Nu()}return Te()}function Rc(){0===gc&&(gc=0===(536870912&ic)||sr?Ce():536870912);var e=rl.current;return null!==e&&(e.flags|=32),gc}function Bc(e,t,n){(e!==oc||2!==sc&&9!==sc)&&null===e.cancelPendingCommit||(Uc(e,0),zc(e,ic,gc,!1)),Ae(e,n),0!==(2&nc)&&e===oc||(e===oc&&(0===(2&nc)&&(fc|=n),4===hc&&zc(e,ic,gc,!1)),Cu(e))}function Ic(e,t,n){if(0!==(6&nc))throw Error(s(327));for(var o=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),r=o?function(e,t){var n=nc;nc|=2;var o=Wc(),r=qc();oc!==e||ic!==t?(xc=null,Cc=te()+500,Uc(e,t)):cc=we(e,t);e:for(;;)try{if(0!==sc&&null!==rc){t=rc;var i=lc;t:switch(sc){case 1:sc=0,lc=null,Yc(e,t,i,1);break;case 2:case 9:if(Jr(i)){sc=0,lc=null,Qc(t);break}t=function(){2!==sc&&9!==sc||oc!==e||(sc=7),Cu(e)},i.then(t,t);break e;case 3:sc=7;break e;case 4:sc=5;break e;case 7:Jr(i)?(sc=0,lc=null,Qc(t)):(sc=0,lc=null,Yc(e,t,i,7));break;case 5:var l=null;switch(rc.tag){case 26:l=rc.memoizedState;case 5:case 27:var a=rc;if(!l||Hd(l)){sc=0,lc=null;var c=a.sibling;if(null!==c)rc=c;else{var u=a.return;null!==u?(rc=u,eu(u)):rc=null}break t}}sc=0,lc=null,Yc(e,t,i,5);break;case 6:sc=0,lc=null,Yc(e,t,i,6);break;case 8:Vc(),hc=6;break e;default:throw Error(s(462))}}Jc();break}catch(d){$c(e,d)}return br=yr=null,L.H=o,L.A=r,nc=n,null!==rc?0:(oc=null,ic=0,No(),hc)}(e,t):Kc(e,t,!0),i=o;;){if(0===r){cc&&!o&&zc(e,t,0,!1);break}if(n=e.current.alternate,!i||jc(n)){if(2===r){if(i=t,e.errorRecoveryDisabledLanes&i)var l=0;else l=0!==(l=-536870913&e.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){t=l;e:{var a=e;r=yc;var c=a.current.memoizedState.isDehydrated;if(c&&(Uc(a,l).flags|=256),2!==(l=Kc(a,l,!1))){if(uc&&!c){a.errorRecoveryDisabledLanes|=i,fc|=i,r=4;break e}i=bc,bc=r,null!==i&&(null===bc?bc=i:bc.push.apply(bc,i))}r=l}if(i=!1,2!==r)continue}}if(1===r){Uc(e,0),zc(e,t,0,!0);break}e:{switch(o=e,i=r){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:zc(o,t,gc,!ac);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(r=kc+300-te())){if(zc(o,t,gc,!ac),0!==be(o,0,!0))break e;o.timeoutHandle=ad(Fc.bind(null,o,n,bc,xc,wc,t,gc,fc,vc,ac,i,2,-0,0),r)}else Fc(o,n,bc,xc,wc,t,gc,fc,vc,ac,i,0,-0,0)}break}r=Kc(e,t,!1),i=!1}Cu(e)}function Fc(e,t,n,o,r,i,l,a,c,u,d,h,p,f){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Vd={stylesheets:null,count:0,unsuspend:Ud},Ka(t),null!==(h=function(){if(null===Vd)throw Error(s(475));var e=Vd;return e.stylesheets&&0===e.count&&qd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&qd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,i,n,o,r,l,a,c,d,1,p,f)),void zc(e,i,l,!u);nu(e,t,i,n,o,r,l,a,c)}function jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!Zn(i(),r))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,o){t&=~mc,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var r=t;0<r;){var i=31-pe(r),s=1<<i;o[i]=-1,r&=~s}0!==n&&Ee(e,n,t)}function Hc(){return 0!==(6&nc)||(xu(0,!1),!1)}function Vc(){if(null!==rc){if(0===sc)var e=rc.return;else br=yr=null,Fi(e=rc),Zs=null,Js=0,e=rc;for(;null!==e;)ia(e.alternate,e),e=e.return;rc=null}}function Uc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vc(),oc=e,rc=n=jo(e.current,null),ic=t,sc=0,lc=null,ac=!1,cc=we(e,t),uc=!1,vc=gc=mc=fc=pc=hc=0,bc=yc=null,wc=!1,0!==(8&t)&&(t|=32&t);var o=e.entangledLanes;if(0!==o)for(e=e.entanglements,o&=t;0<o;){var r=31-pe(o),i=1<<r;t|=e[r],o&=~i}return dc=t,No(),n}function $c(e,t){wi=null,L.H=Ws,t===qr||t===Kr?(t=ei(),sc=3):t===Gr?(t=ei(),sc=4):sc=t===El?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lc=t,null===rc&&(hc=1,kl(e,Ao(t,e.current)))}function Wc(){var e=L.H;return L.H=Ws,null===e?Ws:e}function qc(){var e=L.A;return L.A=ec,e}function Gc(){hc=4,ac||(4194048&ic)!==ic&&null!==rl.current||(cc=!0),0===(134217727&pc)&&0===(134217727&fc)||null===oc||zc(oc,ic,gc,!1)}function Kc(e,t,n){var o=nc;nc|=2;var r=Wc(),i=qc();oc===e&&ic===t||(xc=null,Uc(e,t)),t=!1;var s=hc;e:for(;;)try{if(0!==sc&&null!==rc){var l=rc,a=lc;switch(sc){case 8:Vc(),s=6;break e;case 3:case 2:case 9:case 6:null===rl.current&&(t=!0);var c=sc;if(sc=0,lc=null,Yc(e,l,a,c),n&&cc){s=0;break e}break;default:c=sc,sc=0,lc=null,Yc(e,l,a,c)}}Zc(),s=hc;break}catch(u){$c(e,u)}return t&&e.shellSuspendCounter++,br=yr=null,nc=o,L.H=r,L.A=i,null===rc&&(oc=null,ic=0,No()),s}function Zc(){for(;null!==rc;)Xc(rc)}function Jc(){for(;null!==rc&&!Y();)Xc(rc)}function Xc(e){var t=Xl(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):rc=t}function Qc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Bl(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Bl(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:Fi(t);default:ia(n,t),t=Xl(n,t=rc=zo(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):rc=t}function Yc(e,t,n,o){br=yr=null,Fi(t),Zs=null,Js=0;var r=t.return;try{if(function(e,t,n,o,r){if(n.flags|=32768,null!==o&&"object"===typeof o&&"function"===typeof o.then){if(null!==(t=n.alternate)&&Sr(t,n,r,!0),null!==(n=rl.current)){switch(n.tag){case 13:return null===il?Gc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,o===Zr?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([o]):t.add(o),du(e,o,r)),!1;case 22:return n.flags|=65536,o===Zr?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([o]):n.add(o),du(e,o,r)),!1}throw Error(s(435,n.tag))}return du(e,o,r),Gc(),!1}if(sr)return null!==(t=rl.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,o!==cr&&gr(Ao(e=Error(s(422),{cause:o}),n))):(o!==cr&&gr(Ao(t=Error(s(423),{cause:o}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,o=Ao(o,n),ai(e,r=xl(e.stateNode,o,r)),4!==hc&&(hc=2)),!1;var i=Error(s(520),{cause:o});if(i=Ao(i,n),null===yc?yc=[i]:yc.push(i),4!==hc&&(hc=2),null===t)return!0;o=Ao(o,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,ai(n,e=xl(n.stateNode,o,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Sc||!Sc.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,Al(r=Sl(r),e,n,o),ai(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,ic))return hc=1,kl(e,Ao(n,e.current)),void(rc=null)}catch(i){if(null!==r)throw rc=r,i;return hc=1,kl(e,Ao(n,e.current)),void(rc=null)}32768&t.flags?(sr||1===o?e=!0:cc||0!==(536870912&ic)?e=!1:(ac=e=!0,(2===o||9===o||3===o||6===o)&&(null!==(o=rl.current)&&13===o.tag&&(o.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,ac);e=t.return;var n=oa(t.alternate,t,dc);if(null!==n)return void(rc=n);if(null!==(t=t.sibling))return void(rc=t);rc=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=ra(e.alternate,e);if(null!==n)return n.flags&=32767,void(rc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(rc=e);rc=e=n}while(null!==e);hc=6,rc=null}function nu(e,t,n,o,r,i,l,a,c){e.cancelPendingCommit=null;do{lu()}while(0!==Ac);if(0!==(6&nc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(i=t.lanes|t.childLanes,function(e,t,n,o,r,i){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,a=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-pe(n),d=1<<u;l[u]=0,a[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==o&&Ee(e,o,0),0!==i&&0===r&&0!==e.tag&&(e.suspendedLanes|=i&~(s&~t))}(e,n,i|=Mo,l,a,c),e===oc&&(rc=oc=null,ic=0),Dc=t,Ec=e,Mc=n,Nc=i,Tc=r,Oc=o,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(ie,function(){return au(),null})):(e.callbackNode=null,e.callbackPriority=0),o=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||o){o=L.T,L.T=null,r=R.p,R.p=2,l=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,to(e=eo(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var o=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(o&&0!==o.rangeCount){n=o.anchorNode;var r=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var l=0,a=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(a=l+r),h!==i||0!==o&&3!==h.nodeType||(c=l+o),3===h.nodeType&&(l+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===r&&(a=l),p===i&&++d===o&&(c=l),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===a||-1===c?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,xa=t;null!==xa;)if(e=(t=xa).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,xa=e;else for(;null!==xa;){switch(i=(t=xa).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,r=i.memoizedProps,i=i.memoizedState,o=n.stateNode;try{var m=gl(n.type,r,(n.elementType,n.type));e=o.getSnapshotBeforeUpdate(m,i),o.__reactInternalSnapshotBeforeUpdate=e}catch(v){uu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))md(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,xa=e;break}xa=t.return}}(e,t)}finally{nc=l,R.p=r,L.T=o}}Ac=1,ou(),ru(),iu()}}function ou(){if(1===Ac){Ac=0;var e=Ec,t=Dc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=L.T,L.T=null;var o=R.p;R.p=2;var r=nc;nc|=4;try{La(t,e);var i=nd,s=eo(e.containerInfo),l=i.focusedElem,a=i.selectionRange;if(s!==l&&l&&l.ownerDocument&&Yn(l.ownerDocument.documentElement,l)){if(null!==a&&to(l)){var c=a.start,u=a.end;if(void 0===u&&(u=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(u,l.value.length);else{var d=l.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=l.textContent.length,m=Math.min(a.start,f),g=void 0===a.end?m:Math.min(a.end,f);!p.extend&&m>g&&(s=g,g=m,m=s);var v=Qn(l,m),y=Qn(l,g);if(v&&y&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),p.addRange(b))}}}}for(d=[],p=l;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof l.focus&&l.focus(),l=0;l<d.length;l++){var w=d[l];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nh=!!td,nd=td=null}finally{nc=r,R.p=o,L.T=n}}e.current=t,Ac=2}}function ru(){if(2===Ac){Ac=0;var e=Ec,t=Dc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=L.T,L.T=null;var o=R.p;R.p=2;var r=nc;nc|=4;try{Sa(e,t.alternate,t)}finally{nc=r,R.p=o,L.T=n}}Ac=3}}function iu(){if(4===Ac||3===Ac){Ac=0,ee();var e=Ec,t=Dc,n=Mc,o=Oc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Ac=5:(Ac=0,Dc=Ec=null,su(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Sc=null),Ne(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(a){}if(null!==o){t=L.T,r=R.p,R.p=2,L.T=null;try{for(var i=e.onRecoverableError,s=0;s<o.length;s++){var l=o[s];i(l.value,{componentStack:l.stack})}}finally{L.T=t,R.p=r}}0!==(3&Mc)&&lu(),Cu(e),r=e.pendingLanes,0!==(4194090&n)&&0!==(42&r)?e===_c?Pc++:(Pc=0,_c=e):Pc=0,xu(0,!1)}}function su(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Rr(t)))}function lu(e){return ou(),ru(),iu(),au()}function au(){if(5!==Ac)return!1;var e=Ec,t=Nc;Nc=0;var n=Ne(Mc),o=L.T,r=R.p;try{R.p=32>n?32:n,L.T=null,n=Tc,Tc=null;var i=Ec,l=Mc;if(Ac=0,Dc=Ec=null,Mc=0,0!==(6&nc))throw Error(s(331));var a=nc;if(nc|=4,Xa(i.current),Ua(i,i.current,l,n),nc=a,xu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{R.p=r,L.T=o,su(e,t)}}function cu(e,t,n){t=Ao(n,t),null!==(e=si(e,t=xl(e.stateNode,t,2),2))&&(Ae(e,2),Cu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var o=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===Sc||!Sc.has(o))){e=Ao(n,e),null!==(o=si(t,n=Sl(2),2))&&(Al(n,o,t,e),Ae(o,2),Cu(o));break}}t=t.return}}function du(e,t,n){var o=e.pingCache;if(null===o){o=e.pingCache=new tc;var r=new Set;o.set(t,r)}else void 0===(r=o.get(t))&&(r=new Set,o.set(t,r));r.has(n)||(uc=!0,r.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var o=e.pingCache;null!==o&&o.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,oc===e&&(ic&n)===n&&(4===hc||3===hc&&(62914560&ic)===ic&&300>te()-kc?0===(2&nc)&&Uc(e,0):mc|=n,vc===ic&&(vc=0)),Cu(e)}function pu(e,t){0===t&&(t=xe()),null!==(e=Po(e,t))&&(Ae(e,t),Cu(e))}function fu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==o&&o.delete(t),pu(e,n)}var gu=null,vu=null,yu=!1,bu=!1,wu=!1,ku=0;function Cu(e){e!==vu&&null===e.next&&(null===vu?gu=vu=e:vu=vu.next=e),bu=!0,yu||(yu=!0,dd(function(){0!==(6&nc)?X(oe,Su):Au()}))}function xu(e,t){if(!wu&&bu){wu=!0;do{for(var n=!1,o=gu;null!==o;){if(!t)if(0!==e){var r=o.pendingLanes;if(0===r)var i=0;else{var s=o.suspendedLanes,l=o.pingedLanes;i=(1<<31-pe(42|e)+1)-1,i=201326741&(i&=r&~(s&~l))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Mu(o,i))}else i=ic,0===(3&(i=be(o,o===oc?i:0,null!==o.cancelPendingCommit||-1!==o.timeoutHandle)))||we(o,i)||(n=!0,Mu(o,i));o=o.next}}while(n);wu=!1}}function Su(){Au()}function Au(){bu=yu=!1;var e=0;0!==ku&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ld&&(ld=e,!0);return ld=null,!1}()&&(e=ku),ku=0);for(var t=te(),n=null,o=gu;null!==o;){var r=o.next,i=Eu(o,t);0===i?(o.next=null,null===n?gu=r:n.next=r,null===r&&(vu=n)):(n=o,(0!==e||0!==(3&i))&&(bu=!0)),o=r}xu(e,!1)}function Eu(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,r=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var s=31-pe(i),l=1<<s,a=r[s];-1===a?0!==(l&n)&&0===(l&o)||(r[s]=ke(l,t)):a<=t&&(e.expiredLanes|=l),i&=~l}if(n=ic,n=be(e,e===(t=oc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),o=e.callbackNode,0===n||e===t&&(2===sc||9===sc)||null!==e.cancelPendingCommit)return null!==o&&null!==o&&Q(o),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==o&&Q(o),Ne(n)){case 2:case 8:n=re;break;case 32:default:n=ie;break;case 268435456:n=le}return o=Du.bind(null,e),n=X(n,o),e.callbackPriority=t,e.callbackNode=n,t}return null!==o&&null!==o&&Q(o),e.callbackPriority=2,e.callbackNode=null,2}function Du(e,t){if(0!==Ac&&5!==Ac)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var o=ic;return 0===(o=be(e,e===oc?o:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Ic(e,o,t),Eu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Du.bind(null,e):null)}function Mu(e,t){if(lu())return null;Ic(e,t,!0)}function Nu(){return 0===ku&&(ku=Ce()),ku}function Tu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Nt(""+e)}function Ou(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pu=0;Pu<Co.length;Pu++){var _u=Co[Pu];xo(_u.toLowerCase(),"on"+(_u[0].toUpperCase()+_u.slice(1)))}xo(fo,"onAnimationEnd"),xo(mo,"onAnimationIteration"),xo(go,"onAnimationStart"),xo("dblclick","onDoubleClick"),xo("focusin","onFocus"),xo("focusout","onBlur"),xo(vo,"onTransitionRun"),xo(yo,"onTransitionStart"),xo(bo,"onTransitionCancel"),xo(wo,"onTransitionEnd"),Ze("onMouseEnter",["mouseout","mouseover"]),Ze("onMouseLeave",["mouseout","mouseover"]),Ze("onPointerEnter",["pointerout","pointerover"]),Ze("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ru=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Bu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var o=e[n],r=o.event;o=o.listeners;e:{var i=void 0;if(t)for(var s=o.length-1;0<=s;s--){var l=o[s],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==i&&r.isPropagationStopped())break e;i=l,r.currentTarget=c;try{i(r)}catch(u){vl(u)}r.currentTarget=null,i=a}else for(s=0;s<o.length;s++){if(a=(l=o[s]).instance,c=l.currentTarget,l=l.listener,a!==i&&r.isPropagationStopped())break e;i=l,r.currentTarget=c;try{i(r)}catch(u){vl(u)}r.currentTarget=null,i=a}}}}function Iu(e,t){var n=t[Re];void 0===n&&(n=t[Re]=new Set);var o=e+"__bubble";n.has(o)||(Hu(t,e,2,!1),n.add(o))}function Fu(e,t,n){var o=0;t&&(o|=4),Hu(n,e,o,t)}var ju="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[ju]){e[ju]=!0,qe.forEach(function(t){"selectionchange"!==t&&(Ru.has(t)||Fu(t,!1,e),Fu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ju]||(t[ju]=!0,Fu("selectionchange",!1,t))}}function Hu(e,t,n,o){switch(ch(t)){case 2:var r=oh;break;case 8:r=rh;break;default:r=ih}n=r.bind(null,t,n,e),r=void 0,!jt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),o?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Vu(e,t,n,o,r){var i=o;if(0===(1&t)&&0===(2&t)&&null!==o)e:for(;;){if(null===o)return;var s=o.tag;if(3===s||4===s){var l=o.stateNode.containerInfo;if(l===r)break;if(4===s)for(s=o.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===r)return;s=s.return}for(;null!==l;){if(null===(s=He(l)))return;if(5===(c=s.tag)||6===c||26===c||27===c){o=i=s;continue e}l=l.parentNode}}o=o.return}Bt(function(){var o=i,r=Ot(n),s=[];e:{var l=ko.get(e);if(void 0!==l){var c=Yt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=sn;break;case"focusout":u="blur",c=sn;break;case"beforeblur":case"afterblur":c=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case fo:case mo:case go:c=ln;break;case wo:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==l?l+"Capture":null:l;d=[];for(var f,m=o;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=It(m,p))&&d.push(Uu(m,g,f)),h)break;m=m.return}0<d.length&&(l=new c(l,u,null,n,r),s.push({event:l,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Tt||!(u=n.relatedTarget||n.fromElement)||!He(u)&&!u[Le])&&(c||l)&&(l=r.window===r?r:(l=r.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=o,null!==(u=(u=n.relatedTarget||n.toElement)?He(u):null)&&(h=a(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=o),c!==u)){if(d=on,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==c?l:Ue(c),f=null==u?l:Ue(u),(l=new d(g,m+"leave",c,n,r)).target=h,l.relatedTarget=f,g=null,He(r)===o&&((d=new d(p,m+"enter",u,n,r)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(p=u,m=0,f=d=c;f;f=Wu(f))m++;for(f=0,g=p;g;g=Wu(g))f++;for(;0<m-f;)d=Wu(d),m--;for(;0<f-m;)p=Wu(p),f--;for(;m--;){if(d===p||null!==p&&d===p.alternate)break e;d=Wu(d),p=Wu(p)}d=null}else d=null;null!==c&&qu(s,l,c,d,!1),null!==u&&null!==h&&qu(s,h,u,d,!0)}if("select"===(c=(l=o?Ue(o):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var v=Fn;else if(Pn(l))if(jn)v=Kn;else{v=qn;var y=Wn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?o&&Et(o.elementType)&&(v=Fn):v=Gn;switch(v&&(v=v(e,o))?_n(s,v,n,r):(y&&y(e,l,o),"focusout"===e&&o&&"number"===l.type&&null!=o.memoizedProps.value&&yt(l,"number",l.value)),y=o?Ue(o):window,e){case"focusin":(Pn(y)||"true"===y.contentEditable)&&(oo=y,ro=o,io=null);break;case"focusout":io=ro=oo=null;break;case"mousedown":so=!0;break;case"contextmenu":case"mouseup":case"dragend":so=!1,lo(s,n,r);break;case"selectionchange":if(no)break;case"keydown":case"keyup":lo(s,n,r)}var b;if(Cn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Tn?Mn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(An&&"ko"!==n.locale&&(Tn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Tn&&(b=$t()):(Vt="value"in(Ht=r)?Ht.value:Ht.textContent,Tn=!0)),0<(y=$u(o,w)).length&&(w=new cn(w,e,null,n,r),s.push({event:w,listeners:y}),b?w.data=b:null!==(b=Nn(n))&&(w.data=b))),(b=Sn?function(e,t){switch(e){case"compositionend":return Nn(t);case"keypress":return 32!==t.which?null:(Dn=!0,En);case"textInput":return(e=t.data)===En&&Dn?null:e;default:return null}}(e,n):function(e,t){if(Tn)return"compositionend"===e||!Cn&&Mn(e,t)?(e=$t(),Ut=Vt=Ht=null,Tn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=$u(o,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,r),s.push({event:y,listeners:w}),y.data=b)),function(e,t,n,o,r){if("submit"===t&&n&&n.stateNode===r){var i=Tu((r[_e]||null).action),s=o.submitter;s&&null!==(t=(t=s[_e]||null)?Tu(t.formAction):s.getAttribute("formAction"))&&(i=t,s=null);var l=new Yt("action","action",null,o,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(0!==ku){var e=s?Ou(r,s):new FormData(r);Os(n,{pending:!0,data:e,method:r.method,action:i},null,e)}}else"function"===typeof i&&(l.preventDefault(),e=s?Ou(r,s):new FormData(r),Os(n,{pending:!0,data:e,method:r.method,action:i},i,e))},currentTarget:r}]})}}(s,e,o,n,r)}Bu(s,t)})}function Uu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $u(e,t){for(var n=t+"Capture",o=[];null!==e;){var r=e,i=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===i||(null!=(r=It(e,n))&&o.unshift(Uu(e,r,i)),null!=(r=It(e,t))&&o.push(Uu(e,r,i))),3===e.tag)return o;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function qu(e,t,n,o,r){for(var i=t._reactName,s=[];null!==n&&n!==o;){var l=n,a=l.alternate,c=l.stateNode;if(l=l.tag,null!==a&&a===o)break;5!==l&&26!==l&&27!==l||null===c||(a=c,r?null!=(c=It(n,i))&&s.unshift(Uu(n,c,a)):r||null!=(c=It(n,i))&&s.push(Uu(n,c,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Gu=/\r\n?/g,Ku=/\u0000|\uFFFD/g;function Zu(e){return("string"===typeof e?e:""+e).replace(Gu,"\n").replace(Ku,"")}function Ju(e,t){return t=Zu(t),Zu(e)===t}function Xu(){}function Qu(e,t,n,o,r,i){switch(n){case"children":"string"===typeof o?"body"===t||"textarea"===t&&""===o||Ct(e,o):("number"===typeof o||"bigint"===typeof o)&&"body"!==t&&Ct(e,""+o);break;case"className":nt(e,"class",o);break;case"tabIndex":nt(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,o);break;case"style":At(e,o,i);break;case"data":if("object"!==t){nt(e,"data",o);break}case"src":case"href":if(""===o&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==o||"function"===typeof o||"symbol"===typeof o||"boolean"===typeof o){e.removeAttribute(n);break}o=Nt(""+o),e.setAttribute(n,o);break;case"action":case"formAction":if("function"===typeof o){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Qu(e,t,"name",r.name,r,null),Qu(e,t,"formEncType",r.formEncType,r,null),Qu(e,t,"formMethod",r.formMethod,r,null),Qu(e,t,"formTarget",r.formTarget,r,null)):(Qu(e,t,"encType",r.encType,r,null),Qu(e,t,"method",r.method,r,null),Qu(e,t,"target",r.target,r,null))),null==o||"symbol"===typeof o||"boolean"===typeof o){e.removeAttribute(n);break}o=Nt(""+o),e.setAttribute(n,o);break;case"onClick":null!=o&&(e.onclick=Xu);break;case"onScroll":null!=o&&Iu("scroll",e);break;case"onScrollEnd":null!=o&&Iu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=o){if("object"!==typeof o||!("__html"in o))throw Error(s(61));if(null!=(n=o.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=o&&"function"!==typeof o&&"symbol"!==typeof o;break;case"muted":e.muted=o&&"function"!==typeof o&&"symbol"!==typeof o;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==o||"function"===typeof o||"boolean"===typeof o||"symbol"===typeof o){e.removeAttribute("xlink:href");break}n=Nt(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=o&&"function"!==typeof o&&"symbol"!==typeof o?e.setAttribute(n,""+o):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&"function"!==typeof o&&"symbol"!==typeof o?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===o?e.setAttribute(n,""):!1!==o&&null!=o&&"function"!==typeof o&&"symbol"!==typeof o?e.setAttribute(n,o):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&!isNaN(o)&&1<=o?e.setAttribute(n,o):e.removeAttribute(n);break;case"rowSpan":case"start":null==o||"function"===typeof o||"symbol"===typeof o||isNaN(o)?e.removeAttribute(n):e.setAttribute(n,o);break;case"popover":Iu("beforetoggle",e),Iu("toggle",e),tt(e,"popover",o);break;case"xlinkActuate":ot(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ot(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ot(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ot(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ot(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ot(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ot(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ot(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ot(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":tt(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Dt.get(n)||n,o)}}function Yu(e,t,n,o,r,i){switch(n){case"style":At(e,o,i);break;case"dangerouslySetInnerHTML":if(null!=o){if("object"!==typeof o||!("__html"in o))throw Error(s(61));if(null!=(n=o.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof o?Ct(e,o):("number"===typeof o||"bigint"===typeof o)&&Ct(e,""+o);break;case"onScroll":null!=o&&Iu("scroll",e);break;case"onScrollEnd":null!=o&&Iu("scrollend",e);break;case"onClick":null!=o&&(e.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"===typeof(i=null!=(i=e[_e]||null)?i[n]:null)&&e.removeEventListener(t,i,r),"function"!==typeof o)?n in e?e[n]=o:!0===o?e.setAttribute(n,""):tt(e,n,o):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,o,r)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Iu("error",e),Iu("load",e);var o,r=!1,i=!1;for(o in n)if(n.hasOwnProperty(o)){var l=n[o];if(null!=l)switch(o){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Qu(e,t,o,l,n,null)}}return i&&Qu(e,t,"srcSet",n.srcSet,n,null),void(r&&Qu(e,t,"src",n.src,n,null));case"input":Iu("invalid",e);var a=o=l=i=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(null!=d)switch(r){case"name":i=d;break;case"type":l=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":o=d;break;case"defaultValue":a=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:Qu(e,t,r,d,n,null)}}return vt(e,o,a,c,u,l,i,!1),void dt(e);case"select":for(i in Iu("invalid",e),r=l=o=null,n)if(n.hasOwnProperty(i)&&null!=(a=n[i]))switch(i){case"value":o=a;break;case"defaultValue":l=a;break;case"multiple":r=a;default:Qu(e,t,i,a,n,null)}return t=o,n=l,e.multiple=!!r,void(null!=t?bt(e,!!r,t,!1):null!=n&&bt(e,!!r,n,!0));case"textarea":for(l in Iu("invalid",e),o=i=r=null,n)if(n.hasOwnProperty(l)&&null!=(a=n[l]))switch(l){case"value":r=a;break;case"defaultValue":i=a;break;case"children":o=a;break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(s(91));break;default:Qu(e,t,l,a,n,null)}return kt(e,r,i,o),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else Qu(e,t,c,r,n,null);return;case"dialog":Iu("beforetoggle",e),Iu("toggle",e),Iu("cancel",e),Iu("close",e);break;case"iframe":case"object":Iu("load",e);break;case"video":case"audio":for(r=0;r<Lu.length;r++)Iu(Lu[r],e);break;case"image":Iu("error",e),Iu("load",e);break;case"details":Iu("toggle",e);break;case"embed":case"source":case"link":Iu("error",e),Iu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(r=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Qu(e,t,u,r,n,null)}return;default:if(Et(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(r=n[d])&&Yu(e,t,d,r,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(null!=(r=n[a])&&Qu(e,t,a,r,n,null))}var td=null,nd=null;function od(e){return 9===e.nodeType?e:e.ownerDocument}function rd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function sd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null;var ad="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ad;function hd(e){setTimeout(function(){throw e})}function pd(e){return"head"===e}function fd(e,t){var n=t,o=0,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<o&&8>o){n=o;var s=e.ownerDocument;if(1&n&&kd(s.documentElement),2&n&&kd(s.body),4&n)for(kd(n=s.head),s=n.firstChild;s;){var l=s.nextSibling,a=s.nodeName;s[je]||"SCRIPT"===a||"STYLE"===a||"LINK"===a&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=l}}if(0===r)return e.removeChild(i),void Dh(t);r--}else"$"===n||"$?"===n||"$!"===n?r++:o=n.charCodeAt(0)-48;else o=0;n=i}while(n);Dh(t)}function md(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":md(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=od(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function kd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var Cd=new Map,xd=new Set;function Sd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Ad=R.d;R.d={f:function(){var e=Ad.f(),t=Hc();return e||t},r:function(e){var t=Ve(e);null!==t&&5===t.tag&&"form"===t.type?_s(t):Ad.r(e)},D:function(e){Ad.D(e),Dd("dns-prefetch",e,null)},C:function(e,t){Ad.C(e,t),Dd("preconnect",e,t)},L:function(e,t,n){Ad.L(e,t,n);var o=Ed;if(o&&e&&t){var r='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+mt(n.imageSizes)+'"]')):r+='[href="'+mt(e)+'"]';var i=r;switch(t){case"style":i=Nd(e);break;case"script":i=Pd(e)}Cd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Cd.set(i,e),null!==o.querySelector(r)||"style"===t&&o.querySelector(Td(i))||"script"===t&&o.querySelector(_d(i))||(ed(t=o.createElement("link"),"link",e),We(t),o.head.appendChild(t)))}},m:function(e,t){Ad.m(e,t);var n=Ed;if(n&&e){var o=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+mt(o)+'"][href="'+mt(e)+'"]',i=r;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Pd(e)}if(!Cd.has(i)&&(e=h({rel:"modulepreload",href:e},t),Cd.set(i,e),null===n.querySelector(r))){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(_d(i)))return}ed(o=n.createElement("link"),"link",e),We(o),n.head.appendChild(o)}}},X:function(e,t){Ad.X(e,t);var n=Ed;if(n&&e){var o=$e(n).hoistableScripts,r=Pd(e),i=o.get(r);i||((i=n.querySelector(_d(r)))||(e=h({src:e,async:!0},t),(t=Cd.get(r))&&Id(e,t),We(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},o.set(r,i))}},S:function(e,t,n){Ad.S(e,t,n);var o=Ed;if(o&&e){var r=$e(o).hoistableStyles,i=Nd(e);t=t||"default";var s=r.get(i);if(!s){var l={loading:0,preload:null};if(s=o.querySelector(Td(i)))l.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Cd.get(i))&&Bd(e,n);var a=s=o.createElement("link");We(a),ed(a,"link",e),a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),a.addEventListener("load",function(){l.loading|=1}),a.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Rd(s,t,o)}s={type:"stylesheet",instance:s,count:1,state:l},r.set(i,s)}}},M:function(e,t){Ad.M(e,t);var n=Ed;if(n&&e){var o=$e(n).hoistableScripts,r=Pd(e),i=o.get(r);i||((i=n.querySelector(_d(r)))||(e=h({src:e,async:!0,type:"module"},t),(t=Cd.get(r))&&Id(e,t),We(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},o.set(r,i))}}};var Ed="undefined"===typeof document?null:document;function Dd(e,t,n){var o=Ed;if(o&&"string"===typeof t&&t){var r=mt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),xd.has(r)||(xd.add(r),e={rel:e,crossOrigin:n,href:t},null===o.querySelector(r)&&(ed(t=o.createElement("link"),"link",e),We(t),o.head.appendChild(t)))}}function Md(e,t,n,o){var r,i,l,a,c=(c=$.current)?Sd(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Nd(n.href),(o=(n=$e(c).hoistableStyles).get(t))||(o={type:"style",instance:null,count:0,state:null},n.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Nd(n.href);var u=$e(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Td(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Cd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Cd.set(e,n),u||(r=c,i=e,l=n,a=d.state,r.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=r.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),ed(i,"link",l),We(i),r.head.appendChild(i))))),t&&null===o)throw Error(s(528,""));return d}if(t&&null!==o)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Pd(n),(o=(n=$e(c).hoistableScripts).get(t))||(o={type:"script",instance:null,count:0,state:null},n.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Nd(e){return'href="'+mt(e)+'"'}function Td(e){return'link[rel="stylesheet"]['+e+"]"}function Od(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pd(e){return'[src="'+mt(e)+'"]'}function _d(e){return"script[async]"+e}function Ld(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(o)return t.instance=o,We(o),o;var r=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(o=(e.ownerDocument||e).createElement("style")),ed(o,"style",r),Rd(o,n.precedence,e),t.instance=o;case"stylesheet":r=Nd(n.href);var i=e.querySelector(Td(r));if(i)return t.state.loading|=4,t.instance=i,We(i),i;o=Od(n),(r=Cd.get(r))&&Bd(o,r),We(i=(e.ownerDocument||e).createElement("link"));var l=i;return l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),ed(i,"link",o),t.state.loading|=4,Rd(i,n.precedence,e),t.instance=i;case"script":return i=Pd(n.src),(r=e.querySelector(_d(i)))?(t.instance=r,We(r),r):(o=n,(r=Cd.get(i))&&Id(o=h({},n),r),We(r=(e=e.ownerDocument||e).createElement("script")),ed(r,"link",o),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(o=t.instance,t.state.loading|=4,Rd(o,n.precedence,e));return t.instance}function Rd(e,t,n){for(var o=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=o.length?o[o.length-1]:null,i=r,s=0;s<o.length;s++){var l=o[s];if(l.dataset.precedence===t)i=l;else if(i!==r)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Bd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Id(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fd=null;function jd(e,t,n){if(null===Fd){var o=new Map,r=Fd=new Map;r.set(n,o)}else(o=(r=Fd).get(n))||(o=new Map,r.set(n,o));if(o.has(e))return o;for(o.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var i=n[r];if(!(i[je]||i[Pe]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var s=i.getAttribute(t)||"";s=e+s;var l=o.get(s);l?l.push(i):o.set(s,[i])}}return o}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Hd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Vd=null;function Ud(){}function $d(){if(this.count--,0===this.count)if(this.stylesheets)qd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wd=null;function qd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wd=new Map,t.forEach(Gd,e),Wd=null,$d.call(e))}function Gd(e,t){if(!(4&t.state.loading)){var n=Wd.get(e);if(n)var o=n.get(null);else{n=new Map,Wd.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var s=r[i];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),o=s)}o&&n.set(null,o)}s=(r=t.instance).getAttribute("data-precedence"),(i=n.get(s)||o)===o&&n.set(null,r),n.set(s,r),this.count++,o=$d.bind(this),r.addEventListener("load",o),r.addEventListener("error",o),i?i.parentNode.insertBefore(r,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var Kd={$$typeof:k,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function Zd(e,t,n,o,r,i,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=o,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Jd(e,t,n,o,r,i,s,l,a,c,u,d){return e=new Zd(e,t,n,s,l,a,c,d),t=1,!0===i&&(t|=24),i=Io(3,null,null,t),e.current=i,i.stateNode=e,(t=Lr()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:o,isDehydrated:n,cache:t},oi(i),e}function Xd(e){return e?e=Ro:Ro}function Qd(e,t,n,o,r,i){r=Xd(r),null===o.context?o.context=r:o.pendingContext=r,(o=ii(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(o.callback=i),null!==(n=si(e,o,t))&&(Bc(n,0,t),li(n,e,t))}function Yd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Yd(e,t),(e=e.alternate)&&Yd(e,t)}function th(e){if(13===e.tag){var t=Po(e,67108864);null!==t&&Bc(t,0,67108864),eh(e,67108864)}}var nh=!0;function oh(e,t,n,o){var r=L.T;L.T=null;var i=R.p;try{R.p=2,ih(e,t,n,o)}finally{R.p=i,L.T=r}}function rh(e,t,n,o){var r=L.T;L.T=null;var i=R.p;try{R.p=8,ih(e,t,n,o)}finally{R.p=i,L.T=r}}function ih(e,t,n,o){if(nh){var r=sh(o);if(null===r)Vu(e,t,o,lh,n),yh(e,o);else if(function(e,t,n,o,r){switch(t){case"focusin":return dh=bh(dh,e,t,n,o,r),!0;case"dragenter":return hh=bh(hh,e,t,n,o,r),!0;case"mouseover":return ph=bh(ph,e,t,n,o,r),!0;case"pointerover":var i=r.pointerId;return fh.set(i,bh(fh.get(i)||null,e,t,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,mh.set(i,bh(mh.get(i)||null,e,t,n,o,r)),!0}return!1}(r,e,t,n,o))o.stopPropagation();else if(yh(e,o),4&t&&-1<vh.indexOf(e)){for(;null!==r;){var i=Ve(r);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var s=ye(i.pendingLanes);if(0!==s){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;s;){var a=1<<31-pe(s);l.entanglements[1]|=a,s&=~a}Cu(i),0===(6&nc)&&(Cc=te()+500,xu(0,!1))}}break;case 13:null!==(l=Po(i,2))&&Bc(l,0,2),Hc(),eh(i,2)}if(null===(i=sh(o))&&Vu(e,t,o,lh,n),i===r)break;r=i}null!==r&&o.stopPropagation()}else Vu(e,t,o,null,n)}}function sh(e){return ah(e=Ot(e))}var lh=null;function ah(e){if(lh=null,null!==(e=He(e))){var t=a(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case oe:return 2;case re:return 8;case ie:case se:return 32;case le:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,ph=null,fh=new Map,mh=new Map,gh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":fh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(t.pointerId)}}function bh(e,t,n,o,r,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},null!==t&&(null!==(t=Ve(t))&&th(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function wh(e){var t=He(e.target);if(null!==t){var n=a(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=R.p;try{return R.p=e,t()}finally{R.p=n}}(e.priority,function(){if(13===n.tag){var e=Lc();e=Me(e);var t=Po(n,e);null!==t&&Bc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function kh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sh(e.nativeEvent);if(null!==n)return null!==(t=Ve(n))&&th(t),e.blockedOn=n,!1;var o=new(n=e.nativeEvent).constructor(n.type,n);Tt=o,n.target.dispatchEvent(o),Tt=null,t.shift()}return!0}function Ch(e,t,n){kh(e)&&n.delete(t)}function xh(){uh=!1,null!==dh&&kh(dh)&&(dh=null),null!==hh&&kh(hh)&&(hh=null),null!==ph&&kh(ph)&&(ph=null),fh.forEach(Ch),mh.forEach(Ch)}function Sh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,xh)))}var Ah=null;function Eh(e){Ah!==e&&(Ah=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Ah===e&&(Ah=null);for(var t=0;t<e.length;t+=3){var n=e[t],o=e[t+1],r=e[t+2];if("function"!==typeof o){if(null===ah(o||n))continue;break}var i=Ve(n);null!==i&&(e.splice(t,3),t-=3,Os(i,{pending:!0,data:r,method:n.method,action:o},o,r))}}))}function Dh(e){function t(t){return Sh(t,e)}null!==dh&&Sh(dh,e),null!==hh&&Sh(hh,e),null!==ph&&Sh(ph,e),fh.forEach(t),mh.forEach(t);for(var n=0;n<gh.length;n++){var o=gh[n];o.blockedOn===e&&(o.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)wh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(o=0;o<n.length;o+=3){var r=n[o],i=n[o+1],s=r[_e]||null;if("function"===typeof i)s||Eh(n);else if(s){var l=null;if(i&&i.hasAttribute("formAction")){if(r=i,s=i[_e]||null)l=s.formAction;else if(null!==ah(r))continue}else l=s.action;"function"===typeof l?n[o+1]=l:(n.splice(o,3),o-=3),Eh(n)}}}function Mh(e){this._internalRoot=e}function Nh(e){this._internalRoot=e}Nh.prototype.render=Mh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Qd(t.current,Lc(),e,t,null,null)},Nh.prototype.unmount=Mh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Qd(e.current,2,null,e,null,null),Hc(),t[Le]=null}},Nh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Te();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&wh(e)}};var Th=r.version;if("19.1.0"!==Th)throw Error(s(527,Th,"19.1.0"));R.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=a(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,o=t;;){var r=n.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(o=r.return)){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return u(r),e;if(i===o)return u(r),t;i=i.sibling}throw Error(s(188))}if(n.return!==o.return)n=r,o=i;else{for(var l=!1,c=r.child;c;){if(c===n){l=!0,n=r,o=i;break}if(c===o){l=!0,o=r,n=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===n){l=!0,n=i,o=r;break}if(c===o){l=!0,o=i,n=r;break}c=c.sibling}if(!l)throw Error(s(189))}}if(n.alternate!==o)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Oh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ue=Ph.inject(Oh),de=Ph}catch(Lh){}}t.createRoot=function(e,t){if(!l(e))throw Error(s(299));var n=!1,o="",r=yl,i=bl,a=wl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(a=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jd(e,1,!1,null,0,n,o,r,i,a,0,null),e[Le]=t.current,zu(e),new Mh(t)},t.hydrateRoot=function(e,t,n){if(!l(e))throw Error(s(299));var o=!1,r="",i=yl,a=bl,c=wl,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(a=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Jd(e,1,!0,t,0,o,r,i,a,c,0,u)).context=Xd(null),n=t.current,(r=ii(o=Me(o=Lc()))).callback=null,si(n,r,o),n=o,t.current.lanes=n,Ae(t,n),Cu(t),e[Le]=t.current,zu(e),new Nh(t)},t.version="19.1.0"},7051:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(9526);function r(e,t,n){return(t=(0,o.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},7950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},8853:(e,t,n)=>{e.exports=n(5896)},9526:(e,t,n)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}n.d(t,{A:()=>r})}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if("object"===typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&"function"===typeof o.then)return o}var i=Object.create(null);n.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var l=2&r&&o;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>s[e]=()=>o[e]);return s.default=()=>o,n.d(i,s),i}})(),n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,o)=>(n.f[o](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{211:"fa16e8c2",296:"95410c8f",316:"c3d8e303",363:"f147f90f",378:"94c58921",410:"6157a5b4",412:"1db16fa0",435:"a62bfde7",453:"26c0adbb",551:"5fdeaa02",558:"c1592509",570:"fba3bad4",607:"d977708c",631:"2aaff2f2",723:"b5a37605",815:"05f68a55",911:"de3e4e1c",991:"57d3ca1c"}[e]+".chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="react-blocknote-texteditor:";n.l=(o,r,i,s)=>{if(e[o])e[o].push(r);else{var l,a;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+i){l=d;break}}l||(a=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+i),l.src=o),e[o]=[r];var h=(t,n)=>{l.onerror=l.onload=null,clearTimeout(p);var r=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),a&&document.head.appendChild(l)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/react-blocknote-texteditor/",(()=>{var e={792:0};n.f.j=(t,o)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var i=new Promise((n,o)=>r=e[t]=[n,o]);o.push(r[2]=i);var s=n.p+n.u(t),l=new Error;n.l(s,o=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",l.name="ChunkLoadError",l.type=i,l.request=s,r[1](l)}},"chunk-"+t,t)}};var t=(t,o)=>{var r,i,s=o[0],l=o[1],a=o[2],c=0;if(s.some(t=>0!==e[t])){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(a)a(n)}for(t&&t(o);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},o=self.webpackChunkreact_blocknote_texteditor=self.webpackChunkreact_blocknote_texteditor||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n(5043),r=n.t(o,2),i=n(4391),s=n(7051),l=n(3986);function a(e){this.content=e}a.prototype={constructor:a,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var o=n&&n!=e?this.remove(n):this,r=o.find(e),i=o.content.slice();return-1==r?i.push(n||e,t):(i[r+1]=t,n&&(i[r]=n)),new a(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new a(n)},addToStart:function(e,t){return new a([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new a(n)},addBefore:function(e,t,n){var o=this.remove(t),r=o.content.slice(),i=o.find(e);return r.splice(-1==i?r.length:i,0,t,n),new a(r)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=a.from(e)).size?new a(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=a.from(e)).size?new a(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=a.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},a.from=function(e){if(e instanceof a)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new a(t)};const c=a;function u(e,t,n){for(let o=0;;o++){if(o==e.childCount||o==t.childCount)return e.childCount==t.childCount?null:n;let r=e.child(o),i=t.child(o);if(r!=i){if(!r.sameMarkup(i))return n;if(r.isText&&r.text!=i.text){for(let e=0;r.text[e]==i.text[e];e++)n++;return n}if(r.content.size||i.content.size){let e=u(r.content,i.content,n+1);if(null!=e)return e}n+=r.nodeSize}else n+=r.nodeSize}}function d(e,t,n,o){for(let r=e.childCount,i=t.childCount;;){if(0==r||0==i)return r==i?null:{a:n,b:o};let s=e.child(--r),l=t.child(--i),a=s.nodeSize;if(s!=l){if(!s.sameMarkup(l))return{a:n,b:o};if(s.isText&&s.text!=l.text){let e=0,t=Math.min(s.text.length,l.text.length);for(;e<t&&s.text[s.text.length-e-1]==l.text[l.text.length-e-1];)e++,n--,o--;return{a:n,b:o}}if(s.content.size||l.content.size){let e=d(s.content,l.content,n-1,o-1);if(e)return e}n-=a,o-=a}else n-=a,o-=a}}class h{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;for(let i=0,s=0;s<t;i++){let l=this.content[i],a=s+l.nodeSize;if(a>e&&!1!==n(l,o+s,r||null,i)&&l.content.size){let r=s+1;l.nodesBetween(Math.max(0,e-r),Math.min(l.content.size,t-r),n,o+r)}s=a}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,o){let r="",i=!0;return this.nodesBetween(e,t,(s,l)=>{let a=s.isText?s.text.slice(Math.max(e,l)-l,t-l):s.isLeaf?o?"function"===typeof o?o(s):o:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&a||s.isTextblock)&&n&&(i?i=!1:r+=n),r+=a},0),r}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,o=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(n)&&(o[o.length-1]=t.withText(t.text+n.text),r=1);r<e.content.length;r++)o.push(e.content[r]);return new h(o,this.size+e.size)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&t==this.size)return this;let n=[],o=0;if(t>e)for(let r=0,i=0;i<t;r++){let s=this.content[r],l=i+s.nodeSize;l>e&&((i<e||l>t)&&(s=s.isText?s.cut(Math.max(0,e-i),Math.min(s.text.length,t-i)):s.cut(Math.max(0,e-i-1),Math.min(s.content.size,t-i-1))),n.push(s),o+=s.nodeSize),i=l}return new h(n,o)}cutByIndex(e,t){return e==t?h.empty:0==e&&t==this.content.length?this:new h(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let o=this.content.slice(),r=this.size+t.nodeSize-n.nodeSize;return o[e]=t,new h(o,r)}addToStart(e){return new h([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new h(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let o=this.content[t];e(o,n,t),n+=o.nodeSize}}findDiffStart(e){return u(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}findDiffEnd(e){return d(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size)}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return f(0,e);if(e==this.size)return f(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(let n=0,o=0;;n++){let r=o+this.child(n).nodeSize;if(r>=e)return r==e||t>0?f(n+1,r):f(n,o);o=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return h.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new h(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return h.empty;let t,n=0;for(let o=0;o<e.length;o++){let r=e[o];n+=r.nodeSize,o&&r.isText&&e[o-1].sameMarkup(r)?(t||(t=e.slice(0,o)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new h(t||e,n)}static from(e){if(!e)return h.empty;if(e instanceof h)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new h([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}h.empty=new h([],0);const p={index:0,offset:0};function f(e,t){return p.index=e,p.offset=t,p}function m(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!m(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!m(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class g{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let o=0;o<e.length;o++){let r=e[o];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,o));else{if(r.type.excludes(this.type))return e;!n&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),n=!0),t&&t.push(r)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&m(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type ".concat(t.type," in this schema"));let o=n.create(t.attrs);return n.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return g.none;if(e instanceof g)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}g.none=[];class v extends Error{}class y{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=w(this.content,e+this.openStart,t);return n&&new y(n,this.openStart,this.openEnd)}removeBetween(e,t){return new y(b(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return y.empty;let n=t.openStart||0,o=t.openEnd||0;if("number"!=typeof n||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new y(h.fromJSON(e,t.content),n,o)}static maxOpen(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,o=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let r=e.lastChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.lastChild)o++;return new y(e,n,o)}}function b(e,t,n){let{index:o,offset:r}=e.findIndex(t),i=e.maybeChild(o),{index:s,offset:l}=e.findIndex(n);if(r==t||i.isText){if(l!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(o,i.copy(b(i.content,t-r-1,n-r-1)))}function w(e,t,n,o){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r);if(i==t||s.isText)return o&&!o.canReplace(r,r,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=w(s.content,t-i-1,n);return l&&e.replaceChild(r,s.copy(l))}function k(e,t,n){if(n.openStart>e.depth)throw new v("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new v("Inconsistent open depths");return C(e,t,n,0)}function C(e,t,n,o){let r=e.index(o),i=e.node(o);if(r==t.index(o)&&o<e.depth-n.openStart){let s=C(e,t,n,o+1);return i.copy(i.content.replaceChild(r,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=o||t.depth!=o){let{start:r,end:s}=function(e,t){let n=t.depth-e.openStart,o=t.node(n).copy(e.content);for(let r=n-1;r>=0;r--)o=t.node(r).copy(h.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}(n,e);return D(i,M(e,r,s,t,o))}{let o=e.parent,r=o.content;return D(o,r.cut(0,e.parentOffset).append(n.content).append(r.cut(t.parentOffset)))}}return D(i,N(e,t,o))}function x(e,t){if(!t.type.compatibleContent(e.type))throw new v("Cannot join "+t.type.name+" onto "+e.type.name)}function S(e,t,n){let o=e.node(n);return x(o,t.node(n)),o}function A(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function E(e,t,n,o){let r=(t||e).node(n),i=0,s=t?t.index(n):r.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(A(e.nodeAfter,o),i++));for(let l=i;l<s;l++)A(r.child(l),o);t&&t.depth==n&&t.textOffset&&A(t.nodeBefore,o)}function D(e,t){return e.type.checkContent(t),e.copy(t)}function M(e,t,n,o,r){let i=e.depth>r&&S(e,t,r+1),s=o.depth>r&&S(n,o,r+1),l=[];return E(null,e,r,l),i&&s&&t.index(r)==n.index(r)?(x(i,s),A(D(i,M(e,t,n,o,r+1)),l)):(i&&A(D(i,N(e,t,r+1)),l),E(t,n,r,l),s&&A(D(s,N(n,o,r+1)),l)),E(o,null,r,l),new h(l)}function N(e,t,n){let o=[];if(E(null,e,n,o),e.depth>n){A(D(S(e,t,n+1),N(e,t,n+1)),o)}return E(t,null,n,o),new h(o)}y.empty=new y(h.empty,0,0);class T{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],o=e.child(t);return n?e.child(t).cut(n):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],o=0==t?0:this.path[3*t-1]+1;for(let r=0;r<e;r++)o+=n.child(r).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return g.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),o=e.maybeChild(t);if(!n){let e=n;n=o,o=e}let r=n.marks;for(var i=0;i<r.length;i++)!1!==r[i].type.spec.inclusive||o&&r[i].isInSet(o.marks)||(r=r[i--].removeFromSet(r));return r}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,o=e.parent.maybeChild(e.index());for(var r=0;r<n.length;r++)!1!==n[r].type.spec.inclusive||o&&n[r].isInSet(o.marks)||(n=n[r--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new L(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],o=0,r=t;for(let i=e;;){let{index:e,offset:t}=i.content.findIndex(r),s=r-t;if(n.push(i,e,o+t),!s)break;if(i=i.child(e),i.isText)break;r=s-1,o+=t+1}return new T(t,n,r)}static resolveCached(e,t){let n=_.get(e);if(n)for(let r=0;r<n.elts.length;r++){let e=n.elts[r];if(e.pos==t)return e}else _.set(e,n=new O);let o=n.elts[n.i]=T.resolve(e,t);return n.i=(n.i+1)%P,o}}class O{constructor(){this.elts=[],this.i=0}}const P=12,_=new WeakMap;class L{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const R=Object.create(null);class B{constructor(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.none;this.type=e,this.attrs=t,this.marks=o,this.content=n||h.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,o){return this.content.textBetween(e,t,n,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&m(this.attrs,t||e.defaultAttrs||R)&&g.sameSet(this.marks,n||g.none)}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new B(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new B(this.type,this.attrs,this.content,e)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return y.empty;let o=this.resolve(e),r=this.resolve(t),i=n?0:o.sharedDepth(t),s=o.start(i),l=o.node(i).content.cut(o.pos-s,r.pos-s);return new y(l,o.depth-i,r.depth-i)}replace(e,t,n){return k(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let o=this.content.child(t-1);return{node:o,index:t-1,offset:n-o.nodeSize}}resolve(e){return T.resolveCached(this,e)}resolveNoCache(e){return T.resolve(this,e)}rangeHasMark(e,t,n){let o=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),F(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.empty,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(e).matchFragment(n,o,r),s=i&&i.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let l=o;l<r;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,t,n,o){if(o&&!this.type.allowsMarks(o))return!1;let r=this.contentMatchAt(e).matchType(n),i=r&&r.matchFragment(this.content,t);return!!i&&i.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=g.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!g.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map(e=>e.type.name)));this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let o=h.fromJSON(e,t.content),r=e.nodeType(t.type).create(t.attrs,o,n);return r.type.checkAttrs(r.attrs),r}}B.prototype.text=void 0;class I extends B{constructor(e,t,n,o){if(super(e,t,null,o),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):F(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new I(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new I(this.type,this.attrs,e,this.marks)}cut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function F(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class j{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new z(e,t);if(null==n.next)return j.empty;let o=H(n);n.next&&n.err("Unexpected trailing text");let r=function(e){let t=Object.create(null);return n(G(e,0));function n(o){let r=[];o.forEach(t=>{e[t].forEach(t=>{let n,{term:o,to:i}=t;if(o){for(let e=0;e<r.length;e++)r[e][0]==o&&(n=r[e][1]);G(e,i).forEach(e=>{n||r.push([o,n=[]]),-1==n.indexOf(e)&&n.push(e)})}})});let i=t[o.join(",")]=new j(o.indexOf(e.length-1)>-1);for(let e=0;e<r.length;e++){let o=r[e][1].sort(q);i.next.push({type:r[e][0],next:t[o.join(",")]||n(o)})}return i}}(function(e){let t=[[]];return r(i(e,0),n()),t;function n(){return t.push([])-1}function o(e,n,o){let r={term:o,to:n};return t[e].push(r),r}function r(e,t){e.forEach(e=>e.to=t)}function i(e,t){if("choice"==e.type)return e.exprs.reduce((e,n)=>e.concat(i(n,t)),[]);if("seq"!=e.type){if("star"==e.type){let s=n();return o(t,s),r(i(e.expr,s),s),[o(s)]}if("plus"==e.type){let s=n();return r(i(e.expr,t),s),r(i(e.expr,s),s),[o(s)]}if("opt"==e.type)return[o(t)].concat(i(e.expr,t));if("range"==e.type){let s=t;for(let t=0;t<e.min;t++){let t=n();r(i(e.expr,s),t),s=t}if(-1==e.max)r(i(e.expr,s),s);else for(let t=e.min;t<e.max;t++){let t=n();o(s,t),r(i(e.expr,s),t),s=t}return[o(s)]}if("name"==e.type)return[o(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let o=0;;o++){let s=i(e.exprs[o],t);if(o==e.exprs.length-1)return s;r(s,t=n())}}}(o));return function(e,t){for(let n=0,o=[e];n<o.length;n++){let e=o[n],r=!e.validEnd,i=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];i.push(n.name),!r||n.isText||n.hasRequiredAttrs()||(r=!1),-1==o.indexOf(s)&&o.push(s)}r&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(r,n),r}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,o=this;for(let r=t;o&&r<n;r++)o=o.matchType(e.child(r).type);return o}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=[this];return function r(i,s){let l=i.matchFragment(e,n);if(l&&(!t||l.validEnd))return h.from(s.map(e=>e.createAndFill()));for(let e=0;e<i.next.length;e++){let{type:t,next:n}=i.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==o.indexOf(n)){o.push(n);let e=r(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let o=n.shift(),r=o.match;if(r.matchType(e)){let e=[];for(let t=o;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<r.next.length;e++){let{type:i,next:s}=r.next[e];i.isLeaf||i.hasRequiredAttrs()||i.name in t||o.type&&!s.validEnd||(n.push({match:i.contentMatch,type:i,via:o}),t[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError("There's no ".concat(e,"th edge in this content match"));return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let o=0;o<n.next.length;o++)-1==e.indexOf(n.next[o].next)&&t(n.next[o].next)}(this),e.map((t,n)=>{let o=n+(t.validEnd?"*":" ")+" ";for(let r=0;r<t.next.length;r++)o+=(r?", ":"")+t.next[r].type.name+"->"+e.indexOf(t.next[r].next);return o}).join("\n")}}j.empty=new j(!0);class z{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function H(e){let t=[];do{t.push(V(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function V(e){let t=[];do{t.push(U(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function U(e){let t=function(e){if(e.eat("(")){let t=H(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,o=n[t];if(o)return[o];let r=[];for(let i in n){let e=n[i];e.isInGroup(t)&&r.push(e)}0==r.length&&e.err("No node type or group '"+t+"' found");return r}(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=W(e,t)}return t}function $(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function W(e,t){let n=$(e),o=n;return e.eat(",")&&(o="}"!=e.next?$(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:o,expr:t}}function q(e,t){return t-e}function G(e,t){let n=[];return function t(o){let r=e[o];if(1==r.length&&!r[0].term)return t(r[0].to);n.push(o);for(let e=0;e<r.length;e++){let{term:o,to:i}=r[e];o||-1!=n.indexOf(i)||t(i)}}(t),n.sort(q)}function K(e){let t=Object.create(null);for(let n in e){let o=e[n];if(!o.hasDefault)return null;t[n]=o.default}return t}function Z(e,t){let n=Object.create(null);for(let o in e){let r=t&&t[o];if(void 0===r){let t=e[o];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+o);r=t.default}n[o]=r}return n}function J(e,t,n,o){for(let r in t)if(!(r in e))throw new RangeError("Unsupported attribute ".concat(r," for ").concat(n," of type ").concat(r));for(let r in e){let n=e[r];n.validate&&n.validate(t[r])}}function X(e,t){let n=Object.create(null);if(t)for(let o in t)n[o]=new Y(e,o,t[o]);return n}class Q{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=X(e,n.attrs),this.defaultAttrs=K(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==j.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Z(this.attrs,e)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new B(this,this.computeAttrs(e),h.from(t),g.setFrom(n))}createChecked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=h.from(t),this.checkContent(t),new B(this,this.computeAttrs(e),t,g.setFrom(n))}createAndFill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),t=h.from(t),t.size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let o=this.contentMatch.matchFragment(t),r=o&&o.fillBefore(h.empty,!0);return r?new B(this,e,t.append(r),g.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError("Invalid content for node ".concat(this.name,": ").concat(e.toString().slice(0,50)))}checkAttrs(e){J(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:g.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,o)=>n[e]=new Q(e,t,o));let o=t.spec.topNode||"doc";if(!n[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let r in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class Y{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let o=n.split("|");return n=>{let r=null===n?"null":typeof n;if(o.indexOf(r)<0)throw new RangeError("Expected value of type ".concat(o," for attribute ").concat(t," on type ").concat(e,", got ").concat(r))}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class ee{constructor(e,t,n,o){this.name=e,this.rank=t,this.schema=n,this.spec=o,this.attrs=X(e,o.attrs),this.excluded=null;let r=K(this.attrs);this.instance=r?new g(this,r):null}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new g(this,Z(this.attrs,e))}static compile(e,t){let n=Object.create(null),o=0;return e.forEach((e,r)=>n[e]=new ee(e,o++,t,r)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){J(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class te{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=c.from(e.nodes),t.marks=c.from(e.marks||{}),this.nodes=Q.compile(this.spec.nodes,this),this.marks=ee.compile(this.spec.marks,this);let n=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let e=this.nodes[o],t=e.spec.content||"",r=e.spec.marks;if(e.contentMatch=n[t]||(n[t]=j.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==r?null:r?ne(this,r.split(" ")):""!=r&&e.inlineContent?null:[]}for(let o in this.marks){let e=this.marks[o],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:ne(this,t.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Q))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,o)}text(e,t){let n=this.nodes.text;return new I(n,n.defaultAttrs,e,g.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return B.fromJSON(this,e)}markFromJSON(e){return g.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function ne(e,t){let n=[];for(let o=0;o<t.length;o++){let r=t[o],i=e.marks[r],s=i;if(i)n.push(i);else for(let t in e.marks){let o=e.marks[t];("_"==r||o.spec.group&&o.spec.group.split(" ").indexOf(r)>-1)&&n.push(s=o)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[o]+"'")}return n}class oe{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(function(e){return null!=e.tag}(e))this.tags.push(e);else if(function(e){return null!=e.style}(e)){let t=/[^=]*/.exec(e.style)[0];n.indexOf(t)<0&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ce(this,t,!1);return n.addAll(e,g.none,t.from,t.to),n.finish()}parseSlice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ce(this,t,!0);return n.addAll(e,g.none,t.from,t.to),y.maxOpen(n.finish())}matchTag(e,t,n){for(let o=n?this.tags.indexOf(n)+1:0;o<this.tags.length;o++){let n=this.tags[o];if(ue(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,o){for(let r=o?this.styles.indexOf(o)+1:0;r<this.styles.length;r++){let o=this.styles[r],i=o.style;if(!(0!=i.indexOf(e)||o.context&&!n.matchesContext(o.context)||i.length>e.length&&(61!=i.charCodeAt(e.length)||i.slice(e.length+1)!=t))){if(o.getAttrs){let e=o.getAttrs(t);if(!1===e)continue;o.attrs=e||void 0}return o}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,o=0;for(;o<t.length;o++){let e=t[o];if((null==e.priority?50:e.priority)<n)break}t.splice(o,0,e)}for(let o in e.marks){let t=e.marks[o].spec.parseDOM;t&&t.forEach(e=>{n(e=de(e)),e.mark||e.ignore||e.clearMark||(e.mark=o)})}for(let o in e.nodes){let t=e.nodes[o].spec.parseDOM;t&&t.forEach(e=>{n(e=de(e)),e.node||e.ignore||e.mark||(e.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new oe(e,oe.schemaRules(e)))}}const re={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ie={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},se={ol:!0,ul:!0};function le(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class ae{constructor(e,t,n,o,r,i){this.type=e,this.attrs=t,this.marks=n,this.solid=o,this.options=i,this.content=[],this.activeMarks=g.none,this.match=r||(4&i?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(h.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=h.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(h.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!re.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ce{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let o,r=t.topNode,i=le(null,t.preserveWhitespace,0)|(n?4:0);o=r?new ae(r.type,r.attrs,g.none,!0,t.topMatch||r.type.contentMatch,i):new ae(n?null:e.schema.topNodeType,null,g.none,!0,null,i),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,o=this.top,r=2&o.options?"full":this.localPreserveWS||(1&o.options)>0;if("full"===r||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r)n="full"!==r?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=o.content[o.content.length-1],r=e.previousSibling;(!t||r&&"BR"==r.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let o=this.localPreserveWS,r=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i,s=e.nodeName.toLowerCase();se.hasOwnProperty(s)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&se.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));e:if(l?l.ignore:ie.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let n,o=this.needsBlock;if(re.hasOwnProperty(s))r.content.length&&r.content[0].isInline&&this.open&&(this.open--,r=this.top),n=!0,r.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let i=l&&l.skip?t:this.readStyles(e,t);i&&this.addAll(e,i),n&&this.sync(r),this.needsBlock=o}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,l,n,!1===l.consuming?i:void 0)}this.localPreserveWS=o}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let e=this.parser.matchedStyles[o],r=n.getPropertyValue(e);if(r)for(let n;;){let o=this.parser.matchStyle(e,r,this,n);if(!o)break;if(o.ignore)return null;if(t=o.clearMark?t.filter(e=>!o.clearMark(e)):t.concat(this.parser.schema.marks[o.mark].create(o.attrs)),!1!==o.consuming)break;n=o}}return t}addElementByRule(e,t,n,o){let r,i;if(t.node)if(i=this.parser.schema.nodes[t.node],i.isLeaf)this.insertNode(i.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{let e=this.enter(i,t.attrs||null,n,t.preserveWhitespace);e&&(r=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let s=this.top;if(i&&i.isLeaf)this.findInside(e);else if(o)this.addElement(e,n,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n,!1));else{let o=e;"string"==typeof t.contentElement?o=e.querySelector(t.contentElement):"function"==typeof t.contentElement?o=t.contentElement(e):t.contentElement&&(o=t.contentElement),this.findAround(e,o,!0),this.addAll(o,n),this.findAround(e,o,!1)}r&&this.sync(s)&&this.open--}addAll(e,t,n,o){let r=n||0;for(let i=n?e.childNodes[n]:e.firstChild,s=null==o?null:e.childNodes[o];i!=s;i=i.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(i,t);this.findAtPoint(e,r)}findPlace(e,t,n){let o,r;for(let i=this.open,s=0;i>=0;i--){let t=this.nodes[i],l=t.findWrapping(e);if(l&&(!o||o.length>l.length+s)&&(o=l,r=t,!l.length))break;if(t.solid){if(n)break;s+=2}}if(!o)return null;this.sync(r);for(let i=0;i<o.length;i++)t=this.enterInner(o[i],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let o=this.findPlace(e,t,n);if(o){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let n=g.none;for(let r of o.concat(e.marks))(t.type?t.type.allowsMarkType(r.type):he(r.type,e.type))&&(n=r.addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n,o){let r=this.findPlace(e.create(t),n,!1);return r&&(r=this.enterInner(e,t,n,!0,o)),r}enterInner(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let s=le(e,r,i.options);4&i.options&&0==i.content.length&&(s|=4);let l=g.none;return n=n.filter(t=>!(i.type?i.type.allowsMarkType(t.type):he(t.type,e))||(l=t.addToSet(l),!1)),this.nodes.push(new ae(e,t,l,o,null,s)),this.open++,n}closeExtra(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)if(null==this.find[o].pos&&1==e.nodeType&&e.contains(this.find[o].node)){t.compareDocumentPosition(this.find[o].node)&(n?2:4)&&(this.find[o].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,o=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),r=-(n?n.depth+1:0)+(o?0:1),i=(e,s)=>{for(;e>=0;e--){let l=t[e];if(""==l){if(e==t.length-1||0==e)continue;for(;s>=r;s--)if(i(e-1,s))return!0;return!1}{let e=s>0||0==s&&o?this.nodes[s].type:n&&s>=r?n.node(s-r).type:null;if(!e||e.name!=l&&!e.isInGroup(l))return!1;s--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}}function ue(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function de(e){let t={};for(let n in e)t[n]=e[n];return t}function he(e,t){let n=t.schema.nodes;for(let o in n){let r=n[o];if(!r.allowsMarkType(e))continue;let i=[],s=e=>{i.push(e);for(let n=0;n<e.edgeCount;n++){let{type:o,next:r}=e.edge(n);if(o==t)return!0;if(i.indexOf(r)<0&&s(r))return!0}};if(s(r.contentMatch))return!0}}class pe{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n||(n=me(t).createDocumentFragment());let o=n,r=[];return e.forEach(e=>{if(r.length||e.marks.length){let n=0,i=0;for(;n<r.length&&i<e.marks.length;){let t=e.marks[i];if(this.marks[t.type.name]){if(!t.eq(r[n][0])||!1===t.type.spec.spanning)break;n++,i++}else i++}for(;n<r.length;)o=r.pop()[1];for(;i<e.marks.length;){let n=e.marks[i++],s=this.serializeMark(n,e.isInline,t);s&&(r.push([n,o]),o.appendChild(s.dom),o=s.contentDOM||s.dom)}}o.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:o}=ye(me(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return n}serializeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let r=this.serializeMark(e.marks[o],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n}serializeMark(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.marks[e.type.name];return o&&ye(me(n),o(e,t),null,e.attrs)}static renderSpec(e,t){return ye(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new pe(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=fe(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return fe(e.marks)}}function fe(e){let t={};for(let n in e){let o=e[n].spec.toDOM;o&&(t[n]=o)}return t}function me(e){return e.document||window.document}const ge=new WeakMap;function ve(e){let t=ge.get(e);return void 0===t&&ge.set(e,t=function(e){let t=null;function n(e){if(e&&"object"==typeof e)if(Array.isArray(e))if("string"==typeof e[0])t||(t=[]),t.push(e);else for(let t=0;t<e.length;t++)n(e[t]);else for(let t in e)n(e[t])}return n(e),t}(e)),t}function ye(e,t,n,o){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let r,i=t[0];if("string"!=typeof i)throw new RangeError("Invalid array passed to renderSpec");if(o&&(r=ve(o))&&r.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s,l=i.indexOf(" ");l>0&&(n=i.slice(0,l),i=i.slice(l+1));let a=n?e.createElementNS(n,i):e.createElement(i),c=t[1],u=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){u=2;for(let e in c)if(null!=c[e]){let t=e.indexOf(" ");t>0?a.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):a.setAttribute(e,c[e])}}for(let d=u;d<t.length;d++){let r=t[d];if(0===r){if(d<t.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}{let{dom:t,contentDOM:i}=ye(e,r,n,o);if(a.appendChild(t),i){if(s)throw new RangeError("Multiple content holes");s=i}}}return{dom:a,contentDOM:s}}const be=Math.pow(2,16);function we(e,t){return e+t*be}function ke(e){return 65535&e}class Ce{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class xe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ranges=e,this.inverted=t,!e.length&&xe.empty)return xe.empty}recover(e){let t=0,n=ke(e);if(!this.inverted)for(let o=0;o<n;o++)t+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/be}(e)}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}_map(e,t,n){let o=0,r=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let l=this.ranges[s]-(this.inverted?o:0);if(l>e)break;let a=this.ranges[s+r],c=this.ranges[s+i],u=l+a;if(e<=u){let r=l+o+((a?e==l?-1:e==u?1:t:t)<0?0:c);if(n)return r;let i=e==(t<0?l:u)?null:we(s/3,e-l),d=e==l?2:e==u?1:4;return(t<0?e!=l:e!=u)&&(d|=8),new Ce(r,d,i)}o+=c-a}return n?e+o:new Ce(e+o,0,null)}touches(e,t){let n=0,o=ke(t),r=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let t=this.ranges[s]-(this.inverted?n:0);if(t>e)break;let l=this.ranges[s+r];if(e<=t+l&&s==3*o)return!0;n+=this.ranges[s+i]-l}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let o=0,r=0;o<this.ranges.length;o+=3){let i=this.ranges[o],s=i-(this.inverted?r:0),l=i+(this.inverted?0:r),a=this.ranges[o+t],c=this.ranges[o+n];e(s,s+a,l,l+c),r+=c-a}}invert(){return new xe(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?xe.empty:new xe(e<0?[0,-e,0]:[0,0,e])}}xe.empty=new xe([]);class Se{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e?e.length:0;this.mirror=t,this.from=n,this.to=o,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new Se(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let o=e.getMirror(t);this.appendMap(e._maps[t],null!=o&&o<t?n+o:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=o&&o>t?n-o-1:void 0)}}invert(){let e=new Se;return e.appendMappingInverted(this),e}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}_map(e,t,n){let o=0;for(let r=this.from;r<this.to;r++){let n=this._maps[r].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(r);if(null!=t&&t>r&&t<this.to){r=t,e=this._maps[t].recover(n.recover);continue}}o|=n.delInfo,e=n.pos}return n?e:new Ce(e,o,null)}}const Ae=Object.create(null);class Ee{getMap(){return xe.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Ae[t.stepType];if(!n)throw new RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}static jsonID(e,t){if(e in Ae)throw new RangeError("Duplicate use of step JSON ID "+e);return Ae[e]=t,t.prototype.jsonID=e,t}}class De{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new De(e,null)}static fail(e){return new De(null,e)}static fromReplace(e,t,n,o){try{return De.ok(e.replace(t,n,o))}catch(r){if(r instanceof v)return De.fail(r.message);throw r}}}function Me(e,t,n){let o=[];for(let r=0;r<e.childCount;r++){let i=e.child(r);i.content.size&&(i=i.copy(Me(i.content,t,i))),i.isInline&&(i=t(i,n,r)),o.push(i)}return h.fromArray(o)}class Ne extends Ee{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),o=n.node(n.sharedDepth(this.to)),r=new y(Me(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,o),t.openStart,t.openEnd);return De.fromReplace(e,this.from,this.to,r)}invert(){return new Te(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Ne(t.pos,n.pos,this.mark)}merge(e){return e instanceof Ne&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ne(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ne(t.from,t.to,e.markFromJSON(t.mark))}}Ee.jsonID("addMark",Ne);class Te extends Ee{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new y(Me(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return De.fromReplace(e,this.from,this.to,n)}invert(){return new Ne(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Te(t.pos,n.pos,this.mark)}merge(e){return e instanceof Te&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Te(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Te(t.from,t.to,e.markFromJSON(t.mark))}}Ee.jsonID("removeMark",Te);class Oe extends Ee{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return De.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return De.fromReplace(e,this.pos,this.pos+1,new y(h.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new Oe(this.pos,t.marks[n]);return new Oe(this.pos,this.mark)}}return new Pe(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Oe(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Oe(t.pos,e.markFromJSON(t.mark))}}Ee.jsonID("addNodeMark",Oe);class Pe extends Ee{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return De.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return De.fromReplace(e,this.pos,this.pos+1,new y(h.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new Oe(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Pe(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Pe(t.pos,e.markFromJSON(t.mark))}}Ee.jsonID("removeNodeMark",Pe);class _e extends Ee{constructor(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.from=e,this.to=t,this.slice=n,this.structure=o}apply(e){return this.structure&&Re(e,this.from,this.to)?De.fail("Structure replace would overwrite content"):De.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new xe([this.from,this.to-this.from,this.slice.size])}invert(e){return new _e(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new _e(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof _e)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?y.empty:new y(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new _e(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?y.empty:new y(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new _e(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new _e(t.from,t.to,y.fromJSON(e,t.slice),!!t.structure)}}Ee.jsonID("replace",_e);class Le extends Ee{constructor(e,t,n,o,r,i){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=o,this.slice=r,this.insert=i,this.structure=s}apply(e){if(this.structure&&(Re(e,this.from,this.gapFrom)||Re(e,this.gapTo,this.to)))return De.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return De.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?De.fromReplace(e,this.from,this.to,n):De.fail("Content does not fit in gap")}getMap(){return new xe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Le(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),r=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||o<t.pos||r>n.pos?null:new Le(t.pos,n.pos,o,r,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Le(t.from,t.to,t.gapFrom,t.gapTo,y.fromJSON(e,t.slice),t.insert,!!t.structure)}}function Re(e,t,n){let o=e.resolve(t),r=n-t,i=o.depth;for(;r>0&&i>0&&o.indexAfter(i)==o.node(i).childCount;)i--,r--;if(r>0){let e=o.node(i).maybeChild(o.indexAfter(i));for(;r>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,r--}}return!1}function Be(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e.doc.nodeAt(t),s=[],l=t+1;for(let a=0;a<i.childCount;a++){let t=i.child(a),c=l+t.nodeSize,u=o.matchType(t.type);if(u){o=u;for(let o=0;o<t.marks.length;o++)n.allowsMarkType(t.marks[o].type)||e.step(new Te(l,c,t.marks[o]));if(r&&t.isText&&"pre"!=n.whitespace){let e,o,r=/\r?\n|\r/g;for(;e=r.exec(t.text);)o||(o=new y(h.from(n.schema.text(" ",n.allowedMarks(t.marks))),0,0)),s.push(new _e(l+e.index,l+e.index+e[0].length,o))}}else s.push(new _e(l,c,y.empty));l=c}if(!o.validEnd){let t=o.fillBefore(h.empty,!0);e.replace(l,l,new y(t,0,0))}for(let a=s.length-1;a>=0;a--)e.step(s[a])}function Ie(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Fe(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let o=e.$from.node(n),r=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&o.canReplace(r,i,t))return n;if(0==n||o.type.spec.isolating||!Ie(o,r,i))break}return null}function je(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=function(e,t){let{parent:n,startIndex:o,endIndex:r}=e,i=n.contentMatchAt(o).findWrapping(t);if(!i)return null;let s=i.length?i[0]:t;return n.canReplaceWith(o,r,s)?i:null}(e,t),i=r&&function(e,t){let{parent:n,startIndex:o,endIndex:r}=e,i=n.child(o),s=t.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let a=o;l&&a<r;a++)l=l.matchType(n.child(a).type);return l&&l.validEnd?s:null}(o,t);return i?r.map(ze).concat({type:t,attrs:n}).concat(i.map(ze)):null}function ze(e){return{type:e,attrs:null}}function He(e,t,n,o){t.forEach((r,i)=>{if(r.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(r.text);){let r=e.mapping.slice(o).map(n+1+i+s.index);e.replaceWith(r,r+1,t.type.schema.linebreakReplacement.create())}}})}function Ve(e,t,n,o){t.forEach((r,i)=>{if(r.type==r.type.schema.linebreakReplacement){let r=e.mapping.slice(o).map(n+1+i);e.replaceWith(r,r+1,t.type.schema.text("\n"))}})}function Ue(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,r=e.resolve(t),i=r.depth-n,s=o&&o[o.length-1]||r.parent;if(i<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,u=n-2;c>i;c--,u--){let e=r.node(c),t=r.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),i=o&&o[u+1];i&&(n=n.replaceChild(0,i.type.create(i.attrs)));let s=o&&o[u]||e;if(!e.canReplace(t+1,e.childCount)||!s.type.validContent(n))return!1}let l=r.indexAfter(i),a=o&&o[0];return r.node(i).canReplaceWith(l,l,a?a.type:r.node(i+1).type)}function $e(e,t){let n=e.resolve(t),o=n.index();return We(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(o,o+1)}function We(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:o}=e.type.schema;for(let r=0;r<t.childCount;r++){let i=t.child(r),s=i.type==o?e.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n)return!1;if(!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(e,t))}function qe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=e.resolve(t);for(let r=o.depth;;r--){let e,i,s=o.index(r);if(r==o.depth?(e=o.nodeBefore,i=o.nodeAfter):n>0?(e=o.node(r+1),s++,i=o.node(r).maybeChild(s)):(e=o.node(r).maybeChild(s-1),i=o.node(r+1)),e&&!e.isTextblock&&We(e,i)&&o.node(r).canReplace(s,s+1))return t;if(0==r)break;t=n<0?o.before(r):o.after(r)}}function Ge(e,t,n){let o=e.resolve(t);if(!n.content.size)return t;let r=n.content;for(let i=0;i<n.openStart;i++)r=r.firstChild.content;for(let i=1;i<=(0==n.openStart&&n.size?2:1);i++)for(let e=o.depth;e>=0;e--){let t=e==o.depth?0:o.pos<=(o.start(e+1)+o.end(e+1))/2?-1:1,n=o.index(e)+(t>0?1:0),s=o.node(e),l=!1;if(1==i)l=s.canReplace(n,n,r);else{let e=s.contentMatchAt(n).findWrapping(r.firstChild.type);l=e&&s.canReplaceWith(n,n,e[0])}if(l)return 0==t?o.pos:t<0?o.before(e+1):o.after(e+1)}return null}function Ke(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y.empty;if(t==n&&!o.size)return null;let r=e.resolve(t),i=e.resolve(n);return Ze(r,i,o)?new _e(t,n,o):new Je(r,i,o).fit()}function Ze(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Ee.jsonID("replaceAround",Le);class Je{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=h.empty;for(let o=0;o<=e.depth;o++){let t=e.node(o);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=h.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,o=this.close(e<0?this.$to:n.doc.resolve(e));if(!o)return null;let r=this.placed,i=n.depth,s=o.depth;for(;i&&s&&1==r.childCount;)r=r.firstChild.content,i--,s--;let l=new y(r,i,s);return e>-1?new Le(n.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||n.pos!=this.$to.pos?new _e(n.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,o=this.unplaced.openEnd;n<e;n++){let r=t.firstChild;if(t.childCount>1&&(o=0),r.type.spec.isolating&&o<=n){e=n;break}t=r.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,o=null;n?(o=Ye(this.unplaced.content,n-1).firstChild,e=o.content):e=this.unplaced.content;let r=e.firstChild;for(let i=this.depth;i>=0;i--){let e,{type:s,match:l}=this.frontier[i],a=null;if(1==t&&(r?l.matchType(r.type)||(a=l.fillBefore(h.from(r),!1)):o&&s.compatibleContent(o.type)))return{sliceDepth:n,frontierDepth:i,parent:o,inject:a};if(2==t&&r&&(e=l.findWrapping(r.type)))return{sliceDepth:n,frontierDepth:i,parent:o,wrap:e};if(o&&l.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,o=Ye(e,t);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new y(e,t+1,Math.max(n,o.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,o=Ye(e,t);if(o.childCount<=1&&t>0){let r=e.size-t<=t+o.size;this.unplaced=new y(Xe(e,t-1,1),t-1,r?t-1:n)}else this.unplaced=new y(Xe(e,t,1),t,n)}placeNodes(e){let{sliceDepth:t,frontierDepth:n,parent:o,inject:r,wrap:i}=e;for(;this.depth>n;)this.closeFrontierNode();if(i)for(let h=0;h<i.length;h++)this.openFrontierNode(i[h]);let s=this.unplaced,l=o?o.content:s.content,a=s.openStart-t,c=0,u=[],{match:d,type:p}=this.frontier[n];if(r){for(let e=0;e<r.childCount;e++)u.push(r.child(e));d=d.matchFragment(r)}let f=l.size+t-(s.content.size-s.openEnd);for(;c<l.childCount;){let e=l.child(c),t=d.matchType(e.type);if(!t)break;c++,(c>1||0==a||e.content.size)&&(d=t,u.push(et(e.mark(p.allowedMarks(e.marks)),1==c?a:0,c==l.childCount?f:-1)))}let m=c==l.childCount;m||(f=-1),this.placed=Qe(this.placed,n,h.from(u)),this.frontier[n].match=d,m&&f<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let h=0,g=l;h<f;h++){let e=g.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),g=e.content}this.unplaced=m?0==t?y.empty:new y(Xe(s.content,t-1,1),t-1,f<0?s.openEnd:t-1):new y(Xe(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!tt(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,o=this.$to.after(n);for(;n>1&&o==this.$to.end(--n);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:o}=this.frontier[t],r=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=tt(e,t,o,n,r);if(i){for(let n=t-1;n>=0;n--){let{match:t,type:o}=this.frontier[n],r=tt(e,n,o,t,!0);if(!r||r.childCount)continue e}return{depth:t,fit:i,move:r?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Qe(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),o=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,o)}return e}openFrontierNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Qe(this.placed,this.depth,h.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(h.empty,!0);e.childCount&&(this.placed=Qe(this.placed,this.frontier.length,e))}}function Xe(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Xe(e.firstChild.content,t-1,n)))}function Qe(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Qe(e.lastChild.content,t-1,n)))}function Ye(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function et(e,t,n){if(t<=0)return e;let o=e.content;return t>1&&(o=o.replaceChild(0,et(o.firstChild,t-1,1==o.childCount?n-1:0))),t>0&&(o=e.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(e.type.contentMatch.matchFragment(o).fillBefore(h.empty,!0)))),e.copy(o)}function tt(e,t,n,o,r){let i=e.node(t),s=r?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let l=o.fillBefore(i.content,!0,s);return l&&!function(e,t,n){for(let o=n;o<t.childCount;o++)if(!e.allowsMarks(t.child(o).marks))return!0;return!1}(n,i.content,s)?l:null}function nt(e){return e.spec.defining||e.spec.definingForContent}function ot(e,t,n,o,r){if(t<n){let r=e.firstChild;e=e.replaceChild(0,r.copy(ot(r.content,t+1,n,o,r)))}if(t>o){let t=r.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(h.empty,!0))}return e}function rt(e,t){let n=[];for(let o=Math.min(e.depth,t.depth);o>=0;o--){let r=e.start(o);if(r<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(r==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==r-1)&&n.push(o)}return n}class it extends Ee{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return De.fail("No node at attribute step's position");let n=Object.create(null);for(let r in t.attrs)n[r]=t.attrs[r];n[this.attr]=this.value;let o=t.type.create(n,null,t.marks);return De.fromReplace(e,this.pos,this.pos+1,new y(h.from(o),0,t.isLeaf?0:1))}getMap(){return xe.empty}invert(e){return new it(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new it(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new it(t.pos,t.attr,t.value)}}Ee.jsonID("attr",it);class st extends Ee{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return De.ok(n)}getMap(){return xe.empty}invert(e){return new st(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new st(t.attr,t.value)}}Ee.jsonID("docAttr",st);let lt=class extends Error{};lt=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(lt.prototype=Object.create(Error.prototype)).constructor=lt,lt.prototype.name="TransformError";class at{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Se}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new lt(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.empty,o=Ke(this.doc,e,t,n);return o&&this.step(o),this}replaceWith(e,t,n){return this.replace(e,t,new y(h.from(n),0,0))}delete(e,t){return this.replace(e,t,y.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,o){if(!o.size)return e.deleteRange(t,n);let r=e.doc.resolve(t),i=e.doc.resolve(n);if(Ze(r,i,o))return e.step(new _e(t,n,o));let s=rt(r,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let l=-(r.depth+1);s.unshift(l);for(let h=r.depth,p=r.pos-1;h>0;h--,p--){let e=r.node(h).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;s.indexOf(h)>-1?l=h:r.before(h)==p&&s.splice(1,0,-h)}let a=s.indexOf(l),c=[],u=o.openStart;for(let h=o.content,p=0;;p++){let e=h.firstChild;if(c.push(e),p==o.openStart)break;h=e.content}for(let h=u-1;h>=0;h--){let e=c[h],t=nt(e.type);if(t&&!e.sameMarkup(r.node(Math.abs(l)-1)))u=h;else if(t||!e.type.isTextblock)break}for(let h=o.openStart;h>=0;h--){let t=(h+u+1)%(o.openStart+1),l=c[t];if(l)for(let c=0;c<s.length;c++){let u=s[(c+a)%s.length],d=!0;u<0&&(d=!1,u=-u);let h=r.node(u-1),p=r.index(u-1);if(h.canReplaceWith(p,p,l.type,l.marks))return e.replace(r.before(u),d?i.after(u):n,new y(ot(o.content,0,o.openStart,t),t,o.openEnd))}}let d=e.steps.length;for(let h=s.length-1;h>=0&&(e.replace(t,n,o),!(e.steps.length>d));h--){let e=s[h];e<0||(t=r.before(e),n=i.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,o){if(!o.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let r=function(e,t,n){let o=e.resolve(t);if(o.parent.canReplaceWith(o.index(),o.index(),n))return t;if(0==o.parentOffset)for(let r=o.depth-1;r>=0;r--){let e=o.index(r);if(o.node(r).canReplaceWith(e,e,n))return o.before(r+1);if(e>0)return null}if(o.parentOffset==o.parent.content.size)for(let r=o.depth-1;r>=0;r--){let e=o.indexAfter(r);if(o.node(r).canReplaceWith(e,e,n))return o.after(r+1);if(e<o.node(r).childCount)return null}return null}(e.doc,t,o.type);null!=r&&(t=n=r)}e.replaceRange(t,n,new y(h.from(o),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let o=e.doc.resolve(t),r=e.doc.resolve(n),i=rt(o,r);for(let s=0;s<i.length;s++){let t=i[s],n=s==i.length-1;if(n&&0==t||o.node(t).type.contentMatch.validEnd)return e.delete(o.start(t),r.end(t));if(t>0&&(n||o.node(t-1).canReplace(o.index(t-1),r.indexAfter(t-1))))return e.delete(o.before(t),r.after(t))}for(let s=1;s<=o.depth&&s<=r.depth;s++)if(t-o.start(s)==o.depth-s&&n>o.end(s)&&r.end(s)-n!=r.depth-s&&o.start(s-1)==r.start(s-1)&&o.node(s-1).canReplace(o.index(s-1),r.index(s-1)))return e.delete(o.before(s),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:o,$to:r,depth:i}=t,s=o.before(i+1),l=r.after(i+1),a=s,c=l,u=h.empty,d=0;for(let m=i,g=!1;m>n;m--)g||o.index(m)>0?(g=!0,u=h.from(o.node(m).copy(u)),d++):a--;let p=h.empty,f=0;for(let m=i,g=!1;m>n;m--)g||r.after(m+1)<r.end(m)?(g=!0,p=h.from(r.node(m).copy(p)),f++):c++;e.step(new Le(a,c,s,l,new y(u.append(p),d,f),u.size-d,!0))}(this,e,t),this}join(e){return function(e,t,n){let o=null,{linebreakReplacement:r}=e.doc.type.schema,i=e.doc.resolve(t-n),s=i.node().type;if(r&&s.inlineContent){let e="pre"==s.whitespace,t=!!s.contentMatch.matchType(r);e&&!t?o=!1:!e&&t&&(o=!0)}let l=e.steps.length;if(!1===o){let o=e.doc.resolve(t+n);Ve(e,o.node(),o.before(),l)}s.inlineContent&&Be(e,t+n-1,s,i.node().contentMatchAt(i.index()),null==o);let a=e.mapping.slice(l),c=a.map(t-n);if(e.step(new _e(c,a.map(t+n,-1),y.empty,!0)),!0===o){let t=e.doc.resolve(c);He(e,t.node(),t.before(),e.steps.length)}}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}wrap(e,t){return function(e,t,n){let o=h.empty;for(let s=n.length-1;s>=0;s--){if(o.size){let e=n[s].type.contentMatch.matchFragment(o);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}o=h.from(n[s].type.create(n[s].attrs,o))}let r=t.start,i=t.end;e.step(new Le(r,i,r,i,new y(o,0,0),n.length,!0))}(this,e,t),this}setBlockType(e){return function(e,t,n,o,r){if(!o.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{let s="function"==typeof r?r(t):r;if(t.isTextblock&&!t.hasMarkup(o,s)&&function(e,t,n){let o=e.resolve(t),r=o.index();return o.parent.canReplaceWith(r,r+1,n)}(e.doc,e.mapping.slice(i).map(n),o)){let r=null;if(o.schema.linebreakReplacement){let e="pre"==o.whitespace,t=!!o.contentMatch.matchType(o.schema.linebreakReplacement);e&&!t?r=!1:!e&&t&&(r=!0)}!1===r&&Ve(e,t,n,i),Be(e,e.mapping.slice(i).map(n,1),o,void 0,null===r);let l=e.mapping.slice(i),a=l.map(n,1),c=l.map(n+t.nodeSize,1);return e.step(new Le(a,c,a+1,c-1,new y(h.from(o.create(s,null,t.marks)),0,0),1,!0)),!0===r&&He(e,t,n,i),!1}})}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}setNodeMarkup(e,t){return function(e,t,n,o,r){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(o,null,r||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Le(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new y(h.from(s),0,0),1,!0))}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}setNodeAttribute(e,t,n){return this.step(new it(e,t,n)),this}setDocAttribute(e,t){return this.step(new st(e,t)),this}addNodeMark(e,t){return this.step(new Oe(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof g)t.isInSet(n.marks)&&this.step(new Pe(e,t));else{let o,r=n.marks,i=[];for(;o=t.isInSet(r);)i.push(new Pe(e,o)),r=o.removeFromSet(r);for(let e=i.length-1;e>=0;e--)this.step(i[e])}return this}split(e){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,r=e.doc.resolve(t),i=h.empty,s=h.empty;for(let l=r.depth,a=r.depth-n,c=n-1;l>a;l--,c--){i=h.from(r.node(l).copy(i));let e=o&&o[c];s=h.from(e?e.type.create(e.attrs,s):r.node(l).copy(s))}e.step(new _e(t,t,new y(i.append(s),n,n),!0))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}addMark(e,t,n){return function(e,t,n,o){let r,i,s=[],l=[];e.doc.nodesBetween(t,n,(e,a,c)=>{if(!e.isInline)return;let u=e.marks;if(!o.isInSet(u)&&c.type.allowsMarkType(o.type)){let c=Math.max(a,t),d=Math.min(a+e.nodeSize,n),h=o.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(r&&r.to==c&&r.mark.eq(u[e])?r.to=d:s.push(r=new Te(c,d,u[e])));i&&i.to==c?i.to=d:l.push(i=new Ne(c,d,o))}}),s.forEach(t=>e.step(t)),l.forEach(t=>e.step(t))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,o){let r=[],i=0;e.doc.nodesBetween(t,n,(e,s)=>{if(!e.isInline)return;i++;let l=null;if(o instanceof ee){let t,n=e.marks;for(;t=o.isInSet(n);)(l||(l=[])).push(t),n=t.removeFromSet(n)}else o?o.isInSet(e.marks)&&(l=[o]):l=e.marks;if(l&&l.length){let o=Math.min(s+e.nodeSize,n);for(let e=0;e<l.length;e++){let n,a=l[e];for(let e=0;e<r.length;e++){let t=r[e];t.step==i-1&&a.eq(r[e].style)&&(n=t)}n?(n.to=o,n.step=i):r.push({style:a,from:Math.max(s,t),to:o,step:i})}}}),r.forEach(t=>e.step(new Te(t.from,t.to,t.style)))}(this,e,t,n),this}clearIncompatible(e,t,n){return Be(this,e,t,n),this}}const ct=Object.create(null);class ut{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new dt(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.empty,n=t.content.lastChild,o=null;for(let s=0;s<t.openEnd;s++)o=n,n=n.lastChild;let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:l,$to:a}=i[s],c=e.mapping.slice(r);e.replaceRange(c.map(l.pos),c.map(a.pos),s?y.empty:t),0==s&&kt(e,r,(n?n.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,o=this.ranges;for(let r=0;r<o.length;r++){let{$from:i,$to:s}=o[r],l=e.mapping.slice(n),a=l.map(i.pos),c=l.map(s.pos);r?e.deleteRange(a,c):(e.replaceRangeWith(a,c,t),kt(e,n,t.isInline?-1:1))}}static findFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.parent.inlineContent?new ft(e):wt(e.node(0),e.parent,e.pos,e.index(),t,n);if(o)return o;for(let r=e.depth-1;r>=0;r--){let o=t<0?wt(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):wt(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(o)return o}return null}static near(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new yt(e.node(0))}static atStart(e){return wt(e,e,0,0,1)||new yt(e)}static atEnd(e){return wt(e,e,e.content.size,e.childCount,-1)||new yt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=ct[t.type];if(!n)throw new RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}static jsonID(e,t){if(e in ct)throw new RangeError("Duplicate use of selection JSON ID "+e);return ct[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ft.between(this.$anchor,this.$head).getBookmark()}}ut.prototype.visible=!0;class dt{constructor(e,t){this.$from=e,this.$to=t}}let ht=!1;function pt(e){ht||e.parent.inlineContent||(ht=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class ft extends ut{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;pt(e),pt(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return ut.near(n);let o=e.resolve(t.map(this.anchor));return new ft(o.parent.inlineContent?o:n,n)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.empty;if(super.replace(e,t),t==y.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof ft&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new mt(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new ft(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=e.resolve(t);return new this(o,n==t?o:e.resolve(n))}static between(e,t,n){let o=e.pos-t.pos;if(n&&!o||(n=o>=0?1:-1),!t.parent.inlineContent){let e=ut.findFrom(t,n,!0)||ut.findFrom(t,-n,!0);if(!e)return ut.near(t,n);t=e.$head}return e.parent.inlineContent||(0==o||(e=(ut.findFrom(e,-n,!0)||ut.findFrom(e,n,!0)).$anchor).pos<t.pos!=o<0)&&(e=t),new ft(e,t)}}ut.jsonID("text",ft);class mt{constructor(e,t){this.anchor=e,this.head=t}map(e){return new mt(e.map(this.anchor),e.map(this.head))}resolve(e){return ft.between(e.resolve(this.anchor),e.resolve(this.head))}}class gt extends ut{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:o}=t.mapResult(this.anchor),r=e.resolve(o);return n?ut.near(r):new gt(r)}content(){return new y(h.from(this.node),0,0)}eq(e){return e instanceof gt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new vt(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new gt(e.resolve(t.anchor))}static create(e,t){return new gt(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}gt.prototype.visible=!1,ut.jsonID("node",gt);class vt{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new mt(n,n):new vt(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&gt.isSelectable(n)?new gt(t):ut.near(t)}}class yt extends ut{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.empty;if(t==y.empty){e.delete(0,e.doc.content.size);let t=ut.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new yt(e)}map(e){return new yt(e)}eq(e){return e instanceof yt}getBookmark(){return bt}}ut.jsonID("all",yt);const bt={map(){return this},resolve:e=>new yt(e)};function wt(e,t,n,o,r){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return ft.create(e,n);for(let s=o-(r>0?0:1);r>0?s<t.childCount:s>=0;s+=r){let o=t.child(s);if(o.isAtom){if(!i&&gt.isSelectable(o))return gt.create(e,n-(r<0?o.nodeSize:0))}else{let t=wt(e,o,n+r,r<0?o.childCount:0,r,i);if(t)return t}n+=o.nodeSize*r}return null}function kt(e,t,n){let o=e.steps.length-1;if(o<t)return;let r,i=e.steps[o];(i instanceof _e||i instanceof Le)&&(e.mapping.maps[o].forEach((e,t,n,o)=>{null==r&&(r=o)}),e.setSelection(ut.near(e.doc.resolve(r),n)))}class Ct extends at{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return g.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||g.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let o=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let r=this.storedMarks;if(!r){let e=this.doc.resolve(t);r=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,o.text(e,r)),this.selection.empty||this.setSelection(ut.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function xt(e,t){return t&&e?e.bind(t):e}class St{constructor(e,t,n){this.name=e,this.init=xt(t.init,n),this.apply=xt(t.apply,n)}}const At=[new St("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new St("selection",{init:(e,t)=>e.selection||ut.atStart(t.doc),apply:e=>e.selection}),new St("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,o)=>o.selection.$cursor?e.storedMarks:null}),new St("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class Et{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=At.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new St(e.key,e.spec.state,e))})}}class Dt{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),o=null;for(;;){let r=!1;for(let i=0;i<this.config.plugins.length;i++){let s=this.config.plugins[i];if(s.spec.appendTransaction){let l=o?o[i].n:0,a=o?o[i].state:this,c=l<t.length&&s.spec.appendTransaction.call(s,l?t.slice(l):t,a,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!o){o=[];for(let e=0;e<this.config.plugins.length;e++)o.push(e<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),r=!0}o&&(o[i]={state:n,n:t.length})}}if(!r)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Dt(this.config),n=this.config.fields;for(let o=0;o<n.length;o++){let r=n[o];t[r.name]=r.apply(e,this[r.name],this,t)}return t}get tr(){return new Ct(this)}static create(e){let t=new Et(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Dt(t);for(let o=0;o<t.fields.length;o++)n[t.fields[o].name]=t.fields[o].init(e,n);return n}reconfigure(e){let t=new Et(this.schema,e.plugins),n=t.fields,o=new Dt(t);for(let r=0;r<n.length;r++){let t=n[r].name;o[t]=this.hasOwnProperty(t)?this[t]:n[r].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[n],r=o.spec.state;r&&r.toJSON&&(t[n]=r.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Et(e.schema,e.plugins),r=new Dt(o);return o.fields.forEach(o=>{if("doc"==o.name)r.doc=B.fromJSON(e.schema,t.doc);else if("selection"==o.name)r.selection=ut.fromJSON(r.doc,t.selection);else if("storedMarks"==o.name)t.storedMarks&&(r.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let i in n){let s=n[i],l=s.spec.state;if(s.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(r[o.name]=l.fromJSON.call(s,e,t[i],r))}r[o.name]=o.init(e,r)}}),r}}function Mt(e,t,n){for(let o in e){let r=e[o];r instanceof Function?r=r.bind(t):"handleDOMEvents"==o&&(r=Mt(r,t,{})),n[o]=r}return n}class Nt{constructor(e){this.spec=e,this.props={},e.props&&Mt(e.props,this,this.props),this.key=e.key?e.key.key:Ot("plugin")}getState(e){return e[this.key]}}const Tt=Object.create(null);function Ot(e){return e in Tt?e+"$"+ ++Tt[e]:(Tt[e]=0,e+"$")}class Pt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";this.key=Ot(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const _t=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},Lt=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let Rt=null;const Bt=function(e,t,n){let o=Rt||(Rt=document.createRange());return o.setEnd(e,null==n?e.nodeValue.length:n),o.setStart(e,t||0),o},It=function(e,t,n,o){return n&&(jt(e,t,n,o,-1)||jt(e,t,n,o,1))},Ft=/^(img|br|input|textarea|hr)$/i;function jt(e,t,n,o,r){for(var i;;){if(e==n&&t==o)return!0;if(t==(r<0?0:zt(e))){let n=e.parentNode;if(!n||1!=n.nodeType||Ht(e)||Ft.test(e.nodeName)||"false"==e.contentEditable)return!1;t=_t(e)+(r<0?0:1),e=n}else{if(1!=e.nodeType)return!1;{let n=e.childNodes[t+(r<0?-1:0)];if(1==n.nodeType&&"false"==n.contentEditable){if(!(null===(i=n.pmViewDesc)||void 0===i?void 0:i.ignoreForSelection))return!1;t+=r}else e=n,t=r<0?zt(e):0}}}}function zt(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Ht(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Vt=function(e){return e.focusNode&&It(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Ut(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const $t="undefined"!=typeof navigator?navigator:null,Wt="undefined"!=typeof document?document:null,qt=$t&&$t.userAgent||"",Gt=/Edge\/(\d+)/.exec(qt),Kt=/MSIE \d/.exec(qt),Zt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(qt),Jt=!!(Kt||Zt||Gt),Xt=Kt?document.documentMode:Zt?+Zt[1]:Gt?+Gt[1]:0,Qt=!Jt&&/gecko\/(\d+)/i.test(qt);Qt&&(/Firefox\/(\d+)/.exec(qt)||[0,0])[1];const Yt=!Jt&&/Chrome\/(\d+)/.exec(qt),en=!!Yt,tn=Yt?+Yt[1]:0,nn=!Jt&&!!$t&&/Apple Computer/.test($t.vendor),on=nn&&(/Mobile\/\w+/.test(qt)||!!$t&&$t.maxTouchPoints>2),rn=on||!!$t&&/Mac/.test($t.platform),sn=!!$t&&/Win/.test($t.platform),ln=/Android \d/.test(qt),an=!!Wt&&"webkitFontSmoothing"in Wt.documentElement.style,cn=an?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function un(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function dn(e,t){return"number"==typeof e?e:e[t]}function hn(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,o=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*o}}function pn(e,t,n){let o=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let s=n||e.dom;s;){if(1!=s.nodeType){s=Lt(s);continue}let e=s,n=e==i.body,l=n?un(i):hn(e),a=0,c=0;if(t.top<l.top+dn(o,"top")?c=-(l.top-t.top+dn(r,"top")):t.bottom>l.bottom-dn(o,"bottom")&&(c=t.bottom-t.top>l.bottom-l.top?t.top+dn(r,"top")-l.top:t.bottom-l.bottom+dn(r,"bottom")),t.left<l.left+dn(o,"left")?a=-(l.left-t.left+dn(r,"left")):t.right>l.right-dn(o,"right")&&(a=t.right-l.right+dn(r,"right")),a||c)if(n)i.defaultView.scrollBy(a,c);else{let n=e.scrollLeft,o=e.scrollTop;c&&(e.scrollTop+=c),a&&(e.scrollLeft+=a);let r=e.scrollLeft-n,i=e.scrollTop-o;t={left:t.left-r,top:t.top-i,right:t.right-r,bottom:t.bottom-i}}let u=n?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(u))break;s="absolute"==u?s.offsetParent:Lt(s)}}function fn(e){let t=[],n=e.ownerDocument;for(let o=e;o&&(t.push({dom:o,top:o.scrollTop,left:o.scrollLeft}),e!=n);o=Lt(o));return t}function mn(e,t){for(let n=0;n<e.length;n++){let{dom:o,top:r,left:i}=e[n];o.scrollTop!=r+t&&(o.scrollTop=r+t),o.scrollLeft!=i&&(o.scrollLeft=i)}}let gn=null;function vn(e,t){let n,o,r,i,s=2e8,l=0,a=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=Bt(u).getClientRects()}for(let h=0;h<e.length;h++){let p=e[h];if(p.top<=a&&p.bottom>=c){a=Math.max(p.bottom,a),c=Math.min(p.top,c);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<s){n=u,s=e,o=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==u.nodeType&&e&&(l=d+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!r&&p.left<=t.left&&p.right>=t.left&&(r=u,i={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(l=d+1)}}return!n&&r&&(n=r,o=i,s=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,o=document.createRange();for(let r=0;r<n;r++){o.setEnd(e,r+1),o.setStart(e,r);let n=Cn(o,1);if(n.top!=n.bottom&&yn(t,n))return{node:e,offset:r+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,o):!n||s&&1==n.nodeType?{node:e,offset:l}:vn(n,o)}function yn(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function bn(e,t,n){let o=e.childNodes.length;if(o&&n.top<n.bottom)for(let r=Math.max(0,Math.min(o-1,Math.floor(o*(t.top-n.top)/(n.bottom-n.top))-2)),i=r;;){let n=e.childNodes[i];if(1==n.nodeType){let e=n.getClientRects();for(let o=0;o<e.length;o++){let r=e[o];if(yn(t,r))return bn(n,t,r)}}if((i=(i+1)%o)==r)break}return e}function wn(e,t){let n,o=e.dom.ownerDocument,r=0,i=function(e,t,n){if(e.caretPositionFromPoint)try{let o=e.caretPositionFromPoint(t,n);if(o)return{node:o.offsetNode,offset:Math.min(zt(o.offsetNode),o.offset)}}catch(Mb){}if(e.caretRangeFromPoint){let o=e.caretRangeFromPoint(t,n);if(o)return{node:o.startContainer,offset:Math.min(zt(o.startContainer),o.startOffset)}}}(o,t.left,t.top);i&&({node:n,offset:r}=i);let s,l=(e.root.elementFromPoint?e.root:o).elementFromPoint(t.left,t.top);if(!l||!e.dom.contains(1!=l.nodeType?l.parentNode:l)){let n=e.dom.getBoundingClientRect();if(!yn(t,n))return null;if(l=bn(e.dom,t,n),!l)return null}if(nn)for(let c=l;n&&c;c=Lt(c))c.draggable&&(n=void 0);if(l=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(l,t),n){if(Qt&&1==n.nodeType&&(r=Math.min(r,n.childNodes.length),r<n.childNodes.length)){let e,o=n.childNodes[r];"IMG"==o.nodeName&&(e=o.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&r++}let o;an&&r&&1==n.nodeType&&1==(o=n.childNodes[r-1]).nodeType&&"false"==o.contentEditable&&o.getBoundingClientRect().top>=t.top&&r--,n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(s=function(e,t,n,o){let r=-1;for(let i=t,s=!1;i!=e.dom;){let t,n=e.docView.nearestDesc(i,!0);if(!n)return null;if(1==n.dom.nodeType&&(n.node.isBlock&&n.parent||!n.contentDOM)&&((t=n.dom.getBoundingClientRect()).width||t.height)&&(n.node.isBlock&&n.parent&&(!s&&t.left>o.left||t.top>o.top?r=n.posBefore:(!s&&t.right<o.left||t.bottom<o.top)&&(r=n.posAfter),s=!0),!n.contentDOM&&r<0&&!n.node.isText))return(n.node.isBlock?o.top<(t.top+t.bottom)/2:o.left<(t.left+t.right)/2)?n.posBefore:n.posAfter;i=n.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,n,-1)}(e,n,r,t))}null==s&&(s=function(e,t,n){let{node:o,offset:r}=vn(t,n),i=-1;if(1==o.nodeType&&!o.firstChild){let e=o.getBoundingClientRect();i=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(o,r,i)}(e,l,t));let a=e.docView.nearestDesc(l,!0);return{pos:s,inside:a?a.posAtStart-a.border:-1}}function kn(e){return e.top<e.bottom||e.left<e.right}function Cn(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(kn(e))return e}return Array.prototype.find.call(n,kn)||e.getBoundingClientRect()}const xn=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Sn(e,t,n){let{node:o,offset:r,atom:i}=e.docView.domFromPos(t,n<0?-1:1),s=an||Qt;if(3==o.nodeType){if(!s||!xn.test(o.nodeValue)&&(n<0?r:r!=o.nodeValue.length)){let e=r,t=r,i=n<0?1:-1;return n<0&&!r?(t++,i=-1):n>=0&&r==o.nodeValue.length?(e--,i=1):n<0?e--:t++,An(Cn(Bt(o,e,t),i),i<0)}{let e=Cn(Bt(o,r,r),n);if(Qt&&r&&/\s/.test(o.nodeValue[r-1])&&r<o.nodeValue.length){let t=Cn(Bt(o,r-1,r-1),-1);if(t.top==e.top){let n=Cn(Bt(o,r,r+1),-1);if(n.top!=e.top)return An(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(null==i&&r&&(n<0||r==zt(o))){let e=o.childNodes[r-1];if(1==e.nodeType)return En(e.getBoundingClientRect(),!1)}if(null==i&&r<zt(o)){let e=o.childNodes[r];if(1==e.nodeType)return En(e.getBoundingClientRect(),!0)}return En(o.getBoundingClientRect(),n>=0)}if(null==i&&r&&(n<0||r==zt(o))){let e=o.childNodes[r-1],t=3==e.nodeType?Bt(e,zt(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return An(Cn(t,1),!1)}if(null==i&&r<zt(o)){let e=o.childNodes[r];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?Bt(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return An(Cn(t,-1),!0)}return An(Cn(3==o.nodeType?Bt(o):o,-n),n>=0)}function An(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function En(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Dn(e,t,n){let o=e.state,r=e.root.activeElement;o!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return n()}finally{o!=t&&e.updateState(o),r!=e.dom&&r&&r.focus()}}const Mn=/[\u0590-\u08ac]/;let Nn=null,Tn=null,On=!1;function Pn(e,t,n){return Nn==t&&Tn==n?On:(Nn=t,Tn=n,On="up"==n||"down"==n?function(e,t,n){let o=t.selection,r="up"==n?o.$from:o.$to;return Dn(e,t,()=>{let{node:t}=e.docView.domFromPos(r.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let o=Sn(e,r.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=Bt(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let r=t[e];if(r.bottom>r.top+1&&("up"==n?o.top-r.top>2*(r.bottom-o.top):r.bottom-o.bottom>2*(o.bottom-r.top)))return!1}}return!0})}(e,t,n):function(e,t,n){let{$head:o}=t.selection;if(!o.parent.isTextblock)return!1;let r=o.parentOffset,i=!r,s=r==o.parent.content.size,l=e.domSelection();return l?Mn.test(o.parent.textContent)&&l.modify?Dn(e,t,()=>{let{focusNode:t,focusOffset:r,anchorNode:i,anchorOffset:s}=e.domSelectionRange(),a=l.caretBidiLevel;l.modify("move",n,"character");let c=o.depth?e.docView.domAfterPos(o.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&r==d;try{l.collapse(i,s),t&&(t!=i||r!=s)&&l.extend&&l.extend(t,r)}catch(Mb){}return null!=a&&(l.caretBidiLevel=a),h}):"left"==n||"backward"==n?i:s:o.pos==o.start()||o.pos==o.end()}(e,t,n))}class _n{constructor(e,t,n,o){this.parent=e,this.children=t,this.dom=n,this.contentDOM=o,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let o=this.children[t];if(o==e)return n;n+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,o;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(o=n.pmViewDesc)||o.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(o)+o.size:this.posAtStart}{let n,o;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(o=n.pmViewDesc)||o.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(o):this.posAtEnd}}let o;if(e==this.dom&&this.contentDOM)o=t>_t(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){o=!1;break}if(t.previousSibling)break}if(null==o&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){o=!0;break}if(t.nextSibling)break}}return(null==o?n>0:o)?this.posAtEnd:this.posAtStart}nearestDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(let n=!0,o=e;o;o=o.parentNode){let r,i=this.getDesc(o);if(i&&(!t||i.node)){if(!n||!(r=i.nodeDOM)||(1==r.nodeType?r.contains(1==e.nodeType?e:e.parentNode):r==e))return i;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let o=e;o;o=o.parentNode){let r=this.getDesc(o);if(r)return r.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let o=this.children[t],r=n+o.size;if(n==e&&r!=n){for(;!o.border&&o.children.length;)for(let e=0;e<o.children.length;e++){let t=o.children[e];if(t.size){o=t;break}}return o}if(e<r)return o.descAt(e-n-o.border);n=r}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,o=0;for(let r=0;n<this.children.length;n++){let t=this.children[n],i=r+t.size;if(i>e||t instanceof zn){o=e-r;break}r=i}if(o)return this.children[n].domFromPos(o-this.children[n].border,t);for(let r;n&&!(r=this.children[n-1]).size&&r instanceof Ln&&r.side>=0;n--);if(t<=0){let e,o=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,o=!1);return e&&t&&o&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?_t(e.dom)+1:0}}{let e,o=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,o=!1);return e&&o&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?_t(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,r=-1;for(let i=n,s=0;;s++){let n=this.children[s],l=i+n.size;if(-1==o&&e<=l){let r=i+n.border;if(e>=r&&t<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,r);e=i;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){o=_t(n.dom)+1;break}e-=n.size}-1==o&&(o=0)}if(o>-1&&(l>t||s==this.children.length-1)){t=l;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){r=_t(n.dom);break}t+=n.size}-1==r&&(r=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:r}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Math.min(e,t),i=Math.max(e,t);for(let h=0,p=0;h<this.children.length;h++){let s=this.children[h],l=p+s.size;if(r>p&&i<l)return s.setSelection(e-p-s.border,t-p-s.border,n,o);p=l}let s=this.domFromPos(e,e?-1:1),l=t==e?s:this.domFromPos(t,t?-1:1),a=n.root.getSelection(),c=n.domSelectionRange(),u=!1;if((Qt||nn)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if(u=!(!t||"\n"!=e.nodeValue[t-1]),u&&t==e.nodeValue.length)for(let n,o=e;o;o=o.parentNode){if(n=o.nextSibling){"BR"==n.nodeName&&(s=l={node:n.parentNode,offset:_t(n)+1});break}let e=o.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];u=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(Qt&&c.focusNode&&c.focusNode!=l.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(o=!0)}if(!(o||u&&nn)&&It(s.node,s.offset,c.anchorNode,c.anchorOffset)&&It(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((a.extend||e==t)&&!u){a.collapse(s.node,s.offset);try{e!=t&&a.extend(l.node,l.offset),d=!0}catch(Mb){}}if(!d){if(e>t){let e=s;s=l,l=e}let n=document.createRange();n.setEnd(l.node,l.offset),n.setStart(s.node,s.offset),a.removeAllRanges(),a.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,o=0;o<this.children.length;o++){let r=this.children[o],i=n+r.size;if(n==i?e<=i&&t>=n:e<i&&t>n){let o=n+r.border,s=i-r.border;if(e>=o&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=o||t!=s||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-o,t-o):r.dirty=3);r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}n=i}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Ln extends _n{constructor(e,t,n,o){let r,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,()=>r?r.parent?r.parent.posBeforeChild(r):void 0:o)),!t.type.spec.raw){if(1!=i.nodeType){let e=document.createElement("span");e.appendChild(i),i=e}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=t,this.widget=t,r=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Rn extends _n{constructor(e,t,n,o){super(e,[],t,null),this.textDOM=n,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class Bn extends _n{constructor(e,t,n,o,r){super(e,[],n,o),this.mark=t,this.spec=r}static create(e,t,n,o){let r=o.nodeViews[t.type.name],i=r&&r(t,o,n);return i&&i.dom||(i=pe.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new Bn(e,t,i.dom,i.contentDOM||i.dom,i)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let o=Bn.create(this.parent,this.mark,!0,n),r=this.children,i=this.size;t<i&&(r=Yn(r,t,i,n)),e>0&&(r=Yn(r,0,e,n));for(let s=0;s<r.length;s++)r[s].parent=o;return o.children=r,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class In extends _n{constructor(e,t,n,o,r,i,s,l,a){super(e,[],r,i),this.node=t,this.outerDeco=n,this.innerDeco=o,this.nodeDOM=s}static create(e,t,n,o,r,i){let s,l=r.nodeViews[t.type.name],a=l&&l(t,r,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:i,n,o),c=a&&a.dom,u=a&&a.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=pe.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:u}=e)}u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=Kn(c,n,t),a?s=new Hn(e,t,n,o,c,u||null,d,a,r,i+1):t.isText?new jn(e,t,n,o,c,d,r):new In(e,t,n,o,c,u||null,d,r,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>h.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&Zn(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,o=t,r=e.composing?this.localCompositionInfo(e,t):null,i=r&&r.pos>-1?r:null,s=r&&r.pos<0,l=new Xn(this,i&&i.node,e);!function(e,t,n,o){let r=t.locals(e),i=0;if(0==r.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);o(s,r,t.forChild(i,s),n),i+=s.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let u,d,h,p;for(;s<r.length&&r[s].to==i;){let e=r[s++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(Qn);for(let e=0;e<d.length;e++)n(d[e],c,!!a)}else n(u,c,!!a);if(a)p=-1,h=a,a=null;else{if(!(c<e.childCount))break;p=c,h=e.child(c++)}for(let e=0;e<l.length;e++)l[e].to<=i&&l.splice(e--,1);for(;s<r.length&&r[s].from<=i&&r[s].to>i;)l.push(r[s++]);let f=i+h.nodeSize;if(h.isText){let e=f;s<r.length&&r[s].from<e&&(e=r[s].from);for(let t=0;t<l.length;t++)l[t].to<e&&(e=l[t].to);e<f&&(a=h.cut(e-i),h=h.cut(0,e-i),f=e,p=-1)}else for(;s<r.length&&r[s].to<f;)s++;o(h,h.isInline&&!h.isLeaf?l.filter(e=>!e.inline):l.slice(),t.forChild(i,h),p),i=f}}(this.node,this.innerDeco,(t,r,i)=>{t.spec.marks?l.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!i&&l.syncToMarks(r==this.node.childCount?g.none:this.node.child(r).marks,n,e),l.placeWidget(t,e,o)},(t,i,a,c)=>{let u;l.syncToMarks(t.marks,n,e),l.findNodeMatch(t,i,a,c)||s&&e.state.selection.from>o&&e.state.selection.to<o+t.nodeSize&&(u=l.findIndexWithChild(r.node))>-1&&l.updateNodeAt(t,i,a,u,e)||l.updateNextNode(t,i,a,e,c,o)||l.addNode(t,i,a,e,o),o+=t.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),Vn(this.contentDOM,this.children,e),on&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:o}=e.state.selection;if(!(e.state.selection instanceof ft)||n<t||o>t+this.node.content.size)return null;let r=e.input.compositionNode;if(!r||!this.dom.contains(r.parentNode))return null;if(this.node.inlineContent){let e=r.nodeValue,i=function(e,t,n,o){for(let r=0,i=0;r<e.childCount&&i<=o;){let s=e.child(r++),l=i;if(i+=s.nodeSize,!s.isText)continue;let a=s.text;for(;r<e.childCount;){let t=e.child(r++);if(i+=t.nodeSize,!t.isText)break;a+=t.text}if(i>=n){if(i>=o&&a.slice(o-t.length-l,o-l)==t)return o-t.length;let e=l<o?a.lastIndexOf(t,o-l-1):-1;if(e>=0&&e+t.length+l>=n)return l+e;if(n==o&&a.length>=o+t.length-l&&a.slice(o-l,o-l+t.length)==t)return o}}return-1}(this.node.content,e,n-t,o-t);return i<0?null:{node:r,pos:i,text:e}}return{node:r,pos:-1,text:""}}protectLocalComposition(e,t){let{node:n,pos:o,text:r}=t;if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new Rn(this,i,n,r);e.input.compositionNodes.push(s),this.children=Yn(this.children,o,o+r.length,e,s)}update(e,t,n,o){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,o),!0)}updateInner(e,t,n,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(Zn(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=qn(this.dom,this.nodeDOM,Wn(this.outerDeco,this.node,t),Wn(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Fn(e,t,n,o,r){Kn(o,t,e);let i=new In(void 0,e,t,n,o,o,o,r,0);return i.contentDOM&&i.updateChildren(r,0),i}class jn extends In{constructor(e,t,n,o,r,i,s){super(e,t,n,o,r,null,i,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,o){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let o=this.node.cut(e,t),r=document.createTextNode(o.text);return new jn(this.parent,o,this.outerDeco,this.innerDeco,r,r,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class zn extends _n{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Hn extends In{constructor(e,t,n,o,r,i,s,l,a,c){super(e,t,n,o,r,i,s,a,c),this.spec=l}update(e,t,n,o){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let r=this.spec.update(e,t,n);return r&&this.updateInner(e,t,n,o),r}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,o){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Vn(e,t,n){let o=e.firstChild,r=!1;for(let i=0;i<t.length;i++){let s=t[i],l=s.dom;if(l.parentNode==e){for(;l!=o;)o=Jn(o),r=!0;o=o.nextSibling}else r=!0,e.insertBefore(l,o);if(s instanceof Bn){let t=o?o.previousSibling:e.lastChild;Vn(s.contentDOM,s.children,n),o=t?t.nextSibling:e.firstChild}}for(;o;)o=Jn(o),r=!0;r&&n.trackWrites==e&&(n.trackWrites=null)}const Un=function(e){e&&(this.nodeName=e)};Un.prototype=Object.create(null);const $n=[new Un];function Wn(e,t,n){if(0==e.length)return $n;let o=n?$n[0]:new Un,r=[o];for(let i=0;i<e.length;i++){let s=e[i].type.attrs;if(s){s.nodeName&&r.push(o=new Un(s.nodeName));for(let e in s){let i=s[e];null!=i&&(n&&1==r.length&&r.push(o=new Un(t.isInline?"span":"div")),"class"==e?o.class=(o.class?o.class+" ":"")+i:"style"==e?o.style=(o.style?o.style+";":"")+i:"nodeName"!=e&&(o[e]=i))}}}return r}function qn(e,t,n,o){if(n==$n&&o==$n)return t;let r=t;for(let i=0;i<o.length;i++){let t=o[i],s=n[i];if(i){let n;s&&s.nodeName==t.nodeName&&r!=e&&(n=r.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(r),s=$n[0]),r=n}Gn(r,s||$n[0],t)}return r}function Gn(e,t,n){for(let o in t)"class"==o||"style"==o||"nodeName"==o||o in n||e.removeAttribute(o);for(let o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){let o=t.class?t.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<o.length;t++)-1==r.indexOf(o[t])&&e.classList.remove(o[t]);for(let t=0;t<r.length;t++)-1==o.indexOf(r[t])&&e.classList.add(r[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,o=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=o.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function Kn(e,t,n){return qn(e,e,$n,Wn(t,n,1!=e.nodeType))}function Zn(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Jn(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Xn{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,o=n.children.length,r=e.childCount,i=new Map,s=[];e:for(;r>0;){let l;for(;;)if(o){let e=n.children[o-1];if(!(e instanceof Bn)){l=e,o--;break}n=e,o=e.children.length}else{if(n==t)break e;o=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=e.child(r-1))break;--r,i.set(l,r),s.push(l)}}return{index:r,matched:i,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let o=0,r=this.stack.length>>1,i=Math.min(r,e.length);for(;o<i&&(o==r-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[r])&&!this.isLocked(n.dom)){o=t;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let o=Bn.create(this.top,e[r],t,n);this.top.children.splice(this.index,0,o),this.top=o,this.changed=!0}this.index=0,r++}}findNodeMatch(e,t,n,o){let r,i=-1;if(o>=this.preMatch.index&&(r=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&r.matchesNode(e,t,n))i=this.top.children.indexOf(r,this.index);else for(let s=this.index,l=Math.min(this.top.children.length,s+5);s<l;s++){let o=this.top.children[s];if(o.matchesNode(e,t,n)&&!this.preMatch.matched.has(o)){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,o,r){let i=this.top.children[o];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,r)&&(this.destroyBetween(this.index,o),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,o,r,i){for(let s=this.index;s<this.top.children.length;s++){let l=this.top.children[s];if(l instanceof In){let a=this.preMatch.matched.get(l);if(null!=a&&a!=r)return!1;let c,u=l.dom,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&3!=l.dirty&&Zn(t,l.outerDeco));if(!d&&l.update(e,t,n,o))return this.destroyBetween(this.index,s),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(l,e,t,n,o,i)))return this.destroyBetween(this.index,s),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(o,i+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,o,r,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Zn(n,e.outerDeco)||!o.eq(e.innerDeco))return null;let s=In.create(this.top,t,n,o,r,i);if(s.contentDOM){s.children=e.children,e.children=[];for(let e of s.children)e.parent=s}return e.destroy(),s}addNode(e,t,n,o,r){let i=In.create(this.top,e,t,n,o,r);i.contentDOM&&i.updateChildren(o,r+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,t,n){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(!o||!o.matchesWidget(e)||e!=o.widget&&o.widget.type.toDOM.parentNode){let o=new Ln(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Bn;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof jn)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((nn||en)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let o=new zn(this.top,[],n,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function Qn(e,t){return e.type.side-t.type.side}function Yn(e,t,n,o,r){let i=[];for(let s=0,l=0;s<e.length;s++){let a=e[s],c=l,u=l+=a.size;c>=n||u<=t?i.push(a):(c<t&&i.push(a.slice(0,t-c,o)),r&&(i.push(r),r=void 0),u>n&&i.push(a.slice(n-c,a.size,o)))}return i}function eo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),o=e.state.doc;if(!n.focusNode)return null;let r=e.docView.nearestDesc(n.focusNode),i=r&&0==r.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l,a,c=o.resolve(s);if(Vt(n)){for(l=s;r&&!r.node;)r=r.parent;let e=r.node;if(r&&e.isAtom&&gt.isSelectable(e)&&r.parent&&(!e.isInline||!function(e,t,n){for(let o=0==t,r=t==zt(e);o||r;){if(e==n)return!0;let t=_t(e);if(!(e=e.parentNode))return!1;o=o&&0==t,r=r&&t==zt(e)}}(n.focusNode,n.focusOffset,r.dom))){let e=r.posBefore;a=new gt(s==e?c:o.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=s,r=s;for(let o=0;o<n.rangeCount;o++){let i=n.getRangeAt(o);t=Math.min(t,e.docView.posFromDOM(i.startContainer,i.startOffset,1)),r=Math.max(r,e.docView.posFromDOM(i.endContainer,i.endOffset,-1))}if(t<0)return null;[l,s]=r==e.state.selection.anchor?[r,t]:[t,r],c=o.resolve(s)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=o.resolve(l);if(!a){a=co(e,u,c,"pointer"==t||e.state.selection.head<c.pos&&!i?1:-1)}return a}function to(e){return e.editable?e.hasFocus():ho(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function no(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(lo(e,n),to(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&en){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&It(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let o=e.cursorWrapper.dom,r="IMG"==o.nodeName;r?n.setStart(o.parentNode,_t(o)+1):n.setStart(o,0);n.collapse(!0),t.removeAllRanges(),t.addRange(n),!r&&!e.state.selection.visible&&Jt&&Xt<=11&&(o.disabled=!0,o.disabled=!1)}(e);else{let o,r,{anchor:i,head:s}=n;!oo||n instanceof ft||(n.$from.parent.inlineContent||(o=ro(e,n.from)),n.empty||n.$from.parent.inlineContent||(r=ro(e,n.to))),e.docView.setSelection(i,s,e,t),oo&&(o&&so(o),r&&so(r)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),o=n.anchorNode,r=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==o&&n.anchorOffset==r||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{to(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const oo=nn||en&&tn<63;function ro(e,t){let{node:n,offset:o}=e.docView.domFromPos(t,0),r=o<n.childNodes.length?n.childNodes[o]:null,i=o?n.childNodes[o-1]:null;if(nn&&r&&"false"==r.contentEditable)return io(r);if((!r||"false"==r.contentEditable)&&(!i||"false"==i.contentEditable)){if(r)return io(r);if(i)return io(i)}}function io(e){return e.contentEditable="true",nn&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function so(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function lo(e,t){if(t instanceof gt){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(ao(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else ao(e)}function ao(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function co(e,t,n,o){return e.someProp("createSelectionBetween",o=>o(e,t,n))||ft.between(t,n,o)}function uo(e){return!(e.editable&&!e.hasFocus())&&ho(e)}function ho(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(Mb){return!1}}function po(e,t){let{$anchor:n,$head:o}=e.selection,r=t>0?n.max(o):n.min(o),i=r.parent.inlineContent?r.depth?e.doc.resolve(t>0?r.after():r.before()):null:r;return i&&ut.findFrom(i,t)}function fo(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function mo(e,t,n){let o=e.state.selection;if(!(o instanceof ft)){if(o instanceof gt&&o.node.isInline)return fo(e,new ft(t>0?o.$to:o.$from));{let n=po(e.state,t);return!!n&&fo(e,n)}}if(n.indexOf("s")>-1){let{$head:n}=o,r=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!r||r.isText||!r.isLeaf)return!1;let i=e.state.doc.resolve(n.pos+r.nodeSize*(t<0?-1:1));return fo(e,new ft(o.$anchor,i))}if(!o.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=po(e.state,t);return!!(n&&n instanceof gt)&&fo(e,n)}if(!(rn&&n.indexOf("m")>-1)){let n,r=o.$head,i=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter;if(!i||i.isText)return!1;let s=t<0?r.pos-i.nodeSize:r.pos;return!!(i.isAtom||(n=e.docView.descAt(s))&&!n.contentDOM)&&(gt.isSelectable(i)?fo(e,new gt(t<0?e.state.doc.resolve(r.pos-i.nodeSize):r)):!!an&&fo(e,new ft(e.state.doc.resolve(t<0?s:s+i.nodeSize))))}}function go(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function vo(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function yo(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,o=t.focusOffset;if(!n)return;let r,i,s=!1;Qt&&1==n.nodeType&&o<go(n)&&vo(n.childNodes[o],-1)&&(s=!0);for(;;)if(o>0){if(1!=n.nodeType)break;{let e=n.childNodes[o-1];if(vo(e,-1))r=n,i=--o;else{if(3!=e.nodeType)break;n=e,o=n.nodeValue.length}}}else{if(bo(n))break;{let t=n.previousSibling;for(;t&&vo(t,-1);)r=n.parentNode,i=_t(t),t=t.previousSibling;if(t)n=t,o=go(n);else{if(n=n.parentNode,n==e.dom)break;o=0}}}s?wo(e,n,o):r&&wo(e,r,i)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,o=t.focusOffset;if(!n)return;let r,i,s=go(n);for(;;)if(o<s){if(1!=n.nodeType)break;if(!vo(n.childNodes[o],1))break;r=n,i=++o}else{if(bo(n))break;{let t=n.nextSibling;for(;t&&vo(t,1);)r=t.parentNode,i=_t(t)+1,t=t.nextSibling;if(t)n=t,o=0,s=go(n);else{if(n=n.parentNode,n==e.dom)break;o=s=0}}}r&&wo(e,r,i)}(e)}function bo(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function wo(e,t,n){if(3!=t.nodeType){let e,o;(o=function(e,t){for(;e&&t==e.childNodes.length&&!Ht(e);)t=_t(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=o,n=0):(e=function(e,t){for(;e&&!t&&!Ht(e);)t=_t(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let o=e.domSelection();if(!o)return;if(Vt(o)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),o.removeAllRanges(),o.addRange(e)}else o.extend&&o.extend(t,n);e.domObserver.setCurSelection();let{state:r}=e;setTimeout(()=>{e.state==r&&no(e)},50)}function ko(e,t){let n=e.state.doc.resolve(t);if(!en&&!sn&&n.parent.inlineContent){let o=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),r=(n.top+n.bottom)/2;if(r>o.top&&r<o.bottom&&Math.abs(n.left-o.left)>1)return n.left<o.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),r=(n.top+n.bottom)/2;if(r>o.top&&r<o.bottom&&Math.abs(n.left-o.left)>1)return n.left>o.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function Co(e,t,n){let o=e.state.selection;if(o instanceof ft&&!o.empty||n.indexOf("s")>-1)return!1;if(rn&&n.indexOf("m")>-1)return!1;let{$from:r,$to:i}=o;if(!r.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=po(e.state,t);if(n&&n instanceof gt)return fo(e,n)}if(!r.parent.inlineContent){let n=t<0?r:i,s=o instanceof yt?ut.near(n,t):ut.findFrom(n,t);return!!s&&fo(e,s)}return!1}function xo(e,t){if(!(e.state.selection instanceof ft))return!0;let{$head:n,$anchor:o,empty:r}=e.state.selection;if(!n.sameParent(o))return!0;if(!r)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=e.state.tr;return t<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),e.dispatch(o),!0}return!1}function So(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Ao(e,t){let n=t.keyCode,o=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||rn&&72==n&&"c"==o)return xo(e,-1)||yo(e,-1);if(46==n&&!t.shiftKey||rn&&68==n&&"c"==o)return xo(e,1)||yo(e,1);if(13==n||27==n)return!0;if(37==n||rn&&66==n&&"c"==o){let t=37==n?"ltr"==ko(e,e.state.selection.from)?-1:1:-1;return mo(e,t,o)||yo(e,t)}if(39==n||rn&&70==n&&"c"==o){let t=39==n?"ltr"==ko(e,e.state.selection.from)?1:-1:1;return mo(e,t,o)||yo(e,t)}return 38==n||rn&&80==n&&"c"==o?Co(e,-1,o)||yo(e,-1):40==n||rn&&78==n&&"c"==o?function(e){if(!nn||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;So(e,n,"true"),setTimeout(()=>So(e,n,"false"),20)}return!1}(e)||Co(e,1,o)||yo(e,1):o==(rn?"m":"c")&&(66==n||73==n||89==n||90==n)}function Eo(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:o,openStart:r,openEnd:i}=t;for(;r>1&&i>1&&1==o.childCount&&1==o.firstChild.childCount;){r--,i--;let e=o.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),o=e.content}let s=e.someProp("clipboardSerializer")||pe.fromSchema(e.state.schema),l=Bo(),a=l.createElement("div");a.appendChild(s.serializeFragment(o,{document:l}));let c,u=a.firstChild,d=0;for(;u&&1==u.nodeType&&(c=Lo[u.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=l.createElement(c[e]);for(;a.firstChild;)t.appendChild(a.firstChild);a.appendChild(t),d++}u=a.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice","".concat(r," ").concat(i).concat(d?" -".concat(d):""," ").concat(JSON.stringify(n))),{dom:a,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function Do(e,t,n,o,r){let i,s,l=r.parent.type.spec.code;if(!n&&!t)return null;let a=t&&(o||l||!n);if(a){if(e.someProp("transformPastedText",n=>{t=n(t,l||o,e)}),l)return t?new y(h.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):y.empty;let n=e.someProp("clipboardTextParser",n=>n(t,r,o,e));if(n)s=n;else{let n=r.marks(),{schema:o}=e.state,s=pe.fromSchema(o);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=i.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(o.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),i=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,o=Bo().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e);(n=r&&Lo[r[1].toLowerCase()])&&(e=n.map(e=>"<"+e+">").join("")+e+n.map(e=>"</"+e+">").reverse().join(""));if(o.innerHTML=function(e){let t=window.trustedTypes;if(!t)return e;Io||(Io=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e}));return Io.createHTML(e)}(e),n)for(let i=0;i<n.length;i++)o=o.querySelector(n[i])||o;return o}(n),an&&function(e){let t=e.querySelectorAll(en?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let o=t[n];1==o.childNodes.length&&"\xa0"==o.textContent&&o.parentNode&&o.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),o)}}(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let e=i.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;i=e}if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||oe.fromSchema(e.state.schema);s=t.parseSlice(i,{preserveWhitespace:!(!a&&!u),context:r,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Mo.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(u)s=function(e,t){if(!e.size)return e;let n,o=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(l){return e}let{content:r,openStart:i,openEnd:s}=e;for(let a=n.length-2;a>=0;a-=2){let e=o.nodes[n[a]];if(!e||e.hasRequiredAttrs())break;r=h.from(e.create(n[a+1],r)),i++,s++}return new y(r,i,s)}(_o(s,+u[1],+u[2]),u[4]);else if(s=y.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let o,r=t.node(n).contentMatchAt(t.index(n)),i=[];if(e.forEach(e=>{if(!i)return;let t,n=r.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&o.length&&To(n,o,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=Oo(i[i.length-1],o.length));let t=No(e,n);i.push(t),r=r.matchType(t.type),o=n}}),i)return h.from(i)}return e}(s.content,r),!0),s.openStart||s.openEnd){let e=0,t=0;for(let n=s.content.firstChild;e<s.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=s.content.lastChild;t<s.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);s=_o(s,e,t)}return e.someProp("transformPasted",t=>{s=t(s,e)}),s}const Mo=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function No(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let o=t.length-1;o>=n;o--)e=t[o].create(null,h.from(e));return e}function To(e,t,n,o,r){if(r<e.length&&r<t.length&&e[r]==t[r]){let i=To(e,t,n,o.lastChild,r+1);if(i)return o.copy(o.content.replaceChild(o.childCount-1,i));if(o.contentMatchAt(o.childCount).matchType(r==e.length-1?n.type:e[r+1]))return o.copy(o.content.append(h.from(No(n,e,r+1))))}}function Oo(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,Oo(e.lastChild,t-1)),o=e.contentMatchAt(e.childCount).fillBefore(h.empty,!0);return e.copy(n.append(o))}function Po(e,t,n,o,r,i){let s=t<0?e.firstChild:e.lastChild,l=s.content;return e.childCount>1&&(i=0),r<o-1&&(l=Po(l,t,n,o,r+1,i)),r>=n&&(l=t<0?s.contentMatchAt(0).fillBefore(l,i<=r).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(h.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(l))}function _o(e,t,n){return t<e.openStart&&(e=new y(Po(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new y(Po(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const Lo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ro=null;function Bo(){return Ro||(Ro=document.implementation.createHTMLDocument("title"))}let Io=null;const Fo={},jo={},zo={touchstart:!0,touchmove:!0};class Ho{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Vo(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Uo(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>$o(e,t))})}function $o(e,t){return e.someProp("handleDOMEvents",n=>{let o=n[t.type];return!!o&&(o(e,t)||t.defaultPrevented)})}function Wo(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function qo(e){return{left:e.clientX,top:e.clientY}}function Go(e,t,n,o,r){if(-1==o)return!1;let i=e.state.doc.resolve(o);for(let s=i.depth+1;s>0;s--)if(e.someProp(t,t=>s>i.depth?t(e,n,i.nodeAfter,i.before(s),r,!0):t(e,n,i.node(s),i.before(s),r,!1)))return!0;return!1}function Ko(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let o=e.state.tr.setSelection(t);"pointer"==n&&o.setMeta("pointer",!0),e.dispatch(o)}function Zo(e,t,n,o,r){return Go(e,"handleClickOn",t,n,o)||e.someProp("handleClick",n=>n(e,t,o))||(r?function(e,t){if(-1==t)return!1;let n,o,r=e.state.selection;r instanceof gt&&(n=r.node);let i=e.state.doc.resolve(t);for(let s=i.depth+1;s>0;s--){let e=s>i.depth?i.nodeAfter:i.node(s);if(gt.isSelectable(e)){o=n&&r.$from.depth>0&&s>=r.$from.depth&&i.before(r.$from.depth+1)==r.$from.pos?i.before(r.$from.depth):i.before(s);break}}return null!=o&&(Ko(e,gt.create(e.state.doc,o),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),o=n.nodeAfter;return!!(o&&o.isAtom&&gt.isSelectable(o))&&(Ko(e,new gt(n),"pointer"),!0)}(e,n))}function Jo(e,t,n,o){return Go(e,"handleDoubleClickOn",t,n,o)||e.someProp("handleDoubleClick",n=>n(e,t,o))}function Xo(e,t,n,o){return Go(e,"handleTripleClickOn",t,n,o)||e.someProp("handleTripleClick",n=>n(e,t,o))||function(e,t,n){if(0!=n.button)return!1;let o=e.state.doc;if(-1==t)return!!o.inlineContent&&(Ko(e,ft.create(o,0,o.content.size),"pointer"),!0);let r=o.resolve(t);for(let i=r.depth+1;i>0;i--){let t=i>r.depth?r.nodeAfter:r.node(i),n=r.before(i);if(t.inlineContent)Ko(e,ft.create(o,n+1,n+1+t.content.size),"pointer");else{if(!gt.isSelectable(t))continue;Ko(e,gt.create(o,n),"pointer")}return!0}}(e,n,o)}function Qo(e){return sr(e)}jo.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!tr(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!ln||!en||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!on||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",t=>t(e,n))||Ao(e,n)?n.preventDefault():Vo(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,Ut(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},jo.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},jo.keypress=(e,t)=>{let n=t;if(tr(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||rn&&n.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,n)))return void n.preventDefault();let o=e.state.selection;if(!(o instanceof ft)||!o.$from.sameParent(o.$to)){let t=String.fromCharCode(n.charCode),r=()=>e.state.tr.insertText(t).scrollIntoView();/[\r\n]/.test(t)||e.someProp("handleTextInput",n=>n(e,o.$from.pos,o.$to.pos,t,r))||e.dispatch(r()),n.preventDefault()}};const Yo=rn?"metaKey":"ctrlKey";Fo.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let o=Qo(e),r=Date.now(),i="singleClick";r-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,o=t.y-e.clientY;return n*n+o*o<100}(n,e.input.lastClick)&&!n[Yo]&&e.input.lastClick.button==n.button&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:i,button:n.button};let s=e.posAtCoords(qo(n));s&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new er(e,s,n,!!o)):("doubleClick"==i?Jo:Xo)(e,s.pos,s.inside,n)?n.preventDefault():Vo(e,"pointer"))};class er{constructor(e,t,n,o){let r,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Yo],this.allowDefault=n.shiftKey,t.inside>-1)r=e.state.doc.nodeAt(t.inside),i=t.inside;else{let n=e.state.doc.resolve(t.pos);r=n.parent,i=n.depth?n.before():0}const s=o?null:n.target,l=s?e.docView.nearestDesc(s,!0):null;this.target=l&&1==l.dom.nodeType?l.dom:null;let{selection:a}=e.state;(0==n.button&&r.type.spec.draggable&&!1!==r.type.spec.selectable||a instanceof gt&&a.from<=i&&a.to>i)&&(this.mightDrag={node:r,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!Qt||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Vo(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>no(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(qo(e))),this.updateAllowDefault(e),this.allowDefault||!t?Vo(this.view,"pointer"):Zo(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||nn&&this.mightDrag&&!this.mightDrag.node.isAtom||en&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Ko(this.view,ut.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Vo(this.view,"pointer")}move(e){this.updateAllowDefault(e),Vo(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function tr(e,t){return!!e.composing||!!(nn&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}Fo.touchstart=e=>{e.input.lastTouch=Date.now(),Qo(e),Vo(e,"pointer")},Fo.touchmove=e=>{e.input.lastTouch=Date.now(),Vo(e,"pointer")},Fo.contextmenu=e=>Qo(e);const nr=ln?5e3:-1;function or(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>sr(e),t))}function rr(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function ir(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=zt(e=e.childNodes[t-1])}else{if(!e.parentNode||Ht(e))return null;t=_t(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),o=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||Ht(e))return null;t=_t(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&o&&n!=o){let t=o.pmViewDesc,r=e.domObserver.lastChangedTextNode;if(n==r||o==r)return r;if(!t||!t.isText(o.nodeValue))return o;if(e.input.compositionNode==o){let e=n.pmViewDesc;if(e&&e.isText(n.nodeValue))return o}}return n||o}function sr(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(ln&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),rr(e),t||e.docView&&e.docView.dirty){let n=eo(e),o=e.state.selection;return n&&!n.eq(o)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||o.$from.node(o.$from.sharedDepth(o.to)).inlineContent?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}jo.compositionstart=jo.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof ft&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),sr(e,!0),e.markCursor=null;else if(sr(e,!t.selection.empty),Qt&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,o=t.focusOffset;n&&1==n.nodeType&&0!=o;){let t=o<0?n.lastChild:n.childNodes[o-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,o=-1}}e.input.composing=!0}or(e,nr)},jo.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,or(e,20))};const lr=Jt&&Xt<15||on&&cn<604;function ar(e,t,n,o,r){let i=Do(e,t,n,o,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,r,i||y.empty)))return!0;if(!i)return!1;let s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),l=s?e.state.tr.replaceSelectionWith(s,o):e.state.tr.replaceSelection(i);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function cr(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Fo.copy=jo.cut=(e,t)=>{let n=t,o=e.state.selection,r="cut"==n.type;if(o.empty)return;let i=lr?null:n.clipboardData,s=o.content(),{dom:l,text:a}=Eo(e,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",a)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let o=getSelection(),r=document.createRange();r.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(r),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,l),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},jo.paste=(e,t)=>{let n=t;if(e.composing&&!ln)return;let o=lr?null:n.clipboardData,r=e.input.shiftKey&&45!=e.input.lastKeyCode;o&&ar(e,cr(o),o.getData("text/html"),r,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,o=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus();let r=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),o.parentNode&&o.parentNode.removeChild(o),n?ar(e,o.value,null,r,t):ar(e,o.textContent,o.innerHTML,r,t)},50)}(e,n)};class ur{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const dr=rn?"altKey":"ctrlKey";function hr(e,t){let n=e.someProp("dragCopies",e=>!e(t));return null!=n?n:!t[dr]}Fo.dragstart=(e,t)=>{let n=t,o=e.input.mouseDown;if(o&&o.done(),!n.dataTransfer)return;let r,i=e.state.selection,s=i.empty?null:e.posAtCoords(qo(n));if(s&&s.pos>=i.from&&s.pos<=(i instanceof gt?i.to-1:i.to));else if(o&&o.mightDrag)r=gt.create(e.state.doc,o.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(r=gt.create(e.state.doc,t.posBefore))}let l=(r||e.state.selection).content(),{dom:a,text:c,slice:u}=Eo(e,l);(!n.dataTransfer.files.length||!en||tn>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(lr?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",lr||n.dataTransfer.setData("text/plain",c),e.dragging=new ur(u,hr(e,n),r)},Fo.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},jo.dragover=jo.dragenter=(e,t)=>t.preventDefault(),jo.drop=(e,t)=>{let n=t,o=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let r=e.posAtCoords(qo(n));if(!r)return;let i=e.state.doc.resolve(r.pos),s=o&&o.slice;s?e.someProp("transformPasted",t=>{s=t(s,e)}):s=Do(e,cr(n.dataTransfer),lr?null:n.dataTransfer.getData("text/html"),!1,i);let l=!(!o||!hr(e,n));if(e.someProp("handleDrop",t=>t(e,n,s||y.empty,l)))return void n.preventDefault();if(!s)return;n.preventDefault();let a=s?Ge(e.state.doc,i.pos,s):i.pos;null==a&&(a=i.pos);let c=e.state.tr;if(l){let{node:e}=o;e?e.replace(c):c.deleteSelection()}let u=c.mapping.map(a),d=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&gt.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new gt(p));else{let t=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((e,n,o,r)=>t=r),c.setSelection(co(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},Fo.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&no(e)},20))},Fo.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},Fo.beforeinput=(e,t)=>{if(en&&ln&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,Ut(8,"Backspace"))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}};for(let os in jo)Fo[os]=jo[os];function pr(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class fr{constructor(e,t){this.toDOM=e,this.spec=t||br,this.side=this.spec.side||0}map(e,t,n,o){let{pos:r,deleted:i}=e.mapResult(t.from+o,this.side<0?-1:1);return i?null:new vr(r-n,r-n,this)}valid(){return!0}eq(e){return this==e||e instanceof fr&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&pr(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class mr{constructor(e,t){this.attrs=e,this.spec=t||br}map(e,t,n,o){let r=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-n;return r>=i?null:new vr(r,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof mr&&pr(this.attrs,e.attrs)&&pr(this.spec,e.spec)}static is(e){return e.type instanceof mr}destroy(){}}class gr{constructor(e,t){this.attrs=e,this.spec=t||br}map(e,t,n,o){let r=e.mapResult(t.from+o,1);if(r.deleted)return null;let i=e.mapResult(t.to+o,-1);return i.deleted||i.pos<=r.pos?null:new vr(r.pos-n,i.pos-n,this)}valid(e,t){let n,{index:o,offset:r}=e.content.findIndex(t.from);return r==t.from&&!(n=e.child(o)).isText&&r+n.nodeSize==t.to}eq(e){return this==e||e instanceof gr&&pr(this.attrs,e.attrs)&&pr(this.spec,e.spec)}destroy(){}}class vr{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new vr(e,t,this.type)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new vr(e,e,new fr(t,n))}static inline(e,t,n,o){return new vr(e,t,new mr(n,o))}static node(e,t,n,o){return new vr(e,t,new gr(n,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof mr}get widget(){return this.type instanceof fr}}const yr=[],br={};class wr{constructor(e,t){this.local=e.length?e:yr,this.children=t.length?t:yr}static create(e,t){return t.length?Er(t,e,0,br):kr}find(e,t,n){let o=[];return this.findInner(null==e?0:e,null==t?1e9:t,o,0,n),o}findInner(e,t,n,o,r){for(let i=0;i<this.local.length;i++){let s=this.local[i];s.from<=t&&s.to>=e&&(!r||r(s.spec))&&n.push(s.copy(s.from+o,s.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let s=this.children[i]+1;this.children[i+2].findInner(e-s,t-s,n,o+s,r)}}map(e,t,n){return this==kr||0==e.maps.length?this:this.mapInner(e,t,0,0,n||br)}mapInner(e,t,n,o,r){let i;for(let s=0;s<this.local.length;s++){let l=this.local[s].map(e,n,o);l&&l.type.valid(t,l)?(i||(i=[])).push(l):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,o,r,i,s){let l=e.slice();for(let c=0,u=i;c<n.maps.length;c++){let e=0;n.maps[c].forEach((t,n,o,r)=>{let i=r-o-(n-t);for(let s=0;s<l.length;s+=3){let o=l[s+1];if(o<0||t>o+u-e)continue;let r=l[s]+u-e;n>=r?l[s+1]=t<=r?-2:-1:t>=u&&i&&(l[s]+=i,l[s+1]+=i)}e+=i}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(-2==l[c+1]){a=!0,l[c+1]=-1;continue}let t=n.map(e[c]+i),u=t-r;if(u<0||u>=o.content.size){a=!0;continue}let d=n.map(e[c+1]+i,-1)-r,{index:h,offset:p}=o.content.findIndex(u),f=o.maybeChild(h);if(f&&p==u&&p+f.nodeSize==d){let o=l[c+2].mapInner(n,f,t+1,e[c]+i+1,s);o!=kr?(l[c]=u,l[c+1]=d,l[c+2]=o):(l[c+1]=-2,a=!0)}else a=!0}if(a){let a=function(e,t,n,o,r,i,s){function l(e,t){for(let i=0;i<e.local.length;i++){let l=e.local[i].map(o,r,t);l?n.push(l):s.onRemove&&s.onRemove(e.local[i].spec)}for(let n=0;n<e.children.length;n+=3)l(e.children[n+2],e.children[n]+t+1)}for(let a=0;a<e.length;a+=3)-1==e[a+1]&&l(e[a+2],t[a]+i+1);return n}(l,e,t,n,r,i,s),c=Er(a,o,0,s);t=c.local;for(let e=0;e<l.length;e+=3)l[e+1]<0&&(l.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<l.length&&l[t]<n;)t+=3;l.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new wr(t.sort(Dr),l)}(this.children,i||[],e,t,n,o,r):i?new wr(i.sort(Dr),yr):kr}add(e,t){return t.length?this==kr?wr.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let o,r=0;e.forEach((e,i)=>{let s,l=i+n;if(s=Sr(t,e,l)){for(o||(o=this.children.slice());r<o.length&&o[r]<i;)r+=3;o[r]==i?o[r+2]=o[r+2].addInner(e,s,l+1):o.splice(r,0,i,i+e.nodeSize,Er(s,e,l+1,br)),r+=3}});let i=xr(r?Ar(t):t,-n);for(let s=0;s<i.length;s++)i[s].type.valid(e,i[s])||i.splice(s--,1);return new wr(i.length?this.local.concat(i).sort(Dr):this.local,o||this.children)}remove(e){return 0==e.length||this==kr?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,o=this.local;for(let r=0;r<n.length;r+=3){let o,i=n[r]+t,s=n[r+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>i&&t.to<s&&(e[n]=null,(o||(o=[])).push(t));if(!o)continue;n==this.children&&(n=this.children.slice());let l=n[r+2].removeInner(o,i+1);l!=kr?n[r+2]=l:(n.splice(r,3),r-=3)}if(o.length)for(let r,i=0;i<e.length;i++)if(r=e[i])for(let e=0;e<o.length;e++)o[e].eq(r,t)&&(o==this.local&&(o=this.local.slice()),o.splice(e--,1));return n==this.children&&o==this.local?this:o.length||n.length?new wr(o,n):kr}forChild(e,t){if(this==kr)return this;if(t.isLeaf)return wr.empty;let n,o;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let r=e+1,i=r+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<i&&e.to>r&&e.type instanceof mr){let t=Math.max(r,e.from)-r,n=Math.min(i,e.to)-r;t<n&&(o||(o=[])).push(e.copy(t,n))}}if(o){let e=new wr(o.sort(Dr),yr);return n?new Cr([e,n]):e}return n||kr}eq(e){if(this==e)return!0;if(!(e instanceof wr)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Mr(this.localsInner(e))}localsInner(e){if(this==kr)return yr;if(e.inlineContent||!this.local.some(mr.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof mr||t.push(this.local[n]);return t}forEachSet(e){e(this)}}wr.empty=new wr([],[]),wr.removeOverlap=Mr;const kr=wr.empty;class Cr{constructor(e){this.members=e}map(e,t){const n=this.members.map(n=>n.map(e,t,br));return Cr.from(n)}forChild(e,t){if(t.isLeaf)return wr.empty;let n=[];for(let o=0;o<this.members.length;o++){let r=this.members[o].forChild(e,t);r!=kr&&(r instanceof Cr?n=n.concat(r.members):n.push(r))}return Cr.from(n)}eq(e){if(!(e instanceof Cr)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let o=0;o<this.members.length;o++){let r=this.members[o].localsInner(e);if(r.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<r.length;e++)t.push(r[e])}else t=r}return t?Mr(n?t:t.sort(Dr)):yr}static from(e){switch(e.length){case 0:return kr;case 1:return e[0];default:return new Cr(e.every(e=>e instanceof wr)?e:e.reduce((e,t)=>e.concat(t instanceof wr?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function xr(e,t){if(!t||!e.length)return e;let n=[];for(let o=0;o<e.length;o++){let r=e[o];n.push(new vr(r.from+t,r.to+t,r.type))}return n}function Sr(e,t,n){if(t.isLeaf)return null;let o=n+t.nodeSize,r=null;for(let i,s=0;s<e.length;s++)(i=e[s])&&i.from>n&&i.to<o&&((r||(r=[])).push(i),e[s]=null);return r}function Ar(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Er(e,t,n,o){let r=[],i=!1;t.forEach((t,s)=>{let l=Sr(e,t,s+n);if(l){i=!0;let e=Er(l,t,n+s+1,o);e!=kr&&r.push(s,s+t.nodeSize,e)}});let s=xr(i?Ar(e):e,-n).sort(Dr);for(let l=0;l<s.length;l++)s[l].type.valid(t,s[l])||(o.onRemove&&o.onRemove(s[l].spec),s.splice(l--,1));return s.length||r.length?new wr(s,r):kr}function Dr(e,t){return e.from-t.from||e.to-t.to}function Mr(e){let t=e;for(let n=0;n<t.length-1;n++){let o=t[n];if(o.from!=o.to)for(let r=n+1;r<t.length;r++){let i=t[r];if(i.from!=o.from){i.from<o.to&&(t==e&&(t=e.slice()),t[n]=o.copy(o.from,i.from),Nr(t,r,o.copy(i.from,o.to)));break}i.to!=o.to&&(t==e&&(t=e.slice()),t[r]=i.copy(i.from,o.to),Nr(t,r+1,i.copy(o.to,i.to)))}}return t}function Nr(e,t,n){for(;t<e.length&&Dr(n,e[t])>0;)t++;e.splice(t,0,n)}function Tr(e){let t=[];return e.someProp("decorations",n=>{let o=n(e.state);o&&o!=kr&&t.push(o)}),e.cursorWrapper&&t.push(wr.create(e.state.doc,[e.cursorWrapper.deco])),Cr.from(t)}const Or={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Pr=Jt&&Xt<=11;class _r{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Lr{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new _r,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);Jt&&Xt<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),Pr&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Or)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(uo(this.view)){if(this.suppressingSelectionUpdates)return no(this.view);if(Jt&&Xt<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&It(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let r=e.focusNode;r;r=Lt(r))n.add(r);for(let r=e.anchorNode;r;r=Lt(r))if(n.has(r)){t=r;break}let o=t&&this.view.docView.nearestDesc(t);return o&&o.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&uo(e)&&!this.ignoreSelectionChange(n),r=-1,i=-1,s=!1,l=[];if(e.editable)for(let c=0;c<t.length;c++){let e=this.registerMutation(t[c],l);e&&(r=r<0?e.from:Math.min(e.from,r),i=i<0?e.to:Math.max(e.to,i),e.typeOver&&(s=!0))}if(Qt&&l.length){let t=l.filter(e=>"BR"==e.nodeName);if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let o of t){let t=o.parentNode;!t||"LI"!=t.nodeName||n&&Fr(e,n)==t||o.remove()}}}let a=null;r<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Vt(n)&&(a=eo(e))&&a.eq(ut.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,no(e),this.currentSelection.set(n),e.scrollToSelection()):(r>-1||o)&&(r>-1&&(e.docView.markDirty(r,i),function(e){if(Rr.has(e))return;if(Rr.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=Qt,Br)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Br=!0}}(e)),this.handleDOMChange(r,i,s,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||no(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let o=e.addedNodes[n];t.push(o),3==o.nodeType&&(this.lastChangedTextNode=o)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let o=e.previousSibling,r=e.nextSibling;if(Jt&&Xt<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:i}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(o=n),(!i||Array.prototype.indexOf.call(e.addedNodes,i)<0)&&(r=i)}let i=o&&o.parentNode==e.target?_t(o)+1:0,s=n.localPosFromDOM(e.target,i,-1),l=r&&r.parentNode==e.target?_t(r):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,l,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Rr=new WeakMap,Br=!1;function Ir(e,t){let n=t.startContainer,o=t.startOffset,r=t.endContainer,i=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return It(s.node,s.offset,r,i)&&([n,o,r,i]=[r,i,n,o]),{anchorNode:n,anchorOffset:o,focusNode:r,focusOffset:i}}function Fr(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function jr(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(nn&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||nn&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const zr=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Hr(e,t,n,o,r){let i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=eo(e,t);if(n&&!e.state.selection.eq(n)){if(en&&ln&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,Ut(13,"Enter"))))return;let o=e.state.tr.setSelection(n);"pointer"==t?o.setMeta("pointer",!0):"key"==t&&o.scrollIntoView(),i&&o.setMeta("composition",i),e.dispatch(o)}return}let s=e.state.doc.resolve(t),l=s.sharedDepth(n);t=s.before(l+1),n=e.state.doc.resolve(n).after(l+1);let a,c,u=e.state.selection,d=function(e,t,n){let o,{node:r,fromOffset:i,toOffset:s,from:l,to:a}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(o=[{node:u,offset:c.anchorOffset}],Vt(c)||o.push({node:c.focusNode,offset:c.focusOffset})),en&&8===e.input.lastKeyCode)for(let g=s;g>i;g--){let e=r.childNodes[g-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){s=g;break}if(!t||t.size)break}let d=e.state.doc,h=e.someProp("domParser")||oe.fromSchema(e.state.schema),p=d.resolve(l),f=null,m=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:o,ruleFromNode:jr,context:p});if(o&&null!=o[0].pos){let e=o[0].pos,t=o[1]&&o[1].pos;null==t&&(t=e),f={anchor:e+l,head:t+l}}return{doc:m,sel:f,from:l,to:a}}(e,t,n),p=e.state.doc,f=p.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(a=e.state.selection.to,c="end"):(a=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let m=function(e,t,n,o,r){let i=e.findDiffStart(t,n);if(null==i)return null;let{a:s,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==r){o-=s+Math.max(0,i-Math.min(s,l))-i}if(s<i&&e.size<t.size){let e=o<=i&&o>=s?i-o:0;i-=e,i&&i<t.size&&$r(t.textBetween(i-1,i+1))&&(i+=e?1:-1),l=i+(l-s),s=i}else if(l<i){let t=o<=i&&o>=l?i-o:0;i-=t,i&&i<e.size&&$r(e.textBetween(i-1,i+1))&&(i+=t?1:-1),s=i+(s-l),l=i}return{start:i,endA:s,endB:l}}(f.content,d.doc.content,d.from,a,c);if(m&&e.input.domChangeCount++,(on&&e.input.lastIOSEnter>Date.now()-225||ln)&&r.some(e=>1==e.nodeType&&!zr.test(e.nodeName))&&(!m||m.endA>=m.endB)&&e.someProp("handleKeyDown",t=>t(e,Ut(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(!m){if(!(o&&u instanceof ft&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=Vr(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);i&&n.setMeta("composition",i),e.dispatch(n)}}return}m={start:u.from,endA:u.to,endB:u.to}}e.state.selection.from<e.state.selection.to&&m.start==m.endB&&e.state.selection instanceof ft&&(m.start>e.state.selection.from&&m.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?m.start=e.state.selection.from:m.endA<e.state.selection.to&&m.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(m.endB+=e.state.selection.to-m.endA,m.endA=e.state.selection.to)),Jt&&Xt<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>d.from&&" \xa0"==d.doc.textBetween(m.start-d.from-1,m.start-d.from+1)&&(m.start--,m.endA--,m.endB--);let g,v=d.doc.resolveNoCache(m.start-d.from),y=d.doc.resolveNoCache(m.endB-d.from),b=p.resolve(m.start),w=v.sameParent(y)&&v.parent.inlineContent&&b.end()>=m.endA;if((on&&e.input.lastIOSEnter>Date.now()-225&&(!w||r.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!w&&v.pos<d.doc.content.size&&(!v.sameParent(y)||!v.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(v.pos,y.pos,"",""))&&(g=ut.findFrom(d.doc.resolve(v.pos+1),1,!0))&&g.head>v.pos)&&e.someProp("handleKeyDown",t=>t(e,Ut(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>m.start&&function(e,t,n,o,r){if(n-t<=r.pos-o.pos||Ur(o,!0,!1)<r.pos)return!1;let i=e.resolve(t);if(!o.parent.isTextblock){let e=i.nodeAfter;return null!=e&&n==t+e.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=e.resolve(Ur(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Ur(s,!0,!1)<n)&&o.parent.content.cut(o.parentOffset).eq(s.parent.content)}(p,m.start,m.endA,v,y)&&e.someProp("handleKeyDown",t=>t(e,Ut(8,"Backspace"))))return void(ln&&en&&e.domObserver.suppressSelectionUpdates());en&&m.endB==m.start&&(e.input.lastChromeDelete=Date.now()),ln&&!w&&v.start()!=y.start()&&0==y.parentOffset&&v.depth==y.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==m.endA&&(m.endB-=2,y=d.doc.resolveNoCache(m.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,Ut(13,"Enter"))})},20));let k,C=m.start,x=m.endA,S=t=>{let n=t||e.state.tr.replace(C,x,d.doc.slice(m.start-d.from,m.endB-d.from));if(d.sel){let t=Vr(e,n.doc,d.sel);t&&!(en&&e.composing&&t.empty&&(m.start!=m.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==C||t.head==n.mapping.map(x)-1)||Jt&&t.empty&&t.head==C)&&n.setSelection(t)}return i&&n.setMeta("composition",i),n.scrollIntoView()};if(w){if(v.pos==y.pos){Jt&&Xt<=11&&0==v.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>no(e),20));let t=S(e.state.tr.delete(C,x)),n=p.resolve(m.start).marksAcross(p.resolve(m.endA));n&&t.ensureMarks(n),e.dispatch(t)}else if(m.endA==m.endB&&(k=function(e,t){let n,o,r,i=e.firstChild.marks,s=t.firstChild.marks,l=i,a=s;for(let u=0;u<s.length;u++)l=s[u].removeFromSet(l);for(let u=0;u<i.length;u++)a=i[u].removeFromSet(a);if(1==l.length&&0==a.length)o=l[0],n="add",r=e=>e.mark(o.addToSet(e.marks));else{if(0!=l.length||1!=a.length)return null;o=a[0],n="remove",r=e=>e.mark(o.removeFromSet(e.marks))}let c=[];for(let u=0;u<t.childCount;u++)c.push(r(t.child(u)));if(h.from(c).eq(e))return{mark:o,type:n}}(v.parent.content.cut(v.parentOffset,y.parentOffset),b.parent.content.cut(b.parentOffset,m.endA-b.start())))){let t=S(e.state.tr);"add"==k.type?t.addMark(C,x,k.mark):t.removeMark(C,x,k.mark),e.dispatch(t)}else if(v.parent.child(v.index()).isText&&v.index()==y.index()-(y.textOffset?0:1)){let t=v.parent.textBetween(v.parentOffset,y.parentOffset),n=()=>S(e.state.tr.insertText(t,C,x));e.someProp("handleTextInput",o=>o(e,C,x,t,n))||e.dispatch(n())}}else e.dispatch(S())}function Vr(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:co(e,t.resolve(n.anchor),t.resolve(n.head))}function Ur(e,t,n){let o=e.depth,r=t?e.end():e.pos;for(;o>0&&(t||e.indexAfter(o)==e.node(o).childCount);)o--,r++,t=!1;if(n){let t=e.node(o).maybeChild(e.indexAfter(o));for(;t&&!t.isLeaf;)t=t.firstChild,r++}return r}function $r(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class Wr{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ho,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Jr),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Kr(this),Gr(this),this.nodeViews=Zr(this),this.docView=Fn(this.state.doc,qr(this),Tr(this),this.dom,this),this.domObserver=new Lr(this,(e,t,n,o)=>Hr(this,e,t,n,o)),this.domObserver.start(),function(e){for(let t in Fo){let n=Fo[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!Wo(e,t)||$o(e,t)||!e.editable&&t.type in jo||n(e,t)},zo[t]?{passive:!0}:void 0)}nn&&e.dom.addEventListener("input",()=>null),Uo(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Uo(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Jr),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let o=this.state,r=!1,i=!1;e.storedMarks&&this.composing&&(rr(this),i=!0),this.state=e;let s=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(s||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=Zr(this);(function(e,t){let n=0,o=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let r in t)o++;return n!=o})(e,this.nodeViews)&&(this.nodeViews=e,r=!0)}(s||t.handleDOMEvents!=this._props.handleDOMEvents)&&Uo(this),this.editable=Kr(this),Gr(this);let l=Tr(this),a=qr(this),c=o.plugins==e.plugins||o.doc.eq(e.doc)?e.scrollToSelection>o.scrollToSelection?"to selection":"preserve":"reset",u=r||!this.docView.matchesNode(e.doc,a,l);!u&&e.selection.eq(o.selection)||(i=!0);let d="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&function(e){let t,n,o=e.dom.getBoundingClientRect(),r=Math.max(0,o.top);for(let i=(o.left+o.right)/2,s=r+1;s<Math.min(innerHeight,o.bottom);s+=5){let o=e.root.elementFromPoint(i,s);if(!o||o==e.dom||!e.dom.contains(o))continue;let l=o.getBoundingClientRect();if(l.top>=r-20){t=o,n=l.top;break}}return{refDOM:t,refTop:n,stack:fn(e.dom)}}(this);if(i){this.domObserver.stop();let t=u&&(Jt||en)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(o.selection,e.selection);if(u){let n=en?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=ir(this)),!r&&this.docView.update(e.doc,a,l,this)||(this.docView.updateOuterDeco(a),this.docView.destroy(),this.docView=Fn(e.doc,a,l,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return It(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?no(this,t):(lo(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&function(e){let{refDOM:t,refTop:n,stack:o}=e,r=t?t.getBoundingClientRect().top:0;mn(o,0==r?0:r-n)}(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof gt){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&pn(this,t.getBoundingClientRect(),e)}else pn(this,this.coordsAtPos(this.state.selection.head,1),e);else;}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,o=-1;if(this.state.doc.nodeAt(n.from)==n.node)o=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(o=e)}this.dragging=new ur(e.slice,e.move,o<0?void 0:gt.create(this.state.doc,o))}someProp(e,t){let n,o=this._props&&this._props[e];if(null!=o&&(n=t?t(o):o))return n;for(let i=0;i<this.directPlugins.length;i++){let o=this.directPlugins[i].props[e];if(null!=o&&(n=t?t(o):o))return n}let r=this.state.plugins;if(r)for(let i=0;i<r.length;i++){let o=r[i].props[e];if(null!=o&&(n=t?t(o):o))return n}}hasFocus(){if(Jt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(gn)return e.focus(gn);let t=fn(e);e.focus(null==gn?{get preventScroll(){return gn={preventScroll:!0},!0}}:void 0),gn||(gn=!1,mn(t,0))}(this.dom),no(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}updateRoot(){this._root=null}posAtCoords(e){return wn(this,e)}coordsAtPos(e){return Sn(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}domAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=this.docView.posFromDOM(e,t,n);if(null==o)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return Pn(this,t||this.state,e)}pasteHTML(e,t){return ar(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ar(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Eo(this,e)}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Tr(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Rt=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){$o(e,t)||!Fo[t.type]||!e.editable&&t.type in jo||Fo[t.type](e,t)}(this,e)}domSelectionRange(){let e=this.domSelection();return e?nn&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return Ir(e,n)}let n;function o(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",o,!0),n?Ir(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function qr(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[vr.node(0,e.state.doc.content.size,t)]}function Gr(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:vr.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Kr(e){return!e.someProp("editable",t=>!1===t(e.state))}function Zr(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function Jr(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}Wr.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};for(var Xr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Qr={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Yr="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ei="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ti=0;ti<10;ti++)Xr[48+ti]=Xr[96+ti]=String(ti);for(ti=1;ti<=24;ti++)Xr[ti+111]="F"+ti;for(ti=65;ti<=90;ti++)Xr[ti]=String.fromCharCode(ti+32),Qr[ti]=String.fromCharCode(ti);for(var ni in Xr)Qr.hasOwnProperty(ni)||(Qr[ni]=Xr[ni]);const oi="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),ri="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function ii(e){let t,n,o,r,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(let l=0;l<i.length-1;l++){let e=i[l];if(/^(cmd|meta|m)$/i.test(e))r=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))o=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);oi?r=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),r&&(s="Meta-"+s),o&&(s="Shift-"+s),s}function si(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function li(e){let t=function(e){let t=Object.create(null);for(let n in e)t[ii(n)]=e[n];return t}(e);return function(e,n){let o,r=function(e){var t=!(Yr&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||ei&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?Qr:Xr)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),i=t[si(r,n)];if(i&&i(e.state,e.dispatch,e))return!0;if(1==r.length&&" "!=r){if(n.shiftKey){let o=t[si(r,n,!1)];if(o&&o(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(ri&&n.ctrlKey&&n.altKey)&&(o=Xr[n.keyCode])&&o!=r){let r=t[si(o,n)];if(r&&r(e.state,e.dispatch,e))return!0}}return!1}}const ai=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function ci(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const ui=(e,t,n)=>{let o=ci(e,n);if(!o)return!1;let r=fi(o);if(!r){let n=o.blockRange(),r=n&&Fe(n);return null!=r&&(t&&t(e.tr.lift(n,r).scrollIntoView()),!0)}let i=r.nodeBefore;if(Ei(e,r,t,-1))return!0;if(0==o.parent.content.size&&(hi(i,"end")||gt.isSelectable(i)))for(let s=o.depth;;s--){let n=Ke(e.doc,o.before(s),o.after(s),y.empty);if(n&&n.slice.size<n.to-n.from){if(t){let o=e.tr.step(n);o.setSelection(hi(i,"end")?ut.findFrom(o.doc.resolve(o.mapping.map(r.pos,-1)),-1):gt.create(o.doc,r.pos-i.nodeSize)),t(o.scrollIntoView())}return!0}if(1==s||o.node(s-1).childCount>1)break}return!(!i.isAtom||r.depth!=o.depth-1)&&(t&&t(e.tr.delete(r.pos-i.nodeSize,r.pos).scrollIntoView()),!0)};function di(e,t,n){let o=t.nodeBefore,r=t.pos-1;for(;!o.isTextblock;r--){if(o.type.spec.isolating)return!1;let e=o.lastChild;if(!e)return!1;o=e}let i=t.nodeAfter,s=t.pos+1;for(;!i.isTextblock;s++){if(i.type.spec.isolating)return!1;let e=i.firstChild;if(!e)return!1;i=e}let l=Ke(e.doc,r,s,y.empty);if(!l||l.from!=r||l instanceof _e&&l.slice.size>=s-r)return!1;if(n){let t=e.tr.step(l);t.setSelection(ft.create(t.doc,r)),n(t.scrollIntoView())}return!0}function hi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let o=e;o;o="start"==t?o.firstChild:o.lastChild){if(o.isTextblock)return!0;if(n&&1!=o.childCount)return!1}return!1}const pi=(e,t,n)=>{let{$head:o,empty:r}=e.selection,i=o;if(!r)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;i=fi(o)}let s=i&&i.nodeBefore;return!(!s||!gt.isSelectable(s))&&(t&&t(e.tr.setSelection(gt.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function fi(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function mi(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const gi=(e,t,n)=>{let o=mi(e,n);if(!o)return!1;let r=yi(o);if(!r)return!1;let i=r.nodeAfter;if(Ei(e,r,t,1))return!0;if(0==o.parent.content.size&&(hi(i,"start")||gt.isSelectable(i))){let n=Ke(e.doc,o.before(),o.after(),y.empty);if(n&&n.slice.size<n.to-n.from){if(t){let o=e.tr.step(n);o.setSelection(hi(i,"start")?ut.findFrom(o.doc.resolve(o.mapping.map(r.pos)),1):gt.create(o.doc,o.mapping.map(r.pos))),t(o.scrollIntoView())}return!0}}return!(!i.isAtom||r.depth!=o.depth-1)&&(t&&t(e.tr.delete(r.pos,r.pos+i.nodeSize).scrollIntoView()),!0)},vi=(e,t,n)=>{let{$head:o,empty:r}=e.selection,i=o;if(!r)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;i=yi(o)}let s=i&&i.nodeAfter;return!(!s||!gt.isSelectable(s))&&(t&&t(e.tr.setSelection(gt.create(e.doc,i.pos)).scrollIntoView()),!0)};function yi(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const bi=(e,t)=>{let{$head:n,$anchor:o}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function wi(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const ki=(e,t)=>{let{$head:n,$anchor:o}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(o))return!1;let r=n.node(-1),i=n.indexAfter(-1),s=wi(r.contentMatchAt(i));if(!s||!r.canReplaceWith(i,i,s))return!1;if(t){let o=n.after(),r=e.tr.replaceWith(o,o,s.createAndFill());r.setSelection(ut.near(r.doc.resolve(o),1)),t(r.scrollIntoView())}return!0},Ci=(e,t)=>{let n=e.selection,{$from:o,$to:r}=n;if(n instanceof yt||o.parent.inlineContent||r.parent.inlineContent)return!1;let i=wi(r.parent.contentMatchAt(r.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let n=(!o.parentOffset&&r.index()<r.parent.childCount?o:r).pos,s=e.tr.insert(n,i.createAndFill());s.setSelection(ft.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},xi=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Ue(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let o=n.blockRange(),r=o&&Fe(o);return null!=r&&(t&&t(e.tr.lift(o,r).scrollIntoView()),!0)};const Si=(e,t)=>{let{$from:n,$to:o}=e.selection;if(e.selection instanceof gt&&e.selection.node.isBlock)return!(!n.parentOffset||!Ue(e.doc,n.pos))&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let r,i,s=[],l=!1,a=!1;for(let h=n.depth;;h--){if(n.node(h).isBlock){l=n.end(h)==n.pos+(n.depth-h),a=n.start(h)==n.pos-(n.depth-h),i=wi(n.node(h-1).contentMatchAt(n.indexAfter(h-1)));let e=Ai&&Ai(o.parent,l,n);s.unshift(e||(l&&i?{type:i}:null)),r=h;break}if(1==h)return!1;s.unshift(null)}let c=e.tr;(e.selection instanceof ft||e.selection instanceof yt)&&c.deleteSelection();let u=c.mapping.map(n.pos),d=Ue(c.doc,u,s.length,s);if(d||(s[0]=i?{type:i}:null,d=Ue(c.doc,u,s.length,s)),!d)return!1;if(c.split(u,s.length,s),!l&&a&&n.node(r).type!=i){let e=c.mapping.map(n.before(r)),t=c.doc.resolve(e);i&&n.node(r-1).canReplaceWith(t.index(),t.index()+1,i)&&c.setNodeMarkup(c.mapping.map(n.before(r)),i)}return t&&t(c.scrollIntoView()),!0};var Ai;function Ei(e,t,n,o){let r,i,s=t.nodeBefore,l=t.nodeAfter,a=s.type.spec.isolating||l.type.spec.isolating;if(!a&&function(e,t,n){let o=t.nodeBefore,r=t.nodeAfter,i=t.index();return!!(o&&r&&o.type.compatibleContent(r.type))&&(!o.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(i,i+1)||!r.isTextblock&&!$e(e.doc,t.pos))&&(n&&n(e.tr.join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;let c=!a&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(r=(i=s.contentMatchAt(s.childCount)).findWrapping(l.type))&&i.matchType(r[0]||l.type).validEnd){if(n){let o=t.pos+l.nodeSize,i=h.empty;for(let e=r.length-1;e>=0;e--)i=h.from(r[e].create(null,i));i=h.from(s.copy(i));let a=e.tr.step(new Le(t.pos-1,o,t.pos,o,new y(i,1,0),r.length,!0)),c=a.doc.resolve(o+2*r.length);c.nodeAfter&&c.nodeAfter.type==s.type&&$e(a.doc,c.pos)&&a.join(c.pos),n(a.scrollIntoView())}return!0}let u=l.type.spec.isolating||o>0&&a?null:ut.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),p=d&&Fe(d);if(null!=p&&p>=t.depth)return n&&n(e.tr.lift(d,p).scrollIntoView()),!0;if(c&&hi(l,"start",!0)&&hi(s,"end")){let o=s,r=[];for(;r.push(o),!o.isTextblock;)o=o.lastChild;let i=l,a=1;for(;!i.isTextblock;i=i.firstChild)a++;if(o.canReplace(o.childCount,o.childCount,i.content)){if(n){let o=h.empty;for(let e=r.length-1;e>=0;e--)o=h.from(r[e].copy(o));n(e.tr.step(new Le(t.pos-r.length,t.pos+l.nodeSize,t.pos+a,t.pos+l.nodeSize-a,new y(o,r.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Di(e){return function(t,n){let o=t.selection,r=e<0?o.$from:o.$to,i=r.depth;for(;r.node(i).isInline;){if(!i)return!1;i--}return!!r.node(i).isTextblock&&(n&&n(t.tr.setSelection(ft.create(t.doc,e<0?r.start(i):r.end(i)))),!0)}}const Mi=Di(-1),Ni=Di(1);function Ti(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,o){let r=!1;for(let i=0;i<n.selection.ranges.length&&!r;i++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[i];n.doc.nodesBetween(o,s,(o,i)=>{if(r)return!1;if(o.isTextblock&&!o.hasMarkup(e,t))if(o.type==e)r=!0;else{let t=n.doc.resolve(i),o=t.index();r=t.parent.canReplaceWith(o,o+1,e)}})}if(!r)return!1;if(o){let r=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:i},$to:{pos:s}}=n.selection.ranges[o];r.setBlockType(i,s,e,t)}o(r.scrollIntoView())}return!0}}function Oi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,o){for(let r=0;r<t.length;r++)if(t[r](e,n,o))return!0;return!1}}let Pi=Oi(ai,ui,pi),_i=Oi(ai,gi,vi);const Li={Enter:Oi(bi,Ci,xi,Si),"Mod-Enter":ki,Backspace:Pi,"Mod-Backspace":Pi,"Shift-Backspace":Pi,Delete:_i,"Mod-Delete":_i,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new yt(e.doc))),!0)},Ri={"Ctrl-h":Li.Backspace,"Alt-Backspace":Li["Mod-Backspace"],"Ctrl-d":Li.Delete,"Ctrl-Alt-Backspace":Li["Mod-Delete"],"Alt-Delete":Li["Mod-Delete"],"Alt-d":Li["Mod-Delete"],"Ctrl-a":Mi,"Ctrl-e":Ni};for(let os in Li)Ri[os]=Li[os];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();function Bi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,o){let{$from:r,$to:i}=n.selection,s=r.blockRange(i);if(!s)return!1;let l=o?n.tr:null;return!!function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!1,i=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=s.resolve(t.start-2);i=new L(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new L(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),r=!0}let l=je(i,n,o,t);if(!l)return!1;e&&function(e,t,n,o,r){let i=h.empty;for(let u=n.length-1;u>=0;u--)i=h.from(n[u].type.create(n[u].attrs,i));e.step(new Le(t.start-(o?2:0),t.end,t.start,t.end,new y(i,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==r&&(s=u+1);let l=n.length-s,a=t.start+n.length-(o?2:0),c=t.parent;for(let u=t.startIndex,d=t.endIndex,h=!0;u<d;u++,h=!1)!h&&Ue(e.doc,a,l)&&(e.split(a,l),a+=2*l),a+=c.child(u).nodeSize}(e,t,l,r,n);return!0}(l,s,e,t)&&(o&&o(l.scrollIntoView()),!0)}}function Ii(e){return function(t,n){let{$from:o,$to:r}=t.selection,i=o.blockRange(r,t=>t.childCount>0&&t.firstChild.type==e);return!!i&&(!n||(o.node(i.depth-1).type==e?function(e,t,n,o){let r=e.tr,i=o.end,s=o.$to.end(o.depth);i<s&&(r.step(new Le(i-1,s,i,s,new y(h.from(n.create(null,o.parent.copy())),1,0),1,!0)),o=new L(r.doc.resolve(o.$from.pos),r.doc.resolve(s),o.depth));const l=Fe(o);if(null==l)return!1;r.lift(o,l);let a=r.doc.resolve(r.mapping.map(i,-1)-1);$e(r.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&r.join(a.pos);return t(r.scrollIntoView()),!0}(t,n,e,i):function(e,t,n){let o=e.tr,r=n.parent;for(let h=n.end,f=n.endIndex-1,m=n.startIndex;f>m;f--)h-=r.child(f).nodeSize,o.delete(h-1,h+1);let i=o.doc.resolve(n.start),s=i.nodeAfter;if(o.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let l=0==n.startIndex,a=n.endIndex==r.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(l?0:1),u+1,s.content.append(a?h.empty:h.from(r))))return!1;let d=i.pos,p=d+s.nodeSize;return o.step(new Le(d-(l?1:0),p+(a?1:0),d+1,p-1,new y((l?h.empty:h.from(r.copy(h.empty))).append(a?h.empty:h.from(r.copy(h.empty))),l?0:1,a?0:1),l?0:1)),t(o.scrollIntoView()),!0}(t,n,i)))}}function Fi(e){const{state:t,transaction:n}=e;let{selection:o}=n,{doc:r}=n,{storedMarks:i}=n;return(0,s.A)((0,s.A)({},t),{},{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return o},get doc(){return r},get tr(){return o=n.selection,r=n.doc,i=n.storedMarks,n}})}class ji{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){var e=this;const{rawCommands:t,editor:n,state:o}=this,{view:r}=n,{tr:i}=o,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(t=>{let[n,o]=t;return[n,function(){const t=o(...arguments)(s);return i.getMeta("preventDispatch")||e.hasCustomState||r.dispatch(i),t}]}))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{rawCommands:o,editor:r,state:i}=this,{view:l}=r,a=[],c=!!e,u=e||i.tr,d=(0,s.A)((0,s.A)({},Object.fromEntries(Object.entries(o).map(e=>{let[o,r]=e;return[o,function(){const e=t.buildProps(u,n),o=r(...arguments)(e);return a.push(o),d}]}))),{},{run:()=>(c||!n||u.getMeta("preventDispatch")||this.hasCustomState||l.dispatch(u),a.every(e=>!0===e))});return d}createCan(e){const{rawCommands:t,state:n}=this,o=!1,r=e||n.tr,i=this.buildProps(r,o),l=Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e;return[t,function(){return n(...arguments)((0,s.A)((0,s.A)({},i),{},{dispatch:void 0}))}]}));return(0,s.A)((0,s.A)({},l),{},{chain:()=>this.createChain(r,o)})}buildProps(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{rawCommands:n,editor:o,state:r}=this,{view:i}=o,s={tr:e,editor:o,view:i,state:Fi({state:r,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e;return[t,function(){return n(...arguments)(s)}]}))}};return s}}class zi{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const r=this.callbacks[e];return r&&r.forEach(e=>e.apply(this,n)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){var n=this;const o=function(){n.off(e,o);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];t.apply(n,i)};return this.on(e,o)}removeAllListeners(){this.callbacks={}}}function Hi(e,t,n){if(void 0===e.config[t]&&e.parent)return Hi(e.parent,t,n);if("function"===typeof e.config[t]){return e.config[t].bind((0,s.A)((0,s.A)({},n),{},{parent:e.parent?Hi(e.parent,t,n):null}))}return e.config[t]}function Vi(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function Ui(e){const t=[],{nodeExtensions:n,markExtensions:o}=Vi(e),r=[...n,...o],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{const n=Hi(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:r});if(!n)return;n().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(e=>{let[o,r]=e;t.push({type:n,name:o,attribute:(0,s.A)((0,s.A)({},i),r)})})})})}),r.forEach(e=>{const n={name:e.name,options:e.options,storage:e.storage},o=Hi(e,"addAttributes",n);if(!o)return;const r=o();Object.entries(r).forEach(n=>{let[o,r]=n;const l=(0,s.A)((0,s.A)({},i),r);"function"===typeof(null===l||void 0===l?void 0:l.default)&&(l.default=l.default()),(null===l||void 0===l?void 0:l.isRequired)&&void 0===(null===l||void 0===l?void 0:l.default)&&delete l.default,t.push({type:e.name,name:o,attribute:l})})}),t}function $i(e,t){if("string"===typeof e){if(!t.nodes[e])throw Error("There is no node type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.nodes[e]}return e}function Wi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>!!e).reduce((e,t)=>{const n=(0,s.A)({},e);return Object.entries(t).forEach(e=>{let[t,o]=e;if(n[t])if("class"===t){const e=o?String(o).split(" "):[],r=n[t]?n[t].split(" "):[],i=e.filter(e=>!r.includes(e));n[t]=[...r,...i].join(" ")}else if("style"===t){const e=o?o.split(";").map(e=>e.trim()).filter(Boolean):[],r=n[t]?n[t].split(";").map(e=>e.trim()).filter(Boolean):[],i=new Map;r.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),e.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),n[t]=Array.from(i.entries()).map(e=>{let[t,n]=e;return"".concat(t,": ").concat(n)}).join("; ")}else n[t]=o;else n[t]=o}),n},{})}function qi(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>Wi(e,t),{})}function Gi(e){return"function"===typeof e}function Ki(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(Gi(e)){for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return t?e.bind(t)(...o):e(...o)}return e}function Zi(e,t){return"style"in e?e:(0,s.A)((0,s.A)({},e),{},{getAttrs:n=>{const o=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===o)return!1;const r=t.reduce((e,t)=>{const o=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!==typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null===o||void 0===o?e:(0,s.A)((0,s.A)({},e),{},{[t.name]:o})},{});return(0,s.A)((0,s.A)({},o),r)}})}function Ji(e){return Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return("attrs"!==t||!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}(n))&&(null!==n&&void 0!==n)}))}function Xi(e,t){var n;const o=Ui(e),{nodeExtensions:r,markExtensions:i}=Vi(e),l=null===(n=r.find(e=>Hi(e,"topNode")))||void 0===n?void 0:n.name,a=Object.fromEntries(r.map(n=>{const r=o.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},l=e.reduce((e,t)=>{const o=Hi(t,"extendNodeSchema",i);return(0,s.A)((0,s.A)({},e),o?o(n):{})},{}),a=Ji((0,s.A)((0,s.A)({},l),{},{content:Ki(Hi(n,"content",i)),marks:Ki(Hi(n,"marks",i)),group:Ki(Hi(n,"group",i)),inline:Ki(Hi(n,"inline",i)),atom:Ki(Hi(n,"atom",i)),selectable:Ki(Hi(n,"selectable",i)),draggable:Ki(Hi(n,"draggable",i)),code:Ki(Hi(n,"code",i)),whitespace:Ki(Hi(n,"whitespace",i)),linebreakReplacement:Ki(Hi(n,"linebreakReplacement",i)),defining:Ki(Hi(n,"defining",i)),isolating:Ki(Hi(n,"isolating",i)),attrs:Object.fromEntries(r.map(e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))})),c=Ki(Hi(n,"parseHTML",i));c&&(a.parseDOM=c.map(e=>Zi(e,r)));const u=Hi(n,"renderHTML",i);u&&(a.toDOM=e=>u({node:e,HTMLAttributes:qi(e,r)}));const d=Hi(n,"renderText",i);return d&&(a.toText=d),[n.name,a]})),c=Object.fromEntries(i.map(n=>{const r=o.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},l=e.reduce((e,t)=>{const o=Hi(t,"extendMarkSchema",i);return(0,s.A)((0,s.A)({},e),o?o(n):{})},{}),a=Ji((0,s.A)((0,s.A)({},l),{},{inclusive:Ki(Hi(n,"inclusive",i)),excludes:Ki(Hi(n,"excludes",i)),group:Ki(Hi(n,"group",i)),spanning:Ki(Hi(n,"spanning",i)),code:Ki(Hi(n,"code",i)),attrs:Object.fromEntries(r.map(e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))})),c=Ki(Hi(n,"parseHTML",i));c&&(a.parseDOM=c.map(e=>Zi(e,r)));const u=Hi(n,"renderHTML",i);return u&&(a.toDOM=e=>u({mark:e,HTMLAttributes:qi(e,r)})),[n.name,a]}));return new te({topNode:l,nodes:a,marks:c})}function Qi(e,t){return t.nodes[e]||t.marks[e]||null}function Yi(e,t){return Array.isArray(t)?t.some(t=>("string"===typeof t?t:t.name)===e.name):t}function es(e,t){const n=pe.fromSchema(t).serializeFragment(e),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}function ts(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class ns{constructor(e){this.find=e.find,this.handler=e.handler}}function rs(e){var t;const{editor:n,from:o,to:r,text:i,rules:s,plugin:l}=e,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(o);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let u=!1;const d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="";const o=e.parentOffset;return e.parent.nodesBetween(Math.max(0,o-t),o,(e,t,r,i)=>{var s,l;const a=(null===(l=(s=e.type.spec).toText)||void 0===l?void 0:l.call(s,{node:e,pos:t,parent:r,index:i}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?a:a.slice(0,Math.max(0,o-t))}),n}(c)+i;return s.forEach(e=>{if(u)return;const t=((e,t)=>{if(ts(t))return t.exec(e);const n=t(e);if(!n)return null;const o=[n.text];return o.index=n.index,o.input=e,o.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),o.push(n.replaceWith)),o})(d,e.find);if(!t)return;const s=a.state.tr,c=Fi({state:a.state,transaction:s}),h={from:o-(t[0].length-i.length),to:r},{commands:p,chain:f,can:m}=new ji({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:p,chain:f,can:m})&&s.steps.length&&(s.setMeta(l,{transform:s,from:o,to:r,text:i}),a.dispatch(s),u=!0)}),u}function is(e){const{editor:t,rules:n}=e,o=new Nt({state:{init:()=>null,apply(e,r,i){const s=e.getMeta(o);if(s)return s;const l=e.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:e}=l;"string"===typeof e||(e=es(h.from(e),i.schema));const{from:r}=l,s=r+e.length;rs({editor:t,from:r,to:s,text:e,rules:n,plugin:o})}),e.selectionSet||e.docChanged?null:r}},props:{handleTextInput:(e,r,i,s)=>rs({editor:t,from:r,to:i,text:s,rules:n,plugin:o}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{const{$cursor:r}=e.state.selection;r&&rs({editor:t,from:r.pos,to:r.pos,text:"",rules:n,plugin:o})}),!1)},handleKeyDown(e,r){if("Enter"!==r.key)return!1;const{$cursor:i}=e.state.selection;return!!i&&rs({editor:t,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:o})}},isInputRules:!0});return o}function ss(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function ls(e,t){const n=(0,s.A)({},e);return ss(e)&&ss(t)&&Object.keys(t).forEach(o=>{ss(t[o])&&ss(e[o])?n[o]=ls(e[o],t[o]):n[o]=t[o]}),n}class as{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=(0,s.A)((0,s.A)({},this.config),e),this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ki(Hi(this,"addOptions",{name:this.name}))),this.storage=Ki(Hi(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new as(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend((0,s.A)((0,s.A)({},this.config),{},{addOptions:()=>ls(this.options,e)}));return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new as(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=Ki(Hi(t,"addOptions",{name:t.name})),t.storage=Ki(Hi(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit(e){let{editor:t,mark:n}=e;const{tr:o}=t.state,r=t.state.selection.$from;if(r.pos===r.end()){const e=r.marks();if(!!!e.find(e=>(null===e||void 0===e?void 0:e.type.name)===n.name))return!1;const i=e.find(e=>(null===e||void 0===e?void 0:e.type.name)===n.name);return i&&o.removeStoredMark(i),o.insertText(" ",r.pos),t.view.dispatch(o),!0}return!1}}class cs{constructor(e){this.find=e.find,this.handler=e.handler}}function us(e){const{editor:t,state:n,from:o,to:r,rule:i,pasteEvent:s,dropEvent:l}=e,{commands:a,chain:c,can:u}=new ji({editor:t,state:n}),d=[];n.doc.nodesBetween(o,r,(e,t)=>{if(!e.isTextblock||e.type.spec.code)return;const h=Math.max(o,t),p=Math.min(r,t+e.content.size),f=((e,t,n)=>{if(ts(t))return[...e.matchAll(t)];const o=t(e,n);return o?o.map(t=>{const n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]})(e.textBetween(h-t,p-t,void 0,"\ufffc"),i.find,s);f.forEach(e=>{if(void 0===e.index)return;const t=h+e.index+1,o=t+e[0].length,r={from:n.tr.mapping.map(t),to:n.tr.mapping.map(o)},p=i.handler({state:n,range:r,match:e,commands:a,chain:c,can:u,pasteEvent:s,dropEvent:l});d.push(p)})});return d.every(e=>null!==e)}let ds=null;function hs(e){const{editor:t,rules:n}=e;let o,r=null,i=!1,s=!1,l="undefined"!==typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{o="undefined"!==typeof DragEvent?new DragEvent("drop"):null}catch(u){o=null}const a=e=>{let{state:n,from:r,to:i,rule:s,pasteEvt:a}=e;const c=n.tr,u=Fi({state:n,transaction:c});if(us({editor:t,state:u,from:Math.max(r-1,0),to:i.b-1,rule:s,pasteEvent:a,dropEvent:o})&&c.steps.length){try{o="undefined"!==typeof DragEvent?new DragEvent("drop"):null}catch(d){o=null}return l="undefined"!==typeof ClipboardEvent?new ClipboardEvent("paste"):null,c}},c=n.map(e=>new Nt({view(e){const n=n=>{var o;r=(null===(o=e.dom.parentElement)||void 0===o?void 0:o.contains(n.target))?e.dom.parentElement:null,r&&(ds=t)},o=()=>{ds&&(ds=null)};return window.addEventListener("dragstart",n),window.addEventListener("dragend",o),{destroy(){window.removeEventListener("dragstart",n),window.removeEventListener("dragend",o)}}},props:{handleDOMEvents:{drop:(e,t)=>{if(s=r===e.dom.parentElement,o=t,!s){const e=ds;e&&setTimeout(()=>{const t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;const o=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return l=t,i=!!(null===o||void 0===o?void 0:o.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,o)=>{const r=t[0],c="paste"===r.getMeta("uiEvent")&&!i,u="drop"===r.getMeta("uiEvent")&&!s,d=r.getMeta("applyPasteRules"),p=!!d;if(!c&&!u&&!p)return;if(p){let{text:t}=d;"string"===typeof t||(t=es(h.from(t),o.schema));const{from:n}=d,r=n+t.length,i=(e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=n.clipboardData)||void 0===t||t.setData("text/html",e),n})(t);return a({rule:e,state:o,from:n,to:{b:r},pasteEvt:i})}const f=n.doc.content.findDiffStart(o.doc.content),m=n.doc.content.findDiffEnd(o.doc.content);return"number"===typeof f&&m&&f!==m.b?a({rule:e,state:o,from:f,to:m,pasteEvt:l}):void 0}}));return c}class ps{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=ps.resolve(e),this.schema=Xi(this.extensions,t),this.setupExtensions()}static resolve(e){const t=ps.sort(ps.flatten(e)),n=function(e){const t=e.filter((t,n)=>e.indexOf(t)!==n);return Array.from(new Set(t))}(t.map(e=>e.name));return n.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(n.map(e=>"'".concat(e,"'")).join(", "),"]. This can lead to issues.")),t}static flatten(e){return e.map(e=>{const t=Hi(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,...this.flatten(t())]:e}).flat(10)}static sort(e){return e.sort((e,t)=>{const n=Hi(e,"priority")||100,o=Hi(t,"priority")||100;return n>o?-1:n<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const n=Hi(t,"addCommands",{name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Qi(t.name,this.schema)});return n?(0,s.A)((0,s.A)({},e),n()):e},{})}get plugins(){const{editor:e}=this,t=ps.sort([...this.extensions].reverse()),n=[],o=[],r=t.map(t=>{const r={name:t.name,options:t.options,storage:t.storage,editor:e,type:Qi(t.name,this.schema)},i=[],l=Hi(t,"addKeyboardShortcuts",r);let a={};if("mark"===t.type&&Hi(t,"exitable",r)&&(a.ArrowRight=()=>as.handleExit({editor:e,mark:t})),l){const t=Object.fromEntries(Object.entries(l()).map(t=>{let[n,o]=t;return[n,()=>o({editor:e})]}));a=(0,s.A)((0,s.A)({},a),t)}const c=new Nt({props:{handleKeyDown:li(a)}});i.push(c);const u=Hi(t,"addInputRules",r);Yi(t,e.options.enableInputRules)&&u&&n.push(...u());const d=Hi(t,"addPasteRules",r);Yi(t,e.options.enablePasteRules)&&d&&o.push(...d());const h=Hi(t,"addProseMirrorPlugins",r);if(h){const e=h();i.push(...e)}return i}).flat();return[is({editor:e,rules:n}),...hs({editor:e,rules:o}),...r]}get attributes(){return Ui(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Vi(this.extensions);return Object.fromEntries(t.filter(e=>!!Hi(e,"addNodeView")).map(t=>{const n=this.attributes.filter(e=>e.type===t.name),o={name:t.name,options:t.options,storage:t.storage,editor:e,type:$i(t.name,this.schema)},r=Hi(t,"addNodeView",o);if(!r)return[];return[t.name,(o,i,s,l,a)=>{const c=qi(o,n);return r()({node:o,view:i,getPos:s,decorations:l,innerDecorations:a,editor:e,extension:t,HTMLAttributes:c})}]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Qi(e.name,this.schema)};if("mark"===e.type){(null===(t=Ki(Hi(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name)}const o=Hi(e,"onBeforeCreate",n),r=Hi(e,"onCreate",n),i=Hi(e,"onUpdate",n),s=Hi(e,"onSelectionUpdate",n),l=Hi(e,"onTransaction",n),a=Hi(e,"onFocus",n),c=Hi(e,"onBlur",n),u=Hi(e,"onDestroy",n);o&&this.editor.on("beforeCreate",o),r&&this.editor.on("create",r),i&&this.editor.on("update",i),s&&this.editor.on("selectionUpdate",s),l&&this.editor.on("transaction",l),a&&this.editor.on("focus",a),c&&this.editor.on("blur",c),u&&this.editor.on("destroy",u)})}}class fs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=(0,s.A)((0,s.A)({},this.config),e),this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ki(Hi(this,"addOptions",{name:this.name}))),this.storage=Ki(Hi(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new fs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend((0,s.A)((0,s.A)({},this.config),{},{addOptions:()=>ls(this.options,e)}));return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new fs((0,s.A)((0,s.A)({},this.config),e));return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=Ki(Hi(t,"addOptions",{name:t.name})),t.storage=Ki(Hi(t,"addStorage",{name:t.name,options:t.options})),t}}function ms(e,t,n){const{from:o,to:r}=t,{blockSeparator:i="\n\n",textSerializers:s={}}=n||{};let l="";return e.nodesBetween(o,r,(e,n,a,c)=>{var u;e.isBlock&&n>o&&(l+=i);const d=null===s||void 0===s?void 0:s[e.type.name];if(d)return a&&(l+=d({node:e,pos:n,parent:a,index:c,range:t})),!1;e.isText&&(l+=null===(u=null===e||void 0===e?void 0:e.text)||void 0===u?void 0:u.slice(Math.max(o,n)-n,r-n))}),l}function gs(e){return Object.fromEntries(Object.entries(e.nodes).filter(e=>{let[,t]=e;return t.spec.toText}).map(e=>{let[t,n]=e;return[t,n.spec.toText]}))}const vs=fs.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new Nt({key:new Pt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:o,selection:r}=t,{ranges:i}=r,l=Math.min(...i.map(e=>e.$from.pos)),a=Math.max(...i.map(e=>e.$to.pos)),c=gs(n);return ms(o,{from:l,to:a},(0,s.A)((0,s.A)({},void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{}),{},{textSerializers:c}))}}})]}});function ys(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0};const o=Object.keys(t);return!o.length||o.every(o=>n.strict?t[o]===e[o]:ts(t[o])?t[o].test(e[o]):t[o]===e[o])}function bs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find(e=>e.type===t&&ys(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function ws(e,t){return!!bs(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function ks(e,t,n){var o;if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(r.node&&r.node.marks.some(e=>e.type===t)||(r=e.parent.childBefore(e.parentOffset)),!r.node||!r.node.marks.some(e=>e.type===t))return;n=n||(null===(o=r.node.marks[0])||void 0===o?void 0:o.attrs);if(!bs([...r.node.marks],t,n))return;let i=r.index,s=e.start()+r.offset,l=i+1,a=s+r.node.nodeSize;for(;i>0&&ws([...e.parent.child(i-1).marks],t,n);)i-=1,s-=e.parent.child(i).nodeSize;for(;l<e.parent.childCount&&ws([...e.parent.child(l).marks],t,n);)a+=e.parent.child(l).nodeSize,l+=1;return{from:s,to:a}}function Cs(e,t){if("string"===typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}function xs(e){return e instanceof ft}function Ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function As(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;const n=ut.atStart(e),o=ut.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return o;const r=n.from,i=o.to;return"all"===t?ft.create(e,Ss(0,r,i),Ss(e.content.size,r,i)):ft.create(e,Ss(t,r,i),Ss(t,r,i))}function Es(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function Ds(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Ms=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const o=t[n];3===o.nodeType&&o.nodeValue&&/^(\n\s\s|\n)$/.test(o.nodeValue)?e.removeChild(o):1===o.nodeType&&Ms(o)}return e};function Ns(e){const t="<body>".concat(e,"</body>"),n=(new window.DOMParser).parseFromString(t,"text/html").body;return Ms(n)}function Ts(e,t,n){if(e instanceof B||e instanceof h)return e;n=(0,s.A)({slice:!0,parseOptions:{}},n);const o="string"===typeof e;if("object"===typeof e&&null!==e)try{if(Array.isArray(e)&&e.length>0)return h.fromArray(e.map(e=>t.nodeFromJSON(e)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(r){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),Ts("",t,n)}if(o){if(n.errorOnInvalidContent){let o=!1,r="";const i=new te({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(o=!0,r="string"===typeof e?e:e.outerHTML,null)}]}})});if(n.slice?oe.fromSchema(i).parseSlice(Ns(e),n.parseOptions):oe.fromSchema(i).parse(Ns(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error("Invalid element found: ".concat(r))})}const o=oe.fromSchema(t);return n.slice?o.parseSlice(Ns(e),n.parseOptions).content:o.parse(Ns(e),n.parseOptions)}return Ts("",t,n)}function Os(e,t,n){const o=e.steps.length-1;if(o<t)return;const r=e.steps[o];if(!(r instanceof _e||r instanceof Le))return;const i=e.mapping.maps[o];let s=0;i.forEach((e,t,n,o)=>{0===s&&(s=o)}),e.setSelection(ut.near(e.doc.resolve(s),n))}function Ps(){return"undefined"!==typeof navigator&&/Mac/.test(navigator.platform)}function _s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{from:o,to:r,empty:i}=e.selection,s=t?$i(t,e.schema):null,l=[];e.doc.nodesBetween(o,r,(e,t)=>{if(e.isText)return;const n=Math.max(o,t),i=Math.min(r,t+e.nodeSize);l.push({node:e,from:n,to:i})});const a=r-o,c=l.filter(e=>!s||s.name===e.node.type.name).filter(e=>ys(e.node.attrs,n,{strict:!1}));if(i)return!!c.length;return c.reduce((e,t)=>e+t.to-t.from,0)>=a}function Ls(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Rs(e,t){const n="string"===typeof t?[t]:t;return Object.keys(e).reduce((t,o)=>(n.includes(o)||(t[o]=e[o]),t),{})}function Bs(e,t){return Ts(e,t,{slice:!1,parseOptions:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},errorOnInvalidContent:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).errorOnInvalidContent})}function Is(e,t){const n=Cs(t,e.schema),{from:o,to:r,empty:i}=e.selection,l=[];i?(e.storedMarks&&l.push(...e.storedMarks),l.push(...e.selection.$head.marks())):e.doc.nodesBetween(o,r,e=>{l.push(...e.marks)});const a=l.find(e=>e.type.name===n.name);return a?(0,s.A)({},a.attrs):{}}function Fs(e,t){const n=new at(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n}function js(e,t){const n=[];return e.descendants((e,o)=>{t(e)&&n.push({node:e,pos:o})}),n}function zs(e,t,n){const o=[];return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&o.push({node:e,pos:t})}),o}function Hs(e){return t=>function(e,t){for(let n=e.depth;n>0;n-=1){const o=e.node(n);if(t(o))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:o}}}(t.$from,e)}function Vs(e,t){return Xi(ps.resolve(e),t)}function Us(e,t){return ms(e,{from:0,to:e.content.size},t)}function $s(e,t){const n=Ls("string"===typeof t?t:t.name,e.schema);return"node"===n?function(e,t){const n=$i(t,e.schema),{from:o,to:r}=e.selection,i=[];e.doc.nodesBetween(o,r,e=>{i.push(e)});const l=i.reverse().find(e=>e.type.name===n.name);return l?(0,s.A)({},l.attrs):{}}(e,t):"mark"===n?Is(e,t):{}}function Ws(e){const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify;const n={};return e.filter(e=>{const o=t(e);return!Object.prototype.hasOwnProperty.call(n,o)&&(n[o]=!0)})}(e);return 1===t.length?t:t.filter((e,n)=>!t.filter((e,t)=>t!==n).some(t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to))}function qs(e){const{mapping:t,steps:n}=e,o=[];return t.maps.forEach((e,r)=>{const i=[];if(e.ranges.length)e.forEach((e,t)=>{i.push({from:e,to:t})});else{const{from:e,to:t}=n[r];if(void 0===e||void 0===t)return;i.push({from:e,to:t})}i.forEach(e=>{let{from:n,to:i}=e;const s=t.slice(r).map(n,-1),l=t.slice(r).map(i),a=t.invert().map(s,-1),c=t.invert().map(l);o.push({oldRange:{from:a,to:c},newRange:{from:s,to:l}})})}),Ws(o)}function Gs(e,t,n){const o=[];return e===t?n.resolve(e).marks().forEach(t=>{const r=ks(n.resolve(e),t.type);r&&o.push((0,s.A)({mark:t},r))}):n.nodesBetween(e,t,(e,t)=>{e&&void 0!==(null===e||void 0===e?void 0:e.nodeSize)&&o.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),o}function Ks(e,t,n){return Object.fromEntries(Object.entries(n).filter(n=>{let[o]=n;const r=e.find(e=>e.type===t&&e.name===o);return!!r&&r.attribute.keepOnSplit}))}function Zs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{empty:o,ranges:r}=e.selection,i=t?Cs(t,e.schema):null;if(o)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!i||i.name===e.type.name).find(e=>ys(e.attrs,n,{strict:!1}));let s=0;const l=[];if(r.forEach(t=>{let{$from:n,$to:o}=t;const r=n.pos,i=o.pos;e.doc.nodesBetween(r,i,(e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(r,t),o=Math.min(i,t+e.nodeSize);s+=o-n,l.push(...e.marks.map(e=>({mark:e,from:n,to:o})))})}),0===s)return!1;const a=l.filter(e=>!i||i.name===e.mark.type.name).filter(e=>ys(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=l.filter(e=>!i||e.mark.type!==i&&e.mark.type.excludes(i)).reduce((e,t)=>e+t.to-t.from,0);return(a>0?a+c:a)>=s}function Js(e,t){const{nodeExtensions:n}=Vi(t),o=n.find(t=>t.name===e);if(!o)return!1;const r=Ki(Hi(o,"group",{name:o.name,options:o.options,storage:o.storage}));return"string"===typeof r&&r.split(" ").includes("list")}function Xs(e){let{checkChildren:t=!0,ignoreWhitespace:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;if(n){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(o=e.text)&&void 0!==o?o:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let o=!0;return e.content.forEach(e=>{!1!==o&&(Xs(e,{ignoreWhitespace:n,checkChildren:t})||(o=!1))}),o}return!1}function Qs(e){return e instanceof gt}function Ys(e,t,n){const o=e.state.doc.content.size,r=Ss(t,0,o),i=Ss(n,0,o),l=e.coordsAtPos(r),a=e.coordsAtPos(i,-1),c=Math.min(l.top,a.top),u=Math.max(l.bottom,a.bottom),d=Math.min(l.left,a.left),h=Math.max(l.right,a.right),p={top:c,bottom:u,left:d,right:h,width:h-d,height:u-c,x:d,y:c};return(0,s.A)((0,s.A)({},p),{},{toJSON:()=>p})}function el(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const o=n.filter(e=>null===t||void 0===t?void 0:t.includes(e.type.name));e.tr.ensureMarks(o)}}const tl=(e,t)=>{const n=Hs(e=>e.type===t)(e.selection);if(!n)return!0;const o=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===o)return!0;const r=e.doc.nodeAt(o);return n.node.type!==(null===r||void 0===r?void 0:r.type)||!$e(e.doc,n.pos)||(e.join(n.pos),!0)},nl=(e,t)=>{const n=Hs(e=>e.type===t)(e.selection);if(!n)return!0;const o=e.doc.resolve(n.start).after(n.depth);if(void 0===o)return!0;const r=e.doc.nodeAt(o);return n.node.type!==(null===r||void 0===r?void 0:r.type)||!$e(e.doc,o)||(e.join(o),!0)};var ol=Object.freeze({__proto__:null,blur:()=>e=>{let{editor:t,view:n}=e;return requestAnimationFrame(()=>{var e;t.isDestroyed||(n.dom.blur(),null===(e=null===window||void 0===window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())}),!0},clearContent:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{let{commands:n}=t;return n.setContent("",e)}},clearNodes:()=>e=>{let{state:t,tr:n,dispatch:o}=e;const{selection:r}=n,{ranges:i}=r;return!o||(i.forEach(e=>{let{$from:o,$to:r}=e;t.doc.nodesBetween(o.pos,r.pos,(e,t)=>{if(e.type.isText)return;const{doc:o,mapping:r}=n,i=o.resolve(r.map(t)),s=o.resolve(r.map(t+e.nodeSize)),l=i.blockRange(s);if(!l)return;const a=Fe(l);if(e.type.isTextblock){const{defaultType:e}=i.parent.contentMatchAt(i.index());n.setNodeMarkup(l.start,e)}(a||0===a)&&n.lift(l,a)})}),!0)},command:e=>t=>e(t),createParagraphNear:()=>e=>{let{state:t,dispatch:n}=e;return Ci(t,n)},cut:(e,t)=>n=>{let{editor:o,tr:r}=n;const{state:i}=o,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const l=r.mapping.map(t);return r.insert(l,s.content),r.setSelection(new ft(r.doc.resolve(l-1))),!0},deleteCurrentNode:()=>e=>{let{tr:t,dispatch:n}=e;const{selection:o}=t,r=o.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1){if(i.node(s).type===r.type){if(n){const e=i.before(s),n=i.after(s);t.delete(e,n).scrollIntoView()}return!0}}return!1},deleteNode:e=>t=>{let{tr:n,state:o,dispatch:r}=t;const i=$i(e,o.schema),s=n.selection.$anchor;for(let e=s.depth;e>0;e-=1){if(s.node(e).type===i){if(r){const t=s.before(e),o=s.after(e);n.delete(t,o).scrollIntoView()}return!0}}return!1},deleteRange:e=>t=>{let{tr:n,dispatch:o}=t;const{from:r,to:i}=e;return o&&n.delete(r,i),!0},deleteSelection:()=>e=>{let{state:t,dispatch:n}=e;return ai(t,n)},enter:()=>e=>{let{commands:t}=e;return t.keyboardShortcut("Enter")},exitCode:()=>e=>{let{state:t,dispatch:n}=e;return ki(t,n)},extendMarkRange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:o,state:r,dispatch:i}=n;const s=Cs(e,r.schema),{doc:l,selection:a}=o,{$from:c,from:u,to:d}=a;if(i){const e=ks(c,s,t);if(e&&e.from<=u&&e.to>=d){const t=ft.create(l,e.from,e.to);o.setSelection(t)}}return!0}},first:e=>t=>{const n="function"===typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{editor:o,view:r,tr:i,dispatch:l}=n;t=(0,s.A)({scrollIntoView:!0},t);const a=()=>{(Ds()||Es())&&r.dom.focus(),requestAnimationFrame(()=>{o.isDestroyed||(r.focus(),(null===t||void 0===t?void 0:t.scrollIntoView)&&o.commands.scrollIntoView())})};if(r.hasFocus()&&null===e||!1===e)return!0;if(l&&null===e&&!xs(o.state.selection))return a(),!0;const c=As(i.doc,e)||o.state.selection,u=o.state.selection.eq(c);return l&&(u||i.setSelection(c),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0}},forEach:(e,t)=>n=>e.every((e,o)=>t(e,(0,s.A)((0,s.A)({},n),{},{index:o}))),insertContent:(e,t)=>n=>{let{tr:o,commands:r}=n;return r.insertContentAt({from:o.selection.from,to:o.selection.to},e,t)},insertContentAt:(e,t,n)=>o=>{let{tr:r,dispatch:i,editor:l}=o;var a;if(i){let o;n=(0,s.A)({parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1},n);const i=e=>{l.emit("contentError",{editor:l,error:e,disableCollaboration:()=>{l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}})},u=(0,s.A)({preserveWhitespace:"full"},n.parseOptions);if(!n.errorOnInvalidContent&&!l.options.enableContentCheck&&l.options.emitContentError)try{Ts(t,l.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(c){i(c)}try{o=Ts(t,l.schema,{parseOptions:u,errorOnInvalidContent:null!==(a=n.errorOnInvalidContent)&&void 0!==a?a:l.options.enableContentCheck})}catch(c){return i(c),!1}let{from:d,to:p}="number"===typeof e?{from:e,to:e}:{from:e.from,to:e.to},f=!0,m=!0;if(("type"in o?[o]:o).forEach(e=>{e.check(),f=!!f&&(e.isText&&0===e.marks.length),m=!!m&&e.isBlock}),d===p&&m){const{parent:e}=r.doc.resolve(d);e.isTextblock&&!e.type.spec.code&&!e.childCount&&(d-=1,p+=1)}let g;if(f){if(Array.isArray(t))g=t.map(e=>e.text||"").join("");else if(t instanceof h){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),g=e}else g="object"===typeof t&&t&&t.text?t.text:t;r.insertText(g,d,p)}else g=o,r.replaceWith(d,p,g);n.updateSelection&&Os(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:g})}return!0},joinBackward:()=>e=>{let{state:t,dispatch:n}=e;return ui(t,n)},joinDown:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,o=e.selection;if(o instanceof gt){if(o.node.isTextblock||!$e(e.doc,o.to))return!1;n=o.to}else if(n=qe(e.doc,o.to,1),null==n)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0})(t,n)},joinForward:()=>e=>{let{state:t,dispatch:n}=e;return gi(t,n)},joinItemBackward:()=>e=>{let{state:t,dispatch:n,tr:o}=e;try{const e=qe(t.doc,t.selection.$from.pos,-1);return null!==e&&void 0!==e&&(o.join(e,2),n&&n(o),!0)}catch(r){return!1}},joinItemForward:()=>e=>{let{state:t,dispatch:n,tr:o}=e;try{const e=qe(t.doc,t.selection.$from.pos,1);return null!==e&&void 0!==e&&(o.join(e,2),n&&n(o),!0)}catch(r){return!1}},joinTextblockBackward:()=>e=>{let{state:t,dispatch:n}=e;return((e,t,n)=>{let o=ci(e,n);if(!o)return!1;let r=fi(o);return!!r&&di(e,r,t)})(t,n)},joinTextblockForward:()=>e=>{let{state:t,dispatch:n}=e;return((e,t,n)=>{let o=mi(e,n);if(!o)return!1;let r=yi(o);return!!r&&di(e,r,t)})(t,n)},joinUp:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,o=e.selection,r=o instanceof gt;if(r){if(o.node.isTextblock||!$e(e.doc,o.from))return!1;n=o.from}else if(n=qe(e.doc,o.from,-1),null==n)return!1;if(t){let o=e.tr.join(n);r&&o.setSelection(gt.create(o.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(o.scrollIntoView())}return!0})(t,n)},keyboardShortcut:e=>t=>{let{editor:n,view:o,tr:r,dispatch:i}=t;const s=function(e){const t=e.split(/-(?!$)/);let n,o,r,i,s=t[t.length-1];"Space"===s&&(s=" ");for(let l=0;l<t.length-1;l+=1){const e=t[l];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))o=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: ".concat(e));Ds()||Ps()?i=!0:o=!0}}return n&&(s="Alt-".concat(s)),o&&(s="Ctrl-".concat(s)),i&&(s="Meta-".concat(s)),r&&(s="Shift-".concat(s)),s}(e).split(/-(?!$)/),l=s.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),a=new KeyboardEvent("keydown",{key:"Space"===l?" ":l,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction(()=>{o.someProp("handleKeyDown",e=>e(o,a))});return null===c||void 0===c||c.steps.forEach(e=>{const t=e.map(r.mapping);t&&i&&r.maybeStep(t)}),!0},lift:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:o,dispatch:r}=n;return!!_s(o,$i(e,o.schema),t)&&((e,t)=>{let{$from:n,$to:o}=e.selection,r=n.blockRange(o),i=r&&Fe(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)})(o,r)}},liftEmptyBlock:()=>e=>{let{state:t,dispatch:n}=e;return xi(t,n)},liftListItem:e=>t=>{let{state:n,dispatch:o}=t;return Ii($i(e,n.schema))(n,o)},newlineInCode:()=>e=>{let{state:t,dispatch:n}=e;return bi(t,n)},resetAttributes:(e,t)=>n=>{let{tr:o,state:r,dispatch:i}=n,s=null,l=null;const a=Ls("string"===typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(s=$i(e,r.schema)),"mark"===a&&(l=Cs(e,r.schema)),i&&o.selection.ranges.forEach(e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,n)=>{s&&s===e.type&&o.setNodeMarkup(n,void 0,Rs(e.attrs,t)),l&&e.marks.length&&e.marks.forEach(r=>{l===r.type&&o.addMark(n,n+e.nodeSize,l.create(Rs(r.attrs,t)))})})}),!0)},scrollIntoView:()=>e=>{let{tr:t,dispatch:n}=e;return n&&t.scrollIntoView(),!0},selectAll:()=>e=>{let{tr:t,dispatch:n}=e;if(n){const e=new yt(t.doc);t.setSelection(e)}return!0},selectNodeBackward:()=>e=>{let{state:t,dispatch:n}=e;return pi(t,n)},selectNodeForward:()=>e=>{let{state:t,dispatch:n}=e;return vi(t,n)},selectParentNode:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,{$from:o,to:r}=e.selection,i=o.sharedDepth(r);return 0!=i&&(n=o.before(i),t&&t(e.tr.setSelection(gt.create(e.doc,n))),!0)})(t,n)},selectTextblockEnd:()=>e=>{let{state:t,dispatch:n}=e;return Ni(t,n)},selectTextblockStart:()=>e=>{let{state:t,dispatch:n}=e;return Mi(t,n)},setContent:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r=>{let{editor:i,tr:s,dispatch:l,commands:a}=r;var c,u;const{doc:d}=s;if("full"!==n.preserveWhitespace){const r=Bs(e,i.schema,n,{errorOnInvalidContent:null!==(c=o.errorOnInvalidContent)&&void 0!==c?c:i.options.enableContentCheck});return l&&s.replaceWith(0,d.content.size,r).setMeta("preventUpdate",!t),!0}return l&&s.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:d.content.size},e,{parseOptions:n,errorOnInvalidContent:null!==(u=o.errorOnInvalidContent)&&void 0!==u?u:i.options.enableContentCheck})}},setMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:o,state:r,dispatch:i}=n;const{selection:l}=o,{empty:a,ranges:c}=l,u=Cs(e,r.schema);if(i)if(a){const e=Is(r,u);o.addStoredMark(u.create((0,s.A)((0,s.A)({},e),t)))}else c.forEach(e=>{const n=e.$from.pos,i=e.$to.pos;r.doc.nodesBetween(n,i,(e,r)=>{const l=Math.max(r,n),a=Math.min(r+e.nodeSize,i);e.marks.find(e=>e.type===u)?e.marks.forEach(e=>{u===e.type&&o.addMark(l,a,u.create((0,s.A)((0,s.A)({},e.attrs),t)))}):o.addMark(l,a,u.create(t))})});return function(e,t,n){var o;const{selection:r}=t;let i=null;if(xs(r)&&(i=r.$cursor),i){const t=null!==(o=e.storedMarks)&&void 0!==o?o:i.marks();return!!n.isInSet(t)||!t.some(e=>e.type.excludes(n))}const{ranges:s}=r;return s.some(t=>{let{$from:o,$to:r}=t,i=0===o.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(o.pos,r.pos,(e,t,o)=>{if(i)return!1;if(e.isInline){const t=!o||o.type.allowsMarkType(n),r=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));i=t&&r}return!i}),i})}(r,o,u)}},setMeta:(e,t)=>n=>{let{tr:o}=n;return o.setMeta(e,t),!0},setNode:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:o,dispatch:r,chain:i}=n;const l=$i(e,o.schema);let a;return o.selection.$anchor.sameParent(o.selection.$head)&&(a=o.selection.$anchor.parent.attrs),l.isTextblock?i().command(e=>{let{commands:n}=e;return!!Ti(l,(0,s.A)((0,s.A)({},a),t))(o)||n.clearNodes()}).command(e=>{let{state:n}=e;return Ti(l,(0,s.A)((0,s.A)({},a),t))(n,r)}).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:e=>t=>{let{tr:n,dispatch:o}=t;if(o){const{doc:t}=n,o=Ss(e,0,t.content.size),r=gt.create(t,o);n.setSelection(r)}return!0},setTextSelection:e=>t=>{let{tr:n,dispatch:o}=t;if(o){const{doc:t}=n,{from:o,to:r}="number"===typeof e?{from:e,to:e}:e,i=ft.atStart(t).from,s=ft.atEnd(t).to,l=Ss(o,i,s),a=Ss(r,i,s),c=ft.create(t,l,a);n.setSelection(c)}return!0},sinkListItem:e=>t=>{let{state:n,dispatch:o}=t;const r=$i(e,n.schema);return(i=r,function(e,t){let{$from:n,$to:o}=e.selection,r=n.blockRange(o,e=>e.childCount>0&&e.firstChild.type==i);if(!r)return!1;let s=r.startIndex;if(0==s)return!1;let l=r.parent,a=l.child(s-1);if(a.type!=i)return!1;if(t){let n=a.lastChild&&a.lastChild.type==l.type,o=h.from(n?i.create():null),s=new y(h.from(i.create(null,h.from(l.type.create(null,o)))),n?3:1,0),c=r.start,u=r.end;t(e.tr.step(new Le(c-(n?3:1),u,c,u,s,1,!0)).scrollIntoView())}return!0})(n,o);var i},splitBlock:function(){let{keepMarks:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{let{tr:n,state:o,dispatch:r,editor:i}=t;const{selection:s,doc:l}=n,{$from:a,$to:c}=s,u=Ks(i.extensionManager.attributes,a.node().type.name,a.node().attrs);if(s instanceof gt&&s.node.isBlock)return!(!a.parentOffset||!Ue(l,a.pos))&&(r&&(e&&el(o,i.extensionManager.splittableMarks),n.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=c.parentOffset===c.parent.content.size,h=0===a.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&h?[{type:h,attrs:u}]:void 0,f=Ue(n.doc,n.mapping.map(a.pos),1,p);if(p||f||!Ue(n.doc,n.mapping.map(a.pos),1,h?[{type:h}]:void 0)||(f=!0,p=h?[{type:h,attrs:u}]:void 0),r){if(f&&(s instanceof ft&&n.deleteSelection(),n.split(n.mapping.map(a.pos),1,p),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const e=n.mapping.map(a.before()),t=n.doc.resolve(e);a.node(-1).canReplaceWith(t.index(),t.index()+1,h)&&n.setNodeMarkup(n.mapping.map(a.before()),h)}e&&el(o,i.extensionManager.splittableMarks),n.scrollIntoView()}return f}},splitListItem:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:o,state:r,dispatch:i,editor:l}=n;var a;const c=$i(e,r.schema),{$from:u,$to:d}=r.selection,p=r.selection.node;if(p&&p.isBlock||u.depth<2||!u.sameParent(d))return!1;const f=u.node(-1);if(f.type!==c)return!1;const m=l.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==c||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let e=h.empty;const n=u.index(-1)?1:u.index(-2)?2:3;for(let t=u.depth-n;t>=u.depth-3;t-=1)e=h.from(u.node(t).copy(e));const r=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,i=(0,s.A)((0,s.A)({},Ks(m,u.node().type.name,u.node().attrs)),t),l=(null===(a=c.contentMatch.defaultType)||void 0===a?void 0:a.createAndFill(i))||void 0;e=e.append(h.from(c.createAndFill(null,l)||void 0));const d=u.before(u.depth-(n-1));o.replace(d,u.after(-r),new y(e,4-n,0));let p=-1;o.doc.nodesBetween(d,o.doc.content.size,(e,t)=>{if(p>-1)return!1;e.isTextblock&&0===e.content.size&&(p=t+1)}),p>-1&&o.setSelection(ft.near(o.doc.resolve(p))),o.scrollIntoView()}return!0}const g=d.pos===u.end()?f.contentMatchAt(0).defaultType:null,v=(0,s.A)((0,s.A)({},Ks(m,f.type.name,f.attrs)),t),b=(0,s.A)((0,s.A)({},Ks(m,u.node().type.name,u.node().attrs)),t);o.delete(u.pos,d.pos);const w=g?[{type:c,attrs:v},{type:g,attrs:b}]:[{type:c,attrs:v}];if(!Ue(o.doc,u.pos,2))return!1;if(i){const{selection:e,storedMarks:t}=r,{splittableMarks:n}=l.extensionManager,s=t||e.$to.parentOffset&&e.$from.marks();if(o.split(u.pos,2,w).scrollIntoView(),!s||!i)return!0;const a=s.filter(e=>n.includes(e.type.name));o.ensureMarks(a)}return!0}},toggleList:function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r=>{let{editor:i,tr:s,state:l,dispatch:a,chain:c,commands:u,can:d}=r;const{extensions:h,splittableMarks:p}=i.extensionManager,f=$i(e,l.schema),m=$i(t,l.schema),{selection:g,storedMarks:v}=l,{$from:y,$to:b}=g,w=y.blockRange(b),k=v||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const C=Hs(e=>Js(e.type.name,h))(g);if(w.depth>=1&&C&&w.depth-C.depth<=1){if(C.node.type===f)return u.liftListItem(m);if(Js(C.node.type.name,h)&&f.validContent(C.node.content)&&a)return c().command(()=>(s.setNodeMarkup(C.pos,f),!0)).command(()=>tl(s,f)).command(()=>nl(s,f)).run()}return n&&k&&a?c().command(()=>{const e=d().wrapInList(f,o),t=k.filter(e=>p.includes(e.type.name));return s.ensureMarks(t),!!e||u.clearNodes()}).wrapInList(f,o).command(()=>tl(s,f)).command(()=>nl(s,f)).run():c().command(()=>!!d().wrapInList(f,o)||u.clearNodes()).wrapInList(f,o).command(()=>tl(s,f)).command(()=>nl(s,f)).run()}},toggleMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o=>{let{state:r,commands:i}=o;const{extendEmptyMarkRange:s=!1}=n,l=Cs(e,r.schema);return Zs(r,l,t)?i.unsetMark(l,{extendEmptyMarkRange:s}):i.setMark(l,t)}},toggleNode:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o=>{let{state:r,commands:i}=o;const l=$i(e,r.schema),a=$i(t,r.schema),c=_s(r,l,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),c?i.setNode(a,u):i.setNode(l,(0,s.A)((0,s.A)({},u),n))}},toggleWrap:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:o,commands:r}=n;const i=$i(e,o.schema);return _s(o,i,t)?r.lift(i):r.wrapIn(i,t)}},undoInputRule:()=>e=>{let{state:t,dispatch:n}=e;const o=t.plugins;for(let r=0;r<o.length;r+=1){const e=o[r];let i;if(e.spec.isInputRules&&(i=e.getState(t))){if(n){const e=t.tr,n=i.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(i.text){const n=e.doc.resolve(i.from).marks();e.replaceWith(i.from,i.to,t.schema.text(i.text,n))}else e.delete(i.from,i.to)}return!0}}return!1},unsetAllMarks:()=>e=>{let{tr:t,dispatch:n}=e;const{selection:o}=t,{empty:r,ranges:i}=o;return r||n&&i.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos)}),!0},unsetMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:o,state:r,dispatch:i}=n;var s;const{extendEmptyMarkRange:l=!1}=t,{selection:a}=o,c=Cs(e,r.schema),{$from:u,empty:d,ranges:h}=a;if(!i)return!0;if(d&&l){let{from:e,to:t}=a;const n=null===(s=u.marks().find(e=>e.type===c))||void 0===s?void 0:s.attrs,r=ks(u,c,n);r&&(e=r.from,t=r.to),o.removeMark(e,t,c)}else h.forEach(e=>{o.removeMark(e.$from.pos,e.$to.pos,c)});return o.removeStoredMark(c),!0}},updateAttributes:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:o,state:r,dispatch:i}=n,l=null,a=null;const c=Ls("string"===typeof e?e:e.name,r.schema);return!!c&&("node"===c&&(l=$i(e,r.schema)),"mark"===c&&(a=Cs(e,r.schema)),i&&o.selection.ranges.forEach(e=>{const n=e.$from.pos,i=e.$to.pos;let c,u,d,h;o.selection.empty?r.doc.nodesBetween(n,i,(e,t)=>{l&&l===e.type&&(d=Math.max(t,n),h=Math.min(t+e.nodeSize,i),c=t,u=e)}):r.doc.nodesBetween(n,i,(e,r)=>{r<n&&l&&l===e.type&&(d=Math.max(r,n),h=Math.min(r+e.nodeSize,i),c=r,u=e),r>=n&&r<=i&&(l&&l===e.type&&o.setNodeMarkup(r,void 0,(0,s.A)((0,s.A)({},e.attrs),t)),a&&e.marks.length&&e.marks.forEach(l=>{if(a===l.type){const c=Math.max(r,n),u=Math.min(r+e.nodeSize,i);o.addMark(c,u,a.create((0,s.A)((0,s.A)({},l.attrs),t)))}}))}),u&&(void 0!==c&&o.setNodeMarkup(c,void 0,(0,s.A)((0,s.A)({},u.attrs),t)),a&&u.marks.length&&u.marks.forEach(e=>{a===e.type&&o.addMark(d,h,a.create((0,s.A)((0,s.A)({},e.attrs),t)))}))}),!0)}},wrapIn:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:o,dispatch:r}=n;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,o){let{$from:r,$to:i}=n.selection,s=r.blockRange(i),l=s&&je(s,e,t);return!!l&&(o&&o(n.tr.wrap(s,l).scrollIntoView()),!0)}}($i(e,o.schema),t)(o,r)}},wrapInList:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:o,dispatch:r}=n;return Bi($i(e,o.schema),t)(o,r)}}});const rl=fs.create({name:"commands",addCommands:()=>(0,s.A)({},ol)}),il=fs.create({name:"drop",addProseMirrorPlugins(){return[new Nt({key:new Pt("tiptapDrop"),props:{handleDrop:(e,t,n,o)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:o})}}})]}}),sl=fs.create({name:"editable",addProseMirrorPlugins(){return[new Nt({key:new Pt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ll=new Pt("focusEvents"),al=fs.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Nt({key:ll,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const o=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(o),!1},blur:(t,n)=>{e.isFocused=!1;const o=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(o),!1}}}})]}}),cl=fs.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.undoInputRule(),()=>t.command(e=>{let{tr:n}=e;const{selection:o,doc:r}=n,{empty:i,$anchor:s}=o,{pos:l,parent:a}=s,c=s.parent.isTextblock&&l>0?n.doc.resolve(l-1):s,u=c.parent.type.spec.isolating,d=s.pos-s.parentOffset,h=u&&1===c.parent.childCount?d===s.pos:ut.atStart(r).from===l;return!(!i||!a.type.isTextblock||a.textContent.length||!h||h&&"paragraph"===s.parent.type.name)&&t.clearNodes()}),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]}),t=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()]}),n={Enter:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]}),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},o=(0,s.A)({},n),r=(0,s.A)((0,s.A)({},n),{},{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return Ds()||Ps()?r:o},addProseMirrorPlugins(){return[new Nt({key:new Pt("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(e=>e.getMeta("composition")))return;const o=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),r=e.some(e=>e.getMeta("preventClearDocument"));if(!o||r)return;const{empty:i,from:s,to:l}=t.selection,a=ut.atStart(t.doc).from,c=ut.atEnd(t.doc).to;if(i||!(s===a&&l===c))return;if(!Xs(n.doc))return;const u=n.tr,d=Fi({state:n,transaction:u}),{commands:h}=new ji({editor:this.editor,state:d});return h.clearNodes(),u.steps.length?u:void 0}})]}}),ul=fs.create({name:"paste",addProseMirrorPlugins(){return[new Nt({key:new Pt("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),dl=fs.create({name:"tabindex",addProseMirrorPlugins(){return[new Nt({key:new Pt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var hl=Object.freeze({__proto__:null,ClipboardTextSerializer:vs,Commands:rl,Drop:il,Editable:sl,FocusEvents:al,Keymap:cl,Paste:ul,Tabindex:dl,focusEventsPluginKey:ll});class pl{get name(){return this.node.type.name}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error("You can\u2019t set content on a block node. Tried to set content on ".concat(this.name," at ").concat(this.pos));t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new pl(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new pl(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new pl(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,n)=>{const o=t.isBlock&&!t.isTextblock,r=t.isAtom&&!t.isText,i=this.pos+n+(r?0:1),s=this.resolvedPos.doc.resolve(i);if(!o&&s.depth<=this.depth)return;const l=new pl(s,this.editor,o,o?t:null);o&&(l.actualDepth=this.depth+1),e.push(new pl(s,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,o=this.parent;for(;o&&!n;){if(o.node.type.name===e)if(Object.keys(t).length>0){const e=o.node.attrs,n=Object.keys(t);for(let o=0;o<n.length;o+=1){const r=n[o];if(e[r]!==t[r])break}}else n=o;o=o.parent}return n}querySelector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];if(!this.children||0===this.children.length)return o;const r=Object.keys(t);return this.children.forEach(i=>{if(!(n&&o.length>0)){if(i.node.type.name===e){r.every(e=>t[e]===i.node.attrs[e])&&o.push(i)}n&&o.length>0||(o=o.concat(i.querySelectorAll(e,t,n)))}}),o}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,(0,s.A)((0,s.A)({},this.node.attrs),e)),this.editor.view.dispatch(t)}}class fl extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:e=>{let{error:t}=e;throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",e=>{let{event:t,slice:n,moved:o}=e;return this.options.onDrop(t,n,o)}),this.on("paste",e=>{let{event:t,slice:n}=e;return this.options.onPaste(t,n)}),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e,t,n){const o=document.querySelector("style[data-tiptap-style".concat(n?"-".concat(n):"","]"));if(null!==o)return o;const r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.setAttribute("data-tiptap-style".concat(n?"-".concat(n):""),""),r.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(r),r}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=(0,s.A)((0,s.A)({},this.options),e),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n=Gi(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:n});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(e=>{const t="string"===typeof e?"".concat(e,"$"):e.key;n=n.filter(e=>!e.key.startsWith(t))}),t.length===n.length)return;const o=this.state.reconfigure({plugins:n});return this.view.updateState(o),o}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[sl,vs.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),rl,al,cl,dl,il,ul].filter(e=>"object"!==typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null===e||void 0===e?void 0:e.type));this.extensionManager=new ps(n,this)}createCommandManager(){this.commandManager=new ji({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Bs(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(r){if(!(r instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(r.message))throw r;this.emit("contentError",{editor:this,error:r,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),t=Bs(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=As(t,this.options.autofocus);this.view=new Wr(this.options.element,(0,s.A)((0,s.A)({},this.options.editorProps),{},{attributes:(0,s.A)({role:"textbox"},null===(e=this.options.editorProps)||void 0===e?void 0:e.attributes),dispatchTransaction:this.dispatchTransaction.bind(this),state:Dt.create({doc:t,selection:n||void 0})}));const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className="tiptap ".concat(this.view.dom.className)}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)}):void(this.capturedTransaction=e);const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),r=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),r&&this.emit("blur",{editor:this,event:r.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return $s(this.state,e)}isActive(e,t){const n="string"===typeof e?e:null,o="string"===typeof e?t:e;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return _s(e,null,n)||Zs(e,null,n);const o=Ls(t,e.schema);return"node"===o?_s(e,t,n):"mark"===o&&Zs(e,t,n)}(this.state,n,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return es(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return Us(this.state.doc,{blockSeparator:t,textSerializers:(0,s.A)((0,s.A)({},gs(this.schema)),n)})}get isEmpty(){return Xs(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}$node(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new pl(t,this)}get $doc(){return this.$pos(0)}}function ml(e){return new ns({find:e.find,handler:t=>{let{state:n,range:o,match:r}=t;const i=Ki(e.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:s}=n,l=r[r.length-1],a=r[0];if(l){const t=a.search(/\S/),r=o.from+a.indexOf(l),c=r+l.length;if(Gs(o.from,o.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>r).length)return null;c<o.to&&s.delete(c,o.to),r>o.from&&s.delete(o.from+t,r);const u=o.from+t+l.length;s.addMark(o.from+t,u,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}class gl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=(0,s.A)((0,s.A)({},this.config),e),this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ki(Hi(this,"addOptions",{name:this.name}))),this.storage=Ki(Hi(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new gl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend((0,s.A)((0,s.A)({},this.config),{},{addOptions:()=>ls(this.options,e)}));return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new gl(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=Ki(Hi(t,"addOptions",{name:t.name})),t.storage=Ki(Hi(t,"addStorage",{name:t.name,options:t.options})),t}}class vl{constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options=(0,s.A)({stopEvent:null,ignoreMutation:null},n),this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,n,o,r,i,s,l;const{view:a}=this.editor,c=e.target,u=3===c.nodeType?null===(t=c.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(c))||!u)return;let d=0,h=0;if(this.dom!==u){const t=this.dom.getBoundingClientRect(),n=u.getBoundingClientRect(),l=null!==(o=e.offsetX)&&void 0!==o?o:null===(r=e.nativeEvent)||void 0===r?void 0:r.offsetX,a=null!==(i=e.offsetY)&&void 0!==i?i:null===(s=e.nativeEvent)||void 0===s?void 0:s.offsetY;d=n.x-t.x+l,h=n.y-t.y+a}const p=this.dom.cloneNode(!0);null===(l=e.dataTransfer)||void 0===l||l.setDragImage(p,d,h);const f=this.getPos();if("number"!==typeof f)return;const m=gt.create(a.state.doc,f),g=a.state.tr.setSelection(m);a.dispatch(g)}stopEvent(e){var t;if(!this.dom)return!1;if("function"===typeof this.options.stopEvent)return this.options.stopEvent({event:e});const n=e.target;if(!(this.dom.contains(n)&&!(null===(t=this.contentDOM)||void 0===t?void 0:t.contains(n))))return!1;const o=e.type.startsWith("drag"),r="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!r&&!o)return!0;const{isEditable:i}=this.editor,{isDragging:s}=this,l=!!this.node.type.spec.draggable,a=gt.isSelectable(this.node),c="copy"===e.type,u="paste"===e.type,d="cut"===e.type,h="mousedown"===e.type;if(!l&&a&&o&&e.target===this.dom&&e.preventDefault(),l&&o&&!s&&e.target===this.dom)return e.preventDefault(),!1;if(l&&i&&!s&&h){const e=n.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(s||r||c||u||d||h&&a)}ignoreMutation(e){if(!this.dom||!this.contentDOM)return!0;if("function"===typeof this.options.ignoreMutation)return this.options.ignoreMutation({mutation:e});if(this.node.isLeaf||this.node.isAtom)return!0;if("selection"===e.type)return!1;if(this.dom.contains(e.target)&&"childList"===e.type&&(Ds()||Es())&&this.editor.isFocused){if([...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))return!1}return this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(t=>{let{tr:n}=t;const o=this.getPos();return"number"===typeof o&&(n.setNodeMarkup(o,void 0,(0,s.A)((0,s.A)({},this.node.attrs),e)),!0)})}deleteNode(){const e=this.getPos();if("number"!==typeof e)return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function yl(e){return new cs({find:e.find,handler:t=>{let{state:n,range:o,match:r,pasteEvent:i}=t;const s=Ki(e.getAttributes,void 0,r,i);if(!1===s||null===s)return null;const{tr:l}=n,a=r[r.length-1],c=r[0];let u=o.to;if(a){const t=c.search(/\S/),r=o.from+c.indexOf(a),i=r+a.length;if(Gs(o.from,o.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>r).length)return null;i<o.to&&l.delete(i,o.to),r>o.from&&l.delete(o.from+t,r),u=o.from+t+a.length,l.addMark(o.from+t,u,e.type.create(s||{})),l.removeStoredMark(e.type)}}})}var bl,wl=new Uint8Array(16);function kl(){if(!bl&&!(bl="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bl(wl)}const Cl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const xl=function(e){return"string"===typeof e&&Cl.test(e)};for(var Sl=[],Al=0;Al<256;++Al)Sl.push((Al+256).toString(16).substr(1));const El=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Sl[e[t+0]]+Sl[e[t+1]]+Sl[e[t+2]]+Sl[e[t+3]]+"-"+Sl[e[t+4]]+Sl[e[t+5]]+"-"+Sl[e[t+6]]+Sl[e[t+7]]+"-"+Sl[e[t+8]]+Sl[e[t+9]]+"-"+Sl[e[t+10]]+Sl[e[t+11]]+Sl[e[t+12]]+Sl[e[t+13]]+Sl[e[t+14]]+Sl[e[t+15]]).toLowerCase();if(!xl(n))throw TypeError("Stringified UUID is invalid");return n};const Dl=function(e,t,n){var o=(e=e||{}).random||(e.rng||kl)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=o[r];return t}return El(o)};var Ml=class e{constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,t,n){e<0||this.cache.set(e,[t,n])}replace(e,t,n,o){this.remove(e),this.set(t,n,o)}remove(e){this.cache.delete(e)}invalidate(t){const n=new e(this.cache),o=t.mapping;return this.cache.forEach((e,r)=>{let[i,s]=e;if(r<0)return;const l=o.mapResult(r),a=t.doc.nodeAt(l.pos);if(l.deleted||!(null==a?void 0:a.eq(i)))n.remove(r);else if(r!==l.pos){const e=s.map(e=>e.map(o,0,0)).filter(e=>null!=e);n.replace(r,l.pos,a,e)}}),n}};function Nl(e){let{parser:t,nodeTypes:n=["code_block","codeBlock"],languageExtractor:o=e=>e.attrs.language}=e;const r=new Pt("prosemirror-highlight");return new Nt({key:r,state:{init(e,r){const i=new Ml,[s,l]=Tl(r.doc,t,n,o,i);return{cache:i,decorations:s,promises:l}},apply:(e,r)=>{const i=r.cache.invalidate(e),s=!!e.getMeta("prosemirror-highlight-refresh");if(!e.docChanged&&!s){return{cache:i,decorations:r.decorations.map(e.mapping,e.doc),promises:r.promises}}const[l,a]=Tl(e.doc,t,n,o,i);return{cache:i,decorations:l,promises:a}}},view:e=>{const t=new Set,n=()=>{if(t.size>0)return;const n=e.state.tr.setMeta("prosemirror-highlight-refresh",!0);e.dispatch(n)},o=()=>{var o;const i=r.getState(e.state);for(const e of null!=(o=null==i?void 0:i.promises)?o:[])t.add(e),e.then(()=>{t.delete(e),n()}).catch(()=>{t.delete(e)})};return o(),{update:()=>{o()}}},props:{decorations(e){var t;return null==(t=this.getState(e))?void 0:t.decorations}}})}function Tl(e,t,n,o,r){const i=[],s=[];return e.descendants((e,l)=>{if(!e.type.isTextblock)return!0;if(n.includes(e.type.name)){const n=o(e),a=r.get(l);if(a){const[e,t]=a;i.push(...t)}else{const o=t({content:e.textContent,language:n||void 0,pos:l,size:e.nodeSize});o&&Array.isArray(o)?(r.set(l,e,o),i.push(...o)):o instanceof Promise&&(r.remove(l),s.push(o))}}return!1}),[wr.create(e,i),s]}function Ol(e){return"string"===typeof e?e:Object.entries(e).map(e=>{let[t,n]=e;return"".concat(t,":").concat(n)}).join(";")}const Pl=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,_l=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Ll=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Rl=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bl=as.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML(e){let{HTMLAttributes:t}=e;return["strong",Wi(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleBold:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetBold:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ml({find:Pl,type:this.type}),ml({find:Ll,type:this.type})]},addPasteRules(){return[yl({find:_l,type:this.type}),yl({find:Rl,type:this.type})]}}),Il=/(^|[^`])`([^`]+)`(?!`)/,Fl=/(^|[^`])`([^`]+)`(?!`)/g,jl=as.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML(e){let{HTMLAttributes:t}=e;return["code",Wi(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleCode:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetCode:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ml({find:Il,type:this.type})]},addPasteRules(){return[yl({find:Fl,type:this.type})]}}),zl=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Hl=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Vl=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Ul=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,$l=as.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML(e){let{HTMLAttributes:t}=e;return["em",Wi(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleItalic:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetItalic:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ml({find:zl,type:this.type}),ml({find:Vl,type:this.type})]},addPasteRules(){return[yl({find:Hl,type:this.type}),yl({find:Ul,type:this.type})]}}),Wl=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,ql=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Gl=as.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML(e){let{HTMLAttributes:t}=e;return["s",Wi(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleStrike:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetStrike:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ml({find:Wl,type:this.type})]},addPasteRules(){return[yl({find:ql,type:this.type})]}}),Kl=as.create({name:"underline",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("underline")&&{}}],renderHTML(e){let{HTMLAttributes:t}=e;return["u",Wi(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleUnderline:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetUnderline:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Zl=gl.create({name:"tableCell",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"cell",isolating:!0,parseHTML:()=>[{tag:"td"}],renderHTML(e){let{HTMLAttributes:t}=e;return["td",Wi(this.options.HTMLAttributes,t),0]}}),Jl=gl.create({name:"tableHeader",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"header_cell",isolating:!0,parseHTML:()=>[{tag:"th"}],renderHTML(e){let{HTMLAttributes:t}=e;return["th",Wi(this.options.HTMLAttributes,t),0]}});var Xl,Ql;if("undefined"!=typeof WeakMap){let e=new WeakMap;Xl=t=>e.get(t),Ql=(t,n)=>(e.set(t,n),n)}else{const e=[],t=10;let n=0;Xl=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},Ql=(o,r)=>(n==t&&(n=0),e[n++]=o,e[n++]=r)}var Yl=class{constructor(e,t,n,o){this.width=e,this.height=t,this.map=n,this.problems=o}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const o=t%this.width,r=t/this.width|0;let i=o+1,s=r+1;for(let e=1;i<this.width&&this.map[t+e]==n;e++)i++;for(let e=1;s<this.height&&this.map[t+this.width*e]==n;e++)s++;return{left:o,top:r,right:i,bottom:s}}throw new RangeError("No cell with offset ".concat(e," found"))}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset ".concat(e," found"))}nextCell(e,t,n){const{left:o,right:r,top:i,bottom:s}=this.findCell(e);return"horiz"==t?(n<0?0==o:r==this.width)?null:this.map[i*this.width+(n<0?o-1:r)]:(n<0?0==i:s==this.height)?null:this.map[o+this.width*(n<0?i-1:s)]}rectBetween(e,t){const{left:n,right:o,top:r,bottom:i}=this.findCell(e),{left:s,right:l,top:a,bottom:c}=this.findCell(t);return{left:Math.min(n,s),top:Math.min(r,a),right:Math.max(o,l),bottom:Math.max(i,c)}}cellsInRect(e){const t=[],n={};for(let o=e.top;o<e.bottom;o++)for(let r=e.left;r<e.right;r++){const i=o*this.width+r,s=this.map[i];n[s]||(n[s]=!0,r==e.left&&r&&this.map[i-1]==s||o==e.top&&o&&this.map[i-this.width]==s||t.push(s))}return t}positionAt(e,t,n){for(let o=0,r=0;;o++){const i=r+n.child(o).nodeSize;if(o==e){let n=t+e*this.width;const o=(e+1)*this.width;for(;n<o&&this.map[n]<r;)n++;return n==o?i-1:this.map[n]}r=i}}static get(e){return Xl(e)||Ql(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);const t=function(e){let t=-1,n=!1;for(let o=0;o<e.childCount;o++){const r=e.child(o);let i=0;if(n)for(let t=0;t<o;t++){const n=e.child(t);for(let e=0;e<n.childCount;e++){const r=n.child(e);t+r.attrs.rowspan>o&&(i+=r.attrs.colspan)}}for(let e=0;e<r.childCount;e++){const t=r.child(e);i+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,o=[];let r=0,i=null;const s=[];for(let c=0,u=t*n;c<u;c++)o[c]=0;for(let c=0,u=0;c<n;c++){const l=e.child(c);u++;for(let e=0;;e++){for(;r<o.length&&0!=o[r];)r++;if(e==l.childCount)break;const a=l.child(e),{colspan:d,rowspan:h,colwidth:p}=a.attrs;for(let e=0;e<h;e++){if(e+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:h-e});break}const l=r+e*t;for(let e=0;e<d;e++){0==o[l+e]?o[l+e]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:d-e});const n=p&&p[e];if(n){const o=(l+e)%t*2,r=s[o];null==r||r!=n&&1==s[o+1]?(s[o]=n,s[o+1]=1):r==n&&s[o+1]++}}}r+=d,u+=a.nodeSize}const a=(c+1)*t;let d=0;for(;r<a;)0==o[r++]&&d++;d&&(i||(i=[])).push({type:"missing",row:c,n:d}),u++}0!==t&&0!==n||(i||(i=[])).push({type:"zero_sized"});const l=new Yl(t,n,o,i);let a=!1;for(let c=0;!a&&c<s.length;c+=2)null!=s[c]&&s[c+1]<n&&(a=!0);a&&function(e,t,n){e.problems||(e.problems=[]);const o={};for(let r=0;r<e.map.length;r++){const i=e.map[r];if(o[i])continue;o[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError("No cell with offset ".concat(i," found"));let l=null;const a=s.attrs;for(let n=0;n<a.colspan;n++){const o=t[2*((r+n)%e.width)];null==o||a.colwidth&&a.colwidth[n]==o||((l||(l=ea(a)))[n]=o)}l&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:l})}}(l,s,e);return l}(e))}};function ea(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function ta(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const o=e.nodes[n],r=o.spec.tableRole;r&&(t[r]=o)}}return t}var na=new Pt("selectingCells");function oa(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function ra(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function ia(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;const n=oa(t.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const o=t.type.spec.tableRole;if("cell"==o||"header_cell"==o)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const o=t.type.spec.tableRole;if("cell"==o||"header_cell"==o)return e.doc.resolve(n-t.nodeSize)}}(t.$head);if(n)return n;throw new RangeError("No cell found around position ".concat(t.head))}function sa(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function la(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function aa(e,t,n){const o=e.node(-1),r=Yl.get(o),i=e.start(-1),s=r.nextCell(e.pos-i,t,n);return null==s?null:e.node(0).resolve(i+s)}function ca(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o=(0,s.A)((0,s.A)({},e),{},{colspan:e.colspan-n});return o.colwidth&&(o.colwidth=o.colwidth.slice(),o.colwidth.splice(t,n),o.colwidth.some(e=>e>0)||(o.colwidth=null)),o}function ua(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o=(0,s.A)((0,s.A)({},e),{},{colspan:e.colspan+n});if(o.colwidth){o.colwidth=o.colwidth.slice();for(let e=0;e<n;e++)o.colwidth.splice(t,0,0)}return o}var da=class e extends ut{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;const n=e.node(-1),o=Yl.get(n),r=e.start(-1),i=o.rectBetween(e.pos-r,t.pos-r),s=e.node(0),l=o.cellsInRect(i).filter(e=>e!=t.pos-r);l.unshift(t.pos-r);const a=l.map(e=>{const t=n.nodeAt(e);if(!t)throw RangeError("No cell with offset ".concat(e," found"));const o=r+e+1;return new dt(s.resolve(o),s.resolve(o+t.content.size))});super(a[0].$from,a[0].$to,a),this.$anchorCell=e,this.$headCell=t}map(t,n){const o=t.resolve(n.map(this.$anchorCell.pos)),r=t.resolve(n.map(this.$headCell.pos));if(sa(o)&&sa(r)&&la(o,r)){const t=this.$anchorCell.node(-1)!=o.node(-1);return t&&this.isRowSelection()?e.rowSelection(o,r):t&&this.isColSelection()?e.colSelection(o,r):new e(o,r)}return ft.between(o,r)}content(){const e=this.$anchorCell.node(-1),t=Yl.get(e),n=this.$anchorCell.start(-1),o=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),r={},i=[];for(let a=o.top;a<o.bottom;a++){const n=[];for(let i=a*t.width+o.left,l=o.left;l<o.right;l++,i++){const l=t.map[i];if(r[l])continue;r[l]=!0;const a=t.findCell(l);let c=e.nodeAt(l);if(!c)throw RangeError("No cell with offset ".concat(l," found"));const u=o.left-a.left,d=a.right-o.right;if(u>0||d>0){let e=c.attrs;if(u>0&&(e=ca(e,0,u)),d>0&&(e=ca(e,e.colspan-d,d)),a.left<o.left){if(c=c.type.createAndFill(e),!c)throw RangeError("Could not create cell with attrs ".concat(JSON.stringify(e)))}else c=c.type.create(e,c.content)}if(a.top<o.top||a.bottom>o.bottom){const e=(0,s.A)((0,s.A)({},c.attrs),{},{rowspan:Math.min(a.bottom,o.bottom)-Math.max(a.top,o.top)});c=a.top<o.top?c.type.createAndFill(e):c.type.create(e,c.content)}n.push(c)}i.push(e.child(a).copy(h.from(n)))}const l=this.isColSelection()&&this.isRowSelection()?e:i;return new y(h.from(l),1,1)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.empty;const n=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){const{$from:r,$to:s}=o[i],l=e.mapping.slice(n);e.replace(l.map(r.pos),l.map(s.pos),i?y.empty:t)}const r=ut.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);r&&e.setSelection(r)}replaceWith(e,t){this.replace(e,new y(h.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),n=Yl.get(t),o=this.$anchorCell.start(-1),r=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let i=0;i<r.length;i++)e(t.nodeAt(r[i]),o+r[i])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const n=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,o)==this.$headCell.node(-1).childCount}static colSelection(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;const o=t.node(-1),r=Yl.get(o),i=t.start(-1),s=r.findCell(t.pos-i),l=r.findCell(n.pos-i),a=t.node(0);return s.top<=l.top?(s.top>0&&(t=a.resolve(i+r.map[s.left])),l.bottom<r.height&&(n=a.resolve(i+r.map[r.width*(r.height-1)+l.right-1]))):(l.top>0&&(n=a.resolve(i+r.map[l.left])),s.bottom<r.height&&(t=a.resolve(i+r.map[r.width*(r.height-1)+s.right-1]))),new e(t,n)}isRowSelection(){const e=this.$anchorCell.node(-1),t=Yl.get(e),n=this.$anchorCell.start(-1),o=t.colCount(this.$anchorCell.pos-n),r=t.colCount(this.$headCell.pos-n);if(Math.min(o,r)>0)return!1;const i=o+this.$anchorCell.nodeAfter.attrs.colspan,s=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,s)==t.width}eq(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;const o=t.node(-1),r=Yl.get(o),i=t.start(-1),s=r.findCell(t.pos-i),l=r.findCell(n.pos-i),a=t.node(0);return s.left<=l.left?(s.left>0&&(t=a.resolve(i+r.map[s.top*r.width])),l.right<r.width&&(n=a.resolve(i+r.map[r.width*(l.top+1)-1]))):(l.left>0&&(n=a.resolve(i+r.map[l.top*r.width])),s.right<r.width&&(t=a.resolve(i+r.map[r.width*(s.top+1)-1]))),new e(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;return new e(t.resolve(n),t.resolve(o))}getBookmark(){return new ha(this.$anchorCell.pos,this.$headCell.pos)}};da.prototype.visible=!1,ut.jsonID("cell",da);var ha=class e{constructor(e,t){this.anchor=e,this.head=t}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){const t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&la(t,n)?new da(t,n):ut.near(n,1)}};function pa(e){if(!(e.selection instanceof da))return null;const t=[];return e.selection.forEachCell((e,n)=>{t.push(vr.node(n,n+e.nodeSize,{class:"selectedCell"}))}),wr.create(e.doc,t)}var fa=new Pt("fix-tables");function ma(e,t,n,o){const r=e.childCount,i=t.childCount;e:for(let s=0,l=0;s<i;s++){const i=t.child(s);for(let t=l,o=Math.min(r,s+3);t<o;t++)if(e.child(t)==i){l=t+1,n+=i.nodeSize;continue e}o(i,n),l<r&&e.child(l).sameMarkup(i)?ma(e.child(l),i,n+1,o):i.nodesBetween(0,i.content.size,o,n+1),n+=i.nodeSize}}function ga(e,t){let n;const o=(t,o)=>{"table"==t.type.spec.tableRole&&(n=function(e,t,n,o){const r=Yl.get(t);if(!r.problems)return o;o||(o=e.tr);const i=[];for(let s=0;s<r.height;s++)i.push(0);for(let c=0;c<r.problems.length;c++){const e=r.problems[c];if("collision"==e.type){const r=t.nodeAt(e.pos);if(!r)continue;const s=r.attrs;for(let t=0;t<s.rowspan;t++)i[e.row+t]+=e.n;o.setNodeMarkup(o.mapping.map(n+1+e.pos),null,ca(s,s.colspan-e.n,e.n))}else if("missing"==e.type)i[e.row]+=e.n;else if("overlong_rowspan"==e.type){const r=t.nodeAt(e.pos);if(!r)continue;o.setNodeMarkup(o.mapping.map(n+1+e.pos),null,(0,s.A)((0,s.A)({},r.attrs),{},{rowspan:r.attrs.rowspan-e.n}))}else if("colwidth mismatch"==e.type){const r=t.nodeAt(e.pos);if(!r)continue;o.setNodeMarkup(o.mapping.map(n+1+e.pos),null,(0,s.A)((0,s.A)({},r.attrs),{},{colwidth:e.colwidth}))}else if("zero_sized"==e.type){const e=o.mapping.map(n);o.delete(e,e+t.nodeSize)}}let l,a;for(let s=0;s<i.length;s++)i[s]&&(null==l&&(l=s),a=s);for(let s=0,c=n+1;s<r.height;s++){const n=t.child(s),r=c+n.nodeSize,u=i[s];if(u>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);const i=[];for(let n=0;n<u;n++){const n=ta(e.schema)[t].createAndFill();n&&i.push(n)}const d=0!=s&&l!=s-1||a!=s?r-1:c+1;o.insert(o.mapping.map(d),i)}c=r}return o.setMeta(fa,{fixTables:!0})}(e,t,o,n))};return t?t.doc!=e.doc&&ma(t.doc,e.doc,0,o):e.doc.descendants(o),n}function va(e){const t=e.selection,n=ia(e),o=n.node(-1),r=n.start(-1),i=Yl.get(o),l=t instanceof da?i.rectBetween(t.$anchorCell.pos-r,t.$headCell.pos-r):i.findCell(n.pos-r);return(0,s.A)((0,s.A)({},l),{},{tableStart:r,map:i,table:o})}function ya(e,t,n){let{map:o,tableStart:r,table:i}=t,s=n>0?-1:0;(function(e,t,n){const o=ta(t.type.schema).header_cell;for(let r=0;r<e.height;r++)if(t.nodeAt(e.map[n+r*e.width]).type!=o)return!1;return!0})(o,i,n+s)&&(s=0==n||n==o.width?null:0);for(let l=0;l<o.height;l++){const t=l*o.width+n;if(n>0&&n<o.width&&o.map[t-1]==o.map[t]){const s=o.map[t],a=i.nodeAt(s);e.setNodeMarkup(e.mapping.map(r+s),null,ua(a.attrs,n-o.colCount(s))),l+=a.attrs.rowspan-1}else{const a=null==s?ta(i.type.schema).cell:i.nodeAt(o.map[t+s]).type,c=o.positionAt(l,n,i);e.insert(e.mapping.map(r+c),a.createAndFill())}}return e}function ba(e,t,n){let{map:o,table:r,tableStart:i}=t;const s=e.mapping.maps.length;for(let l=0;l<o.height;){const t=l*o.width+n,a=o.map[t],c=r.nodeAt(a),u=c.attrs;if(n>0&&o.map[t-1]==a||n<o.width-1&&o.map[t+1]==a)e.setNodeMarkup(e.mapping.slice(s).map(i+a),null,ca(u,n-o.colCount(a)));else{const t=e.mapping.slice(s).map(i+a);e.delete(t,t+c.nodeSize)}l+=u.rowspan}}function wa(e,t,n){let{map:o,tableStart:r,table:i}=t;var l;let a=r;for(let s=0;s<n;s++)a+=i.child(s).nodeSize;const c=[];let u=n>0?-1:0;(function(e,t,n){var o;const r=ta(t.type.schema).header_cell;for(let i=0;i<e.width;i++)if((null==(o=t.nodeAt(e.map[i+n*e.width]))?void 0:o.type)!=r)return!1;return!0})(o,i,n+u)&&(u=0==n||n==o.height?null:0);for(let d=0,h=o.width*n;d<o.width;d++,h++)if(n>0&&n<o.height&&o.map[h]==o.map[h-o.width]){const t=o.map[h],n=i.nodeAt(t).attrs;e.setNodeMarkup(r+t,null,(0,s.A)((0,s.A)({},n),{},{rowspan:n.rowspan+1})),d+=n.colspan-1}else{const e=null==u?ta(i.type.schema).cell:null==(l=i.nodeAt(o.map[h+u*o.width]))?void 0:l.type,t=null==e?void 0:e.createAndFill();t&&c.push(t)}return e.insert(a,ta(i.type.schema).row.create(null,c)),e}function ka(e,t,n){let{map:o,table:r,tableStart:i}=t,l=0;for(let s=0;s<n;s++)l+=r.child(s).nodeSize;const a=l+r.child(n).nodeSize,c=e.mapping.maps.length;e.delete(l+i,a+i);const u=new Set;for(let d=0,h=n*o.width;d<o.width;d++,h++){const t=o.map[h];if(!u.has(t))if(u.add(t),n>0&&t==o.map[h-o.width]){const n=r.nodeAt(t).attrs;e.setNodeMarkup(e.mapping.slice(c).map(t+i),null,(0,s.A)((0,s.A)({},n),{},{rowspan:n.rowspan-1})),d+=n.colspan-1}else if(n<o.height&&t==o.map[h+o.width]){const l=r.nodeAt(t),a=l.attrs,u=l.type.create((0,s.A)((0,s.A)({},a),{},{rowspan:l.attrs.rowspan-1}),l.content),h=o.positionAt(n+1,d,r);e.insert(e.mapping.slice(c).map(i+h),u),d+=a.colspan-1}}}function Ca(e){const t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function xa(e,t){const n=ta(e.schema);return(o=e=>{let{node:t}=e;return n[t.type.spec.tableRole]},(e,t)=>{var n;const r=e.selection;let i,l;if(r instanceof da){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;i=r.$anchorCell.nodeAfter,l=r.$anchorCell.pos}else{if(i=function(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(r.$from),!i)return!1;l=null==(n=oa(r.$from))?void 0:n.pos}if(null==i||null==l)return!1;if(1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(t){let n=i.attrs;const a=[],c=n.colwidth;n.rowspan>1&&(n=(0,s.A)((0,s.A)({},n),{},{rowspan:1})),n.colspan>1&&(n=(0,s.A)((0,s.A)({},n),{},{colspan:1}));const u=va(e),d=e.tr;for(let e=0;e<u.right-u.left;e++)a.push(c?(0,s.A)((0,s.A)({},n),{},{colwidth:c&&c[e]?[c[e]]:null}):n);let h;for(let e=u.top;e<u.bottom;e++){let t=u.map.positionAt(e,u.left,u.table);e==u.top&&(t+=i.nodeSize);for(let n=u.left,r=0;n<u.right;n++,r++)n==u.left&&e==u.top||d.insert(h=d.mapping.map(t+u.tableStart,1),o({node:i,row:e,col:n}).createAndFill(a[r]))}d.setNodeMarkup(l,o({node:i,row:u.top,col:u.left}),a[0]),r instanceof da&&d.setSelection(new da(d.doc.resolve(r.$anchorCell.pos),h?d.doc.resolve(h):void 0)),t(d)}return!0})(e,t);var o}function Sa(e,t,n){const o=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let r=0;r<o.length;r++){const e=t.table.nodeAt(o[r]);if(e&&e.type!==n.header_cell)return!1}return!0}function Aa(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!ra(t))return!1;if(n){const o=ta(t.schema),r=va(t),i=t.tr,s=r.map.cellsInRect("column"==e?{left:r.left,top:0,right:r.right,bottom:r.map.height}:"row"==e?{left:0,top:r.top,right:r.map.width,bottom:r.bottom}:r),l=s.map(e=>r.table.nodeAt(e));for(let e=0;e<s.length;e++)l[e].type==o.header_cell&&i.setNodeMarkup(r.tableStart+s[e],o.cell,l[e].attrs);if(0==i.steps.length)for(let e=0;e<s.length;e++)i.setNodeMarkup(r.tableStart+s[e],o.header_cell,l[e].attrs);n(i)}return!0}}(e):function(t,n){if(!ra(t))return!1;if(n){const o=ta(t.schema),r=va(t),i=t.tr,s=Sa("row",r,o),l=Sa("column",r,o),a=("column"===e?s:"row"===e&&l)?1:0,c="column"==e?{left:0,top:a,right:1,bottom:r.map.height}:"row"==e?{left:a,top:0,right:r.map.width,bottom:1}:r,u="column"==e?l?o.cell:o.header_cell:"row"==e?s?o.cell:o.header_cell:o.cell;r.map.cellsInRect(c).forEach(e=>{const t=e+r.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,u,n.attrs)}),n(i)}return!0}}Aa("row",{useDeprecatedLogic:!0}),Aa("column",{useDeprecatedLogic:!0}),Aa("cell",{useDeprecatedLogic:!0});function Ea(e){return function(t,n){if(!ra(t))return!1;const o=function(e,t){if(t<0){const t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let n=e.index(-1)-1,o=e.before();n>=0;n--){const t=e.node(-1).child(n),r=t.lastChild;if(r)return o-1-r.nodeSize;o-=t.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const t=e.node(-1);for(let n=e.indexAfter(-1),o=e.after();n<t.childCount;n++){const e=t.child(n);if(e.childCount)return o+1;o+=e.nodeSize}}return null}(ia(t),e);if(null==o)return!1;if(n){const e=t.doc.resolve(o);n(t.tr.setSelection(ft.between(e,(r=e,r.node(0).resolve(r.pos+r.nodeAfter.nodeSize)))).scrollIntoView())}var r;return!0}}function Da(e,t){const n=e.selection;if(!(n instanceof da))return!1;if(t){const o=e.tr,r=ta(e.schema).cell.createAndFill().content;n.forEachCell((e,t)=>{e.content.eq(r)||o.replace(o.mapping.map(t+1),o.mapping.map(t+e.nodeSize-1),new y(r,0,0))}),o.docChanged&&t(o)}return!0}function Ma(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:o}=e;for(;1==t.childCount&&(n>0&&o>0||"table"==t.child(0).type.spec.tableRole);)n--,o--,t=t.child(0).content;const r=t.child(0),i=r.type.spec.tableRole,s=r.type.schema,l=[];if("row"==i)for(let a=0;a<t.childCount;a++){let e=t.child(a).content;const r=a?0:Math.max(0,n-1),i=a<t.childCount-1?0:Math.max(0,o-1);(r||i)&&(e=Na(ta(s).row,new y(e,r,i)).content),l.push(e)}else{if("cell"!=i&&"header_cell"!=i)return null;l.push(n||o?Na(ta(s).row,new y(t,n,o)).content:t)}return function(e,t){const n=[];for(let r=0;r<t.length;r++){const e=t[r];for(let t=e.childCount-1;t>=0;t--){const{rowspan:o,colspan:i}=e.child(t).attrs;for(let e=r;e<r+o;e++)n[e]=(n[e]||0)+i}}let o=0;for(let r=0;r<n.length;r++)o=Math.max(o,n[r]);for(let r=0;r<n.length;r++)if(r>=t.length&&t.push(h.empty),n[r]<o){const i=ta(e).cell.createAndFill(),s=[];for(let e=n[r];e<o;e++)s.push(i);t[r]=t[r].append(h.from(s))}return{height:t.length,width:o,rows:t}}(s,l)}function Na(e,t){const n=e.createAndFill();return new at(n).replace(0,n.content.size,t).doc}function Ta(e,t,n,o,r,i,l,a){if(0==l||l==t.height)return!1;let c=!1;for(let u=r;u<i;u++){const r=l*t.width+u,i=t.map[r];if(t.map[r-t.width]==i){c=!0;const r=n.nodeAt(i),{top:d,left:h}=t.findCell(i);e.setNodeMarkup(e.mapping.slice(a).map(i+o),null,(0,s.A)((0,s.A)({},r.attrs),{},{rowspan:l-d})),e.insert(e.mapping.slice(a).map(t.positionAt(l,h,n)),r.type.createAndFill((0,s.A)((0,s.A)({},r.attrs),{},{rowspan:d+r.attrs.rowspan-l}))),u+=r.attrs.colspan-1}}return c}function Oa(e,t,n,o,r,i,s,l){if(0==s||s==t.width)return!1;let a=!1;for(let c=r;c<i;c++){const r=c*t.width+s,i=t.map[r];if(t.map[r-1]==i){a=!0;const r=n.nodeAt(i),u=t.colCount(i),d=e.mapping.slice(l).map(i+o);e.setNodeMarkup(d,null,ca(r.attrs,s-u,r.attrs.colspan-(s-u))),e.insert(d+r.nodeSize,r.type.createAndFill(ca(r.attrs,0,s-u))),c+=r.attrs.rowspan-1}}return a}function Pa(e,t,n,o,r){let i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");let s=Yl.get(i);const{top:l,left:a}=o,c=a+r.width,u=l+r.height,d=e.tr;let p=0;function f(){if(i=n?d.doc.nodeAt(n-1):d.doc,!i)throw new Error("No table found");s=Yl.get(i),p=d.mapping.maps.length}(function(e,t,n,o,r,i,s){const l=ta(e.doc.type.schema);let a,c;if(r>t.width)for(let u=0,d=0;u<t.height;u++){const i=n.child(u);d+=i.nodeSize;const h=[];let p;p=null==i.lastChild||i.lastChild.type==l.cell?a||(a=l.cell.createAndFill()):c||(c=l.header_cell.createAndFill());for(let e=t.width;e<r;e++)h.push(p);e.insert(e.mapping.slice(s).map(d-1+o),h)}if(i>t.height){const u=[];for(let e=0,o=(t.height-1)*t.width;e<Math.max(t.width,r);e++){const r=!(e>=t.width)&&n.nodeAt(t.map[o+e]).type==l.header_cell;u.push(r?c||(c=l.header_cell.createAndFill()):a||(a=l.cell.createAndFill()))}const d=l.row.create(null,h.from(u)),p=[];for(let e=t.height;e<i;e++)p.push(d);e.insert(e.mapping.slice(s).map(o+n.nodeSize-2),p)}return!(!a&&!c)})(d,s,i,n,c,u,p)&&f(),Ta(d,s,i,n,a,c,l,p)&&f(),Ta(d,s,i,n,a,c,u,p)&&f(),Oa(d,s,i,n,l,u,a,p)&&f(),Oa(d,s,i,n,l,u,c,p)&&f();for(let h=l;h<u;h++){const e=s.positionAt(h,a,i),t=s.positionAt(h,c,i);d.replace(d.mapping.slice(p).map(e+n),d.mapping.slice(p).map(t+n),new y(r.rows[h-l],0,0))}f(),d.setSelection(new da(d.doc.resolve(n+s.positionAt(l,a,i)),d.doc.resolve(n+s.positionAt(u-1,c-1,i)))),t(d)}var _a=li({ArrowLeft:Ra("horiz",-1),ArrowRight:Ra("horiz",1),ArrowUp:Ra("vert",-1),ArrowDown:Ra("vert",1),"Shift-ArrowLeft":Ba("horiz",-1),"Shift-ArrowRight":Ba("horiz",1),"Shift-ArrowUp":Ba("vert",-1),"Shift-ArrowDown":Ba("vert",1),Backspace:Da,"Mod-Backspace":Da,Delete:Da,"Mod-Delete":Da});function La(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Ra(e,t){return(n,o,r)=>{if(!r)return!1;const i=n.selection;if(i instanceof da)return La(n,o,ut.near(i.$headCell,t));if("horiz"!=e&&!i.empty)return!1;const s=za(r,e,t);if(null==s)return!1;if("horiz"==e)return La(n,o,ut.near(n.doc.resolve(i.head+t),t));{const r=n.doc.resolve(s),i=aa(r,e,t);let l;return l=i?ut.near(i,1):t<0?ut.near(n.doc.resolve(r.before(-1)),-1):ut.near(n.doc.resolve(r.after(-1)),1),La(n,o,l)}}}function Ba(e,t){return(n,o,r)=>{if(!r)return!1;const i=n.selection;let s;if(i instanceof da)s=i;else{const o=za(r,e,t);if(null==o)return!1;s=new da(n.doc.resolve(o))}const l=aa(s.$headCell,e,t);return!!l&&La(n,o,new da(s.$anchorCell,l))}}function Ia(e,t){const n=oa(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new da(n))),!0)}function Fa(e,t,n){if(!ra(e.state))return!1;let o=Ma(n);const r=e.state.selection;if(r instanceof da){o||(o={width:1,height:1,rows:[h.from(Na(ta(e.state.schema).cell,n))]});const t=r.$anchorCell.node(-1),i=r.$anchorCell.start(-1),l=Yl.get(t).rectBetween(r.$anchorCell.pos-i,r.$headCell.pos-i);return o=function(e,t,n){let{width:o,height:r,rows:i}=e;if(o!=t){const e=[],n=[];for(let o=0;o<i.length;o++){const r=i[o],s=[];for(let n=e[o]||0,i=0;n<t;i++){let l=r.child(i%r.childCount);n+l.attrs.colspan>t&&(l=l.type.createChecked(ca(l.attrs,l.attrs.colspan,n+l.attrs.colspan-t),l.content)),s.push(l),n+=l.attrs.colspan;for(let t=1;t<l.attrs.rowspan;t++)e[o+t]=(e[o+t]||0)+l.attrs.colspan}n.push(h.from(s))}i=n,o=t}if(r!=n){const e=[];for(let t=0,o=0;t<n;t++,o++){const l=[],a=i[o%r];for(let e=0;e<a.childCount;e++){let o=a.child(e);t+o.attrs.rowspan>n&&(o=o.type.create((0,s.A)((0,s.A)({},o.attrs),{},{rowspan:Math.max(1,n-o.attrs.rowspan)}),o.content)),l.push(o)}e.push(h.from(l))}i=e,r=n}return{width:o,height:r,rows:i}}(o,l.right-l.left,l.bottom-l.top),Pa(e.state,e.dispatch,i,l,o),!0}if(o){const t=ia(e.state),n=t.start(-1);return Pa(e.state,e.dispatch,n,Yl.get(t.node(-1)).findCell(t.pos-n),o),!0}return!1}function ja(e,t){var n;if(t.ctrlKey||t.metaKey)return;const o=Ha(e,t.target);let r;if(t.shiftKey&&e.state.selection instanceof da)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&o&&null!=(r=oa(e.state.selection.$anchor))&&(null==(n=Va(e,t))?void 0:n.pos)!=r.pos)i(r,t),t.preventDefault();else if(!o)return;function i(t,n){let o=Va(e,n);const r=null==na.getState(e.state);if(!o||!la(t,o)){if(!r)return;o=t}const i=new da(t,o);if(r||!e.state.selection.eq(i)){const n=e.state.tr.setSelection(i);r&&n.setMeta(na,t.pos),e.dispatch(n)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",l),null!=na.getState(e.state)&&e.dispatch(e.state.tr.setMeta(na,-1))}function l(n){const r=n,l=na.getState(e.state);let a;if(null!=l)a=e.state.doc.resolve(l);else if(Ha(e,r.target)!=o&&(a=Va(e,t),!a))return s();a&&i(a,r)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",l)}function za(e,t,n){if(!(e.state.selection instanceof ft))return null;const{$head:o}=e.state.selection;for(let r=o.depth-1;r>=0;r--){const i=o.node(r);if((n<0?o.index(r):o.indexAfter(r))!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){const i=o.before(r),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?i:null}}return null}function Ha(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function Va(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?oa(e.state.doc.resolve(n.pos)):null}var Ua=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width","".concat(t,"px")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),$a(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,$a(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function $a(e,t,n,o,r,i){var s;let l=0,a=!0,c=t.firstChild;const u=e.firstChild;if(u){for(let e=0,n=0;e<u.childCount;e++){const{colspan:s,colwidth:d}=u.child(e).attrs;for(let e=0;e<s;e++,n++){const s=r==n?i:d&&d[e],u=s?s+"px":"";if(l+=s||o,s||(a=!1),c)c.style.width!=u&&(c.style.width=u),c=c.nextSibling;else{const e=document.createElement("col");e.style.width=u,t.appendChild(e)}}}for(;c;){const e=c.nextSibling;null==(s=c.parentNode)||s.removeChild(c),c=e}a?(n.style.width=l+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=l+"px")}}var Wa=new Pt("tableColumnResizing");function qa(){let{handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:o=Ua,lastColumnResizable:r=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=new Nt({key:Wa,state:{init(e,t){var r,s;const l=null==(s=null==(r=i.spec)?void 0:r.props)?void 0:s.nodeViews,a=ta(t.schema).table.name;return o&&l&&(l[a]=(e,t)=>new o(e,n,t)),new Ga(-1,!1)},apply:(e,t)=>t.apply(e)},props:{attributes:e=>{const t=Wa.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(t,n)=>{!function(e,t,n,o){if(!e.editable)return;const r=Wa.getState(e.state);if(!r)return;if(!r.dragging){const i=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target);let s=-1;if(i){const{left:o,right:r}=i.getBoundingClientRect();t.clientX-o<=n?s=Ka(e,t,"left",n):r-t.clientX<=n&&(s=Ka(e,t,"right",n))}if(s!=r.activeHandle){if(!o&&-1!==s){const t=e.state.doc.resolve(s),n=t.node(-1),o=Yl.get(n),r=t.start(-1);if(o.colCount(t.pos-r)+t.nodeAfter.attrs.colspan-1==o.width-1)return}Ja(e,s)}}}(t,n,e,r)},mouseleave:e=>{!function(e){if(!e.editable)return;const t=Wa.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&Ja(e,-1)}(e)},mousedown:(e,o)=>{!function(e,t,n,o){var r;if(!e.editable)return!1;const i=null!=(r=e.dom.ownerDocument.defaultView)?r:window,l=Wa.getState(e.state);if(!l||-1==l.activeHandle||l.dragging)return!1;const a=e.state.doc.nodeAt(l.activeHandle),c=function(e,t,n){let{colspan:o,colwidth:r}=n;const i=r&&r[r.length-1];if(i)return i;const s=e.domAtPos(t);let l=s.node.childNodes[s.offset].offsetWidth,a=o;if(r)for(let c=0;c<o;c++)r[c]&&(l-=r[c],a--);return l/a}(e,l.activeHandle,a.attrs);function u(t){i.removeEventListener("mouseup",u),i.removeEventListener("mousemove",d);const o=Wa.getState(e.state);(null==o?void 0:o.dragging)&&(!function(e,t,n){const o=e.state.doc.resolve(t),r=o.node(-1),i=Yl.get(r),l=o.start(-1),a=i.colCount(o.pos-l)+o.nodeAfter.attrs.colspan-1,c=e.state.tr;for(let u=0;u<i.height;u++){const e=u*i.width+a;if(u&&i.map[e]==i.map[e-i.width])continue;const t=i.map[e],o=r.nodeAt(t).attrs,d=1==o.colspan?0:a-i.colCount(t);if(o.colwidth&&o.colwidth[d]==n)continue;const h=o.colwidth?o.colwidth.slice():Qa(o.colspan);h[d]=n,c.setNodeMarkup(l+t,null,(0,s.A)((0,s.A)({},o),{},{colwidth:h}))}c.docChanged&&e.dispatch(c)}(e,o.activeHandle,Za(o.dragging,t,n)),e.dispatch(e.state.tr.setMeta(Wa,{setDragging:null})))}function d(t){if(!t.which)return u(t);const r=Wa.getState(e.state);if(r&&r.dragging){const i=Za(r.dragging,t,n);Xa(e,r.activeHandle,i,o)}}e.dispatch(e.state.tr.setMeta(Wa,{setDragging:{startX:t.clientX,startWidth:c}})),Xa(e,l.activeHandle,c,o),i.addEventListener("mouseup",u),i.addEventListener("mousemove",d),t.preventDefault()}(e,o,t,n)}},decorations:e=>{const t=Wa.getState(e);if(t&&t.activeHandle>-1)return function(e,t){var n;const o=[],r=e.doc.resolve(t),i=r.node(-1);if(!i)return wr.empty;const s=Yl.get(i),l=r.start(-1),a=s.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1;for(let c=0;c<s.height;c++){const t=a+c*s.width;if((a==s.width-1||s.map[t]!=s.map[t+1])&&(0==c||s.map[t]!=s.map[t-s.width])){const r=s.map[t],a=l+r+i.nodeAt(r).nodeSize-1,c=document.createElement("div");c.className="column-resize-handle",(null==(n=Wa.getState(e))?void 0:n.dragging)&&o.push(vr.node(l+r,l+r+i.nodeAt(r).nodeSize,{class:"column-resize-dragging"})),o.push(vr.widget(a,c))}}return wr.create(e.doc,o)}(e,t.activeHandle)},nodeViews:{}}});return i}var Ga=class e{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(t){const n=this,o=t.getMeta(Wa);if(o&&null!=o.setHandle)return new e(o.setHandle,!1);if(o&&void 0!==o.setDragging)return new e(n.activeHandle,o.setDragging);if(n.activeHandle>-1&&t.docChanged){let o=t.mapping.map(n.activeHandle,-1);return sa(t.doc.resolve(o))||(o=-1),new e(o,n.dragging)}return n}};function Ka(e,t,n,o){const r="right"==n?-o:o,i=e.posAtCoords({left:t.clientX+r,top:t.clientY});if(!i)return-1;const{pos:s}=i,l=oa(e.state.doc.resolve(s));if(!l)return-1;if("right"==n)return l.pos;const a=Yl.get(l.node(-1)),c=l.start(-1),u=a.map.indexOf(l.pos-c);return u%a.width==0?-1:c+a.map[u-1]}function Za(e,t,n){const o=t.clientX-e.startX;return Math.max(n,e.startWidth+o)}function Ja(e,t){e.dispatch(e.state.tr.setMeta(Wa,{setHandle:t}))}function Xa(e,t,n,o){const r=e.state.doc.resolve(t),i=r.node(-1),s=r.start(-1),l=Yl.get(i).colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1;let a=e.domAtPos(r.start(-1)).node;for(;a&&"TABLE"!=a.nodeName;)a=a.parentNode;a&&$a(i,a.firstChild,a,o,l,n)}function Qa(e){return Array(e).fill(0)}function Ya(){let{allowTableNodeSelection:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Nt({key:na,state:{init:()=>null,apply(e,t){const n=e.getMeta(na);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;const{deleted:o,pos:r}=e.mapping.mapResult(t);return o?null:r}},props:{decorations:pa,handleDOMEvents:{mousedown:ja},createSelectionBetween:e=>null!=na.getState(e.state)?e.state.selection:null,handleTripleClick:Ia,handleKeyDown:_a,handlePaste:Fa},appendTransaction:(t,n,o)=>function(e,t,n){const o=(t||e).selection,r=(t||e).doc;let i,s;if(o instanceof gt&&(s=o.node.type.spec.tableRole)){if("cell"==s||"header_cell"==s)i=da.create(r,o.from);else if("row"==s){const e=r.resolve(o.from+1);i=da.rowSelection(e,e)}else if(!n){const e=Yl.get(o.node),t=o.from+1,n=t+e.map[e.width*e.height-1];i=da.create(r,t+1,n)}}else o instanceof ft&&function(e){let{$from:t,$to:n}=e;if(t.pos==n.pos||t.pos<n.pos-6)return!1;let o=t.pos,r=n.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,o++);for(let s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,r--);return o==r&&/row|table/.test(t.node(i).type.spec.tableRole)}(o)?i=ft.create(r,o.from):o instanceof ft&&function(e){let t,n,{$from:o,$to:r}=e;for(let i=o.depth;i>0;i--){const e=o.node(i);if("cell"===e.type.spec.tableRole||"header_cell"===e.type.spec.tableRole){t=e;break}}for(let i=r.depth;i>0;i--){const e=r.node(i);if("cell"===e.type.spec.tableRole||"header_cell"===e.type.spec.tableRole){n=e;break}}return t!==n&&0===r.parentOffset}(o)&&(i=ft.create(r,o.$from.start(),o.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}(o,ga(o,n),e)})}class ec extends ut{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return ec.valid(n)?new ec(n):ut.near(n)}content(){return y.empty}eq(e){return e instanceof ec&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new ec(e.resolve(t.pos))}getBookmark(){return new tc(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),o=e.node(t);if(0!=n)for(let e=o.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(o.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),o=e.node(t);if(n!=o.childCount)for(let e=o.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(o.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e:for(;;){if(!n&&ec.valid(e))return e;let o=e.pos,r=null;for(let n=e.depth;;n--){let i=e.node(n);if(t>0?e.indexAfter(n)<i.childCount:e.index(n)>0){r=i.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;o+=t;let s=e.doc.resolve(o);if(ec.valid(s))return s}for(;;){let i=t>0?r.firstChild:r.lastChild;if(!i){if(r.isAtom&&!r.isText&&!gt.isSelectable(r)){e=e.doc.resolve(o+r.nodeSize*t),n=!1;continue e}break}r=i,o+=t;let s=e.doc.resolve(o);if(ec.valid(s))return s}return null}}}ec.prototype.visible=!1,ec.findFrom=ec.findGapCursorFrom,ut.jsonID("gapcursor",ec);class tc{constructor(e){this.pos=e}map(e){return new tc(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return ec.valid(t)?new ec(t):ut.near(t)}}const nc=li({ArrowLeft:oc("horiz",-1),ArrowRight:oc("horiz",1),ArrowUp:oc("vert",-1),ArrowDown:oc("vert",1)});function oc(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,o,r){let i=e.selection,s=t>0?i.$to:i.$from,l=i.empty;if(i instanceof ft){if(!r.endOfTextblock(n)||0==s.depth)return!1;l=!1,s=e.doc.resolve(t>0?s.after():s.before())}let a=ec.findGapCursorFrom(s,t,l);return!!a&&(o&&o(e.tr.setSelection(new ec(a))),!0)}}function rc(e,t,n){if(!e||!e.editable)return!1;let o=e.state.doc.resolve(t);if(!ec.valid(o))return!1;let r=e.posAtCoords({left:n.clientX,top:n.clientY});return!(r&&r.inside>-1&&gt.isSelectable(e.state.doc.nodeAt(r.inside)))&&(e.dispatch(e.state.tr.setSelection(new ec(o))),!0)}function ic(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof ec))return!1;let{$from:n}=e.state.selection,o=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!o)return!1;let r=h.empty;for(let s=o.length-1;s>=0;s--)r=h.from(o[s].createAndFill(null,r));let i=e.state.tr.replace(n.pos,n.pos,new y(r,0,0));return i.setSelection(ft.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function sc(e){if(!(e.selection instanceof ec))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",wr.create(e.doc,[vr.widget(e.selection.head,t,{key:"gapcursor"})])}const lc=fs.create({name:"gapCursor",addProseMirrorPlugins:()=>[new Nt({props:{decorations:sc,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&ec.valid(n)?new ec(n):null,handleClick:rc,handleKeyDown:nc,handleDOMEvents:{beforeinput:ic}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!==(t=Ki(Hi(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}});var ac=200,cc=function(){};cc.prototype.append=function(e){return e.length?(e=cc.from(e),!this.length&&e||e.length<ac&&this.leafAppend(e)||this.length<ac&&e.leafPrepend(this)||this.appendInner(e)):this},cc.prototype.prepend=function(e){return e.length?cc.from(e).append(this):this},cc.prototype.appendInner=function(e){return new dc(this,e)},cc.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?cc.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},cc.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},cc.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},cc.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var o=[];return this.forEach(function(t,n){return o.push(e(t,n))},t,n),o},cc.from=function(e){return e instanceof cc?e:e&&e.length?new uc(e):cc.empty};var uc=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,o){for(var r=t;r<n;r++)if(!1===e(this.values[r],o+r))return!1},t.prototype.forEachInvertedInner=function(e,t,n,o){for(var r=t-1;r>=n;r--)if(!1===e(this.values[r],o+r))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=ac)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=ac)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(cc);cc.empty=new uc([]);var dc=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,o){var r=this.left.length;return!(t<r&&!1===this.left.forEachInner(e,t,Math.min(n,r),o))&&(!(n>r&&!1===this.right.forEachInner(e,Math.max(t-r,0),Math.min(this.length,n)-r,o+r))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,o){var r=this.left.length;return!(t>r&&!1===this.right.forEachInvertedInner(e,t-r,Math.max(n,r)-r,o+r))&&(!(n<r&&!1===this.left.forEachInvertedInner(e,Math.min(t,r),n,o))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(cc);const hc=cc;class pc{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,o,r=this.items.length;for(;;r--){if(this.items.get(r-1).selection){--r;break}}t&&(n=this.remapping(r,this.items.length),o=n.maps.length);let i,s,l=e.tr,a=[],c=[];return this.items.forEach((e,t)=>{if(!e.step)return n||(n=this.remapping(r,t+1),o=n.maps.length),o--,void c.push(e);if(n){c.push(new fc(e.map));let t,r=e.step.map(n.slice(o));r&&l.maybeStep(r).doc&&(t=l.mapping.maps[l.mapping.maps.length-1],a.push(new fc(t,void 0,void 0,a.length+c.length))),o--,t&&n.appendMap(t,o)}else l.maybeStep(e.step);return e.selection?(i=n?e.selection.map(n.slice(o)):e.selection,s=new pc(this.items.slice(0,r).append(c.reverse().concat(a)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:s,transform:l,selection:i}}addTransform(e,t,n,o){let r=[],i=this.eventCount,s=this.items,l=!o&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let n,a=e.steps[c].invert(e.docs[c]),u=new fc(e.mapping.maps[c],a,t);(n=l&&l.merge(u))&&(u=n,c?r.pop():s=s.slice(0,s.length-1)),r.push(u),t&&(i++,t=void 0),o||(l=u)}let a=i-n.depth;return a>gc&&(s=function(e,t){let n;return e.forEach((e,o)=>{if(e.selection&&0==t--)return n=o,!1}),e.slice(n)}(s,a),i-=a),new pc(s.append(r),i)}remapping(e,t){let n=new Se;return this.items.forEach((t,o)=>{let r=null!=t.mirrorOffset&&o-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,r)},e,t),n}addMaps(e){return 0==this.eventCount?this:new pc(this.items.append(e.map(e=>new fc(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],o=Math.max(0,this.items.length-t),r=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach(e=>{e.selection&&s--},o);let l=t;this.items.forEach(t=>{let o=r.getMirror(--l);if(null==o)return;i=Math.min(i,o);let a=r.maps[o];if(t.step){let i=e.steps[o].invert(e.docs[o]),c=t.selection&&t.selection.map(r.slice(l+1,o));c&&s++,n.push(new fc(a,i,c))}else n.push(new fc(a))},o);let a=[];for(let d=t;d<i;d++)a.push(new fc(r.maps[d]));let c=this.items.slice(0,o).append(a).append(n),u=new pc(c,s);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,t=this.remapping(0,e),n=t.maps.length,o=[],r=0;return this.items.forEach((i,s)=>{if(s>=e)o.push(i),i.selection&&r++;else if(i.step){let e=i.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let l=i.selection&&i.selection.map(t.slice(n));l&&r++;let a,c=new fc(s.invert(),e,l),u=o.length-1;(a=o.length&&o[u].merge(c))?o[u]=a:o.push(c)}}else i.map&&n--},this.items.length,0),new pc(hc.from(o.reverse()),r)}}pc.empty=new pc(hc.empty,0);class fc{constructor(e,t,n,o){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new fc(t.getMap().invert(),t,this.selection)}}}class mc{constructor(e,t,n,o,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=o,this.prevComposition=r}}const gc=20;function vc(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,o,r)=>t.push(o,r));return t}function yc(e,t){if(!e)return null;let n=[];for(let o=0;o<e.length;o+=2){let r=t.map(e[o],1),i=t.map(e[o+1],-1);r<=i&&n.push(r,i)}return n}let bc=!1,wc=null;function kc(e){let t=e.plugins;if(wc!=t){bc=!1,wc=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){bc=!0;break}}return bc}const Cc=new Pt("history"),xc=new Pt("closeHistory");function Sc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Nt({key:Cc,state:{init:()=>new mc(pc.empty,pc.empty,null,0,-1),apply:(t,n,o)=>function(e,t,n,o){let r,i=n.getMeta(Cc);if(i)return i.historyState;n.getMeta(xc)&&(e=new mc(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(Cc))return s.getMeta(Cc).redo?new mc(e.done.addTransform(n,void 0,o,kc(t)),e.undone,vc(n.mapping.maps),e.prevTime,e.prevComposition):new mc(e.done,e.undone.addTransform(n,void 0,o,kc(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(r=n.getMeta("rebased"))?new mc(e.done.rebased(n,r),e.undone.rebased(n,r),yc(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new mc(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),yc(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let r=n.getMeta("composition"),i=0==e.prevTime||!s&&e.prevComposition!=r&&(e.prevTime<(n.time||0)-o.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,o)=>{for(let r=0;r<t.length;r+=2)e<=t[r+1]&&o>=t[r]&&(n=!0)}),n}(n,e.prevRanges)),l=s?yc(e.prevRanges,n.mapping):vc(n.mapping.maps);return new mc(e.done.addTransform(n,i?t.selection.getBookmark():void 0,o,kc(t)),pc.empty,l,n.time,null==r?e.prevComposition:r)}}(n,o,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,o="historyUndo"==n?Ec:"historyRedo"==n?Dc:null;return!!o&&(t.preventDefault(),o(e.state,e.dispatch))}}}})}function Ac(e,t){return(n,o)=>{let r=Cc.getState(n);if(!r||0==(e?r.undone:r.done).eventCount)return!1;if(o){let i=function(e,t,n){let o=kc(t),r=Cc.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,o);if(!i)return null;let s=i.selection.resolve(i.transform.doc),l=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),r,o),a=new mc(n?l:i.remaining,n?i.remaining:l,null,0,-1);return i.transform.setSelection(s).setMeta(Cc,{redo:n,historyState:a})}(r,n,e);i&&o(t?i.scrollIntoView():i)}return!0}}const Ec=Ac(!1,!0),Dc=Ac(!0,!0);Ac(!1,!1),Ac(!0,!1);const Mc=fs.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>e=>{let{state:t,dispatch:n}=e;return Ec(t,n)},redo:()=>e=>{let{state:t,dispatch:n}=e;return Dc(t,n)}}),addProseMirrorPlugins(){return[Sc(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),Nc=(e,t)=>{for(const n in t)e[n]=t[n];return e},Tc="numeric",Oc="ascii",Pc="alpha",_c="asciinumeric",Lc="alphanumeric",Rc="domain",Bc="emoji",Ic="scheme",Fc="slashscheme",jc="whitespace";function zc(e,t){return e in t||(t[e]=[]),t[e]}function Hc(e,t,n){t[Tc]&&(t[_c]=!0,t[Lc]=!0),t[Oc]&&(t[_c]=!0,t[Pc]=!0),t[_c]&&(t[Lc]=!0),t[Pc]&&(t[Lc]=!0),t[Lc]&&(t[Rc]=!0),t[Bc]&&(t[Rc]=!0);for(const o in t){const t=zc(o,n);t.indexOf(e)<0&&t.push(e)}}function Vc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.j={},this.jr=[],this.jd=null,this.t=e}Vc.groups={},Vc.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let o=0;o<t.jr.length;o++){const n=t.jr[o][0],r=t.jr[o][1];if(r&&n.test(e))return r}return t.jd},has(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e in this.j:!!this.go(e)},ta(e,t,n,o){for(let r=0;r<e.length;r++)this.tt(e[r],t,n,o)},tr(e,t,n,o){let r;return o=o||Vc.groups,t&&t.j?r=t:(r=new Vc(t),n&&o&&Hc(t,n,o)),this.jr.push([e,r]),r},ts(e,t,n,o){let r=this;const i=e.length;if(!i)return r;for(let s=0;s<i-1;s++)r=r.tt(e[s]);return r.tt(e[i-1],t,n,o)},tt(e,t,n,o){o=o||Vc.groups;const r=this;if(t&&t.j)return r.j[e]=t,t;const i=t;let s,l=r.go(e);if(l?(s=new Vc,Nc(s.j,l.j),s.jr.push.apply(s.jr,l.jr),s.jd=l.jd,s.t=l.t):s=new Vc,i){if(o)if(s.t&&"string"===typeof s.t){const e=Nc(function(e,t){const n={};for(const o in t)t[o].indexOf(e)>=0&&(n[o]=!0);return n}(s.t,o),n);Hc(i,e,o)}else n&&Hc(i,n,o);s.t=i}return r.j[e]=s,s}};const Uc=(e,t,n,o,r)=>e.ta(t,n,o,r),$c=(e,t,n,o,r)=>e.tr(t,n,o,r),Wc=(e,t,n,o,r)=>e.ts(t,n,o,r),qc=(e,t,n,o,r)=>e.tt(t,n,o,r),Gc="WORD",Kc="UWORD",Zc="ASCIINUMERICAL",Jc="ALPHANUMERICAL",Xc="LOCALHOST",Qc="TLD",Yc="UTLD",eu="SCHEME",tu="SLASH_SCHEME",nu="NUM",ou="WS",ru="NL",iu="OPENBRACE",su="CLOSEBRACE",lu="OPENBRACKET",au="CLOSEBRACKET",cu="OPENPAREN",uu="CLOSEPAREN",du="OPENANGLEBRACKET",hu="CLOSEANGLEBRACKET",pu="FULLWIDTHLEFTPAREN",fu="FULLWIDTHRIGHTPAREN",mu="LEFTCORNERBRACKET",gu="RIGHTCORNERBRACKET",vu="LEFTWHITECORNERBRACKET",yu="RIGHTWHITECORNERBRACKET",bu="FULLWIDTHLESSTHAN",wu="FULLWIDTHGREATERTHAN",ku="AMPERSAND",Cu="APOSTROPHE",xu="ASTERISK",Su="AT",Au="BACKSLASH",Eu="BACKTICK",Du="CARET",Mu="COLON",Nu="COMMA",Tu="DOLLAR",Ou="DOT",Pu="EQUALS",_u="EXCLAMATION",Lu="HYPHEN",Ru="PERCENT",Bu="PIPE",Iu="PLUS",Fu="POUND",ju="QUERY",zu="QUOTE",Hu="FULLWIDTHMIDDLEDOT",Vu="SEMI",Uu="SLASH",$u="TILDE",Wu="UNDERSCORE",qu="EMOJI",Gu="SYM";var Ku=Object.freeze({__proto__:null,ALPHANUMERICAL:Jc,AMPERSAND:ku,APOSTROPHE:Cu,ASCIINUMERICAL:Zc,ASTERISK:xu,AT:Su,BACKSLASH:Au,BACKTICK:Eu,CARET:Du,CLOSEANGLEBRACKET:hu,CLOSEBRACE:su,CLOSEBRACKET:au,CLOSEPAREN:uu,COLON:Mu,COMMA:Nu,DOLLAR:Tu,DOT:Ou,EMOJI:qu,EQUALS:Pu,EXCLAMATION:_u,FULLWIDTHGREATERTHAN:wu,FULLWIDTHLEFTPAREN:pu,FULLWIDTHLESSTHAN:bu,FULLWIDTHMIDDLEDOT:Hu,FULLWIDTHRIGHTPAREN:fu,HYPHEN:Lu,LEFTCORNERBRACKET:mu,LEFTWHITECORNERBRACKET:vu,LOCALHOST:Xc,NL:ru,NUM:nu,OPENANGLEBRACKET:du,OPENBRACE:iu,OPENBRACKET:lu,OPENPAREN:cu,PERCENT:Ru,PIPE:Bu,PLUS:Iu,POUND:Fu,QUERY:ju,QUOTE:zu,RIGHTCORNERBRACKET:gu,RIGHTWHITECORNERBRACKET:yu,SCHEME:eu,SEMI:Vu,SLASH:Uu,SLASH_SCHEME:tu,SYM:Gu,TILDE:$u,TLD:Qc,UNDERSCORE:Wu,UTLD:Yc,UWORD:Kc,WORD:Gc,WS:ou});const Zu=/[a-z]/,Ju=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/,Xu=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8])/,Qu=/\d/,Yu=/\s/;let ed=null,td=null;function nd(e,t){const n=function(e){const t=[],n=e.length;let o=0;for(;o<n;){let r,i=e.charCodeAt(o),s=i<55296||i>56319||o+1===n||(r=e.charCodeAt(o+1))<56320||r>57343?e[o]:e.slice(o,o+2);t.push(s),o+=s.length}return t}(t.replace(/[A-Z]/g,e=>e.toLowerCase())),o=n.length,r=[];let i=0,s=0;for(;s<o;){let l=e,a=null,c=0,u=null,d=-1,h=-1;for(;s<o&&(a=l.go(n[s]));)l=a,l.accepts()?(d=0,h=0,u=l):d>=0&&(d+=n[s].length,h++),c+=n[s].length,i+=n[s].length,s++;i-=d,s-=h,c-=d,r.push({t:u.t,v:t.slice(i-c,i),s:i-c,e:i})}return r}function od(e,t,n,o,r){let i;const s=t.length;for(let l=0;l<s-1;l++){const n=t[l];e.j[n]?i=e.j[n]:(i=new Vc(o),i.jr=r.slice(),e.j[n]=i),e=i}return i=new Vc(n),i.jr=r.slice(),e.j[t[s-1]]=i,i}function rd(e){const t=[],n=[];let o=0;for(;o<e.length;){let r=0;for(;"0123456789".indexOf(e[o+r])>=0;)r++;if(r>0){t.push(n.join(""));for(let t=parseInt(e.substring(o,o+r),10);t>0;t--)n.pop();o+=r}else n.push(e[o]),o++}return t}const id={defaultProtocol:"http",events:null,format:ld,formatHref:ld,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function sd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Nc({},id);e&&(n=Nc(n,e instanceof sd?e.o:e));const o=n.ignoreTags,r=[];for(let i=0;i<o.length;i++)r.push(o[i].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=r}function ld(e){return e}sd.prototype={o:id,ignoreTags:[],defaultRender:e=>e,check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const o=null!=t;let r=this.o[e];return r?("object"===typeof r?(r=n.t in r?r[n.t]:id[e],"function"===typeof r&&o&&(r=r(t,n))):"function"===typeof r&&o&&(r=r(t,n.t,n)),r):r},getObj(e,t,n){let o=this.o[e];return"function"===typeof o&&null!=t&&(o=o(t,n.t,n)),o},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function ad(e,t){this.t="token",this.v=e,this.tk=t}function cd(e,t){class n extends ad{constructor(t,n){super(t,n),this.t=e}}for(const o in t)n.prototype[o]=t[o];return n.t=e,n}ad.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),o=e.get("format",t,this);return n&&o.length>n?o.substring(0,n)+"\u2026":o},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:id.defaultProtocol;return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),o=e.get("formatHref",n,this),r=e.get("tagName",n,t),i=this.toFormattedString(e),s={},l=e.get("className",n,t),a=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return s.href=o,l&&(s.class=l),a&&(s.target=a),c&&(s.rel=c),u&&Nc(s,u),{tagName:r,attributes:s,content:i,eventListeners:d}}};const ud=cd("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),dd=cd("text"),hd=cd("nl"),pd=cd("url",{isLink:!0,toHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:id.defaultProtocol;return this.hasProtocol()?this.v:"".concat(e,"://").concat(this.v)},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Xc&&e[1].t===Mu}});const fd=e=>new Vc(e);function md(e,t,n){const o=n[0].s,r=n[n.length-1].e;return new e(t.slice(o,r),n)}const gd="undefined"!==typeof console&&console&&console.warn||(()=>{}),vd="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",yd={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function bd(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(yd.initialized&&gd('linkifyjs: already initialized - will not register custom scheme "'.concat(e,'" ').concat(vd)),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');yd.customSchemes.push([e,t])}function wd(){yd.scanner=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t={};Vc.groups=t;const n=new Vc;null==ed&&(ed=rd("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==td&&(td=rd("\u03b5\u03bb1\u03c52\u0431\u04331\u0435\u043b3\u0434\u0435\u0442\u04384\u0435\u044e2\u043a\u0430\u0442\u043e\u043b\u0438\u043a6\u043e\u043c3\u043c\u043a\u04342\u043e\u043d1\u0441\u043a\u0432\u04306\u043e\u043d\u043b\u0430\u0439\u043d5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043a\u04403\u049b\u0430\u04373\u0570\u0561\u05753\u05d9\u05e9\u05e8\u05d0\u05dc5\u05e7\u05d5\u05dd3\u0627\u0628\u0648\u0638\u0628\u064a5\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062f\u06464\u0628\u062d\u0631\u064a\u06465\u062c\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062f\u064a\u06296\u0639\u0644\u064a\u0627\u06465\u0645\u063a\u0631\u06285\u0645\u0627\u0631\u0627\u062a5\u06cc\u0631\u0627\u06465\u0628\u0627\u0631\u062a2\u0632\u0627\u06314\u064a\u062a\u06433\u06be\u0627\u0631\u062a5\u062a\u0648\u0646\u06334\u0633\u0648\u062f\u0627\u06463\u0631\u064a\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064a\u06466\u0642\u0637\u06313\u0643\u0627\u062b\u0648\u0644\u064a\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064a\u0633\u064a\u06275\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067e\u0627\u06a9\u0633\u062a\u0627\u06467\u0680\u0627\u0631\u062a4\u0915\u0949\u092e3\u0928\u0947\u091f3\u092d\u093e\u0930\u09240\u092e\u094d3\u094b\u09245\u0938\u0902\u0917\u0920\u09285\u09ac\u09be\u0982\u09b2\u09be5\u09ad\u09be\u09b0\u09a42\u09f0\u09a44\u0a2d\u0a3e\u0a30\u0a244\u0aad\u0abe\u0ab0\u0aa44\u0b2d\u0b3e\u0b30\u0b244\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe6\u0bb2\u0b99\u0bcd\u0b95\u0bc86\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd11\u0c2d\u0c3e\u0c30\u0c24\u0c4d5\u0cad\u0cbe\u0cb0\u0ca44\u0d2d\u0d3e\u0d30\u0d24\u0d025\u0dbd\u0d82\u0d9a\u0dcf4\u0e04\u0e2d\u0e213\u0e44\u0e17\u0e223\u0ea5\u0eb2\u0ea73\u10d2\u10d42\u307f\u3093\u306a3\u30a2\u30de\u30be\u30f34\u30af\u30e9\u30a6\u30c94\u30b0\u30fc\u30b0\u30eb4\u30b3\u30e02\u30b9\u30c8\u30a23\u30bb\u30fc\u30eb3\u30d5\u30a1\u30c3\u30b7\u30e7\u30f36\u30dd\u30a4\u30f3\u30c84\u4e16\u754c2\u4e2d\u4fe11\u56fd1\u570b1\u6587\u7f513\u4e9a\u9a6c\u900a3\u4f01\u4e1a2\u4f5b\u5c712\u4fe1\u606f2\u5065\u5eb72\u516b\u53662\u516c\u53f81\u76ca2\u53f0\u6e7e1\u70632\u5546\u57ce1\u5e971\u68072\u5609\u91cc0\u5927\u9152\u5e975\u5728\u7ebf2\u5927\u62ff2\u5929\u4e3b\u65593\u5a31\u4e502\u5bb6\u96fb2\u5e7f\u4e1c2\u5fae\u535a2\u6148\u55842\u6211\u7231\u4f603\u624b\u673a2\u62db\u80582\u653f\u52a11\u5e9c2\u65b0\u52a0\u57612\u95fb2\u65f6\u5c1a2\u66f8\u7c4d2\u673a\u67842\u6de1\u9a6c\u95213\u6e38\u620f2\u6fb3\u95802\u70b9\u770b2\u79fb\u52a82\u7ec4\u7ec7\u673a\u67844\u7f51\u57401\u5e971\u7ad91\u7edc2\u8054\u901a2\u8c37\u6b4c2\u8d2d\u72692\u901a\u8ca92\u96c6\u56e22\u96fb\u8a0a\u76c8\u79d14\u98de\u5229\u6d663\u98df\u54c12\u9910\u53852\u9999\u683c\u91cc\u62c93\u6e2f2\ub2f7\ub1371\ucef42\uc0bc\uc1312\ud55c\uad6d2")),qc(n,"'",Cu),qc(n,"{",iu),qc(n,"}",su),qc(n,"[",lu),qc(n,"]",au),qc(n,"(",cu),qc(n,")",uu),qc(n,"<",du),qc(n,">",hu),qc(n,"\uff08",pu),qc(n,"\uff09",fu),qc(n,"\u300c",mu),qc(n,"\u300d",gu),qc(n,"\u300e",vu),qc(n,"\u300f",yu),qc(n,"\uff1c",bu),qc(n,"\uff1e",wu),qc(n,"&",ku),qc(n,"*",xu),qc(n,"@",Su),qc(n,"`",Eu),qc(n,"^",Du),qc(n,":",Mu),qc(n,",",Nu),qc(n,"$",Tu),qc(n,".",Ou),qc(n,"=",Pu),qc(n,"!",_u),qc(n,"-",Lu),qc(n,"%",Ru),qc(n,"|",Bu),qc(n,"+",Iu),qc(n,"#",Fu),qc(n,"?",ju),qc(n,'"',zu),qc(n,"/",Uu),qc(n,";",Vu),qc(n,"~",$u),qc(n,"_",Wu),qc(n,"\\",Au),qc(n,"\u30fb",Hu);const o=$c(n,Qu,nu,{[Tc]:!0});$c(o,Qu,o);const r=$c(o,Zu,Zc,{[_c]:!0}),i=$c(o,Ju,Jc,{[Lc]:!0}),s=$c(n,Zu,Gc,{[Oc]:!0});$c(s,Qu,r),$c(s,Zu,s),$c(r,Qu,r),$c(r,Zu,r);const l=$c(n,Ju,Kc,{[Pc]:!0});$c(l,Zu),$c(l,Qu,i),$c(l,Ju,l),$c(i,Qu,i),$c(i,Zu),$c(i,Ju,i);const a=qc(n,"\n",ru,{[jc]:!0}),c=qc(n,"\r",ou,{[jc]:!0}),u=$c(n,Yu,ou,{[jc]:!0});qc(n,"\ufffc",u),qc(c,"\n",a),qc(c,"\ufffc",u),$c(c,Yu,u),qc(u,"\r"),qc(u,"\n"),$c(u,Yu,u),qc(u,"\ufffc",u);const d=$c(n,Xu,qu,{[Bc]:!0});qc(d,"#"),$c(d,Xu,d),qc(d,"\ufe0f",d);const h=qc(d,"\u200d");qc(h,"#"),$c(h,Xu,d);const p=[[Zu,s],[Qu,r]],f=[[Zu,null],[Ju,l],[Qu,i]];for(let m=0;m<ed.length;m++)od(n,ed[m],Qc,Gc,p);for(let m=0;m<td.length;m++)od(n,td[m],Yc,Kc,f);Hc(Qc,{tld:!0,ascii:!0},t),Hc(Yc,{utld:!0,alpha:!0},t),od(n,"file",eu,Gc,p),od(n,"mailto",eu,Gc,p),od(n,"http",tu,Gc,p),od(n,"https",tu,Gc,p),od(n,"ftp",tu,Gc,p),od(n,"ftps",tu,Gc,p),Hc(eu,{scheme:!0,ascii:!0},t),Hc(tu,{slashscheme:!0,ascii:!0},t),e=e.sort((e,t)=>e[0]>t[0]?1:-1);for(let m=0;m<e.length;m++){const t=e[m][0],o=e[m][1]?{[Ic]:!0}:{[Fc]:!0};t.indexOf("-")>=0?o[Rc]=!0:Zu.test(t)?Qu.test(t)?o[_c]=!0:o[Oc]=!0:o[Tc]=!0,Wc(n,t,t,o)}return Wc(n,"localhost",Xc,{ascii:!0}),n.jd=new Vc(Gu),{start:n,tokens:Nc({groups:t},Ku)}}(yd.customSchemes);for(let e=0;e<yd.tokenQueue.length;e++)yd.tokenQueue[e][1]({scanner:yd.scanner});yd.parser=function(e){let{groups:t}=e;const n=t.domain.concat([ku,xu,Su,Au,Eu,Du,Tu,Pu,Lu,nu,Ru,Bu,Iu,Fu,Uu,Gu,$u,Wu]),o=[Cu,Mu,Nu,Ou,_u,Ru,ju,zu,Vu,du,hu,iu,su,au,lu,cu,uu,pu,fu,mu,gu,vu,yu,bu,wu],r=[ku,Cu,xu,Au,Eu,Du,Tu,Pu,Lu,iu,su,Ru,Bu,Iu,Fu,ju,Uu,Gu,$u,Wu],i=fd(),s=qc(i,$u);Uc(s,r,s),Uc(s,t.domain,s);const l=fd(),a=fd(),c=fd();Uc(i,t.domain,l),Uc(i,t.scheme,a),Uc(i,t.slashscheme,c),Uc(l,r,s),Uc(l,t.domain,l);const u=qc(l,Su);qc(s,Su,u),qc(a,Su,u),qc(c,Su,u);const d=qc(s,Ou);Uc(d,r,s),Uc(d,t.domain,s);const h=fd();Uc(u,t.domain,h),Uc(h,t.domain,h);const p=qc(h,Ou);Uc(p,t.domain,h);const f=fd(ud);Uc(p,t.tld,f),Uc(p,t.utld,f),qc(u,Xc,f);const m=qc(h,Lu);qc(m,Lu,m),Uc(m,t.domain,h),Uc(f,t.domain,h),qc(f,Ou,p),qc(f,Lu,m);const g=qc(f,Mu);Uc(g,t.numeric,ud);const v=qc(l,Lu),y=qc(l,Ou);qc(v,Lu,v),Uc(v,t.domain,l),Uc(y,r,s),Uc(y,t.domain,l);const b=fd(pd);Uc(y,t.tld,b),Uc(y,t.utld,b),Uc(b,t.domain,l),Uc(b,r,s),qc(b,Ou,y),qc(b,Lu,v),qc(b,Su,u);const w=qc(b,Mu),k=fd(pd);Uc(w,t.numeric,k);const C=fd(pd),x=fd();Uc(C,n,C),Uc(C,o,x),Uc(x,n,C),Uc(x,o,x),qc(b,Uu,C),qc(k,Uu,C);const S=qc(a,Mu),A=qc(c,Mu),E=qc(A,Uu),D=qc(E,Uu);Uc(a,t.domain,l),qc(a,Ou,y),qc(a,Lu,v),Uc(c,t.domain,l),qc(c,Ou,y),qc(c,Lu,v),Uc(S,t.domain,C),qc(S,Uu,C),qc(S,ju,C),Uc(D,t.domain,C),Uc(D,n,C),qc(D,Uu,C);const M=[[iu,su],[lu,au],[cu,uu],[du,hu],[pu,fu],[mu,gu],[vu,yu],[bu,wu]];for(let N=0;N<M.length;N++){const[e,t]=M[N],r=qc(C,e);qc(x,e,r),qc(r,t,C);const i=fd(pd);Uc(r,n,i);const s=fd();Uc(r,o),Uc(i,n,i),Uc(i,o,s),Uc(s,n,i),Uc(s,o,s),qc(i,t,C),qc(s,t,C)}return qc(i,Xc,b),qc(i,ru,hd),{start:i,tokens:Ku}}(yd.scanner.tokens);for(let e=0;e<yd.pluginQueue.length;e++)yd.pluginQueue[e][1]({scanner:yd.scanner,parser:yd.parser});return yd.initialized=!0,yd}function kd(e){return yd.initialized||wd(),function(e,t,n){let o=n.length,r=0,i=[],s=[];for(;r<o;){let l=e,a=null,c=null,u=0,d=null,h=-1;for(;r<o&&!(a=l.go(n[r].t));)s.push(n[r++]);for(;r<o&&(c=a||l.go(n[r].t));)a=null,l=c,l.accepts()?(h=0,d=l):h>=0&&h++,r++,u++;if(h<0)r-=u,r<o&&(s.push(n[r]),r++);else{s.length>0&&(i.push(md(dd,t,s)),s=[]),r-=h,u-=h;const e=d.t,o=n.slice(r-u,r);i.push(md(e,t,o))}}return s.length>0&&i.push(md(dd,t,s)),i}(yd.parser.start,e,nd(yd.scanner.start,e))}function Cd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t&&"object"===typeof t){if(n)throw Error("linkifyjs: Invalid link type ".concat(t,"; must be a string"));n=t,t=null}const o=new sd(n),r=kd(e),i=[];for(let s=0;s<r.length;s++){const e=r[s];!e.isLink||t&&e.t!==t||!o.check(e)||i.push(e.toFormattedObject(o))}return i}kd.scan=nd;const xd=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Sd(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(e=>{const t="string"===typeof e?e:e.scheme;t&&n.push(t)}),!e||e.replace(xd,"").match(new RegExp("^(?:(?:".concat(n.join("|"),"):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))"),"i"))}const Ad=as.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{"string"!==typeof e?bd(e.scheme,e.optionalSlashes):bd(e)})},onDestroy(){Vc.groups={},yd.scanner=null,yd.parser=null,yd.tokenQueue=[],yd.pluginQueue=[],yd.customSchemes=[],yd.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Sd(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}),addAttributes(){return{href:{default:null,parseHTML:e=>e.getAttribute("href")},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!(!t||!this.options.isAllowedUri(t,{defaultValidate:e=>!!Sd(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&null}}]},renderHTML(e){let{HTMLAttributes:t}=e;return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Sd(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Wi(this.options.HTMLAttributes,t),0]:["a",Wi(this.options.HTMLAttributes,(0,s.A)((0,s.A)({},t),{},{href:""})),0]},addCommands(){return{setLink:e=>t=>{let{chain:n}=t;const{href:o}=e;return!!this.options.isAllowedUri(o,{defaultValidate:e=>!!Sd(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&n().setMark(this.name,e).setMeta("preventAutolink",!0).run()},toggleLink:e=>t=>{let{chain:n}=t;const{href:o}=e;return!!this.options.isAllowedUri(o,{defaultValidate:e=>!!Sd(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&n().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>e=>{let{chain:t}=e;return t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}}},addPasteRules(){return[yl({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:o}=this.options,r=Cd(e).filter(e=>e.isLink&&this.options.isAllowedUri(e.value,{defaultValidate:e=>!!Sd(e,n),protocols:n,defaultProtocol:o}));r.length&&r.forEach(e=>t.push({text:e.value,data:{href:e.href},index:e.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:null===(t=e.data)||void 0===t?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(function(e){return new Nt({key:new Pt("autolink"),appendTransaction:(t,n,o)=>{const r=t.some(e=>e.docChanged)&&!n.doc.eq(o.doc),i=t.some(e=>e.getMeta("preventAutolink"));if(!r||i)return;const{tr:l}=o;return qs(Fs(n.doc,[...t])).forEach(t=>{let{newRange:n}=t;const r=zs(o.doc,n,e=>e.isTextblock);let i,a;if(r.length>1?(i=r[0],a=o.doc.textBetween(i.pos,i.pos+i.node.nodeSize,void 0," ")):r.length&&o.doc.textBetween(n.from,n.to," "," ").endsWith(" ")&&(i=r[0],a=o.doc.textBetween(i.pos,n.to,void 0," ")),i&&a){const t=a.split(" ").filter(e=>""!==e);if(t.length<=0)return!1;const n=t[t.length-1],r=i.pos+a.lastIndexOf(n);if(!n)return!1;const u=kd(n).map(t=>t.toObject(e.defaultProtocol));if(!(1===(c=u).length?c[0].isLink:3===c.length&&c[1].isLink&&["()","[]"].includes(c[0].value+c[2].value)))return!1;u.filter(e=>e.isLink).map(e=>(0,s.A)((0,s.A)({},e),{},{from:r+e.start+1,to:r+e.end+1})).filter(e=>!o.schema.marks.code||!o.doc.rangeHasMark(e.from,e.to,o.schema.marks.code)).filter(t=>e.validate(t.value)).filter(t=>e.shouldAutoLink(t.value)).forEach(t=>{Gs(t.from,t.to,o.doc).some(t=>t.mark.type===e.type)||l.addMark(t.from,t.to,e.type.create({href:t.href}))})}var c}),l.steps.length?l:void 0}})}({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:e=>this.options.isAllowedUri(e,{defaultValidate:e=>!!Sd(e,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),!0===this.options.openOnClick&&e.push(function(e){return new Nt({key:new Pt("handleClickLink"),props:{handleClick:(t,n,o)=>{var r,i;if(0!==o.button)return!1;if(!t.editable)return!1;let s=o.target;const l=[];for(;"DIV"!==s.nodeName;)l.push(s),s=s.parentNode;if(!l.find(e=>"A"===e.nodeName))return!1;const a=$s(t.state,e.type.name),c=o.target,u=null!==(r=null===c||void 0===c?void 0:c.href)&&void 0!==r?r:a.href,d=null!==(i=null===c||void 0===c?void 0:c.target)&&void 0!==i?i:a.target;return!(!c||!u)&&(window.open(u,d),!0)}}})}({type:this.type})),this.options.linkOnPaste&&e.push(function(e){return new Nt({key:new Pt("handlePasteLink"),props:{handlePaste:(t,n,o)=>{const{state:r}=t,{selection:i}=r,{empty:s}=i;if(s)return!1;let l="";o.content.forEach(e=>{l+=e.textContent});const a=Cd(l,{defaultProtocol:e.defaultProtocol}).find(e=>e.isLink&&e.value===l);return!(!l||!a)&&e.editor.commands.setMark(e.type,{href:a.href})}}})}({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),Ed=gl.create({name:"text",group:"inline"}),Dd=()=>new Map,Md=e=>{const t=Dd();return e.forEach((e,n)=>{t.set(n,e)}),t},Nd=(e,t,n)=>{let o=e.get(t);return void 0===o&&e.set(t,o=n()),o},Td=()=>new Set,Od=e=>e[e.length-1],Pd=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},_d=Array.from,Ld=Array.isArray;class Rd{constructor(){this._observers=Dd()}on(e,t){return Nd(this._observers,e,Td).add(t),t}once(e,t){var n=this;const o=function(){n.off(e,o),t(...arguments)};this.on(e,o)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return _d((this._observers.get(e)||Dd()).values()).forEach(e=>e(...t))}destroy(){this._observers=Dd()}}const Bd=Math.floor,Id=(Math.ceil,Math.abs),Fd=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,(e,t)=>e<t?e:t),jd=(e,t)=>e>t?e:t,zd=(Number.isNaN,Math.pow,Math.sign,e=>0!==e?e<0:1/e<0),Hd=64,Vd=128,Ud=1<<29,$d=127,Wd=2147483647,qd=Number.MAX_SAFE_INTEGER,Gd=(Number.MIN_SAFE_INTEGER,Number.isInteger||(e=>"number"===typeof e&&isFinite(e)&&Bd(e)===e)),Kd=(Number.isNaN,Number.parseInt,String.fromCharCode),Zd=(String.fromCodePoint,Kd(65535),/^\s*/g),Jd=/([A-Z])/g,Xd=(e,t)=>(e=>e.replace(Zd,""))(e.replace(Jd,e=>"".concat(t).concat((e=>e.toLowerCase())(e)))),Qd="undefined"!==typeof TextEncoder?new TextEncoder:null,Yd=Qd?e=>Qd.encode(e):e=>{const t=unescape(encodeURIComponent(e)),n=t.length,o=new Uint8Array(n);for(let r=0;r<n;r++)o[r]=t.codePointAt(r);return o};let eh="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});eh&&1===eh.decode(new Uint8Array).length&&(eh=null);class th{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const nh=()=>new th,oh=e=>{const t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e));let n=0;for(let o=0;o<e.bufs.length;o++){const r=e.bufs[o];t.set(r,n),n+=r.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},rh=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},ih=rh,sh=(e,t)=>{for(;t>$d;)rh(e,Vd|$d&t),t=Bd(t/128);rh(e,$d&t)},lh=(e,t)=>{const n=zd(t);for(n&&(t=-t),rh(e,(t>63?Vd:0)|(n?Hd:0)|63&t),t=Bd(t/64);t>0;)rh(e,(t>$d?Vd:0)|$d&t),t=Bd(t/128)},ah=new Uint8Array(3e4),ch=ah.length/3,uh=Qd&&Qd.encodeInto?(e,t)=>{if(t.length<ch){const n=Qd.encodeInto(t,ah).written||0;sh(e,n);for(let t=0;t<n;t++)rh(e,ah[t])}else hh(e,Yd(t))}:(e,t)=>{const n=unescape(encodeURIComponent(t)),o=n.length;sh(e,o);for(let r=0;r<o;r++)rh(e,n.codePointAt(r))},dh=(e,t)=>{const n=e.cbuf.length,o=e.cpos,r=Fd(n-o,t.length),i=t.length-r;e.cbuf.set(t.subarray(0,r),o),e.cpos+=r,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(jd(2*n,i)),e.cbuf.set(t.subarray(r)),e.cpos=i)},hh=(e,t)=>{sh(e,t.byteLength),dh(e,t)},ph=(e,t)=>{((e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*jd(n,t)),e.cpos=0)})(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},fh=new DataView(new ArrayBuffer(4)),mh=(e,t)=>{switch(typeof t){case"string":rh(e,119),uh(e,t);break;case"number":Gd(t)&&Id(t)<=Wd?(rh(e,125),lh(e,t)):(n=t,fh.setFloat32(0,n),fh.getFloat32(0)===n?(rh(e,124),((e,t)=>{ph(e,4).setFloat32(0,t,!1)})(e,t)):(rh(e,123),((e,t)=>{ph(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":rh(e,122),((e,t)=>{ph(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)rh(e,126);else if(Ld(t)){rh(e,117),sh(e,t.length);for(let n=0;n<t.length;n++)mh(e,t[n])}else if(t instanceof Uint8Array)rh(e,116),hh(e,t);else{rh(e,118);const n=Object.keys(t);sh(e,n.length);for(let o=0;o<n.length;o++){const r=n[o];uh(e,r),mh(e,t[r])}}break;case"boolean":rh(e,t?120:121);break;default:rh(e,127)}var n};class gh extends th{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&sh(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const vh=e=>{e.count>0&&(lh(e.encoder,1===e.count?e.s:-e.s),e.count>1&&sh(e.encoder,e.count-2))};class yh{constructor(){this.encoder=new th,this.s=0,this.count=0}write(e){this.s===e?this.count++:(vh(this),this.count=1,this.s=e)}toUint8Array(){return vh(this),oh(this.encoder)}}const bh=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);lh(e.encoder,t),e.count>1&&sh(e.encoder,e.count-2)}};class wh{constructor(){this.encoder=new th,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(bh(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return bh(this),oh(this.encoder)}}class kh{constructor(){this.sarr=[],this.s="",this.lensE=new yh}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new th;return this.sarr.push(this.s),this.s="",uh(e,this.sarr.join("")),dh(e,this.lensE.toUint8Array()),oh(e)}}const Ch=e=>new Error(e),xh=()=>{throw Ch("Method unimplemented")},Sh=()=>{throw Ch("Unexpected case")},Ah=Ch("Unexpected end of array"),Eh=Ch("Integer out of Range");class Dh{constructor(e){this.arr=e,this.pos=0}}const Mh=e=>new Dh(e),Nh=e=>e.pos!==e.arr.length,Th=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},Oh=e=>Th(e,_h(e)),Ph=e=>e.arr[e.pos++],_h=e=>{let t=0,n=1;const o=e.arr.length;for(;e.pos<o;){const o=e.arr[e.pos++];if(t+=(o&$d)*n,n*=128,o<Vd)return t;if(t>qd)throw Eh}throw Ah},Lh=e=>{let t=e.arr[e.pos++],n=63&t,o=64;const r=(t&Hd)>0?-1:1;if(0===(t&Vd))return r*n;const i=e.arr.length;for(;e.pos<i;){if(t=e.arr[e.pos++],n+=(t&$d)*o,o*=128,t<Vd)return r*n;if(n>qd)throw Eh}throw Ah},Rh=eh?e=>eh.decode(Oh(e)):e=>{let t=_h(e);if(0===t)return"";{let n=String.fromCodePoint(Ph(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(Ph(e));else for(;t>0;){const o=t<1e4?t:1e4,r=e.arr.subarray(e.pos,e.pos+o);e.pos+=o,n+=String.fromCodePoint.apply(null,r),t-=o}return decodeURIComponent(escape(n))}},Bh=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},Ih=[e=>{},e=>null,Lh,e=>Bh(e,4).getFloat32(0,!1),e=>Bh(e,8).getFloat64(0,!1),e=>Bh(e,8).getBigInt64(0,!1),e=>!1,e=>!0,Rh,e=>{const t=_h(e),n={};for(let o=0;o<t;o++){n[Rh(e)]=Fh(e)}return n},e=>{const t=_h(e),n=[];for(let o=0;o<t;o++)n.push(Fh(e));return n},Oh],Fh=e=>Ih[127-Ph(e)](e);class jh extends Dh{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),Nh(this)?this.count=_h(this)+1:this.count=-1),this.count--,this.s}}class zh extends Dh{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=Lh(this);const e=zd(this.s);this.count=1,e&&(this.s=-this.s,this.count=_h(this)+2)}return this.count--,this.s}}class Hh extends Dh{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const e=Lh(this),t=1&e;this.diff=Bd(e/2),this.count=1,t&&(this.count=_h(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Vh{constructor(e){this.decoder=new zh(e),this.str=Rh(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}crypto.subtle;const Uh=crypto.getRandomValues.bind(crypto),$h=Math.random,Wh=()=>Uh(new Uint32Array(1))[0],qh=[1e7]+-1e3+-4e3+-8e3+-1e11,Gh=()=>qh.replace(/[018]/g,e=>(e^Wh()&15>>e/4).toString(16)),Kh=e=>new Promise(e),Zh=(Promise.all.bind(Promise),e=>void 0===e?null:e);let Jh=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},Xh=!0;try{"undefined"!==typeof localStorage&&localStorage&&(Jh=localStorage,Xh=!1)}catch(tz){}const Qh=Jh,Yh=Object.assign,ep=Object.keys,tp=e=>ep(e).length,np=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},op=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),rp=Object.freeze,ip=e=>{for(const t in e){const n=e[t];"object"!==typeof n&&"function"!==typeof n||ip(e[t])}return rp(e)},sp=(Symbol("Equality"),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&sp(e,t,n+1)}}),lp=e=>e,ap="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0),cp="undefined"!==typeof window&&"undefined"!==typeof document&&!ap;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);let up;const dp=[],hp=()=>{if(void 0===up)if(ap){up=Dd();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const o=e[n];"-"===o[0]?(null!==t&&up.set(t,""),t=o):null!==t?(up.set(t,o),t=null):dp.push(o)}null!==t&&up.set(t,"")}else"object"===typeof location?(up=Dd(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){const[t,n]=e.split("=");up.set("--".concat(Xd(t,"-")),n),up.set("-".concat(Xd(t,"-")),n)}})):up=Dd();return up},pp=e=>hp().has(e),fp=e=>Zh(ap?{NODE_ENV:"production",PUBLIC_URL:"/react-blocknote-texteditor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[e.toUpperCase().replaceAll("-","_")]:Qh.getItem(e)),mp=e=>pp("--"+e)||null!==fp(e),gp=(mp("production"),ap&&((e,t)=>t.includes(e))({NODE_ENV:"production",PUBLIC_URL:"/react-blocknote-texteditor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FORCE_COLOR,["true","1","2"])),vp=gp||!pp("--no-colors")&&!mp("no-color")&&(!ap||process.stdout.isTTY)&&(!ap||pp("--color")||null!==fp("COLORTERM")||(fp("TERM")||"").includes("color")),yp=e=>new Uint8Array(e),bp=cp?e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=Kd(e[n]);return btoa(t)}:e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),wp=e=>(e=>{const t=nh();return e(t),oh(t)})(t=>mh(t,e));class kp{constructor(e,t){this.left=e,this.right=t}}const Cp=(e,t)=>new kp(e,t),xp="undefined"!==typeof document?document:{},Sp=("undefined"!==typeof DOMParser&&new DOMParser,e=>((e,t)=>{const n=[];for(const[o,r]of e)n.push(t(r,o));return n})(e,(e,t)=>"".concat(t,":").concat(e,";")).join("")),Ap=(xp.ELEMENT_NODE,xp.TEXT_NODE,xp.CDATA_SECTION_NODE,xp.COMMENT_NODE,xp.DOCUMENT_NODE,xp.DOCUMENT_TYPE_NODE,xp.DOCUMENT_FRAGMENT_NODE,Symbol),Ep=Date.now,Dp=Ap(),Mp=Ap(),Np=Ap(),Tp=Ap(),Op=Ap(),Pp=Ap(),_p=Ap(),Lp=Ap(),Rp=Ap();Ep();const Bp={[Dp]:Cp("font-weight","bold"),[Mp]:Cp("font-weight","normal"),[Np]:Cp("color","blue"),[Op]:Cp("color","green"),[Tp]:Cp("color","grey"),[Pp]:Cp("color","red"),[_p]:Cp("color","purple"),[Lp]:Cp("color","orange"),[Rp]:Cp("color","black")},Ip=vp?e=>{var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());const n=[],o=[],r=Dd();let i=[],s=0;for(;s<e.length;s++){const t=e[s],i=Bp[t];if(void 0!==i)r.set(i.left,i.right);else{if(void 0===t)break;if(t.constructor!==String&&t.constructor!==Number)break;{const e=Sp(r);s>0||e.length>0?(n.push("%c"+t),o.push(e)):n.push(t)}}}for(s>0&&(i=o,i.unshift(n.join("")));s<e.length;s++){const t=e[s];t instanceof Symbol||i.push(t)}return i}:e=>{var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());const n=[],o=[];let r=0;for(;r<e.length;r++){const t=e[r];if(void 0===t)break;if(t.constructor===String||t.constructor===Number)n.push(t);else if(t.constructor===Object)break}for(r>0&&o.push(n.join(""));r<e.length;r++){const t=e[r];t instanceof Symbol||o.push(t)}return o},Fp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(...Ip(t)),zp.forEach(e=>e.print(t))},jp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn(...Ip(t)),t.unshift(Lp),zp.forEach(e=>e.print(t))},zp=Td();const Hp=e=>({[Symbol.iterator](){return this},next:e}),Vp=(e,t)=>Hp(()=>{const{done:n,value:o}=e.next();return{done:n,value:n?void 0:t(o)}});class Up{constructor(e,t){this.clock=e,this.len=t}}class $p{constructor(){this.clients=new Map}}const Wp=(e,t,n)=>t.clients.forEach((t,o)=>{const r=e.doc.store.clients.get(o);if(null!=r){const o=r[r.length-1],i=o.id.clock+o.length;for(let s=0,l=t[s];s<t.length&&l.clock<i;l=t[++s])Xf(e,r,l.clock,l.len,n)}}),qp=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,o=e.length-1;for(;n<=o;){const r=Bd((n+o)/2),i=e[r],s=i.clock;if(s<=t){if(t<s+i.len)return r;n=r+1}else o=r-1}return null})(n,t.clock)},Gp=e=>{e.clients.forEach(e=>{let t,n;for(e.sort((e,t)=>e.clock-t.clock),t=1,n=1;t<e.length;t++){const o=e[n-1],r=e[t];o.clock+o.len>=r.clock?o.len=jd(o.len,r.clock+r.len-o.clock):(n<t&&(e[n]=r),n++)}e.length=n})},Kp=e=>{const t=new $p;for(let n=0;n<e.length;n++)e[n].clients.forEach((o,r)=>{if(!t.clients.has(r)){const i=o.slice();for(let t=n+1;t<e.length;t++)Pd(i,e[t].clients.get(r)||[]);t.clients.set(r,i)}});return Gp(t),t},Zp=(e,t,n,o)=>{Nd(e.clients,t,()=>[]).push(new Up(n,o))},Jp=()=>new $p,Xp=e=>{const t=Jp();return e.clients.forEach((e,n)=>{const o=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.deleted){const r=n.id.clock;let i=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.deleted;n=e[1+ ++t])i+=n.length;o.push(new Up(r,i))}}o.length>0&&t.clients.set(n,o)}),t},Qp=(e,t)=>{sh(e.restEncoder,t.clients.size),_d(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(t=>{let[n,o]=t;e.resetDsCurVal(),sh(e.restEncoder,n);const r=o.length;sh(e.restEncoder,r);for(let i=0;i<r;i++){const t=o[i];e.writeDsClock(t.clock),e.writeDsLen(t.len)}})},Yp=e=>{const t=new $p,n=_h(e.restDecoder);for(let o=0;o<n;o++){e.resetDsCurVal();const n=_h(e.restDecoder),o=_h(e.restDecoder);if(o>0){const r=Nd(t.clients,n,()=>[]);for(let t=0;t<o;t++)r.push(new Up(e.readDsClock(),e.readDsLen()))}}return t},ef=(e,t,n)=>{const o=new $p,r=_h(e.restDecoder);for(let i=0;i<r;i++){e.resetDsCurVal();const r=_h(e.restDecoder),i=_h(e.restDecoder),s=n.clients.get(r)||[],l=$f(n,r);for(let n=0;n<i;n++){const n=e.readDsClock(),i=n+e.readDsLen();if(n<l){l<i&&Zp(o,r,l,i-l);let e=qf(s,n),a=s[e];for(!a.deleted&&a.id.clock<n&&(s.splice(e+1,0,$g(t,a,n-a.id.clock)),e++);e<s.length&&(a=s[e++],a.id.clock<i);)a.deleted||(i<a.id.clock+a.length&&s.splice(e,0,$g(t,a,i-a.id.clock)),a.delete(t))}else Zp(o,r,n,i-n)}}if(o.clients.size>0){const e=new df;return sh(e.restEncoder,0),Qp(e,o),e.toUint8Array()}return null},tf=Wh;class nf extends Rd{constructor(){let{guid:e=Gh(),collectionid:t=null,gc:n=!0,gcFilter:o=()=>!0,meta:r=null,autoLoad:i=!1,shouldLoad:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.gc=n,this.gcFilter=o,this.clientID=tf(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new Vf,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=i,this.meta=r,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Kh(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});const l=()=>Kh(e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=l()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;null===e||this.shouldLoad||im(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(_d(this.subdocs).map(e=>e.guid))}transact(e){return im(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Om;const n=Nd(this.share,e,()=>{const e=new t;return e._integrate(this,null),e}),o=n.constructor;if(t!==Om&&o!==t){if(o===Om){const o=new t;o._map=n._map,n._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=o}),o._start=n._start;for(let e=o._start;null!==e;e=e.right)e.parent=o;return o._length=n._length,this.share.set(e,o),o._integrate(this,null),o}throw new Error("Type with the name ".concat(e," has already been defined with a different constructor"))}return n}getArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Jm)}getText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,fg)}getMap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Qm)}getXmlElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,vg)}getXmlFragment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,gg)}toJSON(){const e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,_d(this.subdocs).forEach(e=>e.destroy());const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new nf((0,s.A)((0,s.A)({guid:this.guid},t.opts),{},{shouldLoad:!1})),t.doc._item=e,im(e.parent.doc,n=>{const o=t.doc;e.deleted||n.subdocsAdded.add(o),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class of{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return _h(this.restDecoder)}readDsLen(){return _h(this.restDecoder)}}class rf extends of{readLeftID(){return Df(_h(this.restDecoder),_h(this.restDecoder))}readRightID(){return Df(_h(this.restDecoder),_h(this.restDecoder))}readClient(){return _h(this.restDecoder)}readInfo(){return Ph(this.restDecoder)}readString(){return Rh(this.restDecoder)}readParentInfo(){return 1===_h(this.restDecoder)}readTypeRef(){return _h(this.restDecoder)}readLen(){return _h(this.restDecoder)}readAny(){return Fh(this.restDecoder)}readBuf(){return(e=>{const t=yp(e.byteLength);return t.set(e),t})(Oh(this.restDecoder))}readJSON(){return JSON.parse(Rh(this.restDecoder))}readKey(){return Rh(this.restDecoder)}}class sf{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=_h(this.restDecoder),this.dsCurrVal}readDsLen(){const e=_h(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class lf extends sf{constructor(e){super(e),this.keys=[],_h(e),this.keyClockDecoder=new Hh(Oh(e)),this.clientDecoder=new zh(Oh(e)),this.leftClockDecoder=new Hh(Oh(e)),this.rightClockDecoder=new Hh(Oh(e)),this.infoDecoder=new jh(Oh(e),Ph),this.stringDecoder=new Vh(Oh(e)),this.parentInfoDecoder=new jh(Oh(e),Ph),this.typeRefDecoder=new zh(Oh(e)),this.lenDecoder=new zh(Oh(e))}readLeftID(){return new Af(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Af(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Fh(this.restDecoder)}readBuf(){return Oh(this.restDecoder)}readJSON(){return Fh(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class af{constructor(){this.restEncoder=nh()}toUint8Array(){return oh(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){sh(this.restEncoder,e)}writeDsLen(e){sh(this.restEncoder,e)}}class cf extends af{writeLeftID(e){sh(this.restEncoder,e.client),sh(this.restEncoder,e.clock)}writeRightID(e){sh(this.restEncoder,e.client),sh(this.restEncoder,e.clock)}writeClient(e){sh(this.restEncoder,e)}writeInfo(e){ih(this.restEncoder,e)}writeString(e){uh(this.restEncoder,e)}writeParentInfo(e){sh(this.restEncoder,e?1:0)}writeTypeRef(e){sh(this.restEncoder,e)}writeLen(e){sh(this.restEncoder,e)}writeAny(e){mh(this.restEncoder,e)}writeBuf(e){hh(this.restEncoder,e)}writeJSON(e){uh(this.restEncoder,JSON.stringify(e))}writeKey(e){uh(this.restEncoder,e)}}class uf{constructor(){this.restEncoder=nh(),this.dsCurrVal=0}toUint8Array(){return oh(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,sh(this.restEncoder,t)}writeDsLen(e){0===e&&Sh(),sh(this.restEncoder,e-1),this.dsCurrVal+=e}}class df extends uf{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new wh,this.clientEncoder=new yh,this.leftClockEncoder=new wh,this.rightClockEncoder=new wh,this.infoEncoder=new gh(ih),this.stringEncoder=new kh,this.parentInfoEncoder=new gh(ih),this.typeRefEncoder=new yh,this.lenEncoder=new yh}toUint8Array(){const e=nh();return sh(e,0),hh(e,this.keyClockEncoder.toUint8Array()),hh(e,this.clientEncoder.toUint8Array()),hh(e,this.leftClockEncoder.toUint8Array()),hh(e,this.rightClockEncoder.toUint8Array()),hh(e,oh(this.infoEncoder)),hh(e,this.stringEncoder.toUint8Array()),hh(e,oh(this.parentInfoEncoder)),hh(e,this.typeRefEncoder.toUint8Array()),hh(e,this.lenEncoder.toUint8Array()),dh(e,oh(this.restEncoder)),oh(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){mh(this.restEncoder,e)}writeBuf(e){hh(this.restEncoder,e)}writeJSON(e){mh(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const hf=(e,t,n)=>{const o=new Map;n.forEach((e,n)=>{$f(t,n)>e&&o.set(n,e)}),Uf(t).forEach((e,t)=>{n.has(t)||o.set(t,0)}),sh(e.restEncoder,o.size),_d(o.entries()).sort((e,t)=>t[0]-e[0]).forEach(n=>{let[o,r]=n;((e,t,n,o)=>{o=jd(o,t[0].id.clock);const r=qf(t,o);sh(e.restEncoder,t.length-r),e.writeClient(n),sh(e.restEncoder,o);const i=t[r];i.write(e,o-i.id.clock);for(let s=r+1;s<t.length;s++)t[s].write(e,0)})(e,t.clients.get(o),o,r)})},pf=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new lf(e);return im(t,e=>{e.local=!1;let t=!1;const n=e.doc,r=n.store,i=((e,t)=>{const n=Dd(),o=_h(e.restDecoder);for(let r=0;r<o;r++){const o=_h(e.restDecoder),r=new Array(o),i=e.readClient();let s=_h(e.restDecoder);n.set(i,{i:0,refs:r});for(let n=0;n<o;n++){const o=e.readInfo();switch(31&o){case 0:{const t=e.readLen();r[n]=new Cg(Df(i,s),t),s+=t;break}case 10:{const t=_h(e.restDecoder);r[n]=new Jg(Df(i,s),t),s+=t;break}default:{const l=0===(192&o),a=new Gg(Df(i,s),null,(o&Vd)===Vd?e.readLeftID():null,null,(o&Hd)===Hd?e.readRightID():null,l?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,l&&32===(32&o)?e.readString():null,Kg(e,o));r[n]=a,s+=a.length}}}}return n})(o,n),s=((e,t,n)=>{const o=[];let r=_d(n.keys()).sort((e,t)=>e-t);if(0===r.length)return null;const i=()=>{if(0===r.length)return null;let e=n.get(r[r.length-1]);for(;e.refs.length===e.i;){if(r.pop(),!(r.length>0))return null;e=n.get(r[r.length-1])}return e};let s=i();if(null===s)return null;const l=new Vf,a=new Map,c=(e,t)=>{const n=a.get(e);(null==n||n>t)&&a.set(e,t)};let u=s.refs[s.i++];const d=new Map,h=()=>{for(const e of o){const t=e.id.client,o=n.get(t);o?(o.i--,l.clients.set(t,o.refs.slice(o.i)),n.delete(t),o.i=0,o.refs=[]):l.clients.set(t,[e]),r=r.filter(e=>e!==t)}o.length=0};for(;;){if(u.constructor!==Jg){const r=Nd(d,u.id.client,()=>$f(t,u.id.client))-u.id.clock;if(r<0)o.push(u),c(u.id.client,u.id.clock-1),h();else{const i=u.getMissing(e,t);if(null!==i){o.push(u);const e=n.get(i)||{refs:[],i:0};if(e.refs.length!==e.i){u=e.refs[e.i++];continue}c(i,$f(t,i)),h()}else(0===r||r<u.length)&&(u.integrate(e,r),d.set(u.id.client,u.id.clock+u.length))}}if(o.length>0)u=o.pop();else if(null!==s&&s.i<s.refs.length)u=s.refs[s.i++];else{if(s=i(),null===s)break;u=s.refs[s.i++]}}if(l.clients.size>0){const e=new df;return hf(e,l,new Map),sh(e.restEncoder,0),{missing:a,update:e.toUint8Array()}}return null})(e,r,i),l=r.pendingStructs;if(l){for(const[e,n]of l.missing)if(n<$f(r,e)){t=!0;break}if(s){for(const[e,t]of s.missing){const n=l.missing.get(e);(null==n||n>t)&&l.missing.set(e,t)}l.update=fm([l.update,s.update])}}else r.pendingStructs=s;const a=ef(o,e,r);if(r.pendingDs){const t=new lf(Mh(r.pendingDs));_h(t.restDecoder);const n=ef(t,e,r);r.pendingDs=a&&n?fm([a,n]):a||n}else r.pendingDs=a;if(t){const t=r.pendingStructs.update;r.pendingStructs=null,ff(e.doc,t)}},n,!1)},ff=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lf;const r=Mh(t);pf(r,e,n,new o(r))},mf=(e,t,n)=>ff(e,t,n,rf),gf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint8Array([0]),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new df;!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;hf(e,t.store,n),Qp(e,Xp(t.store))}(n,e,bf(t));const o=[n.toUint8Array()];if(e.store.pendingDs&&o.push(e.store.pendingDs),e.store.pendingStructs&&o.push(mm(e.store.pendingStructs.update,t)),o.length>1){if(n.constructor===cf)return hm(o.map((e,t)=>0===t?e:wm(e)));if(n.constructor===df)return fm(o)}return o[0]},vf=(e,t)=>gf(e,t,new cf),yf=e=>{const t=new Map,n=_h(e.restDecoder);for(let o=0;o<n;o++){const n=_h(e.restDecoder),o=_h(e.restDecoder);t.set(n,o)}return t},bf=e=>yf(new of(Mh(e)));class wf{constructor(){this.l=[]}}const kf=()=>new wf,Cf=(e,t)=>e.l.push(t),xf=(e,t)=>{const n=e.l,o=n.length;e.l=n.filter(e=>t!==e),o===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Sf=(e,t,n)=>sp(e.l,[t,n]);class Af{constructor(e,t){this.client=e,this.clock=t}}const Ef=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,Df=(e,t)=>new Af(e,t),Mf=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Sh()},Nf=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class Tf{constructor(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.type=e,this.tname=t,this.item=n,this.assoc=o}}const Of=e=>{var t;return new Tf(null==e.type?null:Df(e.type.client,e.type.clock),null!==(t=e.tname)&&void 0!==t?t:null,null==e.item?null:Df(e.item.client,e.item.clock),null==e.assoc?0:e.assoc)};class Pf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.type=e,this.index=t,this.assoc=n}}const _f=(e,t,n)=>{let o=null,r=null;return null===e._item?r=Mf(e):o=Df(e._item.id.client,e._item.id.clock),new Tf(o,r,t,n)},Lf=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e._start;if(n<0){if(0===t)return _f(e,null,n);t--}for(;null!==o;){if(!o.deleted&&o.countable){if(o.length>t)return _f(e,Df(o.id.client,o.id.clock+t),n);t-=o.length}if(null===o.right&&n<0)return _f(e,o.lastId,n);o=o.right}return _f(e,null,n)},Rf=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=t.store,r=e.item,i=e.type,s=e.tname,l=e.assoc;let a=null,c=0;if(null!==r){if($f(o,r.client)<=r.clock)return null;const e=n?Vg(o,r):((e,t)=>{const n=Gf(e,t);return{item:n,diff:t.clock-n.id.clock}})(o,r),t=e.item;if(!(t instanceof Gg))return null;if(a=t.parent,null===a._item||!a._item.deleted){c=t.deleted||!t.countable?0:e.diff+(l>=0?0:1);let n=t.left;for(;null!==n;)!n.deleted&&n.countable&&(c+=n.length),n=n.left}}else{if(null!==s)a=t.get(s);else{if(null===i)throw Sh();{if($f(o,i.client)<=i.clock)return null;const{item:e}=n?Vg(o,i):{item:Gf(o,i)};if(!(e instanceof Gg&&e.content instanceof Hg))return null;a=e.content.type}}c=l>=0?a._length:0}return function(e,t){return new Pf(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}(a,c,e.assoc)},Bf=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&Ef(e.item,t.item)&&Ef(e.type,t.type)&&e.assoc===t.assoc;class If{constructor(e,t){this.ds=e,this.sv=t}}const Ff=(e,t)=>new If(e,t),jf=(Ff(Jp(),new Map),e=>Ff(Xp(e.store),Uf(e.store))),zf=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!qp(t.ds,e.id),Hf=(e,t)=>{const n=Nd(e.meta,Hf,Td),o=e.doc.store;n.has(t)||(t.sv.forEach((t,n)=>{t<$f(o,n)&&Zf(e,Df(n,t))}),Wp(e,t.ds,e=>{}),n.add(t))};class Vf{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Uf=e=>{const t=new Map;return e.clients.forEach((e,n)=>{const o=e[e.length-1];t.set(n,o.id.clock+o.length)}),t},$f=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const o=n[n.length-1];return o.id.clock+o.length},Wf=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw Sh()}n.push(t)},qf=(e,t)=>{let n=0,o=e.length-1,r=e[o],i=r.id.clock;if(i===t)return o;let s=Bd(t/(i+r.length-1)*o);for(;n<=o;){if(r=e[s],i=r.id.clock,i<=t){if(t<i+r.length)return s;n=s+1}else o=s-1;s=Bd((n+o)/2)}throw Sh()},Gf=(e,t)=>{const n=e.clients.get(t.client);return n[qf(n,t.clock)]},Kf=(e,t,n)=>{const o=qf(t,n),r=t[o];return r.id.clock<n&&r instanceof Gg?(t.splice(o+1,0,$g(e,r,n-r.id.clock)),o+1):o},Zf=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Kf(e,n,t.clock)]},Jf=(e,t,n)=>{const o=t.clients.get(n.client),r=qf(o,n.clock),i=o[r];return n.clock!==i.id.clock+i.length-1&&i.constructor!==Cg&&o.splice(r+1,0,$g(e,i,n.clock-i.id.clock+1)),i},Xf=(e,t,n,o,r)=>{if(0===o)return;const i=n+o;let s,l=Kf(e,t,n);do{s=t[l++],i<s.id.clock+s.length&&Kf(e,t,i),r(s)}while(l<t.length&&t[l].id.clock<i)};class Qf{constructor(e,t,n){this.doc=e,this.deleteSet=new $p,this.beforeState=Uf(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Yf=(e,t)=>!(0===t.deleteSet.clients.size&&!((e,t)=>{for(const[n,o]of e)if(t(o,n))return!0;return!1})(t.afterState,(e,n)=>t.beforeState.get(n)!==e))&&(Gp(t.deleteSet),((e,t)=>{hf(e,t.doc.store,t.beforeState)})(e,t),Qp(e,t.deleteSet),!0),em=(e,t,n)=>{const o=t._item;(null===o||o.id.clock<(e.beforeState.get(o.id.client)||0)&&!o.deleted)&&Nd(e.changed,t,Td).add(n)},tm=(e,t)=>{let n=e[t],o=e[t-1],r=t;for(;r>0&&(o.deleted===n.deleted&&o.constructor===n.constructor&&o.mergeWith(n));n=o,o=e[--r-1])n instanceof Gg&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,o);const i=t-r;return i&&e.splice(t+1-i,i),i},nm=(e,t,n)=>{for(const[o,r]of e.clients.entries()){const e=t.clients.get(o);for(let o=r.length-1;o>=0;o--){const i=r[o],s=i.clock+i.len;for(let o=qf(e,i.clock),r=e[o];o<e.length&&r.id.clock<s;r=e[++o]){const r=e[o];if(i.clock+i.len<=r.id.clock)break;r instanceof Gg&&r.deleted&&!r.keep&&n(r)&&r.gc(t,!1)}}}},om=(e,t)=>{e.clients.forEach((e,n)=>{const o=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=Fd(o.length-1,1+qf(o,n.clock+n.len-1)),t=o[e];e>0&&t.id.clock>=n.clock;t=o[e])e-=1+tm(o,e)}})},rm=(e,t)=>{if(t<e.length){const n=e[t],o=n.doc,r=o.store,i=n.deleteSet,s=n._mergeStructs;try{Gp(i),n.afterState=Uf(n.doc.store),o.emit("beforeObserverCalls",[n,o]);const e=[];n.changed.forEach((t,o)=>e.push(()=>{null!==o._item&&o._item.deleted||o._callObserver(n,t)})),e.push(()=>{n.changedParentTypes.forEach((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t,e._path=null}),e.sort((e,t)=>e.path.length-t.path.length),Sf(t._dEH,e,n))})}),e.push(()=>o.emit("afterTransaction",[n,o])),sp(e,[]),n._needFormattingCleanup&&dg(n)}finally{o.gc&&nm(i,r,o.gcFilter),om(i,r),n.afterState.forEach((e,t)=>{const o=n.beforeState.get(t)||0;if(o!==e){const e=r.clients.get(t),n=jd(qf(e,o),1);for(let t=e.length-1;t>=n;)t-=1+tm(e,t)}});for(let e=s.length-1;e>=0;e--){const{client:t,clock:n}=s[e].id,o=r.clients.get(t),i=qf(o,n);i+1<o.length&&tm(o,i+1)>1||i>0&&tm(o,i)}if(n.local||n.afterState.get(o.clientID)===n.beforeState.get(o.clientID)||(Fp(Lp,Dp,"[yjs] ",Mp,Pp,"Changed the client-id because another client seems to be using it."),o.clientID=tf()),o.emit("afterTransactionCleanup",[n,o]),o._observers.has("update")){const e=new cf;Yf(e,n)&&o.emit("update",[e.toUint8Array(),n.origin,o,n])}if(o._observers.has("updateV2")){const e=new df;Yf(e,n)&&o.emit("updateV2",[e.toUint8Array(),n.origin,o,n])}const{subdocsAdded:l,subdocsLoaded:a,subdocsRemoved:c}=n;(l.size>0||c.size>0||a.size>0)&&(l.forEach(e=>{e.clientID=o.clientID,null==e.collectionid&&(e.collectionid=o.collectionid),o.subdocs.add(e)}),c.forEach(e=>o.subdocs.delete(e)),o.emit("subdocs",[{loaded:a,added:l,removed:c},o,n]),c.forEach(e=>e.destroy())),e.length<=t+1?(o._transactionCleanups=[],o.emit("afterAllTransactions",[o,e])):rm(e,t+1)}}},im=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=e._transactionCleanups;let i=!1,s=null;null===e._transaction&&(i=!0,e._transaction=new Qf(e,n,o),r.push(e._transaction),1===r.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(i){const t=e._transaction===r[0];e._transaction=null,t&&rm(r,0)}}return s};class sm{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const lm=(e,t,n)=>{Wp(e,n.deletions,n=>{n instanceof Gg&&t.scope.some(t=>t===e.doc||Nf(t,n))&&Ug(n,!1)})},am=(e,t,n)=>{let o=null;const r=e.doc,i=e.scope;im(r,n=>{for(;t.length>0&&null===e.currStackItem;){const o=r.store,s=t.pop(),l=new Set,a=[];let c=!1;Wp(n,s.insertions,e=>{if(e instanceof Gg){if(null!==e.redone){let{item:t,diff:r}=Vg(o,e.id);r>0&&(t=Zf(n,Df(t.id.client,t.id.clock+r))),e=t}!e.deleted&&i.some(t=>t===n.doc||Nf(t,e))&&a.push(e)}}),Wp(n,s.deletions,e=>{e instanceof Gg&&i.some(t=>t===n.doc||Nf(t,e))&&!qp(s.insertions,e.id)&&l.add(e)}),l.forEach(t=>{c=null!==qg(n,t,l,s.insertions,e.ignoreRemoteMapChanges,e)||c});for(let t=a.length-1;t>=0;t--){const o=a[t];e.deleteFilter(o)&&(o.delete(n),c=!0)}e.currStackItem=c?s:null}n.changed.forEach((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)}),o=n},e);const s=e.currStackItem;if(null!=s){const t=o.changedParentTypes;e.emit("stack-item-popped",[{stackItem:s,type:n,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return s};class cm extends Rd{constructor(e){let{captureTimeout:t=500,captureTransaction:n=e=>!0,deleteFilter:o=()=>!0,trackedOrigins:r=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:s=(Ld(e)?e[0].doc:e instanceof nf?e:e.doc)}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.scope=[],this.doc=s,this.addToScope(e),this.deleteFilter=o,r.add(this),this.trackedOrigins=r,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!this.captureTransaction(e)||!this.scope.some(t=>e.changedParentTypes.has(t)||t===this.doc)||!this.trackedOrigins.has(e.origin)&&(!e.origin||!this.trackedOrigins.has(e.origin.constructor)))return;const t=this.undoing,n=this.redoing,o=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const r=new $p;e.afterState.forEach((t,n)=>{const o=e.beforeState.get(n)||0,i=t-o;i>0&&Zp(r,n,o,i)});const i=Ep();let s=!1;if(this.lastChange>0&&i-this.lastChange<this.captureTimeout&&o.length>0&&!t&&!n){const t=o[o.length-1];t.deletions=Kp([t.deletions,e.deleteSet]),t.insertions=Kp([t.insertions,r])}else o.push(new sm(e.deleteSet,r)),s=!0;t||n||(this.lastChange=i),Wp(e,e.deleteSet,t=>{t instanceof Gg&&this.scope.some(n=>n===e.doc||Nf(n,t))&&Ug(t,!0)});const l=[{stackItem:o[o.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];s?this.emit("stack-item-added",l):this.emit("stack-item-updated",l)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const t=new Set(this.scope);(e=Ld(e)?e:[e]).forEach(e=>{t.has(e)||(t.add(e),(e instanceof Om?e.doc!==this.doc:e!==this.doc)&&jp("[yjs#509] Not same Y.Doc"),this.scope.push(e))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(n=>{e&&(this.undoStack.forEach(e=>lm(n,this,e)),this.undoStack=[]),t&&(this.redoStack.forEach(e=>lm(n,this,e)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=am(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=am(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class um{constructor(e,t){this.gen=function*(e){const t=_h(e.restDecoder);for(let n=0;n<t;n++){const t=_h(e.restDecoder),n=e.readClient();let o=_h(e.restDecoder);for(let r=0;r<t;r++){const t=e.readInfo();if(10===t){const t=_h(e.restDecoder);yield new Jg(Df(n,o),t),o+=t}else if(0!==(31&t)){const r=0===(192&t),i=new Gg(Df(n,o),null,(t&Vd)===Vd?e.readLeftID():null,null,(t&Hd)===Hd?e.readRightID():null,r?e.readParentInfo()?e.readString():e.readLeftID():null,r&&32===(32&t)?e.readString():null,Kg(e,t));yield i,o+=i.length}else{const t=e.readLen();yield new Cg(Df(n,o),t),o+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Jg);return this.curr}}class dm{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const hm=e=>fm(e,rf,cf),pm=(e,t)=>{if(e.constructor===Cg){const{client:n,clock:o}=e.id;return new Cg(Df(n,o+t),e.length-t)}if(e.constructor===Jg){const{client:n,clock:o}=e.id;return new Jg(Df(n,o+t),e.length-t)}{const n=e,{client:o,clock:r}=n.id;return new Gg(Df(o,r+t),null,Df(o,r+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},fm=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:df;if(1===e.length)return e[0];const o=e.map(e=>new t(Mh(e)));let r=o.map(e=>new um(e,!0)),i=null;const s=new n,l=new dm(s);for(;r=r.filter(e=>null!==e.curr),r.sort((e,t)=>{if(e.curr.id.client===t.curr.id.client){const n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===Jg?1:-1:n}return t.curr.id.client-e.curr.id.client}),0!==r.length;){const e=r[0],t=e.curr.id.client;if(null!==i){let n=e.curr,o=!1;for(;null!==n&&n.id.clock+n.length<=i.struct.id.clock+i.struct.length&&n.id.client>=i.struct.id.client;)n=e.next(),o=!0;if(null===n||n.id.client!==t||o&&n.id.clock>i.struct.id.clock+i.struct.length)continue;if(t!==i.struct.id.client)vm(l,i.struct,i.offset),i={struct:n,offset:0},e.next();else if(i.struct.id.clock+i.struct.length<n.id.clock)if(i.struct.constructor===Jg)i.struct.length=n.id.clock+n.length-i.struct.id.clock;else{vm(l,i.struct,i.offset);const e=n.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Jg(Df(t,i.struct.id.clock+i.struct.length),e),offset:0}}else{const t=i.struct.id.clock+i.struct.length-n.id.clock;t>0&&(i.struct.constructor===Jg?i.struct.length-=t:n=pm(n,t)),i.struct.mergeWith(n)||(vm(l,i.struct,i.offset),i={struct:n,offset:0},e.next())}}else i={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===i.struct.id.clock+i.struct.length&&n.constructor!==Jg;n=e.next())vm(l,i.struct,i.offset),i={struct:n,offset:0}}null!==i&&(vm(l,i.struct,i.offset),i=null),ym(l);const a=o.map(e=>Yp(e)),c=Kp(a);return Qp(s,c),s.toUint8Array()},mm=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lf,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:df;const r=bf(t),i=new o,s=new dm(i),l=new n(Mh(e)),a=new um(l,!1);for(;a.curr;){const e=a.curr,t=e.id.client,n=r.get(t)||0;if(a.curr.constructor!==Jg)if(e.id.clock+e.length>n)for(vm(s,e,jd(n-e.id.clock,0)),a.next();a.curr&&a.curr.id.client===t;)vm(s,a.curr,0),a.next();else for(;a.curr&&a.curr.id.client===t&&a.curr.id.clock+a.curr.length<=n;)a.next();else a.next()}ym(s);const c=Yp(l);return Qp(i,c),i.toUint8Array()},gm=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:oh(e.encoder.restEncoder)}),e.encoder.restEncoder=nh(),e.written=0)},vm=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&gm(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),sh(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},ym=e=>{gm(e);const t=e.encoder.restEncoder;sh(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const o=e.clientStructs[n];sh(t,o.written),dh(t,o.restEncoder)}},bm=(e,t,n,o)=>{const r=new n(Mh(e)),i=new um(r,!1),s=new o,l=new dm(s);for(let c=i.curr;null!==c;c=i.next())vm(l,t(c),0);ym(l);const a=Yp(r);return Qp(s,a),s.toUint8Array()},wm=e=>bm(e,lp,lf,cf),km="You must not compute changes after the event-handler fired.";class Cm{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=xm(this.currentTarget,this.target))}deletes(e){return qp(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw Ch(km);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(n=>{if(null!==n){const o=t._map.get(n);let r,i;if(this.adds(o)){let e=o.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(o)){if(null===e||!this.deletes(e))return;r="delete",i=Od(e.content.getContent())}else null!==e&&this.deletes(e)?(r="update",i=Od(e.content.getContent())):(r="add",i=void 0)}else{if(!this.deletes(o))return;r="delete",i=Od(o.content.getContent())}e.set(n,{action:r,oldValue:i})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw Ch(km);const t=this.target,n=Td(),o=Td(),r=[];e={added:n,deleted:o,delta:r,keys:this.keys};if(this.transaction.changed.get(t).has(null)){let e=null;const i=()=>{e&&r.push(e)};for(let r=t._start;null!==r;r=r.right)r.deleted?this.deletes(r)&&!this.adds(r)&&(null!==e&&void 0!==e.delete||(i(),e={delete:0}),e.delete+=r.length,o.add(r)):this.adds(r)?(null!==e&&void 0!==e.insert||(i(),e={insert:[]}),e.insert=e.insert.concat(r.content.getContent()),n.add(r)):(null!==e&&void 0!==e.retain||(i(),e={retain:0}),e.retain+=r.length);null!==e&&void 0===e.retain&&i()}this._changes=e}return e}}const xm=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,o=t._item.parent._start;for(;o!==t._item&&null!==o;)!o.deleted&&o.countable&&(e+=o.length),o=o.right;n.unshift(e)}t=t._item.parent}return n},Sm=()=>{jp("Invalid access: Add Yjs type to a document before reading data.")};let Am=0;class Em{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=Am++}}const Dm=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=Am++},Mm=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce((e,n)=>Id(t-e.index)<Id(t-n.index)?e:n);let o=e._start,r=0;for(null!==n&&(o=n.p,r=n.index,(e=>{e.timestamp=Am++})(n));null!==o.right&&r<t;){if(!o.deleted&&o.countable){if(t<r+o.length)break;r+=o.length}o=o.right}for(;null!==o.left&&r>t;)o=o.left,!o.deleted&&o.countable&&(r-=o.length);for(;null!==o.left&&o.left.id.client===o.id.client&&o.left.id.clock+o.left.length===o.id.clock;)o=o.left,!o.deleted&&o.countable&&(r-=o.length);return null!==n&&Id(n.index-r)<o.parent.length/80?(Dm(n,o,r),n):((e,t,n)=>{if(e.length>=80){const o=e.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return Dm(o,t,n),o}{const o=new Em(t,n);return e.push(o),o}})(e._searchMarker,o,r)},Nm=(e,t,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];if(n>0){let t=r.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(r.index-=t.length);if(null===t||!0===t.marker){e.splice(o,1);continue}r.p=t,t.marker=!0}(t<r.index||n>0&&t===r.index)&&(r.index=jd(t,r.index+n))}},Tm=(e,t,n)=>{const o=e,r=t.changedParentTypes;for(;Nd(r,e,()=>[]).push(n),null!==e._item;)e=e._item.parent;Sf(o._eH,n,t)};class Om{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=kf(),this._dEH=kf(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw xh()}clone(){throw xh()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Cf(this._eH,e)}observeDeep(e){Cf(this._dEH,e)}unobserve(e){xf(this._eH,e)}unobserveDeep(e){xf(this._dEH,e)}toJSON(){}}const Pm=(e,t,n)=>{var o;null!==(o=e.doc)&&void 0!==o||Sm(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const i=[];let s=e._start;for(;null!==s&&r>0;){if(s.countable&&!s.deleted){const e=s.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)i.push(e[n]),r--;t=0}}s=s.right}return i},_m=e=>{var t;null!==(t=e.doc)&&void 0!==t||Sm();const n=[];let o=e._start;for(;null!==o;){if(o.countable&&!o.deleted){const e=o.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}o=o.right}return n},Lm=(e,t)=>{const n=[];let o=e._start;for(;null!==o;){if(o.countable&&zf(o,t)){const e=o.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}o=o.right}return n},Rm=(e,t)=>{var n;let o=0,r=e._start;for(null!==(n=e.doc)&&void 0!==n||Sm();null!==r;){if(r.countable&&!r.deleted){const n=r.content.getContent();for(let r=0;r<n.length;r++)t(n[r],o++,e)}r=r.right}},Bm=(e,t)=>{const n=[];return Rm(e,(o,r)=>{n.push(t(o,r,e))}),n},Im=e=>{let t=e._start,n=null,o=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),o=0,t=t.right}const e=n[o++];return n.length<=o&&(n=null),{done:!1,value:e}}}},Fm=(e,t)=>{var n;null!==(n=e.doc)&&void 0!==n||Sm();const o=Mm(e,t);let r=e._start;for(null!==o&&(r=o.p,t-=o.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},jm=(e,t,n,o)=>{let r=n;const i=e.doc,s=i.clientID,l=i.store,a=null===n?t._start:n.right;let c=[];const u=()=>{c.length>0&&(r=new Gg(Df(s,$f(l,s)),r,r&&r.lastId,a,a&&a.id,t,null,new Og(c)),r.integrate(e,0),c=[])};o.forEach(n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:r=new Gg(Df(s,$f(l,s)),r,r&&r.lastId,a,a&&a.id,t,null,new xg(new Uint8Array(n))),r.integrate(e,0);break;case nf:r=new Gg(Df(s,$f(l,s)),r,r&&r.lastId,a,a&&a.id,t,null,new Eg(n)),r.integrate(e,0);break;default:if(!(n instanceof Om))throw new Error("Unexpected content type in insert operation");r=new Gg(Df(s,$f(l,s)),r,r&&r.lastId,a,a&&a.id,t,null,new Hg(n)),r.integrate(e,0)}}}),u()},zm=()=>Ch("Length exceeded!"),Hm=(e,t,n,o)=>{if(n>t._length)throw zm();if(0===n)return t._searchMarker&&Nm(t._searchMarker,n,o.length),jm(e,t,null,o);const r=n,i=Mm(t,n);let s=t._start;for(null!==i&&(s=i.p,0===(n-=i.index)&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Zf(e,Df(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&Nm(t._searchMarker,r,o.length),jm(e,t,s,o)},Vm=(e,t,n,o)=>{if(0===o)return;const r=n,i=o,s=Mm(t,n);let l=t._start;for(null!==s&&(l=s.p,n-=s.index);null!==l&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&Zf(e,Df(l.id.client,l.id.clock+n)),n-=l.length);for(;o>0&&null!==l;)l.deleted||(o<l.length&&Zf(e,Df(l.id.client,l.id.clock+o)),l.delete(e),o-=l.length),l=l.right;if(o>0)throw zm();t._searchMarker&&Nm(t._searchMarker,r,-i+o)},Um=(e,t,n)=>{const o=t._map.get(n);void 0!==o&&o.delete(e)},$m=(e,t,n,o)=>{const r=t._map.get(n)||null,i=e.doc,s=i.clientID;let l;if(null==o)l=new Og([o]);else switch(o.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:l=new Og([o]);break;case Uint8Array:l=new xg(o);break;case nf:l=new Eg(o);break;default:if(!(o instanceof Om))throw new Error("Unexpected content type");l=new Hg(o)}new Gg(Df(s,$f(i.store,s)),r,r&&r.lastId,null,null,t,n,l).integrate(e,0)},Wm=(e,t)=>{var n;null!==(n=e.doc)&&void 0!==n||Sm();const o=e._map.get(t);return void 0===o||o.deleted?void 0:o.content.getContent()[o.length-1]},qm=e=>{var t;const n={};return null!==(t=e.doc)&&void 0!==t||Sm(),e._map.forEach((e,t)=>{e.deleted||(n[t]=e.content.getContent()[e.length-1])}),n},Gm=(e,t)=>{var n;null!==(n=e.doc)&&void 0!==n||Sm();const o=e._map.get(t);return void 0!==o&&!o.deleted},Km=e=>{var t,n,o;return null!==(t=e.doc)&&void 0!==t||Sm(),n=e._map.entries(),o=e=>!e[1].deleted,Hp(()=>{let e;do{e=n.next()}while(!e.done&&!o(e.value));return e})};class Zm extends Cm{}class Jm extends Om{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Jm;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Jm}clone(){const e=new Jm;return e.insert(0,this.toArray().map(e=>e instanceof Om?e.clone():e)),e}get length(){var e;return null!==(e=this.doc)&&void 0!==e||Sm(),this._length}_callObserver(e,t){super._callObserver(e,t),Tm(this,e,new Zm(this,e))}insert(e,t){null!==this.doc?im(this.doc,n=>{Hm(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?im(this.doc,t=>{((e,t,n)=>{let o=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(o)for(;o.right;)o=o.right;jm(e,t,o,n)})(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?im(this.doc,n=>{Vm(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return Fm(this,e)}toArray(){return _m(this)}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return Pm(this,e,t)}toJSON(){return this.map(e=>e instanceof Om?e.toJSON():e)}map(e){return Bm(this,e)}forEach(e){Rm(this,e)}[Symbol.iterator](){return Im(this)}_write(e){e.writeTypeRef(Lg)}}class Xm extends Cm{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Qm extends Om{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new Qm}clone(){const e=new Qm;return this.forEach((t,n)=>{e.set(n,t instanceof Om?t.clone():t)}),e}_callObserver(e,t){Tm(this,e,new Xm(this,e,t))}toJSON(){var e;null!==(e=this.doc)&&void 0!==e||Sm();const t={};return this._map.forEach((e,n)=>{if(!e.deleted){const o=e.content.getContent()[e.length-1];t[n]=o instanceof Om?o.toJSON():o}}),t}get size(){return[...Km(this)].length}keys(){return Vp(Km(this),e=>e[0])}values(){return Vp(Km(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Vp(Km(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){var t;null!==(t=this.doc)&&void 0!==t||Sm(),this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?im(this.doc,t=>{Um(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?im(this.doc,n=>{$m(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return Wm(this,e)}has(e){return Gm(this,e)}clear(){null!==this.doc?im(this.doc,e=>{this.forEach(function(t,n,o){Um(e,o,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Rg)}}const Ym=(e,t)=>e===t||"object"===typeof e&&"object"===typeof t&&e&&t&&((e,t)=>e===t||tp(e)===tp(t)&&np(e,(e,n)=>(void 0!==e||op(t,n))&&t[n]===e))(e,t);class eg{constructor(e,t,n,o){this.left=e,this.right=t,this.index=n,this.currentAttributes=o}forward(){if(null===this.right&&Sh(),this.right.content.constructor===Mg)this.right.deleted||rg(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}const tg=(e,t,n)=>{for(;null!==t.right&&n>0;){if(t.right.content.constructor===Mg)t.right.deleted||rg(t.currentAttributes,t.right.content);else t.right.deleted||(n<t.right.length&&Zf(e,Df(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);t.left=t.right,t.right=t.right.right}return t},ng=(e,t,n,o)=>{const r=new Map,i=o?Mm(t,n):null;if(i){const t=new eg(i.p.left,i.p,i.index,r);return tg(e,t,n-i.index)}{const o=new eg(null,t._start,0,r);return tg(e,o,n)}},og=(e,t,n,o)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===Mg&&Ym(o.get(n.right.content.key),n.right.content.value));)n.right.deleted||o.delete(n.right.content.key),n.forward();const r=e.doc,i=r.clientID;o.forEach((o,s)=>{const l=n.left,a=n.right,c=new Gg(Df(i,$f(r.store,i)),l,l&&l.lastId,a,a&&a.id,t,null,new Mg(s,o));c.integrate(e,0),n.right=c,n.forward()})},rg=(e,t)=>{const{key:n,value:o}=t;null===o?e.delete(n):e.set(n,o)},ig=(e,t)=>{for(;;){var n;if(null===e.right)break;if(!(e.right.deleted||e.right.content.constructor===Mg&&Ym(null!==(n=t[e.right.content.key])&&void 0!==n?n:null,e.right.content.value)))break;e.forward()}},sg=(e,t,n,o)=>{const r=e.doc,i=r.clientID,s=new Map;for(const a in o){var l;const c=o[a],u=null!==(l=n.currentAttributes.get(a))&&void 0!==l?l:null;if(!Ym(u,c)){s.set(a,u);const{left:o,right:l}=n;n.right=new Gg(Df(i,$f(r.store,i)),o,o&&o.lastId,l,l&&l.id,t,null,new Mg(a,c)),n.right.integrate(e,0),n.forward()}}return s},lg=(e,t,n,o,r)=>{n.currentAttributes.forEach((e,t)=>{void 0===r[t]&&(r[t]=null)});const i=e.doc,s=i.clientID;ig(n,r);const l=sg(e,t,n,r),a=o.constructor===String?new Pg(o):o instanceof Om?new Hg(o):new Dg(o);let{left:c,right:u,index:d}=n;t._searchMarker&&Nm(t._searchMarker,n.index,a.getLength()),u=new Gg(Df(s,$f(i.store,s)),c,c&&c.lastId,u,u&&u.id,t,null,a),u.integrate(e,0),n.right=u,n.index=d,n.forward(),og(e,t,n,l)},ag=(e,t,n,o,r)=>{const i=e.doc,s=i.clientID;ig(n,r);const l=sg(e,t,n,r);e:for(;null!==n.right&&(o>0||l.size>0&&(n.right.deleted||n.right.content.constructor===Mg));){if(!n.right.deleted)switch(n.right.content.constructor){case Mg:{const{key:t,value:i}=n.right.content,s=r[t];if(void 0!==s){if(Ym(s,i))l.delete(t);else{if(0===o)break e;l.set(t,i)}n.right.delete(e)}else n.currentAttributes.set(t,i);break}default:o<n.right.length&&Zf(e,Df(n.right.id.client,n.right.id.clock+o)),o-=n.right.length}n.forward()}if(o>0){let r="";for(;o>0;o--)r+="\n";n.right=new Gg(Df(s,$f(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Pg(r)),n.right.integrate(e,0),n.forward()}og(e,t,n,l)},cg=(e,t,n,o,r)=>{let i=t;const s=Dd();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===Mg){const e=i.content;s.set(e.key,e)}i=i.right}let l=0,a=!1;for(;t!==i;){if(n===t&&(a=!0),!t.deleted){const n=t.content;switch(n.constructor){case Mg:{var c;const{key:i,value:d}=n,h=null!==(c=o.get(i))&&void 0!==c?c:null;var u;if(s.get(i)!==n||h===d)t.delete(e),l++,a||(null!==(u=r.get(i))&&void 0!==u?u:null)!==d||h===d||(null===h?r.delete(i):r.set(i,h));a||t.deleted||rg(r,n);break}}}t=t.right}return l},ug=e=>{let t=0;return im(e.doc,n=>{let o=e._start,r=e._start,i=Dd();const s=Md(i);for(;r;){if(!1===r.deleted)if(r.content.constructor===Mg)rg(s,r.content);else t+=cg(n,o,r,i,s),i=Md(s),o=r;r=r.right}}),t},dg=e=>{const t=new Set,n=e.doc;for(const[o,r]of e.afterState.entries()){const i=e.beforeState.get(o)||0;r!==i&&Xf(e,n.store.clients.get(o),i,r,e=>{e.deleted||e.content.constructor!==Mg||e.constructor===Cg||t.add(e.parent)})}im(n,n=>{Wp(e,e.deleteSet,e=>{if(e instanceof Cg||!e.parent._hasFormatting||t.has(e.parent))return;const o=e.parent;e.content.constructor===Mg?t.add(o):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===Mg){const o=t.content.key;n.has(o)?t.delete(e):n.add(o)}t=t.left}})(n,e)});for(const e of t)ug(e)})},hg=(e,t,n)=>{const o=n,r=Md(t.currentAttributes),i=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case Hg:case Dg:case Pg:n<t.right.length&&Zf(e,Df(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}i&&cg(e,i,t.right,r,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&Nm(s._searchMarker,t.index,-o+n),t};class pg extends Cm{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];im(e,e=>{const n=new Map,o=new Map;let r=this.target._start,i=null;const s={};let l="",a=0,c=0;const u=()=>{if(null!==i){let e=null;switch(i){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"===typeof l||l.length>0)&&(e={insert:l},n.size>0&&(e.attributes={},n.forEach((t,n)=>{null!==t&&(e.attributes[n]=t)}))),l="";break;case"retain":a>0&&(e={retain:a},(e=>{for(const t in e)return!1;return!0})(s)||(e.attributes=Yh({},s))),a=0}e&&t.push(e),i=null}};for(;null!==r;){switch(r.content.constructor){case Hg:case Dg:this.adds(r)?this.deletes(r)||(u(),i="insert",l=r.content.getContent()[0],u()):this.deletes(r)?("delete"!==i&&(u(),i="delete"),c+=1):r.deleted||("retain"!==i&&(u(),i="retain"),a+=1);break;case Pg:this.adds(r)?this.deletes(r)||("insert"!==i&&(u(),i="insert"),l+=r.content.str):this.deletes(r)?("delete"!==i&&(u(),i="delete"),c+=r.length):r.deleted||("retain"!==i&&(u(),i="retain"),a+=r.length);break;case Mg:{const{key:t,value:l}=r.content;if(this.adds(r)){if(!this.deletes(r)){var d;const a=null!==(d=n.get(t))&&void 0!==d?d:null;var h;if(Ym(a,l))null!==l&&r.delete(e);else"retain"===i&&u(),Ym(l,null!==(h=o.get(t))&&void 0!==h?h:null)?delete s[t]:s[t]=l}}else if(this.deletes(r)){var p;o.set(t,l);const e=null!==(p=n.get(t))&&void 0!==p?p:null;Ym(e,l)||("retain"===i&&u(),s[t]=e)}else if(!r.deleted){o.set(t,l);const n=s[t];void 0!==n&&(Ym(n,l)?null!==n&&r.delete(e):("retain"===i&&u(),null===l?delete s[t]:s[t]=l))}r.deleted||("insert"===i&&u(),rg(n,r.content));break}}r=r.right}for(u();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}}),this._delta=t}return this._delta}}class fg extends Om{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){var e;return null!==(e=this.doc)&&void 0!==e||Sm(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(tz){console.error(tz)}this._pending=null}_copy(){return new fg}clone(){const e=new fg;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new pg(this,e,t);Tm(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){var e;null!==(e=this.doc)&&void 0!==e||Sm();let t="",n=this._start;for(;null!==n;)!n.deleted&&n.countable&&n.content.constructor===Pg&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(e){let{sanitize:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!==this.doc?im(this.doc,n=>{const o=new eg(null,this._start,0,new Map);for(let r=0;r<e.length;r++){const i=e[r];if(void 0!==i.insert){const s=t||"string"!==typeof i.insert||r!==e.length-1||null!==o.right||"\n"!==i.insert.slice(-1)?i.insert:i.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&lg(n,this,o,s,i.attributes||{})}else void 0!==i.retain?ag(n,this,o,i.retain,i.attributes||{}):void 0!==i.delete&&hg(n,o,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){var o;null!==(o=this.doc)&&void 0!==o||Sm();const r=[],i=new Map,s=this.doc;let l="",a=this._start;function c(){if(l.length>0){const e={};let t=!1;i.forEach((n,o)=>{t=!0,e[o]=n});const n={insert:l};t&&(n.attributes=e),r.push(n),l=""}}const u=()=>{for(;null!==a;){if(zf(a,e)||void 0!==t&&zf(a,t))switch(a.content.constructor){case Pg:{const o=i.get("ychange");void 0===e||zf(a,e)?void 0===t||zf(a,t)?void 0!==o&&(c(),i.delete("ychange")):void 0!==o&&o.user===a.id.client&&"added"===o.type||(c(),i.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==o&&o.user===a.id.client&&"removed"===o.type||(c(),i.set("ychange",n?n("removed",a.id):{type:"removed"})),l+=a.content.str;break}case Hg:case Dg:{c();const e={insert:a.content.getContent()[0]};if(i.size>0){const t={};e.attributes=t,i.forEach((e,n)=>{t[n]=e})}r.push(e);break}case Mg:zf(a,e)&&(c(),rg(i,a.content))}a=a.right}c()};return e||t?im(s,n=>{e&&Hf(n,e),t&&Hf(n,t),u()},"cleanup"):u(),r}insert(e,t,n){if(t.length<=0)return;const o=this.doc;null!==o?im(o,o=>{const r=ng(o,this,e,!n);n||(n={},r.currentAttributes.forEach((e,t)=>{n[t]=e})),lg(o,this,r,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n){const o=this.doc;null!==o?im(o,o=>{const r=ng(o,this,e,!n);lg(o,this,r,t,n||{})}):this._pending.push(()=>this.insertEmbed(e,t,n||{}))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?im(n,n=>{hg(n,ng(n,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(0===t)return;const o=this.doc;null!==o?im(o,o=>{const r=ng(o,this,e,!1);null!==r.right&&ag(o,this,r,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){null!==this.doc?im(this.doc,t=>{Um(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?im(this.doc,n=>{$m(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return Wm(this,e)}getAttributes(){return qm(this)}_write(e){e.writeTypeRef(Bg)}}class mg{constructor(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,null!==(t=e.doc)&&void 0!==t||Sm()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==vg&&t.constructor!==gg||null===t._start)for(;null!==e;){const t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class gg extends Om{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new gg}clone(){const e=new gg;return e.insert(0,this.toArray().map(e=>e instanceof Om?e.clone():e)),e}get length(){var e;return null!==(e=this.doc)&&void 0!==e||Sm(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new mg(this,e)}querySelector(e){e=e.toUpperCase();const t=new mg(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),_d(new mg(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){Tm(this,e,new yg(this,t,e))}toString(){return Bm(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const o=e.createDocumentFragment();return void 0!==n&&n._createAssociation(o,this),Rm(this,r=>{o.insertBefore(r.toDOM(e,t,n),null)}),o}insert(e,t){null!==this.doc?im(this.doc,n=>{Hm(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)im(this.doc,n=>{const o=e&&e instanceof Om?e._item:e;jm(n,this,o,t)});else{const n=this._prelimContent,o=null===e?0:n.findIndex(t=>t===e)+1;if(0===o&&null!==e)throw Ch("Reference item not found");n.splice(o,0,...t)}}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?im(this.doc,n=>{Vm(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return _m(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Fm(this,e)}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return Pm(this,e,t)}forEach(e){Rm(this,e)}_write(e){e.writeTypeRef(Fg)}}class vg extends gg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UNDEFINED";super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new vg(this.nodeName)}clone(){const e=new vg(this.nodeName);return((e,t)=>{for(const n in e)t(e[n],n)})(this.getAttributes(),(t,n)=>{"string"===typeof t&&e.setAttribute(n,t)}),e.insert(0,this.toArray().map(e=>e instanceof Om?e.clone():e)),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const s in e)n.push(s);n.sort();const o=n.length;for(let s=0;s<o;s++){const o=n[s];t.push(o+'="'+e[o]+'"')}const r=this.nodeName.toLocaleLowerCase(),i=t.length>0?" "+t.join(" "):"";return"<".concat(r).concat(i,">").concat(super.toString(),"</").concat(r,">")}removeAttribute(e){null!==this.doc?im(this.doc,t=>{Um(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?im(this.doc,n=>{$m(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return Wm(this,e)}hasAttribute(e){return Gm(this,e)}getAttributes(e){return e?((e,t)=>{const n={};return e._map.forEach((e,o)=>{let r=e;for(;null!==r&&(!t.sv.has(r.id.client)||r.id.clock>=(t.sv.get(r.id.client)||0));)r=r.left;null!==r&&zf(r,t)&&(n[o]=r.content.getContent()[r.length-1])}),n})(this,e):qm(this)}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const o=e.createElement(this.nodeName),r=this.getAttributes();for(const i in r){const e=r[i];"string"===typeof e&&o.setAttribute(i,e)}return Rm(this,r=>{o.appendChild(r.toDOM(e,t,n))}),void 0!==n&&n._createAssociation(o,this),o}_write(e){e.writeTypeRef(Ig),e.writeKey(this.nodeName)}}class yg extends Cm{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class bg extends Qm{constructor(e){super(),this.hookName=e}_copy(){return new bg(this.hookName)}clone(){const e=new bg(this.hookName);return this.forEach((t,n)=>{e.set(n,t)}),e}toDOM(){arguments.length>0&&void 0!==arguments[0]||document;let e=arguments.length>2?arguments[2]:void 0;const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[this.hookName];let n;return n=void 0!==t?t.createDom(this):document.createElement(this.hookName),n.setAttribute("data-yjs-hook",this.hookName),void 0!==e&&e._createAssociation(n,this),n}_write(e){e.writeTypeRef(jg),e.writeKey(this.hookName)}}class wg extends fg{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new wg}clone(){const e=new wg;return e.applyDelta(this.toDelta()),e}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>2?arguments[2]:void 0;const n=e.createTextNode(this.toString());return void 0!==t&&t._createAssociation(n,this),n}toString(){return this.toDelta().map(e=>{const t=[];for(const o in e.attributes){const n=[];for(const t in e.attributes[o])n.push({key:t,value:e.attributes[o][t]});n.sort((e,t)=>e.key<t.key?-1:1),t.push({nodeName:o,attrs:n})}t.sort((e,t)=>e.nodeName<t.nodeName?-1:1);let n="";for(let o=0;o<t.length;o++){const e=t[o];n+="<".concat(e.nodeName);for(let t=0;t<e.attrs.length;t++){const o=e.attrs[t];n+=" ".concat(o.key,'="').concat(o.value,'"')}n+=">"}n+=e.insert;for(let o=t.length-1;o>=0;o--)n+="</".concat(t[o].nodeName,">");return n}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(zg)}}class kg{constructor(e,t){this.id=e,this.length=t}get deleted(){throw xh()}mergeWith(e){return!1}write(e,t,n){throw xh()}integrate(e,t){throw xh()}}class Cg extends kg{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Wf(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class xg{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new xg(this.content)}splice(e){throw xh()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class Sg{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Sg(this.len)}splice(e){const t=new Sg(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){Zp(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const Ag=(e,t)=>new nf((0,s.A)((0,s.A)({guid:e},t),{},{shouldLoad:t.shouldLoad||t.autoLoad||!1}));class Eg{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Eg(Ag(this.doc.guid,this.opts))}splice(e){throw xh()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class Dg{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Dg(this.embed)}splice(e){throw xh()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class Mg{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Mg(this.key,this.value)}splice(e){throw xh()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class Ng{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Ng(this.arr)}splice(e){const t=new Ng(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let o=t;o<n;o++){const t=this.arr[o];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}const Tg="development"===fp("node_env");class Og{constructor(e){this.arr=e,Tg&&ip(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Og(this.arr)}splice(e){const t=new Og(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let o=t;o<n;o++){const t=this.arr[o];e.writeAny(t)}}getRef(){return 8}}class Pg{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Pg(this.str)}splice(e){const t=new Pg(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"\ufffd",t.str="\ufffd"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const _g=[e=>new Jm,e=>new Qm,e=>new fg,e=>new vg(e.readKey()),e=>new gg,e=>new bg(e.readKey()),e=>new wg],Lg=0,Rg=1,Bg=2,Ig=3,Fg=4,jg=5,zg=6;class Hg{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Hg(this.type._copy())}splice(e){throw xh()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const Vg=(e,t)=>{let n,o=t,r=0;do{r>0&&(o=Df(o.client,o.clock+r)),n=Gf(e,o),r=o.clock-n.id.clock,o=n.redone}while(null!==o&&n instanceof Gg);return{item:n,diff:r}},Ug=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},$g=(e,t,n)=>{const{client:o,clock:r}=t.id,i=new Gg(Df(o,r+n),t,Df(o,r+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),null!==t.redone&&(i.redone=Df(t.redone.client,t.redone.clock+n)),t.right=i,null!==i.right&&(i.right.left=i),e._mergeStructs.push(i),null!==i.parentSub&&null===i.right&&i.parent._map.set(i.parentSub,i),t.length=n,i},Wg=(e,t)=>((e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1})(e,e=>qp(e.deletions,t)),qg=(e,t,n,o,r,i)=>{const s=e.doc,l=s.store,a=s.clientID,c=t.redone;if(null!==c)return Zf(e,c);let u,d=t.parent._item,h=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===qg(e,d,n,o,r,i)))return null;for(;null!==d.redone;)d=Zf(e,d.redone)}const p=null===d?t.parent:d.content.type;if(null===t.parentSub){for(h=t.left,u=t;null!==h;){let t=h;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Zf(e,t.redone);if(null!==t&&t.parent._item===d){h=t;break}h=h.left}for(;null!==u;){let t=u;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Zf(e,t.redone);if(null!==t&&t.parent._item===d){u=t;break}u=u.right}}else if(u=null,t.right&&!r){for(h=t;null!==h&&null!==h.right&&(h.right.redone||qp(o,h.right.id)||Wg(i.undoStack,h.right.id)||Wg(i.redoStack,h.right.id));)for(h=h.right;h.redone;)h=Zf(e,h.redone);if(h&&null!==h.right)return null}else h=p._map.get(t.parentSub)||null;const f=$f(l,a),m=Df(a,f),g=new Gg(m,h,h&&h.lastId,u,u&&u.id,p,t.parentSub,t.content.copy());return t.redone=m,Ug(g,!0),g.integrate(e,0),g};class Gg extends kg{constructor(e,t,n,o,r,i,s,l){super(e,l.getLength()),this.origin=n,this.left=t,this.right=o,this.rightOrigin=r,this.parent=i,this.parentSub=s,this.redone=null,this.content=l,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=$f(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=$f(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Af&&this.id.client!==this.parent.client&&this.parent.clock>=$f(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Jf(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Zf(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Cg||this.right&&this.right.constructor===Cg)this.parent=null;else if(this.parent){if(this.parent.constructor===Af){const e=Gf(t,this.parent);e.constructor===Cg?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===Gg?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Gg&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Jf(e,e.doc.store,Df(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const o=new Set,r=new Set;for(;null!==t&&t!==this.right;){if(r.add(t),o.add(t),Ef(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,o.clear();else if(Ef(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!r.has(Gf(e.doc.store,t.origin)))break;o.has(Gf(e.doc.store,t.origin))||(n=t,o.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Wf(e.doc.store,this),this.content.integrate(e,this),em(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new Cg(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:Df(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Ef(e.origin,this.lastId)&&this.right===e&&Ef(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),Zp(e.deleteSet,this.id.client,this.id.clock,this.length),em(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Sh();this.content.gc(e),t?((e,t,n)=>{const o=e.clients.get(t.id.client);o[qf(o,t.id.clock)]=n})(e,this,new Cg(this.id,this.length)):this.content=new Sg(this.length)}write(e,t){const n=t>0?Df(this.id.client,this.id.clock+t-1):this.origin,o=this.rightOrigin,r=this.parentSub,i=31&this.content.getRef()|(null===n?0:Vd)|(null===o?0:Hd)|(null===r?0:32);if(e.writeInfo(i),null!==n&&e.writeLeftID(n),null!==o&&e.writeRightID(o),null===n&&null===o){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=Mf(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===Af?(e.writeParentInfo(!1),e.writeLeftID(t)):Sh();null!==r&&e.writeString(r)}this.content.write(e,t)}}const Kg=(e,t)=>Zg[31&t](e),Zg=[()=>{Sh()},e=>new Sg(e.readLen()),e=>{const t=e.readLen(),n=[];for(let o=0;o<t;o++){const t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new Ng(n)},e=>new xg(e.readBuf()),e=>new Pg(e.readString()),e=>new Dg(e.readJSON()),e=>new Mg(e.readKey(),e.readJSON()),e=>new Hg(_g[e.readTypeRef()](e)),e=>{const t=e.readLen(),n=[];for(let o=0;o<t;o++)n.push(e.readAny());return new Og(n)},e=>new Eg(Ag(e.readString(),e.readAny())),()=>{Sh()}];class Jg extends kg{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){Sh()}write(e,t){e.writeInfo(10),sh(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const Xg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},Qg="__ $YJS$ __";!0===Xg[Qg]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Xg[Qg]=!0;const Yg=new Pt("y-sync"),ev=new Pt("y-undo"),tv=new Pt("yjs-cursor");const nv=e=>class{constructor(e){this._=e}destroy(){e(this._)}},ov=nv(clearTimeout),rv=(e,t)=>new ov(setTimeout(t,e));nv(clearInterval),nv(e=>"undefined"!==typeof requestAnimationFrame&&cancelAnimationFrame(e)),nv(e=>"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(e));let iv=null;const sv=()=>{const e=iv;iv=null,e.forEach((e,t)=>{const n=t.state.tr,o=Yg.getState(t.state);o&&o.binding&&!o.binding.isDestroyed&&(e.forEach((e,t)=>{n.setMeta(t,e)}),t.dispatch(n))})},lv=(e,t,n)=>{if(0===e)return Lf(t,0,-1);let o=null===t._first?null:t._first.content.type;for(;null!==o&&t!==o;){if(o instanceof wg){if(o._length>=e)return Lf(o,e,-1);if(e-=o._length,null!==o._item&&null!==o._item.next)o=o._item.next.content.type;else{do{o=null===o._item?null:o._item.parent,e--}while(o!==t&&null!==o&&null!==o._item&&null===o._item.next);null!==o&&o!==t&&(o=null===o._item?null:o._item.next.content.type)}}else{const r=(n.get(o)||{nodeSize:0}).nodeSize;if(null!==o._first&&e<r)o=o._first.content.type,e--;else{if(1===e&&0===o._length&&r>1)return new Tf(null===o._item?null:o._item.id,null===o._item?Mf(o):null,null);if(e-=r,null!==o._item&&null!==o._item.next)o=o._item.next.content.type;else{if(0===e)return o=null===o._item?o:o._item.parent,new Tf(null===o._item?null:o._item.id,null===o._item?Mf(o):null,null);do{o=o._item.parent,e--}while(o!==t&&null===o._item.next);o!==t&&(o=o._item.next.content.type)}}}if(null===o)throw Sh();if(0===e&&o.constructor!==wg&&o!==t)return av(o._item.parent,o._item)}return Lf(t,t._length,-1)},av=(e,t)=>{let n=null,o=null;return null===e._item?o=Mf(e):n=Df(e._item.id.client,e._item.id.clock),new Tf(n,o,t.id)},cv=(e,t,n,o)=>{const r=Rf(n,e);if(null===r||r.type!==t&&!Nf(t,r.type._item))return null;let i=r.type,s=0;if(i.constructor===wg)s=r.index;else if(null===i._item||!i._item.deleted){let e=i._first,t=0;for(;t<i._length&&t<r.index&&null!==e;){if(!e.deleted){const n=e.content.type;t++,s+=n instanceof wg?n._length:o.get(n).nodeSize}e=e.right}s+=1}for(;i!==t&&null!==i._item;){const e=i._item.parent;if(null===e._item||!e._item.deleted){s+=1;let t=e._first;for(;null!==t;){const e=t.content.type;if(e===i)break;t.deleted||(s+=e instanceof wg?e._length:o.get(e).nodeSize),t=t.right}}i=e}return s-1};const uv=(e,t,n)=>e!==t,dv=e=>{const t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style","border-color: ".concat(e.color));const n=document.createElement("div");n.setAttribute("style","background-color: ".concat(e.color)),n.insertBefore(document.createTextNode(e.name),null);const o=document.createTextNode("\u2060"),r=document.createTextNode("\u2060");return t.insertBefore(o,null),t.insertBefore(n,null),t.insertBefore(r,null),t},hv=e=>({style:"background-color: ".concat(e.color,"70"),class:"ProseMirror-yjs-selection"}),pv=/^#[0-9a-fA-F]{6}$/,fv=(e,t,n,o,r)=>{const i=Yg.getState(e),s=i.doc,l=[];return null!=i.snapshot||null!=i.prevSnapshot||0===i.binding.mapping.size?wr.create(e.doc,[]):(t.getStates().forEach((t,a)=>{if(n(s.clientID,a,t)&&null!=t.cursor){const n=t.user||{};null==n.color?n.color="#ffa500":pv.test(n.color)||console.warn("A user uses an unsupported color format",n),null==n.name&&(n.name="User: ".concat(a));let c=cv(s,i.type,Of(t.cursor.anchor),i.binding.mapping),u=cv(s,i.type,Of(t.cursor.head),i.binding.mapping);if(null!==c&&null!==u){const t=jd(e.doc.content.size-1,0);c=Fd(c,t),u=Fd(u,t),l.push(vr.widget(u,()=>o(n,a),{key:a+"",side:10}));const i=Fd(c,u),s=jd(c,u);l.push(vr.inline(i,s,r(n,a),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),wr.create(e.doc,l))},mv=function(e){let{awarenessStateFilter:t=uv,cursorBuilder:n=dv,selectionBuilder:o=hv,getSelection:r=e=>e.selection}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cursor";return new Nt({key:tv,state:{init:(r,i)=>fv(i,e,t,n,o),apply(r,i,s,l){const a=Yg.getState(l),c=r.getMeta(tv);return a&&a.isChangeOrigin||c&&c.awarenessUpdated?fv(l,e,t,n,o):i.map(r.mapping,r.doc)}},props:{decorations:e=>tv.getState(e)},view:t=>{const n=()=>{t.docView&&((e,t,n)=>{iv||(iv=new Map,rv(0,sv)),Nd(iv,e,Dd).set(t,n)})(t,tv,{awarenessUpdated:!0})},o=()=>{const n=Yg.getState(t.state),o=e.getLocalState()||{};if(t.hasFocus()){const s=r(t.state),l=lv(s.anchor,n.type,n.binding.mapping),a=lv(s.head,n.type,n.binding.mapping);null!=o.cursor&&Bf(Of(o.cursor.anchor),l)&&Bf(Of(o.cursor.head),a)||e.setLocalStateField(i,{anchor:l,head:a})}else null!=o.cursor&&null!==cv(n.doc,n.type,Of(o.cursor.anchor),n.binding.mapping)&&e.setLocalStateField(i,null)};return e.on("change",n),t.dom.addEventListener("focusin",o),t.dom.addEventListener("focusout",o),{update:o,destroy:()=>{t.dom.removeEventListener("focusin",o),t.dom.removeEventListener("focusout",o),e.off("change",n),e.setLocalStateField(i,null)}}}})},gv=/[\uD800-\uDBFF]/,vv=/[\uDC00-\uDFFF]/,yv=(e,t)=>{let n=0,o=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(n>0&&gv.test(e[n-1])&&n--;o+n<e.length&&o+n<t.length&&e[e.length-o-1]===t[t.length-o-1];)o++;return o>0&&vv.test(e[e.length-o])&&o--,{index:n,remove:e.length-n-o,insert:t.slice(n,t.length-o)}},bv=(e,t)=>e>>>t|e<<32-t,wv=e=>bv(e,2)^bv(e,13)^bv(e,22),kv=e=>bv(e,6)^bv(e,11)^bv(e,25),Cv=e=>bv(e,7)^bv(e,18)^e>>>3,xv=e=>bv(e,17)^bv(e,19)^e>>>10,Sv=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Av=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class Ev{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(Av),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,t=this._W;for(let u=16;u<64;u++)t[u]=xv(t[u-2])+t[u-7]+Cv(t[u-15])+t[u-16];let n=e[0],o=e[1],r=e[2],i=e[3],s=e[4],l=e[5],a=e[6],c=e[7];for(let u,d,h=0;h<64;h++)u=c+kv(s)+(s&l^~s&a)+Sv[h]+t[h]>>>0,d=wv(n)+(n&o^n&r^o&r)>>>0,c=a,a=l,l=s,s=i+u>>>0,i=r,r=o,o=n,n=u+d>>>0;e[0]+=n,e[1]+=o,e[2]+=r,e[3]+=i,e[4]+=s,e[5]+=l,e[6]+=a,e[7]+=c}digest(e){let t=0;for(;t+56<=e.length;){let n=0;for(;n<16&&t+3<e.length;n++)this._W[n]=e[t++]<<24|e[t++]<<16|e[t++]<<8|e[t++];if(t%64!==0){for(this._W.fill(0,n,16);t<e.length;)this._W[n]|=e[t]<<8*(3-t%4),t++;this._W[n]|=Vd<<8*(3-t%4)}this._updateHash()}const n=t%64!==0;this._W.fill(0,0,16);let o=0;for(;t<e.length;o++)for(let n=3;n>=0&&t<e.length;n--)this._W[o]|=e[t++]<<8*n;n||(this._W[o-(t%4===0?0:1)]|=Vd<<8*(3-t%4)),this._W[14]=e.byteLength/Ud,this._W[15]=8*e.byteLength,this._updateHash();const r=new Uint8Array(32);for(let i=0;i<this._H.length;i++)for(let e=0;e<4;e++)r[4*i+e]=this._H[i]>>>8*(3-e);return r}}const Dv=e=>{return bp((e=>{for(let t=6;t<e.length;t++)e[t%6]=e[t%6]^e[t];return e.slice(0,6)})((t=wp(e),(new Ev).digest(t))));var t},Mv=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!qp(t.ds,e.id),Nv=[{light:"#ecd44433",dark:"#ecd444"}],Tv=(e,t,n)=>{if(!e.has(n)){if(e.size<t.length){const n=Td();e.forEach(e=>n.add(e)),t=t.filter(e=>!n.has(e))}e.set(n,(o=t)[Bd($h()*o.length)])}var o;return e.get(n)},Ov=(e,t)=>({type:t.selection.jsonID,anchor:lv(t.selection.anchor,e.type,e.mapping),head:lv(t.selection.head,e.type,e.mapping)});class Pv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;this.type=e,this.prosemirrorView=null,this.mux=(()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}})(),this.mapping=t,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&null!=this.prosemirrorView&&(this.beforeTransactionSelection=Ov(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(cp&&null===this._domSelectionInView&&(rv(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(null==e||null==e.anchorNode)return!1;const t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);0===t.getClientRects().length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);const n=t.getBoundingClientRect(),o=xp.documentElement;return n.bottom>=0&&n.right>=0&&n.left<=(window.innerWidth||o.clientWidth||0)&&n.top<=(window.innerHeight||o.clientHeight||0)}renderSnapshot(e,t){t||(t=Ff(Jp(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Yg,{snapshot:e,prevSnapshot:t}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(e=>Lv(e,this.prosemirrorView.state.schema,this)).filter(e=>null!==e),t=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new y(h.from(e),0,0));t.setMeta(Yg,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(t)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=null!==this.beforeTransactionSelection?null:this.prosemirrorView.state.selection,t=this.type.toArray().map(e=>Lv(e,this.prosemirrorView.state.schema,this)).filter(e=>null!==e),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new y(h.from(t),0,0));if(e){const t=Fd(jd(e.anchor,0),n.doc.content.size),o=Fd(jd(e.head,0),n.doc.content.size);n.setSelection(ft.create(n.doc,t,o))}this.prosemirrorView.dispatch(n.setMeta(Yg,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,t,n){let o=this.doc,r=this.type;if(e||(e=jf(this.doc)),e instanceof Uint8Array||t instanceof Uint8Array)if(e instanceof Uint8Array&&t instanceof Uint8Array||Sh(),o=new nf({gc:!1}),ff(o,t),t=jf(o),ff(o,e),e=jf(o),null===r._item){const e=Array.from(this.doc.share.keys()).find(e=>this.doc.share.get(e)===this.type);r=o.getXmlFragment(e)}else{var i;const e=null!==(i=o.store.clients.get(r._item.id.client))&&void 0!==i?i:[],t=e[qf(e,r._item.id.clock)].content;r=t.type}this.mapping.clear(),this.mux(()=>{o.transact(o=>{const i=n.permanentUserData;i&&i.dss.forEach(e=>{Wp(o,e,e=>{})});const s=(e,t)=>{const o="added"===e?i.getUserByClientId(t.client):i.getUserByDeletedId(t);return{user:o,type:e,color:Tv(n.colorMapping,n.colors,o)}},l=Lm(r,new If(t.ds,e.sv)).map(n=>!n._item.deleted||Mv(n._item,e)||Mv(n._item,t)?Lv(n,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,t,s):null).filter(e=>null!==e),a=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new y(h.from(l),0,0));this.prosemirrorView.dispatch(a.setMeta(Yg,{isChangeOrigin:!0}))},Yg)})}_typeChanged(e,t){if(null==this.prosemirrorView)return;const n=Yg.getState(this.prosemirrorView.state);0!==e.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux(()=>{const e=(e,t)=>this.mapping.delete(t);Wp(t,t.deleteSet,e=>{if(e.constructor===Gg){const t=e.content.type;t&&this.mapping.delete(t)}}),t.changed.forEach(e),t.changedParentTypes.forEach(e);const n=this.type.toArray().map(e=>_v(e,this.prosemirrorView.state.schema,this)).filter(e=>null!==e);let o=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new y(h.from(n),0,0));((e,t,n)=>{if(null!==t&&null!==t.anchor&&null!==t.head)if("all"===t.type)e.setSelection(new yt(e.doc));else if("node"===t.type){const o=cv(n.doc,n.type,t.anchor,n.mapping);e.setSelection(gt.create(e.doc,o))}else{const o=cv(n.doc,n.type,t.anchor,n.mapping),r=cv(n.doc,n.type,t.head,n.mapping);null!==o&&null!==r&&e.setSelection(ft.between(e.doc.resolve(o),e.doc.resolve(r)))}})(o,this.beforeTransactionSelection,this),o=o.setMeta(Yg,{isChangeOrigin:!0,isUndoRedoOperation:t.origin instanceof cm}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&o.scrollIntoView(),this.prosemirrorView.dispatch(o)}):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(e){this.doc.transact(()=>{Zv(this.doc,this.type,e,this),this.beforeTransactionSelection=Ov(this,this.prosemirrorView.state)},Yg)}initView(e){null!=this.prosemirrorView&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){null!=this.prosemirrorView&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const _v=(e,t,n,o,r,i)=>{const s=n.mapping.get(e);if(void 0===s){if(e instanceof vg)return Lv(e,t,n,o,r,i);throw xh()}return s},Lv=(e,t,n,o,r,i)=>{const s=[],l=e=>{if(e instanceof vg){const l=_v(e,t,n,o,r,i);null!==l&&s.push(l)}else{var l;const a=null===(l=e._item.right)||void 0===l||null===(l=l.content)||void 0===l?void 0:l.type;a instanceof fg&&!a._item.deleted&&a._item.id.client===a.doc.clientID&&(e.applyDelta([{retain:e.length},...a.toDelta()]),a.doc.transact(e=>{a._item.delete(e)}));const c=Rv(e,t,n,o,r,i);null!==c&&c.forEach(e=>{null!==e&&s.push(e)})}};void 0===o||void 0===r?e.toArray().forEach(l):Lm(e,new If(r.ds,o.sv)).forEach(l);try{const l=e.getAttributes(o);void 0!==o&&(Mv(e._item,o)?Mv(e._item,r)||(l.ychange=i?i("added",e._item.id):{type:"added"}):l.ychange=i?i("removed",e._item.id):{type:"removed"});const a=t.node(e.nodeName,l,s);return n.mapping.set(e,a),a}catch(tz){return e.doc.transact(t=>{e._item.delete(t)},Yg),n.mapping.delete(e),null}},Rv=(e,t,n,o,r,i)=>{const s=[],l=e.toDelta(o,r,i);try{for(let e=0;e<l.length;e++){const n=l[e];s.push(t.text(n.insert,Gv(n.attributes,t)))}}catch(tz){return e.doc.transact(t=>{e._item.delete(t)},Yg),null}return s},Bv=(e,t)=>e instanceof Array?((e,t)=>{const n=new wg,o=e.map(e=>({insert:e.text,attributes:Kv(e.marks,t)}));return n.applyDelta(o),t.mapping.set(n,e),n})(e,t):((e,t)=>{const n=new vg(e.type.name);for(const o in e.attrs){const t=e.attrs[o];null!==t&&"ychange"!==o&&n.setAttribute(o,t)}return n.insert(0,jv(e).map(e=>Bv(e,t))),t.mapping.set(n,e),n})(e,t),Iv=e=>"object"===typeof e&&null!==e,Fv=(e,t)=>{const n=Object.keys(e).filter(t=>null!==e[t]);let o=n.length===(null==t?0:Object.keys(t).filter(e=>null!==t[e]).length);for(let r=0;r<n.length&&o;r++){const i=n[r],s=e[i],l=t[i];o="ychange"===i||s===l||Iv(s)&&Iv(l)&&Fv(s,l)}return o},jv=e=>{const t=e.content.content,n=[];for(let o=0;o<t.length;o++){const e=t[o];if(e.isText){const e=[];for(let n=t[o];o<t.length&&n.isText;n=t[++o])e.push(n);o--,n.push(e)}else n.push(e)}return n},zv=(e,t)=>{const n=e.toDelta();return n.length===t.length&&n.every((e,n)=>e.insert===t[n].text&&ep(e.attributes||{}).length===t[n].marks.length&&np(e.attributes,(e,o)=>{var r;const i=qv(o),s=t[n].marks;return Fv(e,null===(r=s.find(e=>e.type.name===i))||void 0===r?void 0:r.attrs)}))},Hv=(e,t)=>{if(e instanceof vg&&!(t instanceof Array)&&Jv(e,t)){const n=jv(t);return e._length===n.length&&Fv(e.getAttributes(),t.attrs)&&e.toArray().every((e,t)=>Hv(e,n[t]))}return e instanceof wg&&t instanceof Array&&zv(e,t)},Vv=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((e,n)=>t[n]===e),Uv=(e,t,n)=>{const o=e.toArray(),r=jv(t),i=r.length,s=o.length,l=Fd(s,i);let a=0,c=0,u=!1;for(;a<l;a++){const e=o[a],t=r[a];if(Vv(n.mapping.get(e),t))u=!0;else if(!Hv(e,t))break}for(;a+c<l;c++){const e=o[s-c-1],t=r[i-c-1];if(Vv(n.mapping.get(e),t))u=!0;else if(!Hv(e,t))break}return{equalityFactor:a+c,foundMappedChild:u}},$v=(e,t,n)=>{n.mapping.set(e,t);const{nAttrs:o,str:r}=(e=>{let t="",n=e._start;const o={};for(;null!==n;)n.deleted||(n.countable&&n.content instanceof Pg?t+=n.content.str:n.content instanceof Mg&&(o[n.content.key]=null)),n=n.right;return{str:t,nAttrs:o}})(e),i=t.map(e=>({insert:e.text,attributes:Object.assign({},o,Kv(e.marks,n))})),{insert:s,remove:l,index:a}=yv(r,i.map(e=>e.insert).join(""));e.delete(a,l),e.insert(a,s),e.applyDelta(i.map(e=>({retain:e.insert.length,attributes:e.attributes})))},Wv=/(.*)(--[a-zA-Z0-9+/=]{8})$/,qv=e=>{var t,n;return null!==(t=null===(n=Wv.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:e},Gv=(e,t)=>{const n=[];for(const o in e)n.push(t.mark(qv(o),e[o]));return n},Kv=(e,t)=>{const n={};return e.forEach(e=>{if("ychange"!==e.type.name){const o=Nd(t.isOMark,e.type,()=>!e.type.excludes(e.type));n[o?"".concat(e.type.name,"--").concat(Dv(e.toJSON())):e.type.name]=e.attrs}}),n},Zv=(e,t,n,o)=>{if(t instanceof vg&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(o.mapping.set(t,n),t instanceof vg){const e=t.getAttributes(),o=n.attrs;for(const n in o)null!==o[n]?e[n]!==o[n]&&"ychange"!==n&&t.setAttribute(n,o[n]):t.removeAttribute(n);for(const n in e)void 0===o[n]&&t.removeAttribute(n)}const r=jv(n),i=r.length,s=t.toArray(),l=s.length,a=Fd(i,l);let c=0,u=0;for(;c<a;c++){const e=s[c],t=r[c];if(!Vv(o.mapping.get(e),t)){if(!Hv(e,t))break;o.mapping.set(e,t)}}for(;u+c+1<a;u++){const e=s[l-u-1],t=r[i-u-1];if(!Vv(o.mapping.get(e),t)){if(!Hv(e,t))break;o.mapping.set(e,t)}}e.transact(()=>{for(;l-c-u>0&&i-c-u>0;){const n=s[c],a=r[c],d=s[l-u-1],h=r[i-u-1];if(n instanceof wg&&a instanceof Array)zv(n,a)||$v(n,a,o),c+=1;else{let r=n instanceof vg&&Jv(n,a),i=d instanceof vg&&Jv(d,h);if(r&&i){const e=Uv(n,a,o),t=Uv(d,h,o);e.foundMappedChild&&!t.foundMappedChild?i=!1:!e.foundMappedChild&&t.foundMappedChild||e.equalityFactor<t.equalityFactor?r=!1:i=!1}r?(Zv(e,n,a,o),c+=1):i?(Zv(e,d,h,o),u+=1):(o.mapping.delete(t.get(c)),t.delete(c,1),t.insert(c,[Bv(a,o)]),c+=1)}}const n=l-c-u;if(1===l&&0===i&&s[0]instanceof wg?(o.mapping.delete(s[0]),s[0].delete(0,s[0].length)):n>0&&(t.slice(c,c+n).forEach(e=>o.mapping.delete(e)),t.delete(c,n)),c+u<i){const e=[];for(let t=c;t<i-u;t++)e.push(Bv(r[t],o));t.insert(c,e)}},Yg)},Jv=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name,Xv=(e,t)=>{var n;return null==t?null===(n=ev.getState(e))||void 0===n||null===(n=n.undoManager)||void 0===n?void 0:n.canUndo():(e=>{var t;return null!=(null===(t=ev.getState(e))||void 0===t||null===(t=t.undoManager)||void 0===t?void 0:t.undo())})(e)},Qv=(e,t)=>{var n;return null==t?null===(n=ev.getState(e))||void 0===n||null===(n=n.undoManager)||void 0===n?void 0:n.canRedo():(e=>{var t;return null!=(null===(t=ev.getState(e))||void 0===t||null===(t=t.undoManager)||void 0===t?void 0:t.redo())})(e)},Yv=new Set(["paragraph"]),ey=function(){let{protectedNodes:e=Yv,trackedOrigins:t=[],undoManager:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Nt({key:ev,state:{init:(o,r)=>{const i=Yg.getState(r),s=n||new cm(i.type,{trackedOrigins:new Set([Yg].concat(t)),deleteFilter:t=>((e,t)=>!(e instanceof Gg)||!(e.content instanceof Hg)||!(e.content.type instanceof fg||e.content.type instanceof vg&&t.has(e.content.type.nodeName))||0===e.content.type._length)(t,e),captureTransaction:e=>!1!==e.meta.get("addToHistory")});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(e,t,n,o)=>{const r=Yg.getState(o).binding,i=t.undoManager,s=i.undoStack.length>0,l=i.redoStack.length>0;return r?{undoManager:i,prevSel:Ov(r,n),hasUndoOps:s,hasRedoOps:l}:s!==t.hasUndoOps||l!==t.hasRedoOps?Object.assign({},t,{hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}):t}},view:e=>{const t=Yg.getState(e.state),n=ev.getState(e.state).undoManager;return n.on("stack-item-added",n=>{let{stackItem:o}=n;const r=t.binding;r&&o.meta.set(r,ev.getState(e.state).prevSel)}),n.on("stack-item-popped",e=>{let{stackItem:n}=e;const o=t.binding;o&&(o.beforeTransactionSelection=n.meta.get(o)||o.beforeTransactionSelection)}),{destroy:()=>{n.destroy()}}}})};function ty(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Nt({view:t=>new ny(t,e)})}class ny{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}})}destroy(){this.handlers.forEach(e=>{let{name:t,handler:n}=e;return this.editorView.dom.removeEventListener(t,n)})}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,o=this.editorView.dom,r=o.getBoundingClientRect(),i=r.width/o.offsetWidth,s=r.height/o.offsetHeight;if(n){let n=t.nodeBefore,o=t.nodeAfter;if(n||o){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(t){let r=t.getBoundingClientRect(),i=n?r.bottom:r.top;n&&o&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let l=this.width/2*s;e={left:r.left,right:r.right,top:i-l,bottom:i+l}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos),n=this.width/2*i;e={left:t.left-n,right:t.left+n,top:t.top,bottom:t.bottom}}let l,a,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!c||c==document.body&&"static"==getComputedStyle(c).position)l=-pageXOffset,a=-pageYOffset;else{let e=c.getBoundingClientRect(),t=e.width/c.offsetWidth,n=e.height/c.offsetHeight;l=e.left-c.scrollLeft*t,a=e.top-c.scrollTop*n}this.element.style.left=(e.left-l)/i+"px",this.element.style.top=(e.top-a)/s+"px",this.element.style.width=(e.right-e.left)/i+"px",this.element.style.height=(e.bottom-e.top)/s+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=n&&n.type.spec.disableDropCursor,r="function"==typeof o?o(this.editorView,t,e):o;if(t&&!r){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=Ge(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const oy={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:e=>"".concat(e," more replies")}},generic:{ctrl_shortcut:"Ctrl"}},ry=["data-test"],iy=["start"],sy=["default","emptyDocument"];var ly=Object.defineProperty,ay=(e,t,n)=>((e,t,n)=>t in e?ly(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function cy(e){const t=e.filter((t,n)=>e.indexOf(t)!==n);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify;const n={};return e.filter(e=>{const o=t(e);return!Object.prototype.hasOwnProperty.call(n,o)&&(n[o]=!0)})}(t)}const uy=fs.create({name:"uniqueID",priority:1e4,addOptions:()=>({attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const e=window.__TEST_OPTIONS;return void 0===e.mockID?e.mockID=0:e.mockID++,e.mockID.toString()}return Dl()},filterTransaction:null}),addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:e=>e.getAttribute("data-".concat(this.options.attributeName)),renderHTML:e=>{const t={["data-".concat(this.options.attributeName)]:e[this.options.attributeName]};return this.options.setIdAttribute?(0,s.A)((0,s.A)({},t),{},{id:e[this.options.attributeName]}):t}}}}]},addProseMirrorPlugins(){let e=null,t=!1;return[new Nt({key:new Pt("uniqueID"),appendTransaction:(e,t,n)=>{const o=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),r=this.options.filterTransaction&&e.some(e=>{let t,n;return!(null!==(n=(t=this.options).filterTransaction)&&void 0!==n&&n.call(t,e))});if(!o||r)return;const{tr:i}=n,{types:l,attributeName:a,generateID:c}=this.options,u=Fs(t.doc,e),{mapping:d}=u;return qs(u).forEach(e=>{let{newRange:o}=e;const r=zs(n.doc,o,e=>l.includes(e.type.name)),u=cy(r.map(e=>{let{node:t}=e;return t.attrs[a]}).filter(e=>null!==e));r.forEach(e=>{let o,{node:r,pos:l}=e;const h=null===(o=i.doc.nodeAt(l))||void 0===o?void 0:o.attrs[a];if(null===h){const e=t.doc.type.createAndFill().content;if(null===t.doc.content.findDiffStart(e)){const t=JSON.parse(JSON.stringify(n.doc.toJSON()));if(t.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(t.content)===JSON.stringify(e.toJSON()))return void i.setNodeMarkup(l,void 0,(0,s.A)((0,s.A)({},r.attrs),{},{[a]:"initialBlockId"}))}return void i.setNodeMarkup(l,void 0,(0,s.A)((0,s.A)({},r.attrs),{},{[a]:c()}))}const{deleted:p}=d.invert().mapResult(l);p&&u.includes(h)&&i.setNodeMarkup(l,void 0,(0,s.A)((0,s.A)({},r.attrs),{},{[a]:c()}))})}),i.steps.length?i:void 0},view(t){const n=n=>{let o;e=null!==(o=t.dom.parentElement)&&void 0!==o&&o.contains(n.target)?t.dom.parentElement:null};return window.addEventListener("dragstart",n),{destroy(){window.removeEventListener("dragstart",n)}}},props:{handleDOMEvents:{drop:(n,o)=>{let r;return t=e!==n.dom.parentElement||"copy"===(null===(r=o.dataTransfer)||void 0===r?void 0:r.effectAllowed),e=null,!1},paste:()=>(t=!0,!1)},transformPasted:e=>{if(!t)return e;const{types:n,attributeName:o}=this.options,r=e=>{const t=[];return e.forEach(e=>{if(e.isText)return void t.push(e);if(!n.includes(e.type.name))return void t.push(e.copy(r(e.content)));const i=e.type.create((0,s.A)((0,s.A)({},e.attrs),{},{[o]:null}),r(e.content),e.marks);t.push(i)}),h.from(t)};return t=!1,new y(r(e.content),e.openStart,e.openEnd)}}})]}});function dy(e){return"link"===e.type}function hy(e){return"string"!=typeof e&&"link"===e.type}function py(e){return"string"!=typeof e&&"text"===e.type}function fy(e){var t,n,o,r,i,l,a,c,u,d;return gy(e)?(0,s.A)({},e):my(e)?{type:"tableCell",content:[].concat(e.content),props:{backgroundColor:null!==(t=null==(l=e.props)?void 0:l.backgroundColor)&&void 0!==t?t:"default",textColor:null!==(n=null==(a=e.props)?void 0:a.textColor)&&void 0!==n?n:"default",textAlignment:null!==(o=null==(c=e.props)?void 0:c.textAlignment)&&void 0!==o?o:"left",colspan:null!==(r=null==(u=e.props)?void 0:u.colspan)&&void 0!==r?r:1,rowspan:null!==(i=null==(d=e.props)?void 0:d.rowspan)&&void 0!==i?i:1}}:{type:"tableCell",content:[].concat(e),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function my(e){return null!=e&&"string"!=typeof e&&!Array.isArray(e)&&"tableCell"===e.type}function gy(e){return my(e)&&void 0!==e.props&&void 0!==e.content}function vy(e){var t;return gy(e)&&null!==(t=e.props.colspan)&&void 0!==t?t:1}function yy(e){var t;return gy(e)&&null!==(t=e.props.rowspan)&&void 0!==t?t:1}class by extends Error{constructor(e){super("Unreachable case: ".concat(e))}}function wy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{"data-test":n}=e,o=(0,l.A)(e,ry);if(Object.keys(o).length>0&&t)throw new Error("Object must be empty "+JSON.stringify(e))}function ky(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Ctrl";return typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent))?e.replace("Mod","\u2318"):e.replace("Mod",t)}function Cy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>e).join(" ")}const xy=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Sy(e,t,n,o){const r=document.createElement("div");r.className=Cy("bn-block-content",n.class),r.setAttribute("data-content-type",e);for(const[s,l]of Object.entries(n))"class"!==s&&r.setAttribute(s,l);const i=document.createElement(t);i.className=Cy("bn-inline-content",o.class);for(const[s,l]of Object.entries(o))"class"!==s&&i.setAttribute(s,l);return r.appendChild(i),{dom:r,contentDOM:i}}const Ay=(e,t)=>{let n=Db(e,t.pmSchema);"blockContainer"===n.type.name&&(n=n.firstChild);const o=t.pmSchema.nodes[n.type.name].spec.toDOM;if(void 0===o)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const r=o(n);if("object"!=typeof r||!("dom"in r))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return r};const Ey={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},Dy=["backgroundColor","textColor"];function My(e){return"data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ny(e){const t=e.split("/");return t.length&&""!==t[t.length-1]?t[t.length-1]:e}function Ty(e){const t={};return Object.entries(e).filter(e=>{let[t,n]=e;return!Dy.includes(t)}).forEach(e=>{let[n,o]=e;t[n]={default:o.default,keepOnSplit:!0,parseHTML:e=>{const t=e.getAttribute(My(n));if(null===t)return null;if(void 0===o.default&&"boolean"===o.type||void 0!==o.default&&"boolean"==typeof o.default)return"true"===t||"false"!==t&&null;if(void 0===o.default&&"number"===o.type||void 0!==o.default&&"number"==typeof o.default){const e=parseFloat(t);return!Number.isNaN(e)&&Number.isFinite(e)?e:null}return t},renderHTML:e=>e[n]!==o.default?{[My(n)]:e[n]}:{}}}),t}function Oy(e,t,n,o){if("boolean"==typeof e)throw new Error("Cannot find node position as getPos is a boolean, not a function.");const r=e(),i=n.state.doc.resolve(r).node().attrs.id;if(!i)throw new Error("Block doesn't have id");const s=t.getBlock(i);if(s.type!==o)throw new Error("Block type does not match");return s}function Py(e,t,n,o){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0;const l=document.createElement("div");if(void 0!==i)for(const[s,a]of Object.entries(i))"class"!==s&&l.setAttribute(s,a);l.className=Cy("bn-block-content",(null==i?void 0:i.class)||""),l.setAttribute("data-content-type",t);for(const[s,a]of Object.entries(n)){const e=o[s].default;!Dy.includes(s)&&a!==e&&l.setAttribute(My(s),a)}return r&&l.setAttribute("data-file-block",""),l.appendChild(e.dom),void 0!==e.contentDOM&&(e.contentDOM.className=Cy("bn-inline-content",e.contentDOM.className)),(0,s.A)((0,s.A)({},e),{},{dom:l})}function _y(e){return gl.create(e)}function Ly(e,t){return{config:e,implementation:t}}function Ry(e,t,n){return Ly({type:e.name,content:"inline*"===e.config.content?"inline":"tableRow+"===e.config.content?"table":"none",propSchema:t},{node:e,requiredExtensions:n,toInternalHTML:Ay,toExternalHTML:Ay})}function By(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,n.config]}))}function Iy(e,t){e.stopEvent=e=>("mousedown"===e.type&&setTimeout(()=>{t.view.dom.blur()},10),!0)}function Fy(e,t){const n=[{tag:"[data-content-type="+e.type+"]",contentElement:".bn-inline-content"}];return t&&n.push({tag:"*",getAttrs(e){if("string"==typeof e)return!1;const n=null==t?void 0:t(e);return void 0!==n&&n}}),n}function jy(e,t){var n;const o=_y({name:e.type,content:"inline"===e.content?"inline*":"",group:"blockContent",selectable:null===(n=e.isSelectable)||void 0===n||n,isolating:!0,addAttributes:()=>Ty(e.propSchema),parseHTML:()=>Fy(e,t.parse),renderHTML(t){let{HTMLAttributes:n}=t;const o=document.createElement("div");return Py({dom:o,contentDOM:"inline"===e.content?o:void 0},e.type,{},e.propSchema,e.isFileBlock,n)},addNodeView(){return n=>{let{getPos:o}=n;var r;const i=this.options.editor,s=Oy(o,i,this.editor,e.type),l=(null==(r=this.options.domAttributes)?void 0:r.blockContent)||{},a=Py(t.render(s,i),s.type,s.props,e.propSchema,l);return!1===e.isSelectable&&Iy(a,this.editor),a}}});if(o.name!==e.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return Ly(e,{node:o,toInternalHTML:(n,r)=>{var i;const s=(null==(i=o.options.domAttributes)?void 0:i.blockContent)||{};return Py(t.render(n,r),n.type,n.props,e.propSchema,e.isFileBlock,s)},toExternalHTML:(n,r)=>{var i,s;const l=(null==(i=o.options.domAttributes)?void 0:i.blockContent)||{};let a=null==(s=t.toExternalHTML)?void 0:s.call(t,n,r);return void 0===a&&(a=t.render(n,r)),Py(a,n.type,n.props,e.propSchema,l)}})}function zy(e,t){const n=e.resolve(t);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let o=n.depth,r=n.node(o);for(;o>0;){if(r.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(o),node:r};o--,r=n.node(o)}const i=[];e.descendants((e,t)=>{e.type.isInGroup("bnBlock")&&i.push(t)}),console.warn("Position ".concat(t," is not within a blockContainer node."));const s=e.resolve(i.find(e=>e>=t)||i[i.length-1]);return{posBeforeNode:s.pos,node:s.nodeAfter}}function Hy(e,t){if(!e.type.isInGroup("bnBlock"))throw new Error("Attempted to get bnBlock node at position but found node of different type ".concat(e.type.name));const n=e,o=t,r=o+n.nodeSize,i={node:n,beforePos:o,afterPos:r};if("blockContainer"===n.type.name){let e,t;if(n.forEach((n,r)=>{if("blockContent"===n.type.spec.group){const t=n,i=o+r+1,s=i+n.nodeSize;e={node:t,beforePos:i,afterPos:s}}else if("blockGroup"===n.type.name){const e=n,i=o+r+1,s=i+n.nodeSize;t={node:e,beforePos:i,afterPos:s}}}),!e)throw new Error("blockContainer node does not contain a blockContent node in its children: ".concat(n));return{isBlockContainer:!0,bnBlock:i,blockContent:e,childContainer:t,blockNoteType:e.node.type.name}}if(!i.node.type.isInGroup("childContainer"))throw new Error("bnBlock node is not in the childContainer group: ".concat(i.node));return{isBlockContainer:!1,bnBlock:i,childContainer:i,blockNoteType:i.node.type.name}}function Vy(e){return Hy(e.node,e.posBeforeNode)}function Uy(e){if(!e.nodeAfter)throw new Error("Attempted to get blockContainer node at position ".concat(e.pos," but a node at this position does not exist"));return Hy(e.nodeAfter,e.pos)}function $y(e){return Vy(zy(e.doc,e.selection.anchor))}function Wy(e){return Vy(zy(e.doc,e.selection.anchor))}function qy(e){return"doc"in e?e.doc.type.schema:e.type.schema}function Gy(e){return e.cached.blockNoteEditor}function Ky(e){return Gy(e).schema}function Zy(e){return Ky(e).blockSchema}function Jy(e){return Ky(e).inlineContentSchema}function Xy(e){return Ky(e).styleSchema}function Qy(e){return Gy(e).blockCache}function Yy(e,t,n){var o,r;const i={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},s=[];e.content.forEach((e,o,r)=>{const l={cells:[]};0===r&&e.content.forEach(e=>{var t;let n=e.attrs.colwidth;null==n&&(n=new Array(null!==(t=e.attrs.colspan)&&void 0!==t?t:1).fill(void 0)),i.columnWidths.push(...n)}),l.cells=e.content.content.map((e,o)=>(s[r]||(s[r]=[]),s[r][o]="tableHeader"===e.type.name,{type:"tableCell",content:e.content.content.map(e=>eb(e,t,n)).reduce((e,t)=>{if(!e.length)return t;const n=e[e.length-1],o=t[0];return o&&py(n)&&py(o)&&JSON.stringify(n.styles)===JSON.stringify(o.styles)?(n.text+="\n"+o.text,e.push(...t.slice(1)),e):(e.push(...t),e)},[]),props:{colspan:e.attrs.colspan,rowspan:e.attrs.rowspan,backgroundColor:e.attrs.backgroundColor,textColor:e.attrs.textColor,textAlignment:e.attrs.textAlignment}})),i.rows.push(l)});for(let c=0;c<s.length;c++){var l;null!=(o=s[c])&&o.every(e=>e)&&(i.headerRows=(null!==(l=i.headerRows)&&void 0!==l?l:0)+1)}for(let c=0;c<(null==(r=s[0])?void 0:r.length);c++){var a;null!=s&&s.every(e=>e[c])&&(i.headerCols=(null!==(a=i.headerCols)&&void 0!==a?a:0)+1)}return i}function eb(e,t,n){const o=[];let r;return e.content.forEach(e=>{if("hardBreak"===e.type.name){if(r)if(py(r))r.text+="\n";else{if(!dy(r))throw new Error("unexpected");r.content[r.content.length-1].text+="\n"}else r={type:"text",text:"\n",styles:{}};return}if("link"!==e.type.name&&"text"!==e.type.name)return t[e.type.name]?(r&&(o.push(r),r=void 0),void o.push(tb(e,t,n))):void console.warn("unrecognized inline content type",e.type.name);const i={};let s;for(const t of e.marks)if("link"===t.type.name)s=t;else{const e=n[t.type.name];if(!e){if(t.type.spec.blocknoteIgnore)continue;throw new Error("style ".concat(t.type.name," not found in styleSchema"))}if("boolean"===e.propSchema)i[e.type]=!0;else{if("string"!==e.propSchema)throw new by(e.propSchema);i[e.type]=t.attrs.stringValue}}r?py(r)?s?(o.push(r),r={type:"link",href:s.attrs.href,content:[{type:"text",text:e.textContent,styles:i}]}):JSON.stringify(r.styles)===JSON.stringify(i)?r.text+=e.textContent:(o.push(r),r={type:"text",text:e.textContent,styles:i}):dy(r)&&(s?r.href===s.attrs.href?JSON.stringify(r.content[r.content.length-1].styles)===JSON.stringify(i)?r.content[r.content.length-1].text+=e.textContent:r.content.push({type:"text",text:e.textContent,styles:i}):(o.push(r),r={type:"link",href:s.attrs.href,content:[{type:"text",text:e.textContent,styles:i}]}):(o.push(r),r={type:"text",text:e.textContent,styles:i})):r=s?{type:"link",href:s.attrs.href,content:[{type:"text",text:e.textContent,styles:i}]}:{type:"text",text:e.textContent,styles:i}}),r&&o.push(r),o}function tb(e,t,n){if("text"===e.type.name||"link"===e.type.name)throw new Error("unexpected");const o={},r=t[e.type.name];for(const[s,l]of Object.entries(e.attrs)){if(!r)throw Error("ic node is of an unrecognized type: "+e.type.name);s in r.propSchema&&(o[s]=l)}let i;return i="styled"===r.content?eb(e,t,n):void 0,{type:e.type.name,props:o,content:i}}function nb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zy(t),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jy(t),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xy(t),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Qy(t);var l;if(!e.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+e.type.name);const a=null==i?void 0:i.get(e);if(a)return a;const c=Hy(e,0);let u=c.bnBlock.node.attrs.id;null===u&&(u=uy.options.generateID());const d=n[c.blockNoteType];if(!d)throw Error("Block is of an unrecognized type: "+c.blockNoteType);const h={};for(const[v,y]of Object.entries((0,s.A)((0,s.A)({},e.attrs),c.isBlockContainer?c.blockContent.node.attrs:{}))){const e=d.propSchema;v in e&&(void 0!==e[v].default||void 0!==y)&&(h[v]=y)}const p=n[c.blockNoteType],f=[];let m;if(null==(l=c.childContainer)||l.node.forEach(e=>{f.push(nb(e,t,n,o,r,i))}),"inline"===p.content){if(!c.isBlockContainer)throw new Error("impossible");m=eb(c.blockContent.node,o,r)}else if("table"===p.content){if(!c.isBlockContainer)throw new Error("impossible");m=Yy(c.blockContent.node,o,r)}else{if("none"!==p.content)throw new by(p.content);m=void 0}const g={id:u,type:p.type,props:h,content:m,children:f};return null==i||i.set(e,g),g}function ob(e,t,n,o){return e.dom.setAttribute("data-inline-content-type",t),Object.entries(n).filter(e=>{let[t,n]=e;return n!==o[t].default}).map(e=>{let[t,n]=e;return[My(t),n]}).forEach(t=>{let[n,o]=t;return e.dom.setAttribute(n,o)}),void 0!==e.contentDOM&&e.contentDOM.setAttribute("data-editable",""),e}function rb(e){return{Backspace:t=>{let{editor:n}=t;const o=n.state.selection.$from;return n.state.selection.empty&&o.node().type.name===e.type&&0===o.parentOffset}}}function ib(e,t){return{config:e,implementation:t}}function sb(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,n.config]}))}function lb(e){return[{tag:'[data-inline-content-type="'.concat(e.type,'"]'),contentElement:e=>{const t=e;return t.matches("[data-editable]")?t:t.querySelector("[data-editable]")||t}}]}function ab(e,t){return{config:e,implementation:t}}function cb(e,t){return ab({type:e.name,propSchema:t},{mark:e})}function ub(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,n.config]}))}function db(e){const{height:t,width:n}=fb(e),o=new Array(t).fill(!1).map(()=>new Array(n).fill(null)),r=(e,r)=>{for(let i=e;i<t;i++)for(let e=r;e<n;e++)if(!o[i][e])return{row:i,col:e};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let i=0;i<e.content.rows.length;i++)for(let t=0;t<e.content.rows[i].cells.length;t++){const n=fy(e.content.rows[i].cells[t]),s=yy(n),l=vy(n),{row:a,col:c}=r(i,t);for(let e=a;e<a+s;e++)for(let r=c;r<c+l;r++){if(o[e][r])throw new Error("Unable to create occupancy grid for table, cell at ".concat(e,",").concat(r," is already occupied"));o[e][r]={row:i,col:t,rowspan:s,colspan:l,cell:n}}}return o}function hb(e){const t=new Set;return e.map(e=>({cells:e.map(e=>!t.has(e.row+":"+e.col)&&(t.add(e.row+":"+e.col),e.cell)).filter(e=>!1!==e)}))}function pb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:db(t);for(let o=0;o<n.length;o++)for(let t=0;t<n[o].length;t++){const r=n[o][t];if(r.row===e.row&&r.col===e.col)return{row:o,col:t,cell:r.cell}}throw new Error("Unable to resolve relative table cell indices for table, cell at ".concat(e.row,",").concat(e.col," is not occupied"))}function fb(e){const t=e.content.rows.length;let n=0;return e.content.rows.forEach(e=>{let t=0;e.cells.forEach(e=>{t+=vy(e)}),n=Math.max(n,t)}),{height:t,width:n}}function mb(e,t){var n;const o=null==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:db(t))[e.row])?void 0:n[e.col];if(o)return{row:o.row,col:o.col,cell:o.cell}}function gb(e,t){var n;const o=db(e);if(t<0||t>=o.length)return[];let r=0;for(let s=0;s<t;s++){const e=null==(n=o[r])?void 0:n[0];if(!e)return[];r+=e.rowspan}const i=new Array(o[0].length).fill(!1).map((t,n)=>mb({row:r,col:n},e,o)).filter(e=>void 0!==e);return i.filter((e,t)=>i.findIndex(t=>t.row===e.row&&t.col===e.col)===t)}function vb(e,t){var n;const o=db(e);if(t<0||t>=o[0].length)return[];let r=0;for(let s=0;s<t;s++){const e=null==(n=o[0])?void 0:n[r];if(!e)return[];r+=e.colspan}const i=new Array(o.length).fill(!1).map((t,n)=>mb({row:n,col:r},e,o)).filter(e=>void 0!==e);return i.filter((e,t)=>i.findIndex(t=>t.row===e.row&&t.col===e.col)===t)}function yb(e){return!e||(my(e)?yb(e.content):"string"==typeof e?0===e.length:!!Array.isArray(e)&&e.every(e=>"string"==typeof e?0===e.length:py(e)?0===e.text.length:!!hy(e)&&("string"==typeof e.content?0===e.content.length:e.content.every(e=>0===e.text.length))))}function bb(e,t,n){const o=gb(e,n);if(!o.some(e=>yy(e.cell)>1))return!0;let r=n,i=n;return o.forEach(e=>{const t=yy(e.cell);r=Math.max(r,e.row+t-1),i=Math.min(i,e.row)}),t<n?n===r:n===i}function wb(e,t,n){const o=vb(e,n);if(!o.some(e=>vy(e.cell)>1))return!0;let r=n,i=n;return o.forEach(e=>{const t=vy(e.cell);r=Math.max(r,e.col+t-1),i=Math.min(i,e.col)}),t<n?n===r:n===i}function kb(e,t,n,o){const r=[];for(const[i,s]of Object.entries(e.styles||{})){const e=n[i];if(!e)throw new Error("style ".concat(i," not found in styleSchema"));if("boolean"===e.propSchema)s&&r.push(t.mark(i));else{if("string"!==e.propSchema)throw new by(e.propSchema);s&&r.push(t.mark(i,{stringValue:s}))}}return o&&t.nodes[o].spec.code?e.text.length>0?[t.text(e.text,r)]:[]:e.text.split(/(\n)/g).filter(e=>e.length>0).map(e=>"\n"===e?t.nodes.hardBreak.createChecked():t.text(e,r))}function Cb(e,t,n){const o=t.marks.link.create({href:e.href});return xb(e.content,t,n).map(e=>{if("text"===e.type.name)return e.mark([...e.marks,o]);if("hardBreak"===e.type.name)return e;throw new Error("unexpected node type")})}function xb(e,t,n,o){const r=[];if("string"==typeof e)return r.push(...kb({text:e,styles:{}},t,n,o)),r;for(const i of e)r.push(...kb(i,t,n,o));return r}function Sb(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xy(t);const r=[];for(const i of e)"string"==typeof i?r.push(...xb(i,t,o,n)):hy(i)?r.push(...Cb(i,t,o)):py(i)?r.push(...xb([i],t,o,n)):r.push(Eb(i,t,o));return r}function Ab(e,t){var n,o,r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xy(t);const l=[],a=new Array(null!==(n=e.headerRows)&&void 0!==n?n:0).fill(!0),c=new Array(null!==(o=e.headerCols)&&void 0!==o?o:0).fill(!0),u=null!==(r=e.columnWidths)&&void 0!==r?r:[];for(let d=0;d<e.rows.length;d++){const n=e.rows[d],o=[],r=a[d];for(let l=0;l<n.cells.length;l++){const a=n.cells[l],h=c[l],p=void 0;let f=null;const m=pb({row:d,col:l},{content:e});let g=u[m.col]?[u[m.col]]:null;if(a)if("string"==typeof a)f=t.text(a);else if(my(a)){a.content&&(f=Sb(a.content,t,"tableParagraph",i));const e=vy(a);e>1&&(g=new Array(e).fill(!1).map((e,t)=>{var n;return null!==(n=u[m.col+t])&&void 0!==n?n:void 0}))}else f=Sb(a,t,"tableParagraph",i);const v=t.nodes[h||r?"tableHeader":"tableCell"].createChecked((0,s.A)((0,s.A)({},my(a)?a.props:{}),{},{colwidth:g}),t.nodes.tableParagraph.createChecked(p,f));o.push(v)}const h=t.nodes.tableRow.createChecked({},o);l.push(h)}return l}function Eb(e,t,n){let o,r=e.type;if(void 0===r&&(r="paragraph"),!t.nodes[r])throw new Error("node type ".concat(r," not found in schema"));if(e.content)if("string"==typeof e.content){const i=Sb([e.content],t,r,n);o=t.nodes[r].createChecked(e.props,i)}else if(Array.isArray(e.content)){const i=Sb(e.content,t,r,n);o=t.nodes[r].createChecked(e.props,i)}else{if("tableContent"!==e.content.type)throw new by(e.content.type);{const i=Ab(e.content,t,n);o=t.nodes[r].createChecked(e.props,i)}}else o=t.nodes[r].createChecked(e.props);return o}function Db(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xy(t),o=e.id;void 0===o&&(o=uy.options.generateID());const r=[];if(e.children)for(const i of e.children)r.push(Db(i,t,n));if(!e.type||t.nodes[e.type].isInGroup("blockContent")){const i=Eb(e,t,n),l=r.length>0?t.nodes.blockGroup.createChecked({},r):void 0;return t.nodes.blockContainer.createChecked((0,s.A)({id:o},e.props),l?[i,l]:i)}if(t.nodes[e.type].isInGroup("bnBlock"))return t.nodes[e.type].createChecked((0,s.A)({id:o},e.props),r);throw new Error("block type ".concat(e.type," doesn't match blockContent or bnBlock group"))}function Mb(e,t){let n,o;if(t.firstChild.descendants((t,r)=>!n&&(!Nb(t)||t.attrs.id!==e||(n=t,o=r+1,!1))),void 0!==n&&void 0!==o)return{node:n,posBeforeNode:o}}function Nb(e){return e.type.isInGroup("bnBlock")}function Tb(e,t){return e.id!==t.id||e.type!==t.type||JSON.stringify(e.props)!==JSON.stringify(t.props)||JSON.stringify(e.content)!==JSON.stringify(t.content)}function Ob(e,t,n){const o=qy(e),r=n.map(e=>Db(e,o)),i=new Set(t.map(e=>"string"==typeof e?e:e.id)),s=[],l="string"==typeof t[0]?t[0]:t[0].id;let a=0;if(e.doc.descendants((t,c)=>{if(0===i.size)return!1;if(!t.type.isInGroup("bnBlock")||!i.has(t.attrs.id))return!0;if(s.push(nb(t,o)),i.delete(t.attrs.id),n.length>0&&t.attrs.id===l){const t=e.doc.nodeSize;e.insert(c,r);const n=e.doc.nodeSize;a+=t-n}const u=e.doc.nodeSize,d=e.doc.resolve(c-a);"blockGroup"===d.node().type.name&&"doc"!==d.node(d.depth-1).type.name&&1===d.node().childCount?e.delete(d.before(),d.after()):e.delete(c-a,c-a+t.nodeSize);const h=e.doc.nodeSize;return a+=u-h,!1}),i.size>0){const e=[...i].join("\n");throw Error("Blocks with the following IDs could not be found in the editor: "+e)}return{insertedBlocks:r.map(e=>nb(e,o)),removedBlocks:s}}const Pb=(e,t)=>n=>{let{tr:o,dispatch:r}=n;return r&&_b(o,e,t),!0};function _b(e,t,n,o,r){const i=Uy(e.doc.resolve(t)),l=qy(e);if(void 0!==o&&void 0!==r&&o>r)throw new Error("Invalid replaceFromPos or replaceToPos");const a=l.nodes[i.blockNoteType],c=l.nodes[n.type||i.blockNoteType],u=c.isInGroup("bnBlock")?c:l.nodes.blockContainer;if(i.isBlockContainer&&c.isInGroup("blockContent")){const t=void 0!==o&&o>i.blockContent.beforePos&&o<i.blockContent.afterPos?o-i.blockContent.beforePos-1:void 0,l=void 0!==r&&r>i.blockContent.beforePos&&r<i.blockContent.afterPos?r-i.blockContent.beforePos-1:void 0;Lb(n,e,i),function(e,t,n,o,r,i,l){const a=qy(t);let c="keep";if(e.content)if("string"==typeof e.content)c=Sb([e.content],a,o.name);else if(Array.isArray(e.content))c=Sb(e.content,a,o.name);else{if("tableContent"!==e.content.type)throw new by(e.content.type);c=Ab(e.content,a)}else""===n.spec.content||o.spec.content!==n.spec.content&&(c=[]);if("keep"===c)t.setNodeMarkup(r.blockContent.beforePos,o,(0,s.A)((0,s.A)({},r.blockContent.node.attrs),e.props));else if(void 0!==i||void 0!==l){t.setNodeMarkup(r.blockContent.beforePos,o,(0,s.A)((0,s.A)({},r.blockContent.node.attrs),e.props));const n=r.blockContent.beforePos+1+(null!==i&&void 0!==i?i:0),a=r.blockContent.beforePos+1+(null!==l&&void 0!==l?l:r.blockContent.node.content.size),u=t.doc.resolve(r.blockContent.beforePos).depth,d=t.doc.resolve(n).depth,p=t.doc.resolve(a).depth;t.replace(n,a,new y(h.from(c),d-u-1,p-u-1))}else t.replaceWith(r.blockContent.beforePos,r.blockContent.afterPos,o.createChecked((0,s.A)((0,s.A)({},r.blockContent.node.attrs),e.props),c))}(n,e,a,c,i,t,l)}else{if(i.isBlockContainer||!c.isInGroup("bnBlock")){const t=nb(i.bnBlock.node,l);return void e.replaceWith(i.bnBlock.beforePos,i.bnBlock.afterPos,Db((0,s.A)({children:t.children},n),l))}Lb(n,e,i)}e.setNodeMarkup(i.bnBlock.beforePos,u,(0,s.A)((0,s.A)({},i.bnBlock.node.attrs),n.props))}function Lb(e,t,n){const o=qy(t);if(void 0!==e.children&&e.children.length>0){const r=e.children.map(e=>Db(e,o));if(n.childContainer)t.step(new _e(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new y(h.from(r),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");t.insert(n.blockContent.afterPos,o.nodes.blockGroup.createChecked({},r))}}}function Rb(e){const t=Array.from(e.classList).filter(e=>!e.startsWith("bn-"))||[];t.length>0?e.className=t.join(" "):e.removeAttribute("class")}function Bb(e,t,n,o){let r;if(!t)throw new Error("blockContent is required");if("string"==typeof t)r=Sb([t],e.pmSchema);else if(Array.isArray(t))r=Sb(t,e.pmSchema);else{if("tableContent"!==t.type)throw new by(t.type);r=Ab(t,e.pmSchema)}const i=n.serializeFragment(h.from(r),o);return 1===i.nodeType&&Rb(i),i}function Ib(e,t,n,o,r,i,l){var a,c,u,d,h,p,f,m,g;const v=null!==(a=null==l?void 0:l.document)&&void 0!==a?a:document,y=t.pmSchema.nodes.blockContainer;let b=n.props;if(!n.props){b={};for(const[e,o]of Object.entries(t.schema.blockSchema[n.type].propSchema))void 0!==o.default&&(b[e]=o.default)}const w=null==(u=null==(c=y.spec)?void 0:c.toDOM)?void 0:u.call(c,y.create((0,s.A)({id:n.id},b))),k=Array.from(w.dom.attributes),C=t.blockImplementations[n.type].implementation.toExternalHTML((0,s.A)((0,s.A)({},n),{},{props:b}),t),x=v.createDocumentFragment();if(C.dom.classList.contains("bn-block-content")){const e=[...k,...Array.from(C.dom.attributes)].filter(e=>e.name.startsWith("data")&&"data-content-type"!==e.name&&"data-file-block"!==e.name&&"data-node-view-wrapper"!==e.name&&"data-node-type"!==e.name&&"data-id"!==e.name&&"data-index"!==e.name&&"data-editable"!==e.name);for(const t of e)C.dom.firstChild.setAttribute(t.name,t.value);Rb(C.dom.firstChild),x.append(...Array.from(C.dom.childNodes))}else x.append(C.dom);if(C.contentDOM&&n.content){const e=Bb(t,n.content,o,l);C.contentDOM.appendChild(e)}let S;if(r.has(n.type)?S="OL":i.has(n.type)&&(S="UL"),S){if((null==(d=e.lastChild)?void 0:d.nodeName)!==S){const t=v.createElement(S);"OL"===S&&null!=b&&b.start&&1!==(null==b?void 0:b.start)&&t.setAttribute("start",b.start+""),e.append(t)}const t=v.createElement("li");t.append(x),e.lastChild.appendChild(t)}else e.append(x);if(n.children&&n.children.length>0){const s=v.createDocumentFragment();if(Fb(s,t,n.children,o,r,i,l),"UL"===(null==(h=e.lastChild)?void 0:h.nodeName)||"OL"===(null==(p=e.lastChild)?void 0:p.nodeName))for(;"UL"===(null==(f=s.firstChild)?void 0:f.nodeName)||"OL"===(null==(m=s.firstChild)?void 0:m.nodeName);)e.lastChild.lastChild.appendChild(s.firstChild);t.pmSchema.nodes[n.type].isInGroup("blockContent")?e.append(s):null==(g=C.contentDOM)||g.append(s)}}const Fb=(e,t,n,o,r,i,s)=>{for(const l of n)Ib(e,t,l,o,r,i,s)},jb=(e,t)=>{const n=pe.fromSchema(e);return{exportBlocks:(e,o)=>{const r=((e,t,n,o,r,i)=>{var s;const l=(null!==(s=null==i?void 0:i.document)&&void 0!==s?s:document).createDocumentFragment();return Fb(l,e,t,n,o,r,i),l})(t,e,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),o),i=document.createElement("div");return i.append(r),i.innerHTML},exportInlineContent:(e,o)=>{const r=Bb(t,e,n,o),i=document.createElement("div");return i.append(r.cloneNode(!0)),i.innerHTML}}};function zb(e,t,n,o,r){var i,l,a,c,u;const d=e.pmSchema.nodes.blockContainer;let p=t.props;if(!t.props){p={};for(const[n,o]of Object.entries(e.schema.blockSchema[t.type].propSchema))void 0!==o.default&&(p[n]=o.default)}const f=e.blockImplementations[t.type].implementation.toInternalHTML((0,s.A)((0,s.A)({},t),{},{props:p}),e);if("numberedListItem"===t.type&&f.dom.setAttribute("data-index",o.toString()),f.contentDOM&&t.content){const o=function(e,t,n,o,r){let i;if(!t)throw new Error("blockContent is required");if("string"==typeof t)i=Sb([t],e.pmSchema,o);else if(Array.isArray(t))i=Sb(t,e.pmSchema,o);else{if("tableContent"!==t.type)throw new by(t.type);i=Ab(t,e.pmSchema)}return n.serializeFragment(h.from(i),r)}(e,t.content,n,t.type,r);f.contentDOM.appendChild(o)}if(e.pmSchema.nodes[t.type].isInGroup("bnBlock")){if(t.children&&t.children.length>0){const o=Hb(e,t.children,n,r);null==(i=f.contentDOM)||i.append(o)}return f.dom}const m=null==(a=null==(l=d.spec)?void 0:l.toDOM)?void 0:a.call(l,d.create((0,s.A)({id:t.id},p)));return null==(c=m.contentDOM)||c.appendChild(f.dom),t.children&&t.children.length>0&&(null==(u=m.contentDOM)||u.appendChild(Vb(e,t.children,n,r))),m.dom}function Hb(e,t,n,o){var r;const i=(null!==(r=null==o?void 0:o.document)&&void 0!==r?r:document).createDocumentFragment();let s=0;for(const l of t){"numberedListItem"===l.type?s++:s=0;const t=zb(e,l,n,s,o);i.appendChild(t)}return i}const Vb=(e,t,n,o)=>{var r;const i=e.pmSchema.nodes.blockGroup,s=i.spec.toDOM(i.create({})),l=Hb(e,t,n,o);return null==(r=s.contentDOM)||r.appendChild(l),s.dom},Ub=(e,t)=>{var n;const o=e.querySelector(t);if(!o)return;const r=e.querySelector("figcaption");return{targetElement:o,caption:null!==(n=null==r?void 0:r.textContent)&&void 0!==n?n:void 0}},$b=(e,t,n,o,r)=>{const i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",""===e.props.url){const n=((e,t,n,o)=>{const r=document.createElement("div");r.className="bn-add-file-button";const i=document.createElement("div");i.className="bn-add-file-button-icon",o?i.appendChild(o):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',r.appendChild(i);const s=document.createElement("p");s.className="bn-add-file-button-text",s.innerHTML=n||t.dictionary.file_blocks.file.add_button_text,r.appendChild(s);const l=e=>{e.preventDefault()},a=()=>{t.transact(n=>n.setMeta(t.filePanel.plugins[0],{block:e}))};return r.addEventListener("mousedown",l,!0),r.addEventListener("click",a,!0),{dom:r,destroy:()=>{r.removeEventListener("mousedown",l,!0),r.removeEventListener("click",a,!0)}}})(e,t,o,r);i.appendChild(n.dom);const s=t.onUploadStart(t=>{if(t===e.id){i.removeChild(n.dom);const e=document.createElement("div");e.className="bn-file-loading-preview",e.textContent="Loading...",i.appendChild(e)}});return{dom:i,destroy:()=>{s(),n.destroy()}}}const s={dom:i};if(!1!==e.props.showPreview&&n)i.appendChild(n.dom);else{const t=(e=>{const t=document.createElement("div");t.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',t.appendChild(n);const o=document.createElement("p");return o.className="bn-file-name",o.textContent=e.props.name,t.appendChild(o),{dom:t}})(e);i.appendChild(t.dom),s.destroy=()=>{var e;null==(e=t.destroy)||e.call(t)}}if(e.props.caption){const t=document.createElement("p");t.className="bn-file-caption",t.textContent=e.props.caption,i.appendChild(t)}return s},Wb=(e,t)=>{const n=document.createElement("figure"),o=document.createElement("figcaption");return o.textContent=t,n.appendChild(e),n.appendChild(o),{dom:n}},qb=(e,t)=>{const n=document.createElement("div"),o=document.createElement("p");return o.textContent=t,n.appendChild(e),n.appendChild(o),{dom:n}},Gb=e=>({url:e.src||void 0}),Kb={type:"audio",propSchema:{backgroundColor:Ey.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},Zb=e=>{if("AUDIO"===e.tagName)return e.closest("figure")?void 0:Gb(e);if("FIGURE"===e.tagName){const t=Ub(e,"audio");if(!t)return;const{targetElement:n,caption:o}=t;return(0,s.A)((0,s.A)({},Gb(n)),{},{caption:o})}},Jb=jy(Kb,{render:(e,t)=>{const n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>';const o=document.createElement("audio");return o.className="bn-audio",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then(e=>{o.src=e}):o.src=e.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,$b(e,t,{dom:o},t.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},parse:Zb,toExternalHTML:e=>{if(!e.props.url){const e=document.createElement("p");return e.textContent="Add audio",{dom:e}}let t;return e.props.showPreview?(t=document.createElement("audio"),t.src=e.props.url):(t=document.createElement("a"),t.href=e.props.url,t.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?Wb(t,e.props.caption):qb(t,e.props.caption):{dom:t}}}),Xb=Symbol.for("blocknote.shikiParser"),Qb=Symbol.for("blocknote.shikiHighlighterPromise"),Yb=_y({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions:()=>({defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}),addAttributes(){const e=this.options;return{language:{default:e.editor.settings.codeBlock.defaultLanguage,parseHTML:t=>{var n;let o=t,r=null;"DIV"===(null==o?void 0:o.tagName)&&"codeBlock"===(null==o?void 0:o.dataset.contentType)&&(o=o.children[0]),"PRE"===(null==o?void 0:o.tagName)&&(o=null==o?void 0:o.children[0]);const i=null==o?void 0:o.getAttribute("data-language");if(i)r=i.toLowerCase();else{const e=[...(null==o?void 0:o.className.split(" "))||[]].filter(e=>e.startsWith("language-")).map(e=>e.replace("language-",""));e.length>0&&(r=e[0].toLowerCase())}return r?null!==(n=tw(e.editor.settings.codeBlock,r))&&void 0!==n?n:r:null},renderHTML:e=>e.language?{class:"language-".concat(e.language),"data-language":e.language}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML(e){let{HTMLAttributes:t}=e;var n,o;const r=document.createElement("pre"),{dom:i,contentDOM:l}=Sy(this.name,"code",(null==(n=this.options.domAttributes)?void 0:n.blockContent)||{},(0,s.A)((0,s.A)({},(null==(o=this.options.domAttributes)?void 0:o.inlineContent)||{}),t));return i.removeChild(l),i.appendChild(r),r.appendChild(l),{dom:i,contentDOM:l}},addNodeView(){const e=this.options;return t=>{let{editor:n,node:o,getPos:r,HTMLAttributes:i}=t;var l,a;const c=document.createElement("pre"),u=document.createElement("select"),d=document.createElement("div"),{dom:h,contentDOM:p}=Sy(this.name,"code",(0,s.A)((0,s.A)({},(null==(l=this.options.domAttributes)?void 0:l.blockContent)||{}),i),(null==(a=this.options.domAttributes)?void 0:a.inlineContent)||{}),f=e=>{const t=e.target.value;n.commands.command(e=>{let{tr:n}=e;return n.setNodeAttribute(r(),"language",t),!0})};return Object.entries(e.editor.settings.codeBlock.supportedLanguages).forEach(e=>{let[t,{name:n}]=e;const o=document.createElement("option");o.value=t,o.text=n,u.appendChild(o)}),d.contentEditable="false",u.value=o.attrs.language||e.editor.settings.codeBlock.defaultLanguage,h.removeChild(p),h.appendChild(d),h.appendChild(c),c.appendChild(p),d.appendChild(u),u.addEventListener("change",f),{dom:h,contentDOM:p,update:e=>e.type===this.type,destroy:()=>{u.removeEventListener("change",f)}}}},addProseMirrorPlugins(){const e=this.options,t=globalThis;let n,o;return[Nl({parser:r=>{if(!e.editor.settings.codeBlock.createHighlighter)return[];if(!n)return t[Qb]=t[Qb]||e.editor.settings.codeBlock.createHighlighter(),t[Qb].then(e=>{n=e});const i=tw(e.editor.settings.codeBlock,r.language);return i&&"text"!==i&&"none"!==i&&"plaintext"!==i&&"txt"!==i?n.getLoadedLanguages().includes(i)?(o||(o=t[Xb]||function(e,t){return function(n){let{content:o,language:r,pos:i,size:l}=n;var a;const c=[],{tokens:u,fg:d,bg:h,rootStyle:p}=e.codeToTokens(o,(0,s.A)({lang:r},null!=t?t:{theme:e.getLoadedThemes()[0]})),f=p||(d&&h?"--prosemirror-highlight:".concat(d,";--prosemirror-highlight-bg:").concat(h):"");if(f){const e=vr.node(i,i+l,{style:f});c.push(e)}let m=i+1;for(const e of u){for(const t of e){const e=m+t.content.length,n=vr.inline(m,e,{style:Ol(null!=(a=t.htmlStyle)?a:"color: ".concat(t.color)),class:"shiki"});c.push(n),m=e}m+=1}return c}}(n),t[Xb]=o),o(r)):n.loadLanguage(i):[]},languageExtractor:e=>e.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const e=this.options;return[new ns({find:/^```(.*?)\s$/,handler:t=>{var n;let{state:o,range:r,match:i}=t;const s=o.doc.resolve(r.from),l=i[1].trim(),a={language:null!==(n=tw(e.editor.settings.codeBlock,l))&&void 0!==n?n:l};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),this.type))return null;o.tr.delete(r.from,r.to).setBlockType(r.from,r.from,this.type,a).setSelection(ft.create(o.tr.doc,r.from))}})]},addKeyboardShortcuts(){return{Delete:e=>{let{editor:t}=e;const{selection:n}=t.state,{$from:o}=n;if(t.isActive(this.name)&&!o.parent.textContent&&xs(n)){const e=o.pos-o.parentOffset-2;return t.chain().setNodeSelection(e).deleteSelection().run(),!0}return!1},Tab:e=>{let{editor:t}=e;return!(!this.options.indentLineWithTab||!t.isActive(this.name))&&(t.commands.insertContent("  "),!0)},Enter:e=>{let{editor:t}=e;const{$from:n}=t.state.selection;if(!t.isActive(this.name))return!1;const o=n.parentOffset===n.parent.nodeSize-2,r=n.parent.textContent.endsWith("\n\n");return o&&r?t.chain().command(e=>{let{tr:t}=e;return t.delete(n.pos-2,n.pos),!0}).exitCode().run():(t.commands.insertContent("\n"),!0)},"Shift-Enter":e=>{let{editor:t}=e;const{$from:n}=t.state.selection;return!!t.isActive(this.name)&&(t.chain().insertContentAt(n.pos-n.parentOffset+n.parent.nodeSize,{type:"paragraph"}).run(),!0)}}}}),ew=Ry(Yb,{language:{default:"text"}});function tw(e,t){var n;return null==(n=Object.entries(e.supportedLanguages).find(e=>{let[n,{aliases:o}]=e;return(null==o?void 0:o.includes(t))||n===t}))?void 0:n[0]}const nw=cb(as.create({name:"backgroundColor",addAttributes:()=>({stringValue:{default:void 0,parseHTML:e=>e.getAttribute("data-background-color"),renderHTML:e=>({"data-background-color":e.stringValue})}}),parseHTML:()=>[{tag:"span",getAttrs:e=>"string"!=typeof e&&(!!e.hasAttribute("data-background-color")&&{stringValue:e.getAttribute("data-background-color")})}],renderHTML(e){let{HTMLAttributes:t}=e;return["span",t,0]}}),"string"),ow=cb(as.create({name:"textColor",addAttributes:()=>({stringValue:{default:void 0,parseHTML:e=>e.getAttribute("data-text-color"),renderHTML:e=>({"data-text-color":e.stringValue})}}),parseHTML:()=>[{tag:"span",getAttrs:e=>"string"!=typeof e&&(!!e.hasAttribute("data-text-color")&&{stringValue:e.getAttribute("data-text-color")})}],renderHTML(e){let{HTMLAttributes:t}=e;return["span",t,0]}}),"string"),rw=e=>({url:e.src||void 0}),iw={type:"file",propSchema:{backgroundColor:Ey.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},content:"none",isFileBlock:!0},sw=e=>{if("EMBED"===e.tagName)return e.closest("figure")?void 0:rw(e);if("FIGURE"===e.tagName){const t=Ub(e,"embed");if(!t)return;const{targetElement:n,caption:o}=t;return(0,s.A)((0,s.A)({},rw(n)),{},{caption:o})}},lw=jy(iw,{render:(e,t)=>$b(e,t),parse:sw,toExternalHTML:e=>{if(!e.props.url){const e=document.createElement("p");return e.textContent="Add file",{dom:e}}const t=document.createElement("a");return t.href=e.props.url,t.textContent=e.props.name||e.props.url,e.props.caption?qb(t,e.props.caption):{dom:t}}}),aw=(0,s.A)((0,s.A)({},Ey),{},{level:{default:1,values:[1,2,3]}}),cw=_y({name:"heading",content:"inline*",group:"blockContent",addAttributes:()=>Ty(aw),addInputRules:()=>[...[1,2,3].map(e=>new ns({find:new RegExp("^(#{".concat(e,"})\\s$")),handler:t=>{let{state:n,chain:o,range:r}=t;const i=$y(n);!i.isBlockContainer||"inline*"!==i.blockContent.node.type.spec.content||o().command(Pb(i.bnBlock.beforePos,{type:"heading",props:{level:e}})).deleteRange({from:r.from,to:r.to}).run()}}))],addKeyboardShortcuts(){return{"Mod-Alt-1":()=>{const e=$y(this.editor.state);return!e.isBlockContainer||"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command(Pb(e.bnBlock.beforePos,{type:"heading",props:{level:1}}))},"Mod-Alt-2":()=>{const e=$y(this.editor.state);return!e.isBlockContainer||"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command(Pb(e.bnBlock.beforePos,{type:"heading",props:{level:2}}))},"Mod-Alt-3":()=>{const e=$y(this.editor.state);return!e.isBlockContainer||"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command(Pb(e.bnBlock.beforePos,{type:"heading",props:{level:3}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"h1",attrs:{level:1},node:"heading"},{tag:"h2",attrs:{level:2},node:"heading"},{tag:"h3",attrs:{level:3},node:"heading"}]},renderHTML(e){let{node:t,HTMLAttributes:n}=e;var o,r;return Sy(this.name,"h".concat(t.attrs.level),(0,s.A)((0,s.A)({},(null==(o=this.options.domAttributes)?void 0:o.blockContent)||{}),n),(null==(r=this.options.domAttributes)?void 0:r.inlineContent)||{})}}),uw=Ry(cw,aw),dw=(e,t,n,o,r,i)=>{const{dom:s,destroy:l}=$b(e,t,n,r,i),a=s;e.props.url&&e.props.showPreview&&(e.props.previewWidth?a.style.width="".concat(e.props.previewWidth,"px"):a.style.width="fit-content");const c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";const u=document.createElement("div");u.className="bn-resize-handle",u.style.right="4px";let d,h=e.props.previewWidth;const p=n=>{var r,i;if(!d)return void(!t.isEditable&&o.contains(c)&&o.contains(u)&&(o.removeChild(c),o.removeChild(u)));let s;s="center"===e.props.textAlignment?"left"===d.handleUsed?d.initialWidth+2*(d.initialClientX-n.clientX):d.initialWidth+2*(n.clientX-d.initialClientX):"left"===d.handleUsed?d.initialWidth+d.initialClientX-n.clientX:d.initialWidth+n.clientX-d.initialClientX,h=Math.min(Math.max(s,64),(null==(i=null==(r=t.domElement)?void 0:r.firstElementChild)?void 0:i.clientWidth)||Number.MAX_VALUE),a.style.width="".concat(h,"px")},f=n=>{(!n.target||!a.contains(n.target)||!t.isEditable)&&o.contains(c)&&o.contains(u)&&(o.removeChild(c),o.removeChild(u)),d&&(d=void 0,t.updateBlock(e,{props:{previewWidth:h}}))},m=()=>{t.isEditable&&(o.appendChild(c),o.appendChild(u))},g=e=>{e.relatedTarget===c||e.relatedTarget===u||d||t.isEditable&&o.contains(c)&&o.contains(u)&&(o.removeChild(c),o.removeChild(u))},v=e=>{e.preventDefault(),d={handleUsed:"left",initialWidth:a.clientWidth,initialClientX:e.clientX}},y=e=>{e.preventDefault(),d={handleUsed:"right",initialWidth:a.clientWidth,initialClientX:e.clientX}};return window.addEventListener("mousemove",p),window.addEventListener("mouseup",f),a.addEventListener("mouseenter",m),a.addEventListener("mouseleave",g),c.addEventListener("mousedown",v),u.addEventListener("mousedown",y),{dom:a,destroy:()=>{null==l||l(),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",f),a.removeEventListener("mouseenter",m),a.removeEventListener("mouseleave",g),c.removeEventListener("mousedown",v),u.removeEventListener("mousedown",y)}}},hw=e=>({url:e.src||void 0,previewWidth:e.width||void 0}),pw={type:"image",propSchema:{textAlignment:Ey.textAlignment,backgroundColor:Ey.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},fw=e=>{if("IMG"===e.tagName)return e.closest("figure")?void 0:hw(e);if("FIGURE"===e.tagName){const t=Ub(e,"img");if(!t)return;const{targetElement:n,caption:o}=t;return(0,s.A)((0,s.A)({},hw(n)),{},{caption:o})}},mw=jy(pw,{render:(e,t)=>{const n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>';const o=document.createElement("div");o.className="bn-visual-media-wrapper";const r=document.createElement("img");return r.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then(e=>{r.src=e}):r.src=e.props.url,r.alt=e.props.name||e.props.caption||"BlockNote image",r.contentEditable="false",r.draggable=!1,o.appendChild(r),dw(e,t,{dom:o},o,t.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},parse:fw,toExternalHTML:e=>{if(!e.props.url){const e=document.createElement("p");return e.textContent="Add image",{dom:e}}let t;return e.props.showPreview?(t=document.createElement("img"),t.src=e.props.url,t.alt=e.props.name||e.props.caption||"BlockNote image",e.props.previewWidth&&(t.width=e.props.previewWidth)):(t=document.createElement("a"),t.href=e.props.url,t.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?Wb(t,e.props.caption):qb(t,e.props.caption):{dom:t}}});function gw(e,t,n){var o,r,i;const s=oe.fromSchema(t),l=e,a=document.createElement("div");a.setAttribute("data-node-type","blockGroup");for(const h of Array.from(l.childNodes))a.appendChild(h.cloneNode(!0));let c=s.parse(a,{topNode:t.nodes.blockGroup.create()});"checkListItem"===(null==(r=null==(o=c.firstChild)?void 0:o.firstChild)?void 0:r.type.name)&&(c=c.copy(c.content.cut(c.firstChild.firstChild.nodeSize+2)));const u=null==(i=c.firstChild)?void 0:i.firstChild;if(null==u||!u.isTextblock)return h.from(c);const d=t.nodes[n].create({},u.content),p=c.content.cut(u.nodeSize+2);if(p.size>0){const e=c.copy(p);return d.content.addToEnd(e)}return d.content}const vw=(e,t,n)=>o=>{let{state:r,dispatch:i}=o;const l=Vy(zy(r.doc,e));if(!l.isBlockContainer)throw new Error("BlockContainer expected when calling splitBlock, position ".concat(e));const a=[{type:l.bnBlock.node.type,attrs:n?(0,s.A)((0,s.A)({},l.bnBlock.node.attrs),{},{id:void 0}):{}},{type:t?l.blockContent.node.type:r.schema.nodes.paragraph,attrs:n?(0,s.A)({},l.blockContent.node.attrs):{}}];return i&&r.tr.split(e,2,a),!0},yw=e=>{const{blockInfo:t,selectionEmpty:n}=e.transact(e=>({blockInfo:Wy(e),selectionEmpty:e.selection.anchor===e.selection.head}));if(!t.isBlockContainer)return!1;const{bnBlock:o,blockContent:r}=t;return!("bulletListItem"!==r.node.type.name&&"numberedListItem"!==r.node.type.name&&"checkListItem"!==r.node.type.name||!n)&&e._tiptapEditor.commands.first(e=>{let{state:t,chain:n,commands:i}=e;return[()=>i.command(()=>0===r.node.childCount&&i.command(Pb(o.beforePos,{type:"paragraph",props:{}}))),()=>i.command(()=>r.node.childCount>0&&(n().deleteSelection().command(vw(t.selection.from,!0)).run(),!0))]})},bw=(0,s.A)({},Ey),ww=Ry(_y({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules:()=>[new ns({find:new RegExp("^[-+*]\\s$"),handler:e=>{let{state:t,chain:n,range:o}=e;const r=$y(t);!r.isBlockContainer||"inline*"!==r.blockContent.node.type.spec.content||n().command(Pb(r.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:o.from,to:o.to})}})],addKeyboardShortcuts(){return{Enter:()=>yw(this.options.editor),"Mod-Shift-8":()=>{const e=$y(this.editor.state);return!e.isBlockContainer||"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command(Pb(e.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:e=>{var t;if("string"==typeof e)return!1;const n=e.parentElement;return null!==n&&(("UL"===n.tagName||"DIV"===n.tagName&&"UL"===(null==(t=n.parentElement)?void 0:t.tagName))&&{})},getContent:(e,t)=>gw(e,t,this.name),node:"bulletListItem"}]},renderHTML(e){let{HTMLAttributes:t}=e;var n,o;return Sy(this.name,"p",(0,s.A)((0,s.A)({},(null==(n=this.options.domAttributes)?void 0:n.blockContent)||{}),t),(null==(o=this.options.domAttributes)?void 0:o.inlineContent)||{})}}),bw),kw=(0,s.A)((0,s.A)({},Ey),{},{checked:{default:!1}}),Cw=_y({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes:()=>Ty(kw),addInputRules:()=>[new ns({find:new RegExp("\\[\\s*\\]\\s$"),handler:e=>{let{state:t,chain:n,range:o}=e;const r=$y(t);!r.isBlockContainer||"inline*"!==r.blockContent.node.type.spec.content||n().command(Pb(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:o.from,to:o.to})}}),new ns({find:new RegExp("\\[[Xx]\\]\\s$"),handler:e=>{let{state:t,chain:n,range:o}=e;const r=$y(t);!r.isBlockContainer||"inline*"!==r.blockContent.node.type.spec.content||n().command(Pb(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:o.from,to:o.to})}})],addKeyboardShortcuts(){return{Enter:()=>yw(this.options.editor),"Mod-Shift-9":()=>{const e=$y(this.editor.state);return!e.isBlockContainer||"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command(Pb(e.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:e=>"string"!=typeof e&&!e.closest("[data-content-type]")&&!e.closest("li")&&("checkbox"===e.type&&{checked:e.checked}),node:"checkListItem"},{tag:"li",getAttrs:e=>{var t;if("string"==typeof e)return!1;const n=e.parentElement;if(null===n)return!1;if("UL"===n.tagName||"DIV"===n.tagName&&"UL"===(null==(t=n.parentElement)?void 0:t.tagName)){const t=e.querySelector("input[type=checkbox]")||null;return null!==t&&{checked:t.checked}}return!1},getContent:(e,t)=>gw(e,t,this.name),node:"checkListItem"}]},renderHTML(e){let{node:t,HTMLAttributes:n}=e;var o,r;const i=document.createElement("input");i.type="checkbox",i.checked=t.attrs.checked,t.attrs.checked&&i.setAttribute("checked","");const{dom:l,contentDOM:a}=Sy(this.name,"p",(0,s.A)((0,s.A)({},(null==(o=this.options.domAttributes)?void 0:o.blockContent)||{}),n),(null==(r=this.options.domAttributes)?void 0:r.inlineContent)||{});return l.insertBefore(i,a),{dom:l,contentDOM:a}},addNodeView(){return e=>{let{node:t,getPos:n,editor:o,HTMLAttributes:r}=e;var i,l;const a=document.createElement("div"),c=document.createElement("div");c.contentEditable="false";const u=document.createElement("input");u.type="checkbox",u.checked=t.attrs.checked,t.attrs.checked&&u.setAttribute("checked","");const d=()=>{if(o.isEditable){if("boolean"!=typeof n){const e=zy(o.state.doc,n());if("blockContainer"!==e.node.type.name)throw new Error("Expected blockContainer node, got ".concat(e.node.type.name));this.editor.commands.command(Pb(e.posBeforeNode,{type:"checkListItem",props:{checked:u.checked}}))}}else u.checked=!u.checked};u.addEventListener("change",d);const{dom:h,contentDOM:p}=Sy(this.name,"p",(0,s.A)((0,s.A)({},(null==(i=this.options.domAttributes)?void 0:i.blockContent)||{}),r),(null==(l=this.options.domAttributes)?void 0:l.inlineContent)||{});if("boolean"!=typeof n){const e="label-"+this.editor.state.doc.resolve(n()).node().attrs.id;u.setAttribute("aria-labelledby",e),p.id=e}return h.removeChild(p),h.appendChild(a),a.appendChild(c),a.appendChild(p),c.appendChild(u),{dom:h,contentDOM:p,destroy:()=>{u.removeEventListener("change",d)}}}}}),xw=Ry(Cw,kw),Sw=new Pt("numbered-list-indexing"),Aw=(0,s.A)((0,s.A)({},Ey),{},{start:{default:void 0,type:"number"}}),Ew=_y({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes:()=>(0,s.A)((0,s.A)({},Ty(Aw)),{},{index:{default:null,parseHTML:e=>e.getAttribute("data-index"),renderHTML:e=>({"data-index":e.index})}}),addInputRules:()=>[new ns({find:new RegExp("^(\\d+)\\.\\s$"),handler:e=>{let{state:t,chain:n,range:o,match:r}=e;const i=$y(t);if(!i.isBlockContainer||"inline*"!==i.blockContent.node.type.spec.content||"numberedListItem"===i.blockNoteType)return;const s=parseInt(r[1]);n().command(Pb(i.bnBlock.beforePos,{type:"numberedListItem",props:1===s&&{}||{start:s}})).deleteRange({from:o.from,to:o.to})}})],addKeyboardShortcuts(){return{Enter:()=>yw(this.options.editor),"Mod-Shift-7":()=>{const e=$y(this.editor.state);return!e.isBlockContainer||"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command(Pb(e.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins:()=>[new Nt({key:Sw,appendTransaction:(e,t,n)=>{const o=n.tr;o.setMeta("numberedListIndexing",!0);let r=!1;return n.doc.descendants((e,t)=>{var n;if("blockContainer"===e.type.name&&"numberedListItem"===e.firstChild.type.name){let i="".concat(e.firstChild.attrs.start||1);const a=Vy({posBeforeNode:t,node:e});if(!a.isBlockContainer)throw new Error("impossible");const c=o.doc.resolve(a.bnBlock.beforePos).nodeBefore;if(c){const e=Vy({posBeforeNode:a.bnBlock.beforePos-c.nodeSize,node:c});if("numberedListItem"===e.blockNoteType){if(!e.isBlockContainer)throw new Error("impossible");const t=e.blockContent.node.attrs.index;i=(parseInt(t)+1).toString()}}const u=a.blockContent.node,d=u.attrs.index,h="numberedListItem"!==(null==(n=null==c?void 0:c.firstChild)?void 0:n.type.name);if(d!==i||u.attrs.start&&!h){r=!0;const e=u.attrs,{start:t}=e,n=(0,l.A)(e,iy);o.setNodeMarkup(a.blockContent.beforePos,void 0,(0,s.A)((0,s.A)({},n),{},{index:i},"number"==typeof t&&h&&{start:t}))}}}),r?o:null}})],parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:e=>{var t;if("string"==typeof e)return!1;const n=e.parentElement;if(null===n)return!1;if("OL"===n.tagName||"DIV"===n.tagName&&"OL"===(null==(t=n.parentElement)?void 0:t.tagName)){const t=parseInt(n.getAttribute("start")||"1")||1;return e.previousSibling||1===t?{}:{start:t}}return!1},getContent:(e,t)=>gw(e,t,this.name),priority:300,node:"numberedListItem"}]},renderHTML(e){let{HTMLAttributes:t}=e;var n,o;return Sy(this.name,"p",(0,s.A)((0,s.A)({},(null==(n=this.options.domAttributes)?void 0:n.blockContent)||{}),t),(null==(o=this.options.domAttributes)?void 0:o.inlineContent)||{})}}),Dw=Ry(Ew,Aw),Mw=(0,s.A)({},Ey),Nw=Ry(_y({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const e=$y(this.editor.state);return!e.isBlockContainer||"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command(Pb(e.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:e=>{var t;return!("string"==typeof e||null==(t=e.textContent)||!t.trim())&&{}},node:"paragraph"}]},renderHTML(e){let{HTMLAttributes:t}=e;var n,o;return Sy(this.name,"p",(0,s.A)((0,s.A)({},(null==(n=this.options.domAttributes)?void 0:n.blockContent)||{}),t),(null==(o=this.options.domAttributes)?void 0:o.inlineContent)||{})}}),Mw),Tw=(0,s.A)({},Ey),Ow=Ry(_y({name:"quote",content:"inline*",group:"blockContent",addInputRules:()=>[new ns({find:new RegExp("^>\\s$"),handler:e=>{let{state:t,chain:n,range:o}=e;const r=$y(t);!r.isBlockContainer||"inline*"!==r.blockContent.node.type.spec.content||n().command(Pb(r.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:o.from,to:o.to})}})],addKeyboardShortcuts(){return{"Mod-Alt-q":()=>{const e=$y(this.editor.state);return!e.isBlockContainer||"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command(Pb(e.bnBlock.beforePos,{type:"quote"}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote"}]},renderHTML(e){let{HTMLAttributes:t}=e;var n,o;return Sy(this.name,"blockquote",(0,s.A)((0,s.A)({},(null==(n=this.options.domAttributes)?void 0:n.blockContent)||{}),t),(null==(o=this.options.domAttributes)?void 0:o.inlineContent)||{})}}),Tw),Pw=fs.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[qa({cellMinWidth:35,defaultCellMinWidth:120,View:null}),Ya()],addKeyboardShortcuts(){return{Enter:()=>!(!this.editor.state.selection.empty||"tableParagraph"!==this.editor.state.selection.$head.parent.type.name)&&(this.editor.commands.insertContent({type:"hardBreak"}),!0),Backspace:()=>{const e=this.editor.state.selection,t=e.empty,n=0===e.$head.parentOffset,o="tableParagraph"===e.$head.node().type.name;return t&&n&&o},Tab:()=>this.editor.commands.command(e=>{let{state:t,dispatch:n,view:o}=e;return Ea(1)(t,n,o)}),"Shift-Tab":()=>this.editor.commands.command(e=>{let{state:t,dispatch:n,view:o}=e;return Ea(-1)(t,n,o)})}},extendNodeSchema:e=>({tableRole:Ki(Hi(e,"tableRole",{name:e.name,options:e.options,storage:e.storage}))})}),_w={textColor:Ey.textColor},Lw=_y({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML:()=>[{tag:"table"}],renderHTML(e){let{HTMLAttributes:t}=e;var n,o;return Sy(this.name,"table",(0,s.A)((0,s.A)({},(null==(n=this.options.domAttributes)?void 0:n.blockContent)||{}),t),(null==(o=this.options.domAttributes)?void 0:o.inlineContent)||{})},addNodeView(){return e=>{let{node:t,HTMLAttributes:n}=e;var o;return new class extends Ua{constructor(e,t,n){super(e,t),this.node=e,this.cellMinWidth=t,this.blockContentHTMLAttributes=n;const o=document.createElement("div");o.className=Cy("bn-block-content",n.class),o.setAttribute("data-content-type","table");for(const[l,a]of Object.entries(n))"class"!==l&&o.setAttribute(l,a);const r=this.dom,i=document.createElement("div");i.className="tableWrapper-inner",i.appendChild(r.firstChild),r.appendChild(i),o.appendChild(r);const s=document.createElement("div");s.className="table-widgets-container",s.style.position="relative",r.appendChild(s),this.dom=o}ignoreMutation(e){return!e.target.closest(".tableWrapper-inner")||super.ignoreMutation(e)}}(t,120,(0,s.A)((0,s.A)({},(null==(o=this.options.domAttributes)?void 0:o.blockContent)||{}),n))}}}),Rw=_y({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML:()=>[{tag:"p",getAttrs:e=>{if("string"==typeof e||!e.textContent||!e.closest("[data-content-type]"))return!1;const t=e.parentElement;return null!==t&&(("TD"===t.tagName||"TH"===t.tagName)&&{})},node:"tableParagraph"}],renderHTML(e){let{HTMLAttributes:t}=e;return["p",t,0]}}),Bw=gl.create({name:"tableRow",addOptions:()=>({HTMLAttributes:{}}),content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML:()=>[{tag:"tr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["tr",Wi(this.options.HTMLAttributes,t),0]}});function Iw(e,t){const n=oe.fromSchema(t).parse(e,{topNode:t.nodes.blockGroup.create()}),o=[];return n.content.descendants(e=>{if(e.isInline)return o.push(e),!1}),h.fromArray(o)}const Fw=Ry(Lw,_w,[Pw,Rw,Jl.extend({content:"tableContent+",parseHTML:()=>[{tag:"th",getContent:(e,t)=>Iw(e,t)}]}),Zl.extend({content:"tableContent+",parseHTML:()=>[{tag:"td",getContent:(e,t)=>Iw(e,t)}]}),Bw]),jw=e=>({url:e.src||void 0,previewWidth:e.width||void 0}),zw={type:"video",propSchema:{textAlignment:Ey.textAlignment,backgroundColor:Ey.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},Hw=e=>{if("VIDEO"===e.tagName)return e.closest("figure")?void 0:jw(e);if("FIGURE"===e.tagName){const t=Ub(e,"video");if(!t)return;const{targetElement:n,caption:o}=t;return(0,s.A)((0,s.A)({},jw(n)),{},{caption:o})}},Vw=jy(zw,{render:(e,t)=>{const n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>';const o=document.createElement("div");o.className="bn-visual-media-wrapper";const r=document.createElement("video");return r.className="bn-visual-media",t.resolveFileUrl?t.resolveFileUrl(e.props.url).then(e=>{r.src=e}):r.src=e.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,r.width=e.props.previewWidth,o.appendChild(r),dw(e,t,{dom:o},o,t.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},parse:Hw,toExternalHTML:e=>{if(!e.props.url){const e=document.createElement("p");return e.textContent="Add video",{dom:e}}let t;return e.props.showPreview?(t=document.createElement("video"),t.src=e.props.url,e.props.previewWidth&&(t.width=e.props.previewWidth)):(t=document.createElement("a"),t.href=e.props.url,t.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?Wb(t,e.props.caption):qb(t,e.props.caption):{dom:t}}}),Uw={paragraph:Nw,heading:uw,quote:Ow,codeBlock:ew,bulletListItem:ww,numberedListItem:Dw,checkListItem:xw,table:Fw,file:lw,image:mw,video:Vw,audio:Jb},$w=By(Uw),Ww={bold:cb(Bl,"boolean"),italic:cb($l,"boolean"),underline:cb(Kl,"boolean"),strike:cb(Gl,"boolean"),code:cb(jl,"boolean"),textColor:ow,backgroundColor:nw},qw=(ub(Ww),{text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}}),Gw=sb(qw);function Kw(e,t){return e in t.schema.blockSchema&&t.schema.blockSchema[e]===$w[e]}function Zw(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock||!1}function Jw(e,t){return t.schema.blockSchema[e.type].isFileBlock&&!e.props.url}function Xw(e,t,n){return t in n.schema.blockSchema&&e in n.schema.blockSchema[t].propSchema&&n.schema.blockSchema[t].propSchema[e]===Ey[e]}function Qw(e,t,n){return Xw(e,t.type,n)}function Yw(e){return e instanceof da}function ek(e,t){const n=e.getTextCursorPosition().block;if(void 0===n.content)throw new Error("Slash Menu open in a block that doesn't contain content.");let o;return Array.isArray(n.content)&&(1===n.content.length&&py(n.content[0])&&"text"===n.content[0].type&&"/"===n.content[0].text||0===n.content.length)?(o=e.updateBlock(n,t),e.setTextCursorPosition(o)):(o=e.insertBlocks([t],n,"after")[0],e.setTextCursorPosition(e.getTextCursorPosition().nextBlock)),function(e){let t=e.getTextCursorPosition().block,n=e.schema.blockSchema[t.type].content;for(;"none"===n;){if(t=e.getTextCursorPosition().nextBlock,void 0===t)return;n=e.schema.blockSchema[t.type].content,e.setTextCursorPosition(t,"end")}}(e),o}function tk(e,t){return e.filter(e=>{let{title:n,aliases:o}=e;return n.toLowerCase().includes(t.toLowerCase())||o&&0!==o.filter(e=>e.toLowerCase().includes(t.toLowerCase())).length})}function nk(e){return e&&Object.fromEntries(Object.entries(e).filter(e=>{let[,t]=e;return void 0!==t}))}class ok{constructor(e){ay(this,"blockSpecs"),ay(this,"inlineContentSpecs"),ay(this,"styleSpecs"),ay(this,"blockSchema"),ay(this,"inlineContentSchema"),ay(this,"styleSchema"),ay(this,"BlockNoteEditor","only for types"),ay(this,"Block","only for types"),ay(this,"PartialBlock","only for types"),this.blockSpecs=nk(null==e?void 0:e.blockSpecs)||Uw,this.inlineContentSpecs=nk(null==e?void 0:e.inlineContentSpecs)||qw,this.styleSpecs=nk(null==e?void 0:e.styleSpecs)||Ww,this.blockSchema=By(this.blockSpecs),this.inlineContentSchema=sb(this.inlineContentSpecs),this.styleSchema=ub(this.styleSpecs)}static create(e){return new ok(e)}}const rk=jy({type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},{render:()=>{const e=document.createElement("div");return e.className="bn-page-break",e.setAttribute("data-page-break",""),{dom:e}},parse:e=>{if("DIV"===e.tagName&&e.hasAttribute("data-page-break"))return{type:"pageBreak"}},toExternalHTML:()=>{const e=document.createElement("div");return e.setAttribute("data-page-break",""),{dom:e}}});ok.create({blockSpecs:{pageBreak:rk}});function ik(e){return e.map(e=>"columnList"===e.type?e.children.map(e=>ik(e.children)).flat():(0,s.A)((0,s.A)({},e),{},{children:ik(e.children)})).flat()}function sk(e,t,n){e.transact(o=>{var r;const i=(null==(r=e.getSelection())?void 0:r.blocks)||[e.getTextCursorPosition().block],s=function(e){return e.transact(e=>{const t=zy(e.doc,e.selection.anchor);if(e.selection instanceof da)return{type:"cell",anchorBlockId:t.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-t.posBeforeNode,headCellOffset:e.selection.$headCell.pos-t.posBeforeNode};if(e.selection instanceof gt)return{type:"node",anchorBlockId:t.node.attrs.id};{const n=zy(e.doc,e.selection.head);return{type:"text",anchorBlockId:t.node.attrs.id,headBlockId:n.node.attrs.id,anchorOffset:e.selection.anchor-t.posBeforeNode,headOffset:e.selection.head-n.posBeforeNode}}})}(e);e.removeBlocks(i),e.insertBlocks(ik(i),t,n),function(e,t){var n,o;const r=null==(n=Mb(t.anchorBlockId,e.doc))?void 0:n.posBeforeNode;if(void 0===r)throw new Error("Could not find block with ID ".concat(t.anchorBlockId," to update selection"));let i;if("cell"===t.type)i=da.create(e.doc,r+t.anchorCellOffset,r+t.headCellOffset);else if("node"===t.type)i=gt.create(e.doc,r+1);else{const n=null==(o=Mb(t.headBlockId,e.doc))?void 0:o.posBeforeNode;if(void 0===n)throw new Error("Could not find block with ID ".concat(t.headBlockId," to update selection"));i=ft.create(e.doc,r+t.anchorOffset,n+t.headOffset)}e.setSelection(i)}(o,s)})}function lk(e){return!e||"columnList"!==e.type}function ak(e,t,n){let o,r;if(t?t.children.length>0?(o=t.children[t.children.length-1],r="after"):(o=t,r="before"):n&&(o=n,r="before"),!o||!r)return;const i=e.getParentBlock(o);return lk(i)?{referenceBlock:o,placement:r}:ak(e,"after"===r?o:e.getPrevBlock(o),i)}function ck(e,t,n){let o,r;if(t?t.children.length>0?(o=t.children[0],r="before"):(o=t,r="after"):n&&(o=n,r="after"),!o||!r)return;const i=e.getParentBlock(o);return lk(i)?{referenceBlock:o,placement:r}:ck(e,"before"===r?o:e.getNextBlock(o),i)}function uk(e){e.transact(()=>{const t=e.getSelection(),n=(null==t?void 0:t.blocks[0])||e.getTextCursorPosition().block,o=ak(e,e.getPrevBlock(n),e.getParentBlock(n));o&&sk(e,o.referenceBlock,o.placement)})}function dk(e){e.transact(()=>{const t=e.getSelection(),n=(null==t?void 0:t.blocks[(null==t?void 0:t.blocks.length)-1])||e.getTextCursorPosition().block,o=ck(e,e.getNextBlock(n),e.getParentBlock(n));o&&sk(e,o.referenceBlock,o.placement)})}function hk(e){return e.exec((e,t)=>function(e,t){return function(n,o){const{$from:r,$to:i}=n.selection,s=r.blockRange(i,e=>e.childCount>0&&("blockGroup"===e.type.name||"column"===e.type.name));if(!s)return!1;const l=s.startIndex;if(0===l)return!1;const a=s.parent.child(l-1);if(a.type!==e)return!1;if(o){const r=a.lastChild&&a.lastChild.type===t,i=h.from(r?e.create():null),l=new y(h.from(e.create(null,h.from(t.create(null,i)))),r?3:1,0),c=s.start,u=s.end;o(n.tr.step(new Le(c-(r?3:1),u,c,u,l,1,!0)).scrollIntoView())}return!0}}(e.schema.nodes.blockContainer,e.schema.nodes.blockGroup)(e,t))}function pk(e){const t=qy(e);let n=e.selection.$from,o=e.selection.$to;for(;o.parentOffset>=o.parent.nodeSize-2&&o.depth>0;)o=e.doc.resolve(o.pos+1);for(;0===o.parentOffset&&o.depth>0;)o=e.doc.resolve(o.pos-1);for(;0===n.parentOffset&&n.depth>0;)n=e.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=e.doc.resolve(n.pos+1);const r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zy(t),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jy(t),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xy(t),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Qy(t);if(0===e.content.childCount)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(1!==e.content.childCount)throw new Error("slice must be a single block, did you forget includeParents=true?");return function e(l,a,c){if("blockGroup"!==l.type.name)throw new Error("unexpected");const u=[];let d,h;return l.forEach((p,f,m)=>{if("blockContainer"!==p.type.name)throw new Error("unexpected");if(0===p.childCount)return;if(0===p.childCount||p.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+p.childCount);const g=0===m,v=m===l.childCount-1;if("blockGroup"===p.firstChild.type.name){if(!g)throw new Error("unexpected");const t=e(p.firstChild,Math.max(0,a-1),v?Math.max(0,c-1):0);return d=t.blockCutAtStart,v&&(h=t.blockCutAtEnd),void u.push(...t.blocks)}const y=nb(p,t,n,o,r,i),b=p.childCount>1?p.child(1):void 0;let w=[];if(b){const t=e(b,0,v?Math.max(0,c-1):0);w=t.blocks,v&&(h=t.blockCutAtEnd)}v&&!b&&c>1&&(h=y.id),g&&a>1&&(d=y.id),u.push((0,s.A)((0,s.A)({},y),{},{children:w}))}),{blocks:u,blockCutAtStart:d,blockCutAtEnd:h}}(e.content.firstChild,Math.max(e.openStart-1,0),Math.max(e.openEnd-1,0))}(e.doc.slice(n.pos,o.pos,!0),t);return(0,s.A)({_meta:{startPos:n.pos,endPos:o.pos}},r)}function fk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";const o="string"==typeof t?t:t.id,r=Ky(qy(e.doc)),i=Mb(o,e.doc);if(!i)throw new Error("Block with ID ".concat(o," not found"));const s=Vy(i),l=r.blockSchema[s.blockNoteType].content;if(s.isBlockContainer){const t=s.blockContent;if("none"===l)return void e.setSelection(gt.create(e.doc,t.beforePos));if("inline"===l)"start"===n?e.setSelection(ft.create(e.doc,t.beforePos+1)):e.setSelection(ft.create(e.doc,t.afterPos-1));else{if("table"!==l)throw new by(l);"start"===n?e.setSelection(ft.create(e.doc,t.beforePos+4)):e.setSelection(ft.create(e.doc,t.afterPos-4))}}else{fk(e,("start"===n?s.childContainer.node.firstChild:s.childContainer.node.lastChild).attrs.id,n)}}let mk;async function gk(){if(mk)return mk;const e=await Promise.all([Promise.all([n.e(815),n.e(631),n.e(911)]).then(n.bind(n,911)),Promise.all([n.e(815),n.e(570)]).then(n.bind(n,3570)),Promise.all([n.e(631),n.e(551)]).then(n.bind(n,2551)),Promise.all([n.e(815),n.e(363)]).then(n.bind(n,7363)),Promise.all([n.e(723),n.e(316),n.e(607)]).then(n.bind(n,8607)),Promise.all([n.e(723),n.e(378),n.e(558)]).then(n.bind(n,3558)),Promise.all([n.e(723),n.e(378),n.e(991)]).then(n.bind(n,2991)),n.e(296).then(n.bind(n,6296)),Promise.all([n.e(723),n.e(435)]).then(n.bind(n,8435)),Promise.all([n.e(316),n.e(211)]).then(n.bind(n,1211))]);return mk={rehypeParse:e[0],rehypeStringify:e[1],unified:e[2],hastUtilFromDom:e[3],rehypeRemark:e[4],remarkGfm:e[5],remarkStringify:e[6],remarkParse:e[7],remarkRehype:e[8],rehypeFormat:e[9]},mk}function vk(){const e=t=>{let n=t.children.length;for(let o=0;o<n;o++){const r=t.children[o];if("element"===r.type&&(e(r),"u"===r.tagName))if(r.children.length>0){t.children.splice(o,1,...r.children);const e=r.children.length-1;n+=e,o+=e}else t.children.splice(o,1),n--,o--}};return e}function yk(){const e=mk;if(!e)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const t=n=>{var o;if(n.children&&"length"in n.children&&n.children.length)for(let r=n.children.length-1;r>=0;r--){const i=n.children[r],s=r+1<n.children.length?n.children[r+1]:void 0;"element"===i.type&&"input"===i.tagName&&"checkbox"===(null==(o=i.properties)?void 0:o.type)&&"element"===(null==s?void 0:s.type)&&"p"===s.tagName?(s.tagName="span",s.children.splice(0,0,e.hastUtilFromDom.fromDom(document.createTextNode(" ")))):t(i)}};return t}function bk(e){const t=mk;if(!t)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return t.unified.unified().use(t.rehypeParse.default,{fragment:!0}).use(vk).use(yk).use(t.rehypeRemark.default).use(t.remarkGfm.default).use(t.remarkStringify.default,{handlers:{text:e=>e.value}}).processSync(e).value}function wk(e){e.querySelectorAll("li > ul, li > ol").forEach(e=>{const t=function(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}(e),n=e.parentElement,o=Array.from(n.childNodes).slice(t+1);e.remove(),o.forEach(e=>{e.remove()}),n.insertAdjacentElement("afterend",e),o.reverse().forEach(t=>{if(function(e){return 3===e.nodeType&&!/\S/.test(e.nodeValue||"")}(t))return;const n=document.createElement("li");n.append(t),e.insertAdjacentElement("afterend",n)}),0===n.childNodes.length&&n.remove()})}let kk=null;function Ck(e){if("string"==typeof e){const t=(kk||(kk=document.implementation.createHTMLDocument("title"))).createElement("div");t.innerHTML=e,e=t}return wk(e),function(e){e.querySelectorAll("li + ul, li + ol").forEach(e=>{var t,n;const o=e.previousElementSibling,r=document.createElement("div");o.insertAdjacentElement("afterend",r),r.append(o);const i=document.createElement("div");for(i.setAttribute("data-node-type","blockGroup"),r.append(i);"UL"===(null==(t=r.nextElementSibling)?void 0:t.nodeName)||"OL"===(null==(n=r.nextElementSibling)?void 0:n.nodeName);)i.append(r.nextElementSibling)})}(e),e}async function xk(e,t){const n=Ck(e),o=oe.fromSchema(t).parse(n,{topNode:t.nodes.blockGroup.create()}),r=[];for(let i=0;i<o.childCount;i++)r.push(nb(o.child(i),t));return r}function Sk(e,t){const n=t.value?t.value:"",o={};t.lang&&(o["data-language"]=t.lang);let r={type:"element",tagName:"code",properties:o,children:[{type:"text",value:n}]};return t.meta&&(r.data={meta:t.meta}),e.patch(t,r),r=e.applyData(t,r),r={type:"element",tagName:"pre",properties:{},children:[r]},e.patch(t,r),r}async function Ak(e){const t=await gk();return t.unified.unified().use(t.remarkParse.default).use(t.remarkGfm.default).use(t.remarkRehype.default,{handlers:(0,s.A)((0,s.A)({},t.remarkRehype.defaultHandlers),{},{code:Sk})}).use(t.rehypeStringify.default).processSync(e).value}const Ek=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function Dk(e,t){if(!e.startsWith(".")||!t.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return e===t}function Mk(e,t){const n=e.split("/"),o=t.split("/");if(2!==n.length)throw new Error("The string ".concat(e," is not a valid MIME type."));if(2!==o.length)throw new Error("The string ".concat(t," is not a valid MIME type."));return"*"===n[1]||"*"===o[1]?n[0]===o[0]:("*"===n[0]||"*"===o[0]||n[0]===o[0])&&n[1]===o[1]}function Nk(e,t,n){let o;return o=Array.isArray(t.content)&&0===t.content.length?e.updateBlock(t,n).id:e.insertBlocks([n],t,"after")[0].id,o}async function Tk(e,t){var n;if(!t.uploadFile)return void console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");const o="dataTransfer"in e?e.dataTransfer:e.clipboardData;if(null===o)return;let r=null;for(const s of Ek)if(o.types.includes(s)){r=s;break}if("Files"!==r)return;const i=o.items;if(!i)return;e.preventDefault();const l=Object.values(t.schema.blockSchema).filter(e=>e.isFileBlock);for(let a=0;a<i.length;a++){let o="file";for(const e of l)for(const t of e.fileBlockAccept||[]){const n=t.startsWith("."),r=i[a].getAsFile();if(r&&(!n&&r.type&&Mk(i[a].type,t)||n&&Dk("."+r.name.split(".").pop(),t))){o=e.type;break}}const r=i[a].getAsFile();if(r){const i={type:o,props:{name:r.name}};let l;if("paste"===e.type){const e=t.getTextCursorPosition().block;l=Nk(t,e,i)}else{if("drop"!==e.type)return;{const o={left:e.clientX,top:e.clientY},r=null==(n=t.prosemirrorView)?void 0:n.posAtCoords(o);if(!r)return;l=t.transact(e=>{const n=zy(e.doc,r.pos);return Nk(t,t.getBlock(n.node.attrs.id),i)})}}const a=await t.uploadFile(r,l),c="string"==typeof a?{props:{url:a}}:(0,s.A)({},a);t.updateBlock(l,c)}}}const Ok=e=>fs.create({name:"dropFile",addProseMirrorPlugins:()=>[new Nt({props:{handleDOMEvents:{drop(t,n){if(!e.isEditable)return;let o=null;for(const e of Ek)if(n.dataTransfer.types.includes(e)){o=e;break}return null===o||"Files"===o&&(Tk(n,e),!0)}}}})]}),Pk=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,_k=new RegExp("(?:\\s|^)(_|__|\\*|\\*\\*|~~|==|\\+\\+)(?!\\s).{1,64}(?<!\\s)(?=\\1)"),Lk=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,Rk=new RegExp("(?:\\s|^)`(?!\\s)[^`]{1,48}(?<!\\s)`([^\\w]|$)"),Bk=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,Ik=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,Fk=/\n{2} {0,3}-{2,48}\n{2}/,jk=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,zk=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,Hk=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,Vk=/^\s*\|(.+\|)+\s*$/m,Uk=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,$k=/^\s*\|(.+\|)+\s*$/m;function Wk(e){let{event:t,editor:n,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:r}=e;var i;if(n.transact(e=>e.selection.$from.parent.type.spec.code&&e.selection.$to.parent.type.spec.code)){const e=null==(i=t.clipboardData)?void 0:i.getData("text/plain");if(e)return n.pasteText(e),!0}let s;for(const a of Ek)if(t.clipboardData.types.includes(a)){s=a;break}if(!s)return!0;if("vscode-editor-data"===s)return async function(e,t){const{schema:n}=t.state;if(!e.clipboardData)return!1;const o=e.clipboardData.getData("text/plain");if(!o)return!1;if(!n.nodes.codeBlock)return t.pasteText(o),!0;const r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=null==i?void 0:i.mode;!!s&&t.pasteHTML('<pre><code class="language-'.concat(s,'">').concat(o.replace(/\r\n?/g,"\n"),"</code></pre>"))}(t,n.prosemirrorView),!0;if("Files"===s)return Tk(t,n),!0;const l=t.clipboardData.getData(s);if("blocknote/html"===s)return n.pasteHTML(l,!0),!0;if("text/markdown"===s)return n.pasteMarkdown(l),!0;if(o){const e=t.clipboardData.getData("text/plain");if((e=>Pk.test(e)||_k.test(e)||Lk.test(e)||Rk.test(e)||Bk.test(e)||Ik.test(e)||Fk.test(e)||jk.test(e)||zk.test(e)||Hk.test(e)||Vk.test(e)||Uk.test(e)||$k.test(e))(e))return n.pasteMarkdown(e),!0}return"text/html"===s?(n.pasteHTML(l),!0):r?(n.pasteMarkdown(l),!0):(n.pasteText(l),!0)}const qk=(e,t)=>fs.create({name:"pasteFromClipboard",addProseMirrorPlugins:()=>[new Nt({props:{handleDOMEvents:{paste(n,o){if(o.preventDefault(),e.isEditable)return t({event:o,editor:e,defaultPasteHandler:function(){let{prioritizeMarkdownOverHTML:t=!0,plainTextAsMarkdown:n=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Wk({event:o,editor:e,prioritizeMarkdownOverHTML:t,plainTextAsMarkdown:n})}})}}}})]});function Gk(e){const t=[];return e.descendants(e=>{var n,o;const r=qy(e);return"blockContainer"===e.type.name&&"blockGroup"===(null==(n=e.firstChild)?void 0:n.type.name)||("columnList"===e.type.name&&1===e.childCount?(null==(o=e.firstChild)||o.forEach(e=>{t.push(nb(e,r))}),!1):!e.type.isInGroup("bnBlock")||(t.push(nb(e,r)),!1))}),t}function Kk(e,t){"node"in e.state.selection&&"blockContent"===e.state.selection.node.type.spec.group&&t.transact(t=>t.setSelection(new gt(t.doc.resolve(e.state.selection.from-1))));const n=e.serializeForClipboard(e.state.selection.content()).dom.innerHTML,o=e.state.selection.content().content,r=function(e,t,n){var o;let r=!1;const i=e.state.selection instanceof da;if(!i){const n=e.state.doc.slice(e.state.selection.from,e.state.selection.to,!1).content,o=[];for(let e=0;e<n.childCount;e++)o.push(n.child(e));r=void 0===o.find(e=>e.type.isInGroup("bnBlock")||"blockGroup"===e.type.name||"blockContent"===e.type.spec.group),r&&(t=n)}let s;const l=jb(e.state.schema,n);if(i){"table"===(null==(o=t.firstChild)?void 0:o.type.name)&&(t=t.firstChild.content);const e=Yy(t,n.schema.inlineContentSchema,n.schema.styleSchema);s="<table>".concat(l.exportInlineContent(e,{}),"</table>")}else if(r){const e=eb(t,n.schema.inlineContentSchema,n.schema.styleSchema);s=l.exportInlineContent(e,{})}else{const e=Gk(t);s=l.exportBlocks(e,{})}return s}(e,o,t);return{clipboardHTML:n,externalHTML:r,markdown:bk(r)}}const Zk=()=>{const e=window.getSelection();if(!e||e.isCollapsed)return!0;let t=e.focusNode;for(;t;){if(t instanceof HTMLElement&&"false"===t.getAttribute("contenteditable"))return!0;t=t.parentElement}return!1},Jk=(e,t,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:o,externalHTML:r,markdown:i}=Kk(t,e);n.clipboardData.setData("blocknote/html",o),n.clipboardData.setData("text/html",r),n.clipboardData.setData("text/plain",i)},Xk=e=>fs.create({name:"copyToClipboard",addProseMirrorPlugins:()=>[new Nt({props:{handleDOMEvents:{copy:(t,n)=>(Zk()||Jk(e,t,n),!0),cut:(t,n)=>(Zk()||(Jk(e,t,n),t.editable&&t.dispatch(t.state.tr.deleteSelection())),!0),dragstart(t,n){if(!("node"in t.state.selection)||"blockContent"!==t.state.selection.node.type.spec.group)return;e.transact(e=>e.setSelection(new gt(e.doc.resolve(t.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:o,externalHTML:r,markdown:i}=Kk(t,e);return n.dataTransfer.setData("blocknote/html",o),n.dataTransfer.setData("text/html",r),n.dataTransfer.setData("text/plain",i),!0}}}})]}),Qk=fs.create({name:"blockBackgroundColor",addGlobalAttributes:()=>[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:Ey.backgroundColor.default,parseHTML:e=>e.hasAttribute("data-background-color")?e.getAttribute("data-background-color"):Ey.backgroundColor.default,renderHTML:e=>e.backgroundColor===Ey.backgroundColor.default?{}:{"data-background-color":e.backgroundColor}}}}]});class Yk{constructor(){ay(this,"callbacks",{})}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),()=>this.off(e,t)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const r=this.callbacks[e];r&&r.forEach(e=>e.apply(this,n))}off(e,t){const n=this.callbacks[e];n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}}class eC extends Yk{constructor(){super(),ay(this,"plugins",[])}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(e){this.plugins.push(e)}get priority(){}}const tC=class e extends eC{constructor(t){super(),ay(this,"provider"),ay(this,"recentlyUpdatedCursors"),ay(this,"renderCursor",(t,n)=>{let o=this.recentlyUpdatedCursors.get(n);if(!o){var r;const i=(null!==(r=this.collaboration.renderCursor)&&void 0!==r?r:e.defaultCursorRender)(t);"always"!==this.collaboration.showCursorLabels&&(i.addEventListener("mouseenter",()=>{const e=this.recentlyUpdatedCursors.get(n);e.element.setAttribute("data-active",""),e.hideTimeout&&(clearTimeout(e.hideTimeout),this.recentlyUpdatedCursors.set(n,{element:e.element,hideTimeout:void 0}))}),i.addEventListener("mouseleave",()=>{const e=this.recentlyUpdatedCursors.get(n);this.recentlyUpdatedCursors.set(n,{element:e.element,hideTimeout:setTimeout(()=>{e.element.removeAttribute("data-active")},2e3)})})),o={element:i,hideTimeout:void 0},this.recentlyUpdatedCursors.set(n,o)}return o.element}),ay(this,"updateUser",e=>{this.provider.awareness.setLocalStateField("user",e)}),this.collaboration=t,this.provider=t.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",t.user),"always"!==t.showCursorLabels&&this.provider.awareness.on("change",e=>{let{updated:t}=e;for(const n of t){const e=this.recentlyUpdatedCursors.get(n);e&&(e.element.setAttribute("data-active",""),e.hideTimeout&&clearTimeout(e.hideTimeout),this.recentlyUpdatedCursors.set(n,{element:e.element,hideTimeout:setTimeout(()=>{e.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(mv(this.provider.awareness,{selectionBuilder:hv,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}};ay(tC,"defaultCursorRender",e=>{const t=document.createElement("span");t.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style","background-color: ".concat(e.color));const o=document.createElement("span");return o.classList.add("bn-collaboration-cursor__label"),o.setAttribute("style","background-color: ".concat(e.color)),o.insertBefore(document.createTextNode(e.name),null),n.insertBefore(o,null),t.insertBefore(document.createTextNode("\u2060"),null),t.insertBefore(n,null),t.insertBefore(document.createTextNode("\u2060"),null),t});let nC=tC;class oC extends eC{static key(){return"ySyncPlugin"}constructor(e){super(),this.addProsemirrorPlugin(function(e){let{colors:t=Nv,colorMapping:n=new Map,permanentUserData:o=null,onFirstRender:r=()=>{},mapping:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=!1;const l=new Pv(e,i),a=new Nt({props:{editable:e=>{const t=Yg.getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:Yg,state:{init:(r,i)=>({type:e,doc:e.doc,binding:l,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:t,colorMapping:n,permanentUserData:o}),apply:(e,t)=>{const n=e.getMeta(Yg);if(void 0!==n){t=Object.assign({},t);for(const e in n)t[e]=n[e]}return t.addToHistory=!1!==e.getMeta("addToHistory"),t.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,t.isUndoRedoOperation=void 0!==n&&!!n.isChangeOrigin&&!!n.isUndoRedoOperation,null!==l.prosemirrorView&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||rv(0,()=>{null!=l.prosemirrorView&&(null==n.restore?l._renderSnapshot(n.snapshot,n.prevSnapshot,t):(l._renderSnapshot(n.snapshot,n.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,l.mux(()=>{l._prosemirrorChanged(l.prosemirrorView.state.doc)})))})),t}},view:e=>(l.initView(e),null==i&&l._forceRerender(),r(),{update:()=>{const t=a.getState(e.state);if(null==t.snapshot&&null==t.prevSnapshot&&(s||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))){if(s=!0,!1===t.addToHistory&&!t.isChangeOrigin){const t=ev.getState(e.state),n=t&&t.undoManager;n&&n.stopCapturing()}l.mux(()=>{t.doc.transact(n=>{n.meta.set("addToHistory",t.addToHistory),l._prosemirrorChanged(e.state.doc)},Yg)})}},destroy:()=>{l.destroy()}})});return a}(e))}get priority(){return 1001}}class rC extends eC{static key(){return"yUndoPlugin"}constructor(){super(),this.addProsemirrorPlugin(ey())}get priority(){return 1e3}}const iC=as.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes:()=>({orphan:{parseHTML:e=>!!e.getAttribute("data-orphan"),renderHTML:e=>e.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:e=>e.getAttribute("data-bn-thread-id"),renderHTML:e=>({"data-bn-thread-id":e.threadId}),default:""}}),renderHTML(e){let{HTMLAttributes:t}=e;return["span",Wi(t,{class:"bn-thread-mark"})]},parseHTML:()=>[{tag:"span.bn-thread-mark"}],extendMarkSchema:e=>"comment"===e.name?{blocknoteIgnore:!0}:{}});class sC extends Yk{constructor(e){super(),ay(this,"userCache",new Map),ay(this,"loadingUsers",new Set),this.resolveUsers=e}async loadUsers(e){const t=e.filter(e=>!this.userCache.has(e)&&!this.loadingUsers.has(e));if(0!==t.length){for(const e of t)this.loadingUsers.add(e);try{const e=await this.resolveUsers(t);for(const t of e)this.userCache.set(t.id,t);this.emit("update",this.userCache)}finally{for(const e of t)this.loadingUsers.delete(e)}}}getUser(e){return this.userCache.get(e)}subscribe(e){return this.on("update",e)}}const lC=new Pt("blocknote-comments");class aC extends eC{constructor(e,t,n){if(super(),ay(this,"userStore"),ay(this,"pendingComment",!1),ay(this,"selectedThreadId"),ay(this,"threadPositions",new Map),ay(this,"updateMarksFromThreads",e=>{this.editor.transact(t=>{t.doc.descendants((n,o)=>{n.marks.forEach(r=>{if(r.type.name===this.markType){const i=r.type,l=r.attrs.threadId,a=e.get(l),c=!(a&&!a.resolved&&!a.deletedAt);if(c!==r.attrs.orphan){const e=Math.max(o,0),a=Math.min(o+n.nodeSize,t.doc.content.size-1,t.doc.content.size-1);t.removeMark(e,a,r),t.addMark(e,a,i.create((0,s.A)((0,s.A)({},r.attrs),{},{orphan:c}))),c&&this.selectedThreadId===l&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=e,this.threadStore=t,this.markType=n,!e.resolveUsers)throw new Error("resolveUsers is required for comments");this.userStore=new sC(e.resolveUsers),this.threadStore.subscribe(this.updateMarksFromThreads),e.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),e.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const o=this;this.addProsemirrorPlugin(new Nt({key:lC,state:{init:()=>({decorations:wr.empty}),apply(e,t){const n=e.getMeta(lC);if(!e.docChanged&&!n)return t;const r=e.docChanged?function(e,t){const n=new Map;return e.descendants((e,o)=>{e.marks.forEach(r=>{if(r.type.name===t){var i;const t=r.attrs.threadId;if(!t)return;const s=o,l=s+e.nodeSize,a=null!==(i=n.get(t))&&void 0!==i?i:{from:1/0,to:0};n.set(t,{from:Math.min(s,a.from),to:Math.max(l,a.to)})}})}),n}(e.doc,o.markType):o.threadPositions;(r.size>0||o.threadPositions.size>0)&&(o.threadPositions=r,o.emitStateUpdate());const i=[];if(o.selectedThreadId){const e=r.get(o.selectedThreadId);e&&i.push(vr.inline(e.from,e.to,{class:"bn-thread-mark-selected"}))}return{decorations:wr.create(e.doc,i)}}},props:{decorations(e){var t,n;return null!==(t=null==(n=lC.getState(e))?void 0:n.decorations)&&void 0!==t?t:wr.empty},handleClick:(e,t,r)=>{if(0!==r.button)return;const i=e.state.doc.nodeAt(t);if(!i)return void o.selectThread(void 0);const s=i.marks.find(e=>e.type.name===n&&!0!==e.attrs.orphan),l=null==s?void 0:s.attrs.threadId;o.selectThread(l,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(e){return this.on("update",e)}selectThread(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n,o;if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.transact(e=>e.setMeta(lC,{name:"SET_SELECTED_THREAD_ID"})),e&&t)){const t=this.threadPositions.get(e);if(!t)return;null==(o=null==(n=this.editor.prosemirrorView)?void 0:n.domAtPos(t.from).node)||o.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(e){const t=await this.threadStore.createThread(e);if(this.threadStore.addThreadToDocument){const e=this.editor.prosemirrorView,n=e.state.selection,o=Yg.getState(e.state),r={prosemirror:{head:n.head,anchor:n.anchor},yjs:o?Ov(o.binding,e.state):void 0};await this.threadStore.addThreadToDocument({threadId:t.id,selection:r})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:t.id})}}class cC{constructor(e,t,n,o){ay(this,"state"),ay(this,"emitUpdate"),ay(this,"mouseDownHandler",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),ay(this,"dragstartHandler",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),ay(this,"scrollHandler",()=>{var e;if(null!=(e=this.state)&&e.show){const e=this.pmView.root.querySelector('[data-node-type="blockContainer"][data-id="'.concat(this.state.block.id,'"]'));if(!e)return;this.state.referencePos=e.getBoundingClientRect(),this.emitUpdate()}}),ay(this,"closeMenu",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pluginKey=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");o(this.state)},n.dom.addEventListener("mousedown",this.mouseDownHandler),n.dom.addEventListener("dragstart",this.dragstartHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,t){var n,o;const r=this.pluginKey.getState(e.state),i=this.pluginKey.getState(t);if((null==(n=this.state)||!n.show)&&null!=r&&r.block&&this.editor.isEditable){const e=this.pmView.root.querySelector('[data-node-type="blockContainer"][data-id="'.concat(r.block.id,'"]'));if(!e)return;return this.state={show:!0,referencePos:e.getBoundingClientRect(),block:r.block},void this.emitUpdate()}const s=(null==r?void 0:r.block)&&!(null!=i&&i.block),l=!(null!=r&&r.block)&&(null==i?void 0:i.block);s&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),l&&null!=(o=this.state)&&o.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const uC=new Pt("FilePanelPlugin");class dC extends eC{constructor(e){super(),ay(this,"view"),ay(this,"closeMenu",()=>{var e;return null==(e=this.view)?void 0:e.closeMenu()}),this.addProsemirrorPlugin(new Nt({key:uC,view:t=>(this.view=new cC(e,uC,t,e=>{this.emit("update",e)}),this.view),props:{handleKeyDown:(e,t)=>{var n;return!("Escape"!==t.key||!this.shown)&&(null==(n=this.view)||n.closeMenu(),!0)}},state:{init:()=>({block:void 0}),apply:(e,t)=>e.getMeta(uC)||(e.getMeta(Yg)||!e.selectionSet&&!e.docChanged?t:{block:void 0})}}))}static key(){return"filePanel"}get shown(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}onUpdate(e){return this.on("update",e)}}class hC{constructor(e,t,n){ay(this,"state"),ay(this,"emitUpdate"),ay(this,"preventHide",!1),ay(this,"preventShow",!1),ay(this,"shouldShow",e=>{let{view:t,state:n,from:o,to:r}=e;const{doc:i,selection:s}=n,{empty:l}=s,a=!i.textBetween(o,r).length&&xs(n.selection);if(s.$from.parent.type.spec.code||Qs(s)&&s.node.type.spec.code||l||a)return!1;const c=document.activeElement;return!(!this.isElementWithinEditorWrapper(c)&&t.editable)}),ay(this,"blurHandler",e=>{var t;if(this.preventHide)return void(this.preventHide=!1);const n=this.pmView.dom.parentElement;e&&e.relatedTarget&&(n===e.relatedTarget||n.contains(e.relatedTarget)||e.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||null!=(t=this.state)&&t.show&&(this.state.show=!1,this.emitUpdate())}),ay(this,"isElementWithinEditorWrapper",e=>{if(!e)return!1;const t=this.pmView.dom.parentElement;return!!t&&t.contains(e)}),ay(this,"viewMousedownHandler",e=>{this.isElementWithinEditorWrapper(e.target)||(this.preventShow=!0)}),ay(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),ay(this,"dragHandler",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),ay(this,"scrollHandler",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),ay(this,"closeMenu",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=t,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");n(this.state)},t.dom.addEventListener("mousedown",this.viewMousedownHandler),t.root.addEventListener("mouseup",this.mouseupHandler),t.dom.addEventListener("dragstart",this.dragHandler),t.dom.addEventListener("dragover",this.dragHandler),t.dom.addEventListener("blur",this.blurHandler),t.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,t){var n,o,r;const{state:i,composing:s}=e,{doc:l,selection:a}=i,c=t&&t.doc.eq(l)&&t.selection.eq(a);if(s||c)return;const{ranges:u}=a,d=Math.min(...u.map(e=>e.$from.pos)),h=Math.max(...u.map(e=>e.$to.pos)),p=this.shouldShow({view:e,state:i,from:d,to:h}),f=typeof Range.prototype.getClientRects>"u";if(this.preventShow||!p&&!this.preventHide||f)return null==(r=this.state)||!r.show||this.preventHide||p&&!this.preventShow&&this.editor.isEditable?void 0:(this.state.show=!1,void this.emitUpdate());{const e={show:!0,referencePos:this.getSelectionBoundingBox()};(e.show!==(null==(n=this.state)?void 0:n.show)||e.referencePos.toJSON()!==(null==(o=this.state)?void 0:o.referencePos.toJSON()))&&(this.state=e,this.emitUpdate())}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:e}=this.pmView,{selection:t}=e,{ranges:n}=t,o=Math.min(...n.map(e=>e.$from.pos)),r=Math.max(...n.map(e=>e.$to.pos));if(Qs(t)){const e=this.pmView.nodeDOM(o);if(e)return e.getBoundingClientRect()}return Ys(this.pmView,o,r)}}const pC=new Pt("FormattingToolbarPlugin");class fC extends eC{constructor(e){super(),ay(this,"view"),ay(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new Nt({key:pC,view:t=>(this.view=new hC(e,t,e=>{this.emit("update",e)}),this.view),props:{handleKeyDown:(e,t)=>!("Escape"!==t.key||!this.shown)&&(this.view.closeMenu(),!0)}}))}static key(){return"formattingToolbar"}get shown(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}onUpdate(e){return this.on("update",e)}}const mC=gl.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML:()=>[{tag:"br"}],renderHTML(e){let{HTMLAttributes:t}=e;return["br",Wi(this.options.HTMLAttributes,t)]},renderText:()=>"\n"}),gC=(e,t)=>{const n=e.resolve(t);if(n.depth<=1)return;const o=n.posAtIndex(n.index(n.depth-1),n.depth-1);return Uy(e.resolve(o))},vC=(e,t)=>{const n=e.resolve(t),o=n.index();if(0===o)return;const r=n.posAtIndex(o-1);return Uy(e.resolve(r))},yC=(e,t)=>{for(;t.childContainer;){const n=t.childContainer.node,o=e.resolve(t.childContainer.beforePos+1).posAtIndex(n.childCount-1);t=Uy(e.resolve(o))}return t},bC=e=>t=>{let{state:n,dispatch:o}=t;const r=Uy(n.doc.resolve(e)),i=vC(n.doc,r.bnBlock.beforePos);if(!i)return!1;const s=yC(n.doc,i);return!!((e,t)=>e.isBlockContainer&&"inline*"===e.blockContent.node.type.spec.content&&e.blockContent.node.childCount>0&&t.isBlockContainer&&"inline*"===t.blockContent.node.type.spec.content)(s,r)&&((e,t,n,o)=>{if(!o.isBlockContainer)throw new Error("Attempted to merge block at position ".concat(o.bnBlock.beforePos," into previous block at position ").concat(n.bnBlock.beforePos,", but next block is not a block container"));if(o.childContainer){const n=e.doc.resolve(o.childContainer.beforePos+1),r=e.doc.resolve(o.childContainer.afterPos-1),i=n.blockRange(r);if(t){const t=e.doc.resolve(o.bnBlock.beforePos);e.tr.lift(i,t.depth)}}if(t){if(!n.isBlockContainer)throw new Error("Attempted to merge block at position ".concat(o.bnBlock.beforePos," into previous block at position ").concat(n.bnBlock.beforePos,", but previous block is not a block container"));t(e.tr.delete(n.blockContent.afterPos-1,o.blockContent.beforePos+1))}return!0})(n,o,s,r)},wC=fs.create({priority:50,addKeyboardShortcuts(){var e=this;const t=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.editor.commands.first(n=>{let{commands:o}=n;return[()=>o.command(e=>{let{state:t}=e;const n=$y(t);if(!n.isBlockContainer)return!1;const{bnBlock:r,blockContent:i}=n,{depth:s}=t.doc.resolve(r.beforePos),l=0===t.selection.$anchor.parentOffset,a=t.selection.anchor===t.selection.head,c=0===i.node.childCount;return!!(l&&a&&c&&s>1)&&o.liftListItem("blockContainer")}),()=>o.command(n=>{var r;let{state:i}=n;const s=$y(i),l=null!==(r=e.options.editor.schema.blockSchema[s.blockNoteType].hardBreakShortcut)&&void 0!==r?r:"shift+enter";return"none"!==l&&(!!("shift+enter"===l&&t||"enter"===l)&&o.insertContent({type:"hardBreak"}))}),()=>o.command(e=>{let{state:t,dispatch:n}=e;const o=$y(t);if(!o.isBlockContainer)return!1;const{bnBlock:r,blockContent:i}=o,s=0===t.selection.$anchor.parentOffset,l=t.selection.anchor===t.selection.head,a=0===i.node.childCount;if(s&&l&&a){const e=r.afterPos,o=e+2;if(n){const n=t.schema.nodes.blockContainer.createAndFill();t.tr.insert(e,n).scrollIntoView(),t.tr.setSelection(new ft(t.doc.resolve(o)))}return!0}return!1}),()=>o.command(e=>{let{state:t,chain:n}=e;const o=$y(t);if(!o.isBlockContainer)return!1;const{blockContent:r}=o,i=0===t.selection.$anchor.parentOffset;return 0!==r.node.childCount&&(n().deleteSelection().command(vw(t.selection.from,i,i)).run(),!0)})]})};return{Backspace:()=>this.editor.commands.first(e=>{let{chain:t,commands:n}=e;return[()=>n.deleteSelection(),()=>n.undoInputRule(),()=>n.command(e=>{let{state:t}=e;const o=$y(t);if(!o.isBlockContainer)return!1;const r=t.selection.from===o.blockContent.beforePos+1,i="paragraph"===o.blockContent.node.type.name;return!(!r||i)&&n.command(Pb(o.bnBlock.beforePos,{type:"paragraph",props:{}}))}),()=>n.command(e=>{let{state:t}=e;const o=$y(t);if(!o.isBlockContainer)return!1;const{blockContent:r}=o;return t.selection.from===r.beforePos+1&&n.liftListItem("blockContainer")}),()=>n.command(e=>{let{state:n}=e;const o=$y(n);if(!o.isBlockContainer)return!1;const{bnBlock:r,blockContent:i}=o,s=n.selection.from===i.beforePos+1,l=n.selection.empty,a=r.beforePos;return!(!s||!l)&&t().command(bC(a)).scrollIntoView().run()}),()=>n.command(e=>{let{state:t,dispatch:n}=e;const o=$y(t);if(!o.isBlockContainer||t.selection.from!==o.blockContent.beforePos+1||vC(t.doc,o.bnBlock.beforePos))return!1;const r=gC(t.doc,o.bnBlock.beforePos);if("column"!==(null==r?void 0:r.blockNoteType))return!1;const i=r,s=gC(t.doc,i.bnBlock.beforePos);if("columnList"!==(null==s?void 0:s.blockNoteType))throw new Error("parent of column is not a column list");const l=1===i.childContainer.node.childCount,a=l&&2===s.childContainer.node.childCount,c=s.childContainer.node.firstChild===i.bnBlock.node;if(n){const e=t.doc.slice(o.bnBlock.beforePos,o.bnBlock.afterPos,!1);if(a)if(c){t.tr.step(new Le(s.bnBlock.beforePos,s.bnBlock.afterPos,i.bnBlock.afterPos+1,s.bnBlock.afterPos-2,e,e.size,!1));const n=t.tr.doc.resolve(i.bnBlock.beforePos);t.tr.setSelection(ft.between(n,n))}else{t.tr.step(new Le(s.bnBlock.beforePos,s.bnBlock.afterPos,s.bnBlock.beforePos+2,i.bnBlock.beforePos-1,e,0,!1));const n=t.tr.doc.resolve(t.tr.mapping.map(i.bnBlock.beforePos-1));t.tr.setSelection(ft.between(n,n))}else if(l)if(c){t.tr.delete(i.bnBlock.beforePos,i.bnBlock.afterPos),t.tr.insert(s.bnBlock.beforePos,e.content);const n=t.tr.doc.resolve(s.bnBlock.beforePos);t.tr.setSelection(ft.between(n,n))}else t.tr.delete(i.bnBlock.beforePos-1,i.bnBlock.beforePos+1);else{t.tr.delete(o.bnBlock.beforePos,o.bnBlock.afterPos),c?t.tr.insert(s.bnBlock.beforePos-1,e.content):t.tr.insert(i.bnBlock.beforePos-1,e.content);const n=t.tr.doc.resolve(i.bnBlock.beforePos-1);t.tr.setSelection(ft.between(n,n))}}return!0}),()=>n.command(e=>{let{state:n}=e;const o=$y(n);if(!o.isBlockContainer)return!1;if(0===o.blockContent.node.childCount&&"inline*"===o.blockContent.node.type.spec.content){const e=vC(n.doc,o.bnBlock.beforePos);if(!e||!e.isBlockContainer)return!1;let r=t();if("tableRow+"===e.blockContent.node.type.spec.content){const e=o.bnBlock.beforePos-1-1-1-1-1;r=r.setTextSelection(e)}else if(""===e.blockContent.node.type.spec.content){const t=e.blockContent.afterPos-e.blockContent.node.nodeSize;r=r.setNodeSelection(t)}else{const t=e.blockContent.afterPos-e.blockContent.node.nodeSize;r=r.setTextSelection(t)}return r.deleteRange({from:o.bnBlock.beforePos,to:o.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>n.command(e=>{let{state:n}=e;const o=$y(n);if(!o.isBlockContainer)throw new Error("todo");const r=n.selection.from===o.blockContent.beforePos+1,i=n.selection.empty,s=vC(n.doc,o.bnBlock.beforePos);if(s&&r&&i){const e=yC(n.doc,s);if(!e.isBlockContainer)throw new Error("todo");if(""===e.blockContent.node.type.spec.content||"inline*"===e.blockContent.node.type.spec.content&&0===e.blockContent.node.childCount)return t().cut({from:o.bnBlock.beforePos,to:o.bnBlock.afterPos},e.bnBlock.afterPos).deleteRange({from:e.bnBlock.beforePos,to:e.bnBlock.afterPos}).run()}return!1})]}),Delete:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.command(e=>{let{state:n}=e;const o=$y(n);if(!o.isBlockContainer)return!1;const{bnBlock:r,blockContent:i,childContainer:s}=o,{depth:l}=n.doc.resolve(r.beforePos),a=r.afterPos===n.doc.nodeSize-3,c=n.selection.from===i.afterPos-1,u=n.selection.empty;if(!a&&c&&u&&void 0===s){let e=l,o=r.afterPos+1,i=n.doc.resolve(o).depth;for(;i<e;)e=i,o+=2,i=n.doc.resolve(o).depth;return t.command(bC(o-1))}return!1})]}),Enter:()=>t(),"Shift-Enter":()=>t(!0),Tab:()=>{var e,t,n;return("prefer-indent"===this.options.tabBehavior||!(null!=(e=this.options.editor.formattingToolbar)&&e.shown||null!=(t=this.options.editor.linkToolbar)&&t.shown||null!=(n=this.options.editor.filePanel)&&n.shown))&&hk(this.options.editor)},"Shift-Tab":()=>{var e,t,n;return("prefer-indent"===this.options.tabBehavior||!(null!=(e=this.options.editor.formattingToolbar)&&e.shown||null!=(t=this.options.editor.linkToolbar)&&t.shown||null!=(n=this.options.editor.filePanel)&&n.shown))&&(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});class kC{constructor(e,t,n){ay(this,"state"),ay(this,"emitUpdate"),ay(this,"menuUpdateTimer"),ay(this,"startMenuUpdateTimer"),ay(this,"stopMenuUpdateTimer"),ay(this,"mouseHoveredLinkMark"),ay(this,"mouseHoveredLinkMarkRange"),ay(this,"keyboardHoveredLinkMark"),ay(this,"keyboardHoveredLinkMarkRange"),ay(this,"linkMark"),ay(this,"linkMarkRange"),ay(this,"mouseOverHandler",e=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),e.target instanceof HTMLAnchorElement&&"A"===e.target.nodeName){const t=e.target,n=this.pmView.posAtDOM(t,0)+1,o=this.pmView.state.doc.resolve(n),r=o.marks();for(const e of r)if(e.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=e,this.mouseHoveredLinkMarkRange=ks(o,e.type,e.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),ay(this,"clickHandler",e=>{var t;const n=this.pmView.dom.parentElement;this.linkMark&&e&&e.target&&n!==e.target&&!n.contains(e.target)&&null!=(t=this.state)&&t.show&&(this.state.show=!1,this.emitUpdate())}),ay(this,"scrollHandler",()=>{var e;void 0!==this.linkMark&&null!=(e=this.state)&&e.show&&(this.state.referencePos=Ys(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),ay(this,"closeMenu",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=t,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");n(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(e,t){var n;this.editor.transact(n=>{const o=qy(n);n.insertText(t,this.linkMarkRange.from,this.linkMarkRange.to),n.addMark(this.linkMarkRange.from,this.linkMarkRange.from+t.length,o.mark("link",{href:e}))}),this.pmView.focus(),null!=(n=this.state)&&n.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var e;this.editor.transact(e=>e.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}update(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var o;const{state:r}=e;if(t&&t.selection.from===r.selection.from&&t.selection.to===r.selection.to||!this.pmView.hasFocus())return;const i=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const e=this.pmView.state.selection.$from.marks();for(const t of e)if(t.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=t,this.keyboardHoveredLinkMarkRange=ks(this.pmView.state.selection.$from,t.type,t.attrs)||void 0;break}}return this.mouseHoveredLinkMark&&n&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable?(this.state={show:!0,referencePos:Ys(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},void this.emitUpdate()):null==(o=this.state)||!o.show||!i||this.linkMark&&this.editor.isEditable?void 0:(this.state.show=!1,void this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const CC=new Pt("LinkToolbarPlugin");class xC extends eC{constructor(e){super(),ay(this,"view"),ay(this,"editLink",(e,t)=>{this.view.editLink(e,t)}),ay(this,"deleteLink",()=>{this.view.deleteLink()}),ay(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),ay(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),ay(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new Nt({key:CC,view:t=>(this.view=new kC(e,t,e=>{this.emit("update",e)}),this.view),props:{handleKeyDown:(e,t)=>!("Escape"!==t.key||!this.shown)&&(this.view.closeMenu(),!0)}}))}static key(){return"linkToolbar"}onUpdate(e){return this.on("update",e)}get shown(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}}const SC=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],AC="https",EC=new Pt("node-selection-keyboard");class DC extends eC{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new Nt({key:EC,props:{handleKeyDown:(e,t)=>{if("node"in e.state.selection){if(t.ctrlKey||t.metaKey)return!1;if(1===t.key.length)return t.preventDefault(),!0;if("Enter"===t.key&&!t.shiftKey&&!t.altKey&&!t.ctrlKey&&!t.metaKey){const t=e.state.tr;return e.dispatch(t.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new ft(t.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}}const MC=new Pt("blocknote-placeholder");class NC extends eC{static key(){return"placeholder"}constructor(e,t){super(),this.addProsemirrorPlugin(new Nt({key:MC,view:n=>{var o,r;const i="placeholder-selector-".concat(Dl());n.dom.classList.add(i);const s=document.createElement("style"),a=e._tiptapEditor.options.injectNonce;a&&s.setAttribute("nonce",a),(null==(o=e.prosemirrorView)?void 0:o.root)instanceof ShadowRoot?e.prosemirrorView.root.append(s):null==(r=e.prosemirrorView)||r.root.head.appendChild(s);const c=s.sheet,u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return".".concat(i," .bn-block-content").concat(e," .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before")};try{const{default:e,emptyDocument:n}=t,o=(0,l.A)(t,sy);for(const[t,s]of Object.entries(o)){const e='[data-content-type="'.concat(t,'"]');c.insertRule("".concat(u(e)," { content: ").concat(JSON.stringify(s),"; }"))}const r="[data-is-only-empty-block]",i="[data-is-empty-and-focused]";c.insertRule("".concat(u(r)," { content: ").concat(JSON.stringify(n),"; }")),c.insertRule("".concat(u(i)," { content: ").concat(JSON.stringify(e),"; }"))}catch(d){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",d)}return{destroy:()=>{var t,n;(null==(t=e.prosemirrorView)?void 0:t.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(s):null==(n=e.prosemirrorView)||n.root.head.removeChild(s)}}},props:{decorations:t=>{const{doc:n,selection:o}=t;if(!e.isEditable||!o.empty||o.$from.parent.type.spec.code)return;const r=[];6===t.doc.content.size&&r.push(vr.node(2,4,{"data-is-only-empty-block":"true"}));const i=o.$anchor,s=i.parent;if(0===s.content.size){const e=i.before();r.push(vr.node(e,e+s.nodeSize,{"data-is-empty-and-focused":"true"}))}return wr.create(n,r)}}}))}}const TC=new Pt("previous-blocks"),OC={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class PC extends eC{static key(){return"previousBlockType"}constructor(){let e;super(),this.addProsemirrorPlugin(new Nt({key:TC,view(t){return{update:async(t,n)=>{var o;(null==(o=this.key)?void 0:o.getState(t.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{t.dispatch(t.state.tr.setMeta(TC,{clearUpdate:!0}))},0))},destroy:()=>{e&&clearTimeout(e)}}},state:{init:()=>({prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}),apply(e,t,n,o){if(t.currentTransactionOldBlockAttrs={},t.updatedBlocks.clear(),!e.docChanged||n.doc.eq(o.doc))return t;const r={},i=js(n.doc,e=>e.attrs.id),s=new Map(i.map(e=>[e.node.attrs.id,e])),l=js(o.doc,e=>e.attrs.id);for(const a of l){const i=s.get(a.node.attrs.id),l=null==i?void 0:i.node.firstChild,c=a.node.firstChild;if(i&&l&&c){const s={index:c.attrs.index,level:c.attrs.level,type:c.type.name,depth:o.doc.resolve(a.pos).depth};let u={index:l.attrs.index,level:l.attrs.level,type:l.type.name,depth:n.doc.resolve(i.pos).depth};r[a.node.attrs.id]=u,e.getMeta("numberedListIndexing")&&(a.node.attrs.id in t.prevTransactionOldBlockAttrs&&(u=t.prevTransactionOldBlockAttrs[a.node.attrs.id]),"numberedListItem"===s.type&&(u.index=s.index)),t.currentTransactionOldBlockAttrs[a.node.attrs.id]=u,JSON.stringify(u)!==JSON.stringify(s)&&(u["depth-change"]=u.depth-s.depth,t.updatedBlocks.add(a.node.attrs.id))}}return t.prevTransactionOldBlockAttrs=r,t}},props:{decorations(e){const t=this.getState(e);if(0===t.updatedBlocks.size)return;const n=[];return e.doc.descendants((e,o)=>{if(!e.attrs.id||!t.updatedBlocks.has(e.attrs.id))return;const r=t.currentTransactionOldBlockAttrs[e.attrs.id],i={};for(const[t,n]of Object.entries(r))i["data-prev-"+OC[t]]=n||"none";const l=vr.node(o,o+e.nodeSize,(0,s.A)({},i));n.push(l)}),wr.create(e.doc,n)}}}))}}const _C=new Pt("blocknote-show-selection");class LC extends eC{constructor(e){super(),ay(this,"enabled",!1),this.editor=e,this.addProsemirrorPlugin(new Nt({key:_C,props:{decorations:e=>{const{doc:t,selection:n}=e;if(!this.enabled)return wr.empty;const o=vr.inline(n.from,n.to,{"data-show-selection":"true"});return wr.create(t,[o])}}}))}static key(){return"showSelection"}setEnabled(e){this.enabled!==e&&(this.enabled=e,this.editor.transact(e=>e.setMeta(_C,{})))}getEnabled(){return this.enabled}}function RC(e,t){for(var n,o;e&&e.parentElement&&e.parentElement!==t.dom&&"blockContainer"!==(null==(n=e.getAttribute)?void 0:n.call(e,"data-node-type"));)e=e.parentElement;if("blockContainer"===(null==(o=e.getAttribute)?void 0:o.call(e,"data-node-type")))return{node:e,id:e.getAttribute("data-id")}}class BC extends ut{constructor(e,t){super(e,t),ay(this,"nodes");const n=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,t.pos,(e,t,o)=>{if(null!==o&&o.eq(n))return this.nodes.push(e),!1})}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return new BC(e.resolve(t),e.resolve(n))}content(){return new y(h.from(this.nodes),0,0)}eq(e){if(!(e instanceof BC)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let t=0;t<this.nodes.length;t++)if(!this.nodes[t].eq(e.nodes[t]))return!1;return!0}map(e,t){const n=t.mapResult(this.from),o=t.mapResult(this.to);return o.deleted?ut.near(e.resolve(n.pos)):n.deleted?ut.near(e.resolve(o.pos)):new BC(e.resolve(n.pos),e.resolve(o.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}}let IC;function FC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;t===n&&(n+=e.state.doc.resolve(t+1).node().nodeSize);const o=e.domAtPos(t).node.cloneNode(!0),r=e.domAtPos(t).node,i=(e,t)=>Array.prototype.indexOf.call(e.children,t),s=i(r,e.domAtPos(t+1).node.parentElement),l=i(r,e.domAtPos(n-1).node.parentElement);for(let u=r.childElementCount-1;u>=0;u--)(u>l||u<s)&&o.removeChild(o.children[u]);jC(e.root),IC=o;const a=IC.getElementsByTagName("iframe");for(let u=0;u<a.length;u++){const e=a[u],t=e.parentElement;t&&t.removeChild(e)}const c=e.dom.className.split(" ").filter(e=>"ProseMirror"!==e&&"bn-root"!==e&&"bn-editor"!==e).join(" ");IC.className=IC.className+" bn-drag-preview "+c,e.root instanceof ShadowRoot?e.root.appendChild(IC):e.root.body.appendChild(IC)}function jC(e){void 0!==IC&&(e instanceof ShadowRoot?e.removeChild(IC):e.body.removeChild(IC),IC=void 0)}function zC(e,t,n){if(!e.dataTransfer)return;const o=n.prosemirrorView;if(!o)return;const r=Mb(t.id,o.state.doc);if(!r)throw new Error("Block with ID ".concat(t.id," not found"));const i=r.posBeforeNode;if(null!=i){const t=o.state.selection,r=o.state.doc,{from:s,to:l}=function(e,t){let n,o;const r="blockContent"===t.resolve(e.from).node().type.spec.group,i="blockContent"===t.resolve(e.to).node().type.spec.group,s=Math.min(e.$anchor.depth,e.$head.depth);if(r&&i){const r=e.$from.start(s-1),i=e.$to.end(s-1);n=t.resolve(r-1).pos,o=t.resolve(i+1).pos}else n=e.from,o=e.to;return{from:n,to:o}}(t,r),a=s<=i&&i<l,c=t.$anchor.node()!==t.$head.node()||t instanceof BC;a&&c?(o.dispatch(o.state.tr.setSelection(BC.create(r,s,l))),FC(o,s,l)):(o.dispatch(o.state.tr.setSelection(gt.create(o.state.doc,i))),FC(o,i));const u=o.state.selection.content(),d=n.pmSchema,h=o.serializeForClipboard(u).dom.innerHTML,p=jb(d,n),f=Gk(u.content),m=p.exportBlocks(f,{}),g=bk(m);e.dataTransfer.clearData(),e.dataTransfer.setData("blocknote/html",h),e.dataTransfer.setData("text/html",m),e.dataTransfer.setData("text/plain",g),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(IC,0,0)}}ut.jsonID("multiple-node",BC);const HC=.1;function VC(e,t,n){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=e.root.elementsFromPoint(t.left+("editor"===n?50:0),t.top);for(const i of r)if(e.dom.contains(i))return o&&i.closest("[data-node-type=columnList]")?VC(e,{left:t.left+50,top:t.top},n,!1):RC(i,e)}class UC{constructor(e,t,n,o){ay(this,"state"),ay(this,"emitUpdate"),ay(this,"mousePos"),ay(this,"hoveredBlock"),ay(this,"menuFrozen",!1),ay(this,"isDragOrigin",!1),ay(this,"updateState",e=>{this.state=e,this.emitUpdate(this.state)}),ay(this,"updateStateFromMousePos",()=>{var e,t,n,o;if(this.menuFrozen||!this.mousePos)return;const r=function(e,t,n){if(!t.dom.firstChild)return;const o=t.dom.firstChild.getBoundingClientRect(),r={left:e.x,top:e.y},i=r.left<o.left,s=r.left>o.right;"viewport"===n&&(i&&(r.left=o.left+10),s&&(r.left=o.right-10));let l=VC(t,r,n);if(!s&&l){const e=l.node.getBoundingClientRect();r.left=e.right-10,l=VC(t,r,"viewport",!1)}return l}(this.mousePos,this.pmView,this.sideMenuDetection);if(!r||!this.editor.isEditable)return void(null!=(e=this.state)&&e.show&&(this.state.show=!1,this.updateState(this.state)));if(null!=(t=this.state)&&t.show&&null!=(n=this.hoveredBlock)&&n.hasAttribute("data-id")&&(null==(o=this.hoveredBlock)?void 0:o.getAttribute("data-id"))===r.id)return;this.hoveredBlock=r.node;const i=r.node.firstChild;if(i&&this.editor.isEditable){const e=i.getBoundingClientRect(),t=r.node.closest("[data-node-type=column]");this.updateState({show:!0,referencePos:new DOMRect(t?t.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,e.y,e.width,e.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),ay(this,"onDrop",e=>{var t,n;if(null===this.pmView.dragging)return;this.editor._tiptapEditor.commands.blur();const o=e.target instanceof Node&&(null==(t=e.target instanceof HTMLElement?e.target:e.target.parentElement)?void 0:t.closest(".bn-editor"))||null;if(o&&(this.isDragOrigin||this.pmView.dom!==o?this.isDragOrigin&&this.pmView.dom!==o&&setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0):this.pmView.dispatch(this.pmView.state.tr.setSelection(ft.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.to)))),"editor"===this.sideMenuDetection||e.synthetic||null==(n=e.dataTransfer)||!n.types.includes("blocknote/html"))return;const r=this.pmView.posAtCoords({left:e.clientX,top:e.clientY});if(!r||-1===r.inside){const t=this.createSyntheticEvent(e);this.pmView.dom.dispatchEvent(t)}}),ay(this,"onDragEnd",()=>{this.pmView.dragging=null}),ay(this,"onDragStart",e=>{var t;const n=null==(t=e.dataTransfer)?void 0:t.getData("blocknote/html");if(!n)return;if(this.pmView.dragging)throw new Error("New drag was started while an existing drag is ongoing");const o=document.createElement("div");o.innerHTML=n;const r=oe.fromSchema(this.pmView.state.schema).parse(o,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new y(r.content,0,0),move:!0}}),ay(this,"onDragOver",e=>{var t;if("editor"===this.sideMenuDetection||e.synthetic||null==(t=e.dataTransfer)||!t.types.includes("blocknote/html"))return;const n=this.pmView.posAtCoords({left:e.clientX,top:e.clientY});if(!n||-1===n.inside&&this.pmView.dom.firstChild){const t=this.createSyntheticEvent(e);this.pmView.dom.dispatchEvent(t)}}),ay(this,"onKeyDown",e=>{var t;null!=(t=this.state)&&t.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),ay(this,"onMouseMove",e=>{var t;if(this.menuFrozen)return;this.mousePos={x:e.clientX,y:e.clientY};const n=this.pmView.dom.getBoundingClientRect(),o=this.mousePos.x>n.left&&this.mousePos.x<n.right&&this.mousePos.y>n.top&&this.mousePos.y<n.bottom,r=this.pmView.dom.parentElement;o&&e&&e.target&&r!==e.target&&!r.contains(e.target)?null!=(t=this.state)&&t.show&&(this.state.show=!1,this.emitUpdate(this.state)):this.updateStateFromMousePos()}),ay(this,"onScroll",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state))}),this.editor=e,this.sideMenuDetection=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");o(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),gk(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),n.root.addEventListener("scroll",this.onScroll,!0)}createSyntheticEvent(e){const t=new Event(e.type,e),n=this.pmView.dom.firstChild.getBoundingClientRect();return t.clientX=e.clientX,t.clientY=e.clientY,e.clientX<n.left&&e.clientX>n.left-n.width*HC?t.clientX=n.left+n.width*HC/2:e.clientX>n.right&&e.clientX<n.right+n.width*HC?t.clientX=n.right-n.width*HC/2:(e.clientX<n.left||e.clientX>n.right)&&(t.clientX=n.left+HC*n.width*2),t.clientY=Math.min(Math.max(e.clientY,n.top),n.top+n.height),t.dataTransfer=e.dataTransfer,t.preventDefault=()=>e.preventDefault(),t.synthetic=!0,t}update(e,t){var n;!t.doc.eq(this.pmView.state.doc)&&null!=(n=this.state)&&n.show&&this.updateStateFromMousePos()}destroy(){var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const $C=new Pt("SideMenuPlugin");class WC extends eC{constructor(e,t){super(),ay(this,"view"),ay(this,"blockDragStart",(e,t)=>{this.view&&(this.view.isDragOrigin=!0),zC(e,t,this.editor)}),ay(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&jC(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),ay(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),ay(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=e,this.addProsemirrorPlugin(new Nt({key:$C,view:n=>(this.view=new UC(e,t,n,e=>{this.emit("update",e)}),this.view)}))}static key(){return"sideMenu"}onUpdate(e){return this.on("update",e)}}const qC=new Map;function GC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";const o=Yg.getState(e._tiptapEditor.state);if(!o){const o=function(e){if(qC.has(e))return qC.get(e);const t=new Se;return e._tiptapEditor.on("transaction",e=>{let{transaction:n}=e;t.appendMapping(n.mapping)}),e._tiptapEditor.on("destroy",()=>{qC.delete(e)}),qC.set(e,t),t}(e),r=o.maps.length;return()=>o.slice(r).map(t,"left"===n?-1:1)}const r=lv(t+("right"===n?1:0),o.binding.type,o.binding.mapping);return()=>{const t=Yg.getState(e._tiptapEditor.state),o=cv(t.doc,t.binding.type,r,t.binding.mapping);if(null===o)throw new Error("Position not found, cannot track positions");return o+("right"===n?-1:0)}}const KC=Hs(e=>"blockContainer"===e.type.name);class ZC{constructor(e,t){var n,o;ay(this,"state"),ay(this,"emitUpdate"),ay(this,"rootEl"),ay(this,"pluginState"),ay(this,"handleScroll",()=>{var e,t;if(null!=(e=this.state)&&e.show){const e=null==(t=this.rootEl)?void 0:t.querySelector('[data-decoration-id="'.concat(this.pluginState.decorationId,'"]'));if(!e)return;this.state.referencePos=e.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),ay(this,"closeMenu",()=>{this.editor.transact(e=>e.setMeta(JC,null))}),ay(this,"clearQuery",()=>{void 0!==this.pluginState&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(e=>e.selection.from)}).run()}),this.editor=e,this.pluginState=void 0,this.emitUpdate=e=>{var n;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");t(e,(0,s.A)((0,s.A)({},this.state),{},{ignoreQueryLength:null==(n=this.pluginState)?void 0:n.ignoreQueryLength}))},this.rootEl=null==(n=this.editor.prosemirrorView)?void 0:n.root,null==(o=this.rootEl)||o.addEventListener("scroll",this.handleScroll,!0)}update(e,t){var n;const o=JC.getState(t),r=JC.getState(e.state),i=void 0!==o&&void 0===r;if(!(void 0===o&&void 0!==r)&&(void 0===o||void 0===r)&&!i)return;if(this.pluginState=i?o:r,i||!this.editor.isEditable)return this.state&&(this.state.show=!1),void this.emitUpdate(this.pluginState.triggerCharacter);const s=null==(n=this.rootEl)?void 0:n.querySelector('[data-decoration-id="'.concat(this.pluginState.decorationId,'"]'));this.editor.isEditable&&s&&(this.state={show:!0,referencePos:s.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;null==(e=this.rootEl)||e.removeEventListener("scroll",this.handleScroll,!0)}}const JC=new Pt("SuggestionMenuPlugin");class XC extends eC{constructor(e){super(),ay(this,"view"),ay(this,"triggerCharacters",[]),ay(this,"addTriggerCharacter",e=>{this.triggerCharacters.push(e)}),ay(this,"removeTriggerCharacter",e=>{this.triggerCharacters=this.triggerCharacters.filter(t=>t!==e)}),ay(this,"closeMenu",()=>this.view.closeMenu()),ay(this,"clearQuery",()=>this.view.clearQuery());const t=this.triggerCharacters;this.addProsemirrorPlugin(new Nt({key:JC,view:()=>(this.view=new ZC(e,(e,t)=>{this.emit("update ".concat(e),t)}),this.view),state:{init(){},apply:(t,n,o,r)=>{if(void 0!==t.getMeta("orderedListIndexing")||t.selection.$from.parent.type.spec.code)return n;const i=t.getMeta(JC);if("object"==typeof i&&null!==i){n&&this.closeMenu();const t=GC(e,r.selection.from-i.triggerCharacter.length);return{triggerCharacter:i.triggerCharacter,deleteTriggerCharacter:!1!==i.deleteTriggerCharacter,queryStartPos:()=>t()+i.triggerCharacter.length,query:"",decorationId:"id_".concat(Math.floor(4294967295*Math.random())),ignoreQueryLength:null==i?void 0:i.ignoreQueryLength}}if(void 0===n)return n;if(r.selection.from!==r.selection.to||null===i||t.getMeta("focus")||t.getMeta("blur")||t.getMeta("pointer")||void 0!==n.triggerCharacter&&r.selection.from<n.queryStartPos()||!r.selection.$from.sameParent(r.doc.resolve(n.queryStartPos())))return;const l=(0,s.A)({},n);return l.query=r.doc.textBetween(n.queryStartPos(),r.selection.from),l}},props:{handleTextInput:(e,n,o,r)=>!!t.includes(r)&&(e.dispatch(e.state.tr.insertText(r)),e.dispatch(e.state.tr.setMeta(JC,{triggerCharacter:r}).scrollIntoView()),!0),decorations(e){const t=this.getState(e);if(void 0===t)return null;if(!t.deleteTriggerCharacter){const n=KC(e.selection);if(n)return wr.create(e.doc,[vr.node(n.pos,n.pos+n.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":t.decorationId})])}return wr.create(e.doc,[vr.inline(t.queryStartPos()-t.triggerCharacter.length,t.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":t.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(e,t){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on("update ".concat(e),t)}get shown(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}}const QC=as.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes:()=>({id:{default:null,validate:"number"}}),extendMarkSchema:e=>"insertion"!==e.name?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM:(e,t)=>["ins",(0,s.A)({"data-id":String(e.attrs.id),"data-inline":String(t)},!t&&{style:"display: contents"}),0],parseDOM:[{tag:"ins",getAttrs:e=>!!e.dataset.id&&{id:parseInt(e.dataset.id,10)}}]}}),YC=as.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes:()=>({id:{default:null,validate:"number"}}),extendMarkSchema:e=>"deletion"!==e.name?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM:(e,t)=>["del",(0,s.A)({"data-id":String(e.attrs.id),"data-inline":String(t)},!t&&{style:"display: contents"}),0],parseDOM:[{tag:"del",getAttrs:e=>!!e.dataset.id&&{id:parseInt(e.dataset.id,10)}}]}}),ex=as.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes:()=>({id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}),extendMarkSchema:e=>"modification"!==e.name?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM:(e,t)=>[t?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0],parseDOM:[{tag:"span[data-type='modification']",getAttrs:e=>!!e.dataset.id&&{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}},{tag:"div[data-type='modification']",getAttrs:e=>!!e.dataset.id&&{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}}]}});let tx;function nx(e){tx||(tx=document.createElement("div"),tx.innerHTML="_",tx.style.opacity="0",tx.style.height="1px",tx.style.width="1px",e instanceof Document?e.body.appendChild(tx):e.appendChild(tx))}function ox(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}class rx{constructor(e,t,n){ay(this,"state"),ay(this,"emitUpdate"),ay(this,"tableId"),ay(this,"tablePos"),ay(this,"tableElement"),ay(this,"menuFrozen",!1),ay(this,"mouseState","up"),ay(this,"prevWasEditable",null),ay(this,"viewMousedownHandler",()=>{this.mouseState="down"}),ay(this,"mouseUpHandler",e=>{this.mouseState="up",this.mouseMoveHandler(e)}),ay(this,"mouseMoveHandler",e=>{var t,n,o,r,i,l,a;if(this.menuFrozen||"selecting"===this.mouseState||!(e.target instanceof Element)||!this.pmView.dom.contains(e.target))return;const c=function(e){let t=e;for(;t&&"TD"!==t.nodeName&&"TH"!==t.nodeName&&!t.classList.contains("tableWrapper");){if(t.classList.contains("ProseMirror"))return;const e=t.parentNode;if(!e||!(e instanceof Element))return;t=e}return"TD"===t.nodeName||"TH"===t.nodeName?{type:"cell",domNode:t,tbodyNode:t.closest("tbody")}:{type:"wrapper",domNode:t,tbodyNode:t.querySelector("tbody")}}(e.target);if("cell"===(null==c?void 0:c.type)&&"down"===this.mouseState&&(null==(t=this.state)||!t.draggingState))return this.mouseState="selecting",void(null!=(n=this.state)&&n.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate()));if(!c||!this.editor.isEditable)return void(null!=(o=this.state)&&o.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate()));if(!c.tbodyNode)return;const u=c.tbodyNode.getBoundingClientRect(),d=RC(c.domNode,this.pmView);if(!d)return;let h;this.tableElement=d.node;const p=this.editor.transact(e=>Mb(d.id,e.doc));if(!p)throw new Error("Block with ID ".concat(d.id," not found"));const f=nb(p.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(function(e,t,n){return t.type===e&&t.type in n.schema.blockSchema&&Kw(t.type,n)}("table",f,this.editor)&&(this.tablePos=p.posBeforeNode+1,h=f),!h)return;this.tableId=d.id;const m=null==(r=c.domNode.closest(".tableWrapper"))?void 0:r.querySelector(".table-widgets-container");if("wrapper"===(null==c?void 0:c.type)){const t=e.clientY>=u.bottom-1&&e.clientY<u.bottom+20,n=e.clientX>=u.right-1&&e.clientX<u.right+20,o=e.clientX>u.right||e.clientY>u.bottom;this.state=(0,s.A)((0,s.A)({},this.state),{},{show:!0,showAddOrRemoveRowsButton:t,showAddOrRemoveColumnsButton:n,referencePosTable:u,block:h,widgetContainer:m,colIndex:o||null==(i=this.state)?void 0:i.colIndex,rowIndex:o||null==(l=this.state)?void 0:l.rowIndex,referencePosCell:o||null==(a=this.state)?void 0:a.referencePosCell})}else{const e=ox(c.domNode),t=ox(c.domNode.parentElement),n=c.domNode.getBoundingClientRect();if(void 0!==this.state&&this.state.show&&this.tableId===d.id&&this.state.rowIndex===t&&this.state.colIndex===e)return;this.state={show:!0,showAddOrRemoveColumnsButton:e===h.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:t===h.content.rows.length-1,referencePosTable:u,block:h,draggingState:void 0,referencePosCell:n,colIndex:e,rowIndex:t,widgetContainer:m}}return this.emitUpdate(),!1}),ay(this,"dragOverHandler",e=>{var t;if(void 0===(null==(t=this.state)?void 0:t.draggingState))return;e.preventDefault(),e.dataTransfer.dropEffect="move",function(e,t){const n=t.querySelectorAll(e);for(let o=0;o<n.length;o++)n[o].style.visibility="hidden"}(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const n={left:Math.min(Math.max(e.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(e.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},o=this.pmView.root.elementsFromPoint(n.left,n.top).filter(e=>"TD"===e.tagName||"TH"===e.tagName);if(0===o.length)return;const r=o[0];let i=!1;const s=ox(r.parentElement),l=ox(r),a="row"===this.state.draggingState.draggedCellOrientation?this.state.rowIndex:this.state.colIndex,c=("row"===this.state.draggingState.draggedCellOrientation?s:l)!==a;(this.state.rowIndex!==s||this.state.colIndex!==l)&&(this.state.rowIndex=s,this.state.colIndex=l,this.state.referencePosCell=r.getBoundingClientRect(),i=!0);const u="row"===this.state.draggingState.draggedCellOrientation?n.top:n.left;this.state.draggingState.mousePos!==u&&(this.state.draggingState.mousePos=u,i=!0),i&&this.emitUpdate(),c&&this.editor.transact(e=>e.setMeta(ix,!0))}),ay(this,"dropHandler",e=>{if(this.mouseState="up",void 0===this.state||void 0===this.state.draggingState)return!1;if(void 0===this.state.rowIndex||void 0===this.state.colIndex)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");e.preventDefault();const{draggingState:t,colIndex:n,rowIndex:o}=this.state,r=this.state.block.content.columnWidths;if("row"===t.draggedCellOrientation){if(!bb(this.state.block,t.originalIndex,o))return!1;const e=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:db(e);const{row:r}=pb({row:t,col:0},e,o),{row:i}=pb({row:n,col:0},e,o),[s]=o.splice(r,1);return o.splice(i,0,s),hb(o)}(this.state.block,t.originalIndex,o);this.editor.updateBlock(this.state.block,{type:"table",content:(0,s.A)((0,s.A)({},this.state.block.content),{},{rows:e})})}else{if(!wb(this.state.block,t.originalIndex,n))return!1;const e=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:db(e);const{col:r}=pb({row:0,col:t},e,o),{col:i}=pb({row:0,col:n},e,o);return o.forEach(e=>{const[t]=e.splice(r,1);e.splice(i,0,t)}),hb(o)}(this.state.block,t.originalIndex,n),[o]=r.splice(t.originalIndex,1);r.splice(n,0,o),this.editor.updateBlock(this.state.block,{type:"table",content:(0,s.A)((0,s.A)({},this.state.block.content),{},{columnWidths:r,rows:e})})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=e,this.pmView=t,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");n(this.state)},t.dom.addEventListener("mousemove",this.mouseMoveHandler),t.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),t.root.addEventListener("dragover",this.dragOverHandler),t.root.addEventListener("drop",this.dropHandler)}update(){var e;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||"table"!==this.state.block.type||null==(e=this.tableElement)||!e.isConnected)return this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,void this.emitUpdate();const{height:t,width:n}=fb(this.state.block);void 0!==this.state.rowIndex&&void 0!==this.state.colIndex&&(this.state.rowIndex>=t&&(this.state.rowIndex=t-1),this.state.colIndex>=n&&(this.state.colIndex=n-1));const o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(void 0!==this.state.rowIndex&&void 0!==this.state.colIndex){const e=o.children[this.state.rowIndex].children[this.state.colIndex];e?this.state.referencePosCell=e.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const ix=new Pt("TableHandlesPlugin");class sx extends eC{constructor(e){var t;super(),t=this,ay(this,"view"),ay(this,"colDragStart",e=>{if(void 0===this.view.state||void 0===this.view.state.colIndex)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:e.clientX},this.view.emitUpdate(),this.editor.transact(e=>e.setMeta(ix,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");nx(this.editor.prosemirrorView.root),e.dataTransfer.setDragImage(tx,0,0),e.dataTransfer.effectAllowed="move"}),ay(this,"rowDragStart",e=>{if(void 0===this.view.state||void 0===this.view.state.rowIndex)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:e.clientY},this.view.emitUpdate(),this.editor.transact(e=>e.setMeta(ix,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");nx(this.editor.prosemirrorView.root),e.dataTransfer.setDragImage(tx,0,0),e.dataTransfer.effectAllowed="copyMove"}),ay(this,"dragEnd",()=>{if(void 0===this.view.state)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(e=>e.setMeta(ix,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");var e;e=this.editor.prosemirrorView.root,tx&&(e instanceof Document?e.body.removeChild(tx):e.removeChild(tx),tx=void 0)}),ay(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),ay(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),ay(this,"getCellsAtRowHandle",(e,t)=>gb(e,t)),ay(this,"getCellsAtColumnHandle",(e,t)=>vb(e,t)),ay(this,"setCellSelection",function(e,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;const r=t.view;if(!r)throw new Error("Table handles view not initialized");const i=e.doc.resolve(r.tablePos+1),s=e.doc.resolve(i.posAtIndex(n.row)+1),l=e.doc.resolve(s.posAtIndex(n.col)),a=e.doc.resolve(i.posAtIndex(o.row)+1),c=e.doc.resolve(a.posAtIndex(o.col)),u=e.tr;return u.setSelection(new da(l,c)),e.apply(u)}),ay(this,"addRowOrColumn",(e,t)=>{this.editor.exec((n,o)=>{const r=this.setCellSelection(n,"row"===t.orientation?{row:e,col:0}:{row:0,col:e});return"row"===t.orientation?"above"===t.side?function(e,t){if(!ra(e))return!1;if(t){const n=va(e);t(wa(e.tr,n,n.top))}return!0}(r,o):function(e,t){if(!ra(e))return!1;if(t){const n=va(e);t(wa(e.tr,n,n.bottom))}return!0}(r,o):"left"===t.side?function(e,t){if(!ra(e))return!1;if(t){const n=va(e);t(ya(e.tr,n,n.left))}return!0}(r,o):function(e,t){if(!ra(e))return!1;if(t){const n=va(e);t(ya(e.tr,n,n.right))}return!0}(r,o)})}),ay(this,"removeRowOrColumn",(e,t)=>"row"===t?this.editor.exec((t,n)=>function(e,t){if(!ra(e))return!1;if(t){const n=va(e),o=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let e=n.bottom-1;ka(o,n,e),e!=n.top;e--){const e=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=Yl.get(n.table)}t(o)}return!0}(this.setCellSelection(t,{row:e,col:0}),n)):this.editor.exec((t,n)=>function(e,t){if(!ra(e))return!1;if(t){const n=va(e),o=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let e=n.right-1;ba(o,n,e),e!=n.left;e--){const e=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=Yl.get(e)}t(o)}return!0}(this.setCellSelection(t,{row:0,col:e}),n))),ay(this,"mergeCells",e=>this.editor.exec((t,n)=>function(e,t){const n=e.selection;if(!(n instanceof da)||n.$anchorCell.pos==n.$headCell.pos)return!1;const o=va(e),{map:r}=o;if(function(e,t){let{width:n,height:o,map:r}=e,i=t.top*n+t.left,s=i,l=(t.bottom-1)*n+t.left,a=i+(t.right-t.left-1);for(let c=t.top;c<t.bottom;c++){if(t.left>0&&r[s]==r[s-1]||t.right<n&&r[a]==r[a+1])return!0;s+=n,a+=n}for(let c=t.left;c<t.right;c++){if(t.top>0&&r[i]==r[i-n]||t.bottom<o&&r[l]==r[l+n])return!0;i++,l++}return!1}(r,o))return!1;if(t){const n=e.tr,i={};let l,a,c=h.empty;for(let e=o.top;e<o.bottom;e++)for(let t=o.left;t<o.right;t++){const s=r.map[e*r.width+t],u=o.table.nodeAt(s);if(!i[s]&&u)if(i[s]=!0,null==l)l=s,a=u;else{Ca(u)||(c=c.append(u.content));const e=n.mapping.map(s+o.tableStart);n.delete(e,e+u.nodeSize)}}if(null==l||null==a)return!0;if(n.setNodeMarkup(l+o.tableStart,null,(0,s.A)((0,s.A)({},ua(a.attrs,a.attrs.colspan,o.right-o.left-a.attrs.colspan)),{},{rowspan:o.bottom-o.top})),c.size){const e=l+1+a.content.size,t=Ca(a)?l+1:e;n.replaceWith(t+o.tableStart,e+o.tableStart,c)}n.setSelection(new da(n.doc.resolve(l+o.tableStart))),t(n)}return!0}(e?this.setCellSelection(t,e.relativeStartCell,e.relativeEndCell):t,n))),ay(this,"splitCell",e=>this.editor.exec((t,n)=>xa(e?this.setCellSelection(t,e):t,n))),ay(this,"getCellSelection",()=>this.editor.transact(e=>{const t=e.selection;let n=t.$from,o=t.$to;if(Yw(t)){const{ranges:e}=t;e.forEach(e=>{n=e.$from.min(null!==n&&void 0!==n?n:e.$from),o=e.$to.max(null!==o&&void 0!==o?o:e.$to)})}else if(n=e.doc.resolve(t.$from.pos-t.$from.parentOffset-1),o=e.doc.resolve(t.$to.pos-t.$to.parentOffset-1),0===n.pos||0===o.pos)return;const r=e.doc.resolve(n.pos-n.parentOffset-1),i=e.doc.resolve(o.pos-o.parentOffset-1),s=e.doc.resolve(r.pos-r.parentOffset-1),l=n.index(r.depth),a=r.index(s.depth),c=o.index(i.depth),u=i.index(s.depth),d=[];for(let h=a;h<=u;h++)for(let e=l;e<=c;e++)d.push({row:h,col:e});return{from:{row:a,col:l},to:{row:u,col:c},cells:d}})),ay(this,"getMergeDirection",e=>this.editor.transact(t=>{const n=Yw(t.selection)?t.selection:void 0;if(!n||!e||n.ranges.length<=1)return;const o=this.getCellSelection();return o?function(e,t,n){const o=pb(e,n),r=pb(t,n);return o.col===r.col}(o.from,o.to,e)?"vertical":"horizontal":void 0})),ay(this,"cropEmptyRowsOrColumns",(e,t)=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:db(e);if("columns"===t){let e=0;for(let t=n[0].length-1;t>=0&&n.every(e=>yb(e[t].cell)&&1===e[t].colspan);t--)e++;for(let t=n.length-1;t>=0;t--){const o=Math.max(n[t].length-e,1);n[t]=n[t].slice(0,o)}return hb(n)}let o=0;for(let i=n.length-1;i>=0&&n[i].every(e=>yb(e.cell)&&1===e.rowspan);i--)o++;const r=Math.min(o,n.length-1);return n.splice(n.length-r,r),hb(n)}(e,t)),ay(this,"addRowsOrColumns",(e,t,n)=>function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:db(e);const{width:r,height:i}=fb(e);if("columns"===t)o.forEach((e,t)=>{if(n>=0)for(let o=0;o<n;o++)e.push({row:t,col:Math.max(...e.map(e=>e.col))+1,rowspan:1,colspan:1,cell:fy("")});else e.splice(r+n,-1*n)});else if(n>0)for(let s=0;s<n;s++){const e=new Array(r).fill(null).map((e,t)=>({row:i+s,col:t,rowspan:1,colspan:1,cell:fy("")}));o.push(e)}else n<0&&o.splice(i+n,-1*n);return hb(o)}(e,t,n)),this.editor=e,this.addProsemirrorPlugin(new Nt({key:ix,view:t=>(this.view=new rx(e,t,e=>{this.emit("update",e)}),this.view),props:{decorations:e=>{if(void 0===this.view||void 0===this.view.state||void 0===this.view.state.draggingState||void 0===this.view.tablePos)return;const t="row"===this.view.state.draggingState.draggedCellOrientation?this.view.state.rowIndex:this.view.state.colIndex;if(void 0===t)return;const n=[],{block:o,draggingState:r}=this.view.state,{originalIndex:i,draggedCellOrientation:s}=r;if(t===i||!o||"row"===s&&!bb(o,i,t)||"col"===s&&!wb(o,i,t))return wr.create(e.doc,n);const l=e.doc.resolve(this.view.tablePos+1);return"row"===this.view.state.draggingState.draggedCellOrientation?gb(this.view.state.block,t).forEach(o=>{let{row:r,col:s}=o;const a=e.doc.resolve(l.posAtIndex(r)+1),c=e.doc.resolve(a.posAtIndex(s)+1),u=c.node(),d=c.pos+(t>i?u.nodeSize-2:0);n.push(vr.widget(d,()=>{const e=document.createElement("div");return e.className="bn-table-drop-cursor",e.style.left="0",e.style.right="0",t>i?e.style.bottom="-2px":e.style.top="-3px",e.style.height="4px",e}))}):vb(this.view.state.block,t).forEach(o=>{let{row:r,col:s}=o;const a=e.doc.resolve(l.posAtIndex(r)+1),c=e.doc.resolve(a.posAtIndex(s)+1),u=c.node(),d=c.pos+(t>i?u.nodeSize-2:0);n.push(vr.widget(d,()=>{const e=document.createElement("div");return e.className="bn-table-drop-cursor",e.style.top="0",e.style.bottom="0",t>i?e.style.right="-2px":e.style.left="-3px",e.style.width="4px",e}))}),wr.create(e.doc,n)}}}))}static key(){return"tableHandles"}onUpdate(e){return this.on("update",e)}}const lx=fs.create({name:"textAlignment",addGlobalAttributes:()=>[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:e=>e.getAttribute("data-text-alignment"),renderHTML:e=>"left"===e.textAlignment?{}:{"data-text-alignment":e.textAlignment}}}}]}),ax=fs.create({name:"blockTextColor",addGlobalAttributes:()=>[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:Ey.textColor.default,parseHTML:e=>e.hasAttribute("data-text-color")?e.getAttribute("data-text-color"):Ey.textColor.default,renderHTML:e=>e.textColor===Ey.textColor.default?{}:{"data-text-color":e.textColor}}}}]}),cx=fs.create({name:"trailingNode",addProseMirrorPlugins(){const e=new Pt(this.name);return[new Nt({key:e,appendTransaction:(t,n,o)=>{const{doc:r,tr:i,schema:s}=o,l=e.getState(o),a=r.content.size-2,c=s.nodes.blockContainer,u=s.nodes.paragraph;if(l)return i.insert(a,c.create(void 0,u.create()))},state:{init:(e,t)=>{},apply:(e,t)=>{if(!e.docChanged)return t;let n=e.doc.lastChild;if(!n||"blockGroup"!==n.type.name)throw new Error("Expected blockGroup");if(n=n.lastChild,!n||"blockContainer"!==n.type.name)return!0;const o=n.firstChild;if(!o)throw new Error("Expected blockContent");return n.nodeSize>4||"inline*"!==o.type.spec.content}}})]}}),ux={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},dx=gl.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:e=>{if("string"==typeof e)return!1;const t={};for(const[n,o]of Object.entries(ux))e.getAttribute(o)&&(t[n]=e.getAttribute(o));return t}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML(e){let{HTMLAttributes:t}=e;var n;const o=document.createElement("div");o.className="bn-block-outer",o.setAttribute("data-node-type","blockOuter");for(const[s,l]of Object.entries(t))"class"!==s&&o.setAttribute(s,l);const r=(0,s.A)((0,s.A)({},(null==(n=this.options.domAttributes)?void 0:n.block)||{}),t),i=document.createElement("div");i.className=Cy("bn-block",r.class),i.setAttribute("data-node-type",this.name);for(const[s,l]of Object.entries(r))"class"!==s&&i.setAttribute(s,l);return o.appendChild(i),{dom:o,contentDOM:i}}}),hx=gl.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML:()=>[{tag:"div",getAttrs:e=>"string"!=typeof e&&("blockGroup"===e.getAttribute("data-node-type")&&null)}],renderHTML(e){let{HTMLAttributes:t}=e;var n;const o=(0,s.A)((0,s.A)({},(null==(n=this.options.domAttributes)?void 0:n.blockGroup)||{}),t),r=document.createElement("div");r.className=Cy("bn-block-group",o.class),r.setAttribute("data-node-type","blockGroup");for(const[i,s]of Object.entries(o))"class"!==i&&r.setAttribute(i,s);return{dom:r,contentDOM:r}}}),px=gl.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"});class fx extends eC{constructor(e){let{editor:t,collaboration:n}=e;super(t),ay(this,"editor"),ay(this,"collaboration"),ay(this,"forkedState"),this.editor=t,this.collaboration=n}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(e,t){const n=e.doc;if(null===e._item){const o=Array.from(n.share.keys()).find(t=>n.share.get(t)===e);if(null==o)throw new Error("type does not exist in other ydoc");return t.get(o,e.constructor)}{var o;const n=e._item,r=null!==(o=t.store.clients.get(n.id.client))&&void 0!==o?o:[];return r[qf(r,n.id.clock)].content.type}}get isForkedFromRemote(){return void 0!==this.forkedState}fork(){if(this.isForkedFromRemote)return;const e=this.collaboration.fragment;if(!e)throw new Error("No fragment to fork from");const t=new nf;mf(t,vf(e.doc));const n=this.findTypeInOtherYdoc(e,t);this.forkedState={originalFragment:e,forkedFragment:n},this.editor._tiptapEditor.unregisterPlugin([tv,ev,Yg]),this.editor._tiptapEditor.registerPlugin(new oC(n).plugins[0]),this.editor._tiptapEditor.registerPlugin((new rC).plugins[0]),this.emit("forked",!0)}merge(e){let{keepChanges:t}=e;if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(Yg),this.editor._tiptapEditor.unregisterPlugin(ev);const{originalFragment:n,forkedFragment:o}=this.forkedState;if(t){const e=vf(o.doc);mf(n.doc,e)}this.editor.extensions.ySyncPlugin=new oC(n),this.editor.extensions.yCursorPlugin=new nC(this.collaboration),this.editor.extensions.yUndoPlugin=new rC,this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),this.forkedState=void 0,this.emit("forked",!1)}}let mx=!1;const gx=e=>{const t=[hl.ClipboardTextSerializer,hl.Commands,hl.Editable,hl.FocusEvents,hl.Tabindex,lc,fs.create({name:"dropCursor",addProseMirrorPlugins:()=>[e.dropCursor({width:5,color:"#ddeeff",editor:e.editor})]}),uy.configure({types:["blockContainer","columnList","column"],setIdAttribute:e.setIdAttribute}),mC,Ed,QC,YC,ex,Ad.extend({inclusive:!1}).configure({defaultProtocol:AC,protocols:mx?[]:SC}),...Object.values(e.styleSpecs).map(t=>t.implementation.mark.configure({editor:e.editor})),ax,Qk,lx,fs.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>!e.editor.suggestionMenus.shown&&this.editor.commands.blur()}}}),px,dx.configure({editor:e.editor,domAttributes:e.domAttributes}),wC.configure({editor:e.editor,tabBehavior:e.tabBehavior}),hx.configure({domAttributes:e.domAttributes}),...Object.values(e.inlineContentSpecs).filter(e=>"link"!==e.config&&"text"!==e.config).map(t=>t.implementation.node.configure({editor:e.editor})),...Object.values(e.blockSpecs).flatMap(t=>[...(t.implementation.requiredExtensions||[]).map(t=>t.configure({editor:e.editor,domAttributes:e.domAttributes})),t.implementation.node.configure({editor:e.editor,domAttributes:e.domAttributes})]),Xk(e.editor),qk(e.editor,e.pasteHandler||(e=>e.defaultPasteHandler())),Ok(e.editor),...void 0===e.trailingBlock||e.trailingBlock?[cx]:[],...e.comments?[iC]:[]];return mx=!0,e.collaboration||t.push(Mc),t};function vx(e,t){const n=[];return e.forEach((e,o,r)=>{r!==t&&n.push(e)}),h.from(n)}function yx(e,t){let n=h.from(e.content);if(n=function(e,t){const n=[];for(let o=0;o<e.childCount;o++)if("tableRow"===e.child(o).type.name)if(n.length>0&&"table"===n[n.length-1].type.name){const t=n[n.length-1],r=t.copy(t.content.addToEnd(e.child(o)));n[n.length-1]=r}else{const r=t.nodes.table.createChecked(void 0,e.child(o));n.push(r)}else n.push(e.child(o));return h.from(n)}(n,t.state.schema),!function(e,t){var n,o;const r=1===e.childCount,i="inline*"===(null==(n=e.firstChild)?void 0:n.type.spec.content),s="tableRow+"===(null==(o=e.firstChild)?void 0:o.type.spec.content);if(r){if(i)return!1;if(s){const e=$y(t.state);if(e.isBlockContainer)return!("tableRow+"===e.blockContent.node.type.spec.content)}}return!0}(n,t))return new y(n,e.openStart,e.openEnd);for(let o=0;o<n.childCount;o++)if("blockContent"===n.child(o).type.spec.group){const e=[n.child(o)];if(o+1<n.childCount&&"blockGroup"===n.child(o+1).type.name){const t=n.child(o+1).child(0).child(0);("bulletListItem"===t.type.name||"numberedListItem"===t.type.name||"checkListItem"===t.type.name)&&(e.push(n.child(o+1)),n=vx(n,o+1))}const r=t.state.schema.nodes.blockContainer.createChecked(void 0,e);n=n.replaceChild(o,r)}return new y(n,e.openStart,e.openEnd)}const bx=class extends fl{constructor(e,t){super((0,s.A)((0,s.A)({},e),{},{content:void 0})),ay(this,"_state"),ay(this,"mount",(e,t,n)=>{t?(this.options.element=t,this.createViewAlternative(e,n)):this.destroy()});const n=this.schema;let o;const r=n.nodes.doc.createAndFill;let i;n.nodes.doc.createAndFill=function(){if(o)return o;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const s=r.apply(n.nodes.doc,t),l=JSON.parse(JSON.stringify(s.toJSON()));return l.content[0].content[0].attrs.id="initialBlockId",o=B.fromJSON(n,l),o};try{i=Bs({type:"doc",content:[{type:"blockGroup",content:null==e?void 0:e.content.map(e=>Db(e,this.schema,t).toJSON())}]},this.schema,this.options.parseOptions)}catch(l){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",l),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}this._state=Dt.create({doc:i,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(e){if(!this.view)return this._state=this.state.apply(e),void this.emit("transaction",{editor:this,transaction:e});if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return void this.dispatchTransaction(e);const{state:t,transactions:n}=this.state.applyTransaction(e),o=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});const r=e.getMeta("focus"),i=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&(this.emit("update",{editor:this,transaction:e}),this.emit("v3-update",{editor:this,transaction:e,appendedTransactions:n.slice(1)}))}forceEnablePlugins(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}createViewAlternative(e,t){this.contentComponent=t;const n={};this.extensionManager.extensions.forEach(t=>{"mark"===t.type&&t.config.addMarkView&&(n[t.name]=t.config.addMarkView(e))}),this.view=new Wr({mount:this.options.element},(0,s.A)((0,s.A)({},this.options.editorProps),{},{dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:n,nodeViews:this.extensionManager.nodeViews}));const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.commands.focus(this.options.autofocus||"true"===this.options.element.getAttribute("data-bn-autofocus"),{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}};ay(bx,"create",(e,t)=>{var n,o;const r=null==(n=null==globalThis?void 0:globalThis.window)?void 0:n.setTimeout;typeof(null==(o=null==globalThis?void 0:globalThis.window)?void 0:o.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new bx(e,t)}finally{r&&(globalThis.window.setTimeout=r)}});let wx=bx;wx.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const kx={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};class Cx extends Yk{constructor(e){var t,n,o,r,i,l,a,c,u,d,h,p,f,m,g,v,y,b,w,k,C,x,S,A,E;super(),ay(this,"pmSchema"),ay(this,"extensions",{}),ay(this,"headless",!1),ay(this,"_tiptapEditor"),ay(this,"elementRenderer",null),ay(this,"blockCache",new WeakMap),ay(this,"dictionary"),ay(this,"schema"),ay(this,"blockImplementations"),ay(this,"inlineContentImplementations"),ay(this,"styleImplementations"),ay(this,"formattingToolbar"),ay(this,"linkToolbar"),ay(this,"sideMenu"),ay(this,"suggestionMenus"),ay(this,"filePanel"),ay(this,"tableHandles"),ay(this,"comments"),ay(this,"showSelectionPlugin"),ay(this,"forkYDocPlugin"),ay(this,"uploadFile"),ay(this,"onUploadStartCallbacks",[]),ay(this,"onUploadEndCallbacks",[]),ay(this,"resolveFileUrl"),ay(this,"resolveUsers"),ay(this,"settings"),ay(this,"activeTransaction",null),ay(this,"mount",(e,t)=>{this._tiptapEditor.mount(this,e,t)}),this.options=e;const D=e;if(D.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(D.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(D.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(D.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=e.dictionary||oy,this.settings={tables:{splitCells:null!==(t=null==(h=null==e?void 0:e.tables)?void 0:h.splitCells)&&void 0!==t&&t,cellBackgroundColor:null!==(n=null==(p=null==e?void 0:e.tables)?void 0:p.cellBackgroundColor)&&void 0!==n&&n,cellTextColor:null!==(o=null==(f=null==e?void 0:e.tables)?void 0:f.cellTextColor)&&void 0!==o&&o,headers:null!==(r=null==(m=null==e?void 0:e.tables)?void 0:m.headers)&&void 0!==r&&r},codeBlock:{indentLineWithTab:null===(i=null==(g=null==e?void 0:e.codeBlock)?void 0:g.indentLineWithTab)||void 0===i||i,defaultLanguage:null!==(l=null==(v=null==e?void 0:e.codeBlock)?void 0:v.defaultLanguage)&&void 0!==l?l:"text",supportedLanguages:null!==(a=null==(y=null==e?void 0:e.codeBlock)?void 0:y.supportedLanguages)&&void 0!==a?a:{},createHighlighter:null!==(c=null==(b=null==e?void 0:e.codeBlock)?void 0:b.createHighlighter)&&void 0!==c?c:void 0}};const M=(0,s.A)((0,s.A)({defaultStyles:!0,schema:e.schema||ok.create(),_headless:!1},e),{},{placeholders:(0,s.A)((0,s.A)({},this.dictionary.placeholders),e.placeholders)});if(M.comments&&!M.resolveUsers)throw new Error("resolveUsers is required when using comments");this.resolveUsers=M.resolveUsers,this.schema=M.schema,this.blockImplementations=M.schema.blockSpecs,this.inlineContentImplementations=M.schema.inlineContentSpecs,this.styleImplementations=M.schema.styleSpecs,this.extensions=(e=>{var t,n;const o={},r=gx(e);for(const s of r)o[s.name]=s;e.collaboration&&(o.ySyncPlugin=new oC(e.collaboration.fragment),o.yUndoPlugin=new rC,null!=(n=e.collaboration.provider)&&n.awareness&&(o.yCursorPlugin=new nC(e.collaboration)),o.forkYDocPlugin=new fx({editor:e.editor,collaboration:e.collaboration})),o.formattingToolbar=new fC(e.editor),o.linkToolbar=new xC(e.editor),o.sideMenu=new WC(e.editor,e.sideMenuDetection),o.suggestionMenus=new XC(e.editor),o.filePanel=new dC(e.editor),o.placeholder=new NC(e.editor,e.placeholders),(null===(t=e.animations)||void 0===t||t)&&(o.animations=new PC),e.tableHandles&&(o.tableHandles=new sx(e.editor)),o.nodeSelectionKeyboard=new DC,o.showSelection=new LC(e.editor),e.comments&&(o.comments=new aC(e.editor,e.comments.threadStore,iC.name));const i=e.disableExtensions||[];for(const s of i)delete o[s];return o})({editor:this,domAttributes:M.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:M.collaboration,trailingBlock:M.trailingBlock,disableExtensions:M.disableExtensions,setIdAttribute:M.setIdAttribute,animations:null===(u=M.animations)||void 0===u||u,tableHandles:Kw("table",this),dropCursor:null!==(d=this.options.dropCursor)&&void 0!==d?d:ty,placeholders:M.placeholders,tabBehavior:M.tabBehavior,sideMenuDetection:M.sideMenuDetection||"viewport",comments:M.comments,pasteHandler:M.pasteHandler}),((null==(w=M._tiptapOptions)?void 0:w.extensions)||[]).forEach(e=>{this.extensions[e.name]=e});for(let s of M.extensions||[]){"function"==typeof s&&(s=s(this));const e=s.constructor.key();if(!e)throw new Error("Extension ".concat(s.constructor.name," does not have a key method"));if(this.extensions[e])throw new Error("Extension ".concat(s.constructor.name," already exists with key ").concat(e));this.extensions[e]=s}if(Object.entries(M._extensions||{}).forEach(e=>{let[t,n]=e;const o="function"==typeof n?n(this):n;this.extensions[t]="plugin"in o?new class extends eC{static key(){return t}constructor(){super(),this.addProsemirrorPlugin(o.plugin)}get priority(){return o.priority}}:o}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,this.comments=this.extensions.comments,this.showSelectionPlugin=this.extensions.showSelection,this.forkYDocPlugin=this.extensions.forkYDocPlugin,M.uploadFile){const e=M.uploadFile;this.uploadFile=async(t,n)=>{this.onUploadStartCallbacks.forEach(e=>e.apply(this,[n]));try{return await e(t,n)}finally{this.onUploadEndCallbacks.forEach(e=>e.apply(this,[n]))}}}this.resolveFileUrl=M.resolveFileUrl,this.headless=M._headless;const N="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;N&&M.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const T=M.initialContent||(N?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:uy.options.generateID()}]);if(!Array.isArray(T)||0===T.length)throw new Error("initialContent must be a non-empty array of blocks, received: "+T);const O=[...Object.entries(this.extensions).map(e=>{let[t,n]=e;return n instanceof fs||n instanceof gl||n instanceof as?n:n instanceof eC&&!n.plugins.length?void 0:fs.create({name:t,priority:n.priority,addProseMirrorPlugins:()=>n.plugins})})].filter(e=>void 0!==e),P=(0,s.A)((0,s.A)((0,s.A)({},kx),M._tiptapOptions),{},{content:T,extensions:O,editorProps:(0,s.A)((0,s.A)({},null==(k=M._tiptapOptions)?void 0:k.editorProps),{},{attributes:(0,s.A)((0,s.A)((0,s.A)({tabIndex:"0"},null==(x=null==(C=M._tiptapOptions)?void 0:C.editorProps)?void 0:x.attributes),null==(S=M.domAttributes)?void 0:S.editor),{},{class:Cy("bn-editor",M.defaultStyles?"bn-default-styles":"",(null==(E=null==(A=M.domAttributes)?void 0:A.editor)?void 0:E.class)||"")}),transformPasted:yx})});this.headless?this.pmSchema=Vs(P.extensions):(this._tiptapEditor=wx.create(P,this.schema.styleSchema),this.pmSchema=this._tiptapEditor.schema),this.pmSchema.cached.blockNoteEditor=this,this.emit("create")}static create(){return new Cx(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}exec(e){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");return e(this._tiptapEditor.state,e=>this._tiptapEditor.dispatch(e),this._tiptapEditor.view)}canExec(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");return e(this._tiptapEditor.state,void 0,this._tiptapEditor.view)}transact(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;const t=e(this.activeTransaction),n=this.activeTransaction;return this.activeTransaction=null,n&&(n.docChanged||n.selectionSet||n.scrolledIntoView||n.storedMarksSet||!n.isGeneric)&&this._tiptapEditor.dispatch(n),t}finally{this.activeTransaction=null}}extension(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key();const n=this.extensions[t];if(!n)throw new Error("Extension ".concat(t," not found"));return n}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var e;return null==(e=this.prosemirrorView)?void 0:e.dom}isFocused(){var e;return(null==(e=this.prosemirrorView)?void 0:e.hasFocus())||!1}focus(){var e;null==(e=this.prosemirrorView)||e.focus()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const t=this.onUploadStartCallbacks.indexOf(e);t>-1&&this.onUploadStartCallbacks.splice(t,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const t=this.onUploadEndCallbacks.indexOf(e);t>-1&&this.onUploadEndCallbacks.splice(t,1)}}get topLevelBlocks(){return this.document}get document(){return this.transact(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zy(t),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jy(t),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xy(t),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Qy(t);const s=[];return e.firstChild.descendants(e=>(s.push(nb(e,t,n,o,r,i)),!1)),s}(e.doc,this.pmSchema))}getBlock(e){return this.transact(t=>function(e,t){const n="string"==typeof t?t:t.id,o=qy(e),r=Mb(n,e);if(r)return nb(r.node,o)}(t.doc,e))}getPrevBlock(e){return this.transact(t=>function(e,t){const n=Mb("string"==typeof t?t:t.id,e),o=qy(e);if(!n)return;const r=e.resolve(n.posBeforeNode).nodeBefore;return r?nb(r,o):void 0}(t.doc,e))}getNextBlock(e){return this.transact(t=>function(e,t){const n=Mb("string"==typeof t?t:t.id,e),o=qy(e);if(!n)return;const r=e.resolve(n.posBeforeNode+n.node.nodeSize).nodeAfter;return r?nb(r,o):void 0}(t.doc,e))}getParentBlock(e){return this.transact(t=>function(e,t){const n="string"==typeof t?t:t.id,o=qy(e),r=Mb(n,e);if(!r)return;const i=e.resolve(r.posBeforeNode),s=i.node(),l=i.node(-1),a="doc"!==l.type.name?"blockGroup"===s.type.name?l:s:void 0;return a?nb(a,o):void 0}(t.doc,e))}forEachBlock(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.document.slice();t&&n.reverse(),function n(o){for(const r of o){if(!1===e(r))return!1;if(!n(t?r.children.slice().reverse():r.children))return!1}return!0}(n)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}getTextCursorPosition(){return this.transact(e=>function(e){const{bnBlock:t}=Wy(e),n=qy(e.doc),o=e.doc.resolve(t.beforePos),r=o.nodeBefore,i=e.doc.resolve(t.afterPos).nodeAfter;let s;return o.depth>1&&(s=o.node(),s.type.isInGroup("bnBlock")||(s=o.node(o.depth-1))),{block:nb(t.node,n),prevBlock:null===r?void 0:nb(r,n),nextBlock:null===i?void 0:nb(i,n),parentBlock:void 0===s?void 0:nb(s,n)}}(e))}setTextCursorPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start";return this.transact(n=>fk(n,e,t))}getSelection(){return this.transact(e=>function(e){const t=qy(e);if(e.selection.empty||"node"in e.selection)return;const n=e.doc.resolve(zy(e.doc,e.selection.from).posBeforeNode),o=e.doc.resolve(zy(e.doc,e.selection.to).posBeforeNode),r=(o,r)=>{const i=n.posAtIndex(o,r),s=e.doc.resolve(i).nodeAfter;if(!s)throw new Error("Error getting selection - node not found at position ".concat(i));return nb(s,t)},i=[],s=n.sharedDepth(o.pos),l=n.index(s),a=o.index(s);if(n.depth>s){i.push(nb(n.nodeAfter,t));for(let e=n.depth;e>s;e--)if(n.node(e).type.isInGroup("childContainer")){const t=n.index(e)+1,o=n.node(e).childCount;for(let n=t;n<o;n++)i.push(r(n,e))}}else i.push(r(l,s));for(let c=l+1;c<=a;c++)i.push(r(c,s));if(0===i.length)throw new Error("Error getting selection - selection doesn't span any blocks (".concat(e.selection,")"));return{blocks:i}}(e))}getSelectionCutBlocks(){return this.transact(e=>pk(e))}setSelection(e,t){return this.transact(n=>function(e,t,n){const o="string"==typeof t?t:t.id,r="string"==typeof n?n:n.id,i=Ky(qy(e));if(o===r)throw new Error("Attempting to set selection with the same anchor and head blocks (id ".concat(o,")"));const s=Mb(o,e.doc);if(!s)throw new Error("Block with ID ".concat(o," not found"));const l=Mb(r,e.doc);if(!l)throw new Error("Block with ID ".concat(r," not found"));const a=Vy(s),c=Vy(l),u=i.blockSchema[a.blockNoteType],d=i.blockSchema[c.blockNoteType];if(!a.isBlockContainer||"none"===u.content)throw new Error("Attempting to set selection anchor in block without content (id ".concat(o,")"));if(!c.isBlockContainer||"none"===d.content)throw new Error("Attempting to set selection anchor in block without content (id ".concat(r,")"));let h,p;if("table"===u.content){const e=Yl.get(a.blockContent.node);h=a.blockContent.beforePos+e.positionAt(0,0,a.blockContent.node)+1+2}else h=a.blockContent.beforePos+1;if("table"===d.content){const t=Yl.get(c.blockContent.node),n=c.blockContent.beforePos+t.positionAt(t.height-1,t.width-1,c.blockContent.node)+1;p=n+e.doc.resolve(n).nodeAfter.nodeSize-2}else p=c.blockContent.afterPos-1;e.setSelection(ft.create(e.doc,h,p))}(n,e,t))}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return void 0===this._tiptapEditor.isEditable||this._tiptapEditor.isEditable}set isEditable(e){if(this._tiptapEditor)this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e);else if(!this.headless)throw new Error("no editor, but also not headless?")}insertBlocks(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"before";return this.transact(o=>function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"before";const r="string"==typeof n?n:n.id,i=qy(e),s=t.map(e=>Db(e,i)),l=Mb(r,e.doc);if(!l)throw new Error("Block with ID ".concat(r," not found"));let a=l.posBeforeNode;return"after"===o&&(a+=l.node.nodeSize),e.step(new _e(a,a,new y(h.from(s),0,0))),s.map(e=>nb(e,i))}(o,e,t,n))}updateBlock(e,t){return this.transact(n=>function(e,t,n,o,r){const i="string"==typeof t?t:t.id,s=Mb(i,e.doc);if(!s)throw new Error("Block with ID ".concat(i," not found"));return _b(e,s.posBeforeNode,n,o,r),nb(e.doc.resolve(s.posBeforeNode+1).node(),qy(e))}(n,e,t))}removeBlocks(e){return this.transact(t=>Ob(t,e,[]).removedBlocks)}replaceBlocks(e,t){return this.transact(n=>Ob(n,e,t))}undo(){return this.options.collaboration?this.exec(Xv):this.exec(Ec)}redo(){return this.options.collaboration?this.exec(Qv):this.exec(Dc)}insertInlineContent(e){let{updateSelection:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Sb(e,this.pmSchema);this.transact(e=>{!function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{updateSelection:!0},{from:r,to:i}="number"==typeof t?{from:t,to:t}:{from:t.from,to:t.to},s=!0,l=!0,a="";if(n.forEach(e=>{e.check(),s&&e.isText&&0===e.marks.length?a+=e.text:s=!1,l=!!l&&e.isBlock}),r===i&&l){const{parent:t}=e.doc.resolve(r);t.isTextblock&&!t.type.spec.code&&!t.childCount&&(r-=1,i+=1)}s?e.insertText(a,r,i):e.replaceWith(r,i,n),o.updateSelection&&Os(e,e.steps.length-1,-1)}(e,{from:e.selection.from,to:e.selection.to},n,{updateSelection:t})})}getActiveStyles(){return this.transact(e=>{const t={},n=e.selection.$to.marks();for(const o of n){const e=this.schema.styleSchema[o.type.name];e?"boolean"===e.propSchema?t[e.type]=!0:t[e.type]=o.attrs.stringValue:"link"!==o.type.name&&!o.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",o.type.name)}return t})}addStyles(e){for(const[t,n]of Object.entries(e)){const e=this.schema.styleSchema[t];if(!e)throw new Error("style ".concat(t," not found in styleSchema"));if("boolean"===e.propSchema)this._tiptapEditor.commands.setMark(t);else{if("string"!==e.propSchema)throw new by(e.propSchema);this._tiptapEditor.commands.setMark(t,{stringValue:n})}}}removeStyles(e){for(const t of Object.keys(e))this._tiptapEditor.commands.unsetMark(t)}toggleStyles(e){for(const[t,n]of Object.entries(e)){const e=this.schema.styleSchema[t];if(!e)throw new Error("style ".concat(t," not found in styleSchema"));if("boolean"===e.propSchema)this._tiptapEditor.commands.toggleMark(t);else{if("string"!==e.propSchema)throw new by(e.propSchema);this._tiptapEditor.commands.toggleMark(t,{stringValue:n})}}}getSelectedText(){return this.transact(e=>e.doc.textBetween(e.selection.from,e.selection.to))}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(e,t){if(""===e)return;const n=this.pmSchema.mark("link",{href:e});this.transact(e=>{const{from:o,to:r}=e.selection;t?e.insertText(t,o,r).addMark(o,o+t.length,n):e.setSelection(ft.create(e.doc,r)).addMark(o,r,n)})}canNestBlock(){return this.transact(e=>{const{bnBlock:t}=Wy(e);return null!==e.doc.resolve(t.beforePos).nodeBefore})}nestBlock(){hk(this)}canUnnestBlock(){return this.transact(e=>{const{bnBlock:t}=Wy(e);return e.doc.resolve(t.beforePos).depth>1})}unnestBlock(){this._tiptapEditor.commands.liftListItem("blockContainer")}moveBlocksUp(){return uk(this)}moveBlocksDown(){return dk(this)}async blocksToHTMLLossy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.document;return jb(this.pmSchema,this).exportBlocks(e,{})}async blocksToFullHTML(e){return((e,t)=>{const n=pe.fromSchema(e);return{serializeBlocks:(e,o)=>Vb(t,e,n,o).outerHTML}})(this.pmSchema,this).serializeBlocks(e,{})}async tryParseHTMLToBlocks(e){return xk(e,this.pmSchema)}async blocksToMarkdownLossy(){return async function(e,t,n,o){return await gk(),bk(jb(t,n).exportBlocks(e,o))}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.document,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(e){return async function(e,t){return xk(await Ak(e),t)}(e,this.pmSchema)}updateCollaborationUserInfo(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(e)}onChange(e){if(this.headless)return;const t=t=>{let{transaction:n,appendedTransactions:o}=t;e(this,{getChanges:()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={type:"local"};e.getMeta("paste")?n={type:"paste"}:"drop"===e.getMeta("uiEvent")?n={type:"drop"}:e.getMeta("history$")?n={type:e.getMeta("history$").redo?"redo":"undo"}:e.getMeta("y-sync$")&&(n=e.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"});const o=qy(e),r=Fs(e.before,[e,...t]),i=qs(r),s=i.flatMap(e=>zs(r.before,e.oldRange,Nb)).map(e=>{let{node:t}=e;return nb(t,o)}),l=i.flatMap(e=>zs(r.doc,e.newRange,Nb)).map(e=>{let{node:t}=e;return nb(t,o)}),a=new Map(l.map(e=>[e.id,e])),c=new Map(s.map(e=>[e.id,e])),u=[];for(const[d,h]of a)c.has(d)||u.push({type:"insert",block:h,source:n,prevBlock:void 0});for(const[d,h]of c)a.has(d)||u.push({type:"delete",block:h,source:n,prevBlock:void 0});for(const[d,h]of a)if(c.has(d)){const e=c.get(d);Tb(e,h)&&u.push({type:"update",block:h,prevBlock:e,source:n})}return u}(n,o)})};return this._tiptapEditor.on("v3-update",t),()=>{this._tiptapEditor.off("v3-update",t)}}onSelectionChange(e,t){if(this.headless)return;const n=n=>{n.transaction.getMeta(Yg)&&!t||e(this)};return this._tiptapEditor.on("selectionUpdate",n),()=>{this._tiptapEditor.off("selectionUpdate",n)}}onCreate(e){return this.on("create",e),()=>{this.off("create",e)}}getSelectionBoundingBox(){if(!this.prosemirrorView)return;const{selection:e}=this.prosemirrorState,{ranges:t}=e,n=Math.min(...t.map(e=>e.$from.pos)),o=Math.max(...t.map(e=>e.$to.pos));if(Qs(e)){const e=this.prosemirrorView.nodeDOM(n);if(e)return e.getBoundingClientRect()}return Ys(this.prosemirrorView,n,o)}get isEmpty(){const e=this.document;return 0===e.length||1===e.length&&"paragraph"===e[0].type&&0===e[0].content.length}openSuggestionMenu(e,t){this.prosemirrorView&&(this.focus(),this.transact(n=>{null!=t&&t.deleteTriggerCharacter&&n.insertText(e),n.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:e,deleteTriggerCharacter:(null==t?void 0:t.deleteTriggerCharacter)||!1,ignoreQueryLength:(null==t?void 0:t.ignoreQueryLength)||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(e){this.showSelectionPlugin.setEnabled(e)}convertHtmlToBlockNoteHtml(e){return Ck(e.trim()).innerHTML}pasteHTML(e){var t;let n=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(n=this.convertHtmlToBlockNoteHtml(e)),n&&(null==(t=this.prosemirrorView)||t.pasteHTML(n))}pasteText(e){var t;return null==(t=this.prosemirrorView)?void 0:t.pasteText(e)}async pasteMarkdown(e){return this.pasteHTML(await Ak(e))}}let xx;async function Sx(e,t){if(!function(e,t){return e in t.schema.inlineContentSchema&&t.schema.inlineContentSchema[e]===Gw[e]}("text",e))return[];const{emojiData:o,emojiMart:r}=await async function(){return xx||(xx=(async()=>{const[e,t]=await Promise.all([n.e(412).then(n.bind(n,3412)),n.e(410).then(n.t.bind(n,410,17))]),o="default"in e?e.default:e,r="default"in t?t.default:t;return await o.init({data:r}),{emojiMart:o,emojiData:r}})(),xx)}();return(""===t.trim()?Object.values(o.emojis):await r.SearchIndex.search(t)).map(t=>({id:t.skins[0].native,onItemClick:()=>e.insertInlineContent(t.skins[0].native+" ")}))}var Ax=n(579),Ex=n(9526);function Dx(){return"undefined"!==typeof window}function Mx(e){return Ox(e)?(e.nodeName||"").toLowerCase():"#document"}function Nx(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Tx(e){var t;return null==(t=(Ox(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Ox(e){return!!Dx()&&(e instanceof Node||e instanceof Nx(e).Node)}function Px(e){return!!Dx()&&(e instanceof Element||e instanceof Nx(e).Element)}function _x(e){return!!Dx()&&(e instanceof HTMLElement||e instanceof Nx(e).HTMLElement)}function Lx(e){return!(!Dx()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Nx(e).ShadowRoot)}function Rx(e){const{overflow:t,overflowX:n,overflowY:o,display:r}=Hx(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(r)}function Bx(e){return["table","td","th"].includes(Mx(e))}function Ix(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(tz){return!1}})}function Fx(e){const t=jx(),n=Px(e)?Hx(e):e;return["transform","translate","scale","rotate","perspective"].some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some(e=>(n.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(n.contain||"").includes(e))}function jx(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function zx(e){return["html","body","#document"].includes(Mx(e))}function Hx(e){return Nx(e).getComputedStyle(e)}function Vx(e){return Px(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ux(e){if("html"===Mx(e))return e;const t=e.assignedSlot||e.parentNode||Lx(e)&&e.host||Tx(e);return Lx(t)?t.host:t}function $x(e){const t=Ux(e);return zx(t)?e.ownerDocument?e.ownerDocument.body:e.body:_x(t)&&Rx(t)?t:$x(t)}function Wx(e,t,n){var o;void 0===t&&(t=[]),void 0===n&&(n=!0);const r=$x(e),i=r===(null==(o=e.ownerDocument)?void 0:o.body),s=Nx(r);if(i){const e=qx(s);return t.concat(s,s.visualViewport||[],Rx(r)?r:[],e&&n?Wx(e):[])}return t.concat(r,Wx(r,[],n))}function qx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Gx(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}function Kx(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Lx(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function Zx(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function Jx(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(e=>{let{brand:t,version:n}=e;return t+"/"+n}).join(" "):navigator.userAgent}function Xx(e){return!Jx().includes("jsdom/")&&(!Yx()&&0===e.width&&0===e.height||Yx()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function Qx(){return/apple/i.test(navigator.vendor)}function Yx(){const e=/android/i;return e.test(Zx())||e.test(Jx())}function eS(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function tS(e){return(null==e?void 0:e.ownerDocument)||document}function nS(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function oS(e){return"composedPath"in e?e.composedPath()[0]:e.target}function rS(e){return _x(e)&&e.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")}var iS=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],sS=iS.join(","),lS="undefined"===typeof Element,aS=lS?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,cS=!lS&&Element.prototype.getRootNode?function(e){var t;return null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null===e||void 0===e?void 0:e.ownerDocument},uS=function e(t,n){var o;void 0===n&&(n=!0);var r=null===t||void 0===t||null===(o=t.getAttribute)||void 0===o?void 0:o.call(t,"inert");return""===r||"true"===r||n&&t&&e(t.parentNode)},dS=function(e,t,n){if(uS(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(sS));return t&&aS.call(e,sS)&&o.unshift(e),o=o.filter(n)},hS=function e(t,n,o){for(var r=[],i=Array.from(t);i.length;){var s=i.shift();if(!uS(s,!1))if("SLOT"===s.tagName){var l=s.assignedElements(),a=e(l.length?l:s.children,!0,o);o.flatten?r.push.apply(r,a):r.push({scopeParent:s,candidates:a})}else{aS.call(s,sS)&&o.filter(s)&&(n||!t.includes(s))&&r.push(s);var c=s.shadowRoot||"function"===typeof o.getShadowRoot&&o.getShadowRoot(s),u=!uS(c,!1)&&(!o.shadowRootFilter||o.shadowRootFilter(s));if(c&&u){var d=e(!0===c?s.children:c.children,!0,o);o.flatten?r.push.apply(r,d):r.push({scopeParent:s,candidates:d})}else i.unshift.apply(i,s.children)}}return r},pS=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},fS=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null===e||void 0===e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!pS(e)?0:e.tabIndex},mS=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},gS=function(e){return"INPUT"===e.tagName},vS=function(e){return function(e){return gS(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||cS(e),o=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)t=o(window.CSS.escape(e.name));else try{t=o(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var r=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!r||r===e}(e)},yS=function(e){var t=e.getBoundingClientRect(),n=t.width,o=t.height;return 0===n&&0===o},bS=function(e,t){var n=t.displayCheck,o=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var r=aS.call(e,"details>summary:first-of-type")?e.parentElement:e;if(aS.call(r,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return yS(e)}else{if("function"===typeof o){for(var i=e;e;){var s=e.parentElement,l=cS(e);if(s&&!s.shadowRoot&&!0===o(s))return yS(e);e=e.assignedSlot?e.assignedSlot:s||l===e.ownerDocument?s:l.host}e=i}if(function(e){var t,n,o,r,i=e&&cS(e),s=null===(t=i)||void 0===t?void 0:t.host,l=!1;if(i&&i!==e)for(l=!!(null!==(n=s)&&void 0!==n&&null!==(o=n.ownerDocument)&&void 0!==o&&o.contains(s)||null!==e&&void 0!==e&&null!==(r=e.ownerDocument)&&void 0!==r&&r.contains(e));!l&&s;){var a,c,u;l=!(null===(c=s=null===(a=i=cS(s))||void 0===a?void 0:a.host)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(s))}return l}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},wS=function(e,t){return!(t.disabled||uS(t)||function(e){return gS(e)&&"hidden"===e.type}(t)||bS(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var o=t.children.item(n);if("LEGEND"===o.tagName)return!!aS.call(t,"fieldset[disabled] *")||!o.contains(e)}return!0}t=t.parentElement}return!1}(t))},kS=function(e,t){return!(vS(t)||fS(t)<0||!wS(e,t))},CS=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},xS=function e(t){var n=[],o=[];return t.forEach(function(t,r){var i=!!t.scopeParent,s=i?t.scopeParent:t,l=function(e,t){var n=fS(e);return n<0&&t&&!pS(e)?0:n}(s,i),a=i?e(t.candidates):s;0===l?i?n.push.apply(n,a):n.push(s):o.push({documentOrder:r,tabIndex:l,item:t,isScope:i,content:a})}),o.sort(mS).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(n)},SS=function(e,t){var n;return n=(t=t||{}).getShadowRoot?hS([e],t.includeContainer,{filter:kS.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:CS}):dS(e,t.includeContainer,kS.bind(null,t)),xS(n)},AS=n(7950);const ES=Math.min,DS=Math.max,MS=Math.round,NS=Math.floor,TS=e=>({x:e,y:e}),OS={left:"right",right:"left",bottom:"top",top:"bottom"},PS={start:"end",end:"start"};function _S(e,t,n){return DS(e,ES(t,n))}function LS(e,t){return"function"===typeof e?e(t):e}function RS(e){return e.split("-")[0]}function BS(e){return e.split("-")[1]}function IS(e){return"x"===e?"y":"x"}function FS(e){return"y"===e?"height":"width"}function jS(e){return["top","bottom"].includes(RS(e))?"y":"x"}function zS(e){return IS(jS(e))}function HS(e){return e.replace(/start|end/g,e=>PS[e])}function VS(e){return e.replace(/left|right|bottom|top/g,e=>OS[e])}function US(e){return"number"!==typeof e?function(e){return(0,s.A)({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function $S(e){const{x:t,y:n,width:o,height:r}=e;return{width:o,height:r,top:n,left:t,right:t+o,bottom:n+r,x:t,y:n}}const WS=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],qS=["mainAxis","crossAxis","limiter"],GS=["apply"];function KS(e,t,n){let{reference:o,floating:r}=e;const i=jS(t),s=zS(t),l=FS(s),a=RS(t),c="y"===i,u=o.x+o.width/2-r.width/2,d=o.y+o.height/2-r.height/2,h=o[l]/2-r[l]/2;let p;switch(a){case"top":p={x:u,y:o.y-r.height};break;case"bottom":p={x:u,y:o.y+o.height};break;case"right":p={x:o.x+o.width,y:d};break;case"left":p={x:o.x-r.width,y:d};break;default:p={x:o.x,y:o.y}}switch(BS(t)){case"start":p[s]-=h*(n&&c?-1:1);break;case"end":p[s]+=h*(n&&c?-1:1)}return p}async function ZS(e,t){var n;void 0===t&&(t={});const{x:o,y:r,platform:i,rects:s,elements:l,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=LS(t,e),f=US(p),m=l[h?"floating"===d?"reference":"floating":d],g=$S(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(m)))||n?m:m.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(l.floating)),boundary:c,rootBoundary:u,strategy:a})),v="floating"===d?{x:o,y:r,width:s.floating.width,height:s.floating.height}:s.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(l.floating)),b=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},w=$S(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:y,strategy:a}):v);return{top:(g.top-w.top+f.top)/b.y,bottom:(w.bottom-g.bottom+f.bottom)/b.y,left:(g.left-w.left+f.left)/b.x,right:(w.right-g.right+f.right)/b.x}}function JS(e){const t=ES(...e.map(e=>e.left)),n=ES(...e.map(e=>e.top));return{x:t,y:n,width:DS(...e.map(e=>e.right))-t,height:DS(...e.map(e=>e.bottom))-n}}function XS(e){const t=Hx(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const r=_x(e),i=r?e.offsetWidth:n,s=r?e.offsetHeight:o,l=MS(n)!==i||MS(o)!==s;return l&&(n=i,o=s),{width:n,height:o,$:l}}function QS(e){return Px(e)?e:e.contextElement}function YS(e){const t=QS(e);if(!_x(t))return TS(1);const n=t.getBoundingClientRect(),{width:o,height:r,$:i}=XS(t);let s=(i?MS(n.width):n.width)/o,l=(i?MS(n.height):n.height)/r;return s&&Number.isFinite(s)||(s=1),l&&Number.isFinite(l)||(l=1),{x:s,y:l}}const eA=TS(0);function tA(e){const t=Nx(e);return jx()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:eA}function nA(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=e.getBoundingClientRect(),i=QS(e);let s=TS(1);t&&(o?Px(o)&&(s=YS(o)):s=YS(e));const l=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Nx(e))&&t}(i,n,o)?tA(i):TS(0);let a=(r.left+l.x)/s.x,c=(r.top+l.y)/s.y,u=r.width/s.x,d=r.height/s.y;if(i){const e=Nx(i),t=o&&Px(o)?Nx(o):o;let n=e,r=qx(n);for(;r&&o&&t!==n;){const e=YS(r),t=r.getBoundingClientRect(),o=Hx(r),i=t.left+(r.clientLeft+parseFloat(o.paddingLeft))*e.x,s=t.top+(r.clientTop+parseFloat(o.paddingTop))*e.y;a*=e.x,c*=e.y,u*=e.x,d*=e.y,a+=i,c+=s,n=Nx(r),r=qx(n)}}return $S({width:u,height:d,x:a,y:c})}function oA(e,t){const n=Vx(e).scrollLeft;return t?t.left+n:nA(Tx(e)).left+n}function rA(e,t,n){void 0===n&&(n=!1);const o=e.getBoundingClientRect();return{x:o.left+t.scrollLeft-(n?0:oA(e,o)),y:o.top+t.scrollTop}}function iA(e,t,n){let o;if("viewport"===t)o=function(e,t){const n=Nx(e),o=Tx(e),r=n.visualViewport;let i=o.clientWidth,s=o.clientHeight,l=0,a=0;if(r){i=r.width,s=r.height;const e=jx();(!e||e&&"fixed"===t)&&(l=r.offsetLeft,a=r.offsetTop)}return{width:i,height:s,x:l,y:a}}(e,n);else if("document"===t)o=function(e){const t=Tx(e),n=Vx(e),o=e.ownerDocument.body,r=DS(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),i=DS(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let s=-n.scrollLeft+oA(e);const l=-n.scrollTop;return"rtl"===Hx(o).direction&&(s+=DS(t.clientWidth,o.clientWidth)-r),{width:r,height:i,x:s,y:l}}(Tx(e));else if(Px(t))o=function(e,t){const n=nA(e,!0,"fixed"===t),o=n.top+e.clientTop,r=n.left+e.clientLeft,i=_x(e)?YS(e):TS(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:r*i.x,y:o*i.y}}(t,n);else{const n=tA(e);o={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return $S(o)}function sA(e,t){const n=Ux(e);return!(n===t||!Px(n)||zx(n))&&("fixed"===Hx(n).position||sA(n,t))}function lA(e,t,n){const o=_x(t),r=Tx(t),i="fixed"===n,s=nA(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const a=TS(0);function c(){a.x=oA(r)}if(o||!o&&!i)if(("body"!==Mx(t)||Rx(r))&&(l=Vx(t)),o){const e=nA(t,!0,i,t);a.x=e.x+t.clientLeft,a.y=e.y+t.clientTop}else r&&c();i&&!o&&r&&c();const u=!r||o||i?TS(0):rA(r,l);return{x:s.left+l.scrollLeft-a.x-u.x,y:s.top+l.scrollTop-a.y-u.y,width:s.width,height:s.height}}function aA(e){return"static"===Hx(e).position}function cA(e,t){if(!_x(e)||"fixed"===Hx(e).position)return null;if(t)return t(e);let n=e.offsetParent;return Tx(e)===n&&(n=n.ownerDocument.body),n}function uA(e,t){const n=Nx(e);if(Ix(e))return n;if(!_x(e)){let t=Ux(e);for(;t&&!zx(t);){if(Px(t)&&!aA(t))return t;t=Ux(t)}return n}let o=cA(e,t);for(;o&&Bx(o)&&aA(o);)o=cA(o,t);return o&&zx(o)&&aA(o)&&!Fx(o)?n:o||function(e){let t=Ux(e);for(;_x(t)&&!zx(t);){if(Fx(t))return t;if(Ix(t))return null;t=Ux(t)}return null}(e)||n}const dA={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:o,strategy:r}=e;const i="fixed"===r,s=Tx(o),l=!!t&&Ix(t.floating);if(o===s||l&&i)return n;let a={scrollLeft:0,scrollTop:0},c=TS(1);const u=TS(0),d=_x(o);if((d||!d&&!i)&&(("body"!==Mx(o)||Rx(s))&&(a=Vx(o)),_x(o))){const e=nA(o);c=YS(o),u.x=e.x+o.clientLeft,u.y=e.y+o.clientTop}const h=!s||d||i?TS(0):rA(s,a,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-a.scrollTop*c.y+u.y+h.y}},getDocumentElement:Tx,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:o,strategy:r}=e;const i="clippingAncestors"===n?Ix(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let o=Wx(e,[],!1).filter(e=>Px(e)&&"body"!==Mx(e)),r=null;const i="fixed"===Hx(e).position;let s=i?Ux(e):e;for(;Px(s)&&!zx(s);){const t=Hx(s),n=Fx(s);n||"fixed"!==t.position||(r=null),(i?!n&&!r:!n&&"static"===t.position&&r&&["absolute","fixed"].includes(r.position)||Rx(s)&&!n&&sA(e,s))?o=o.filter(e=>e!==s):r=t,s=Ux(s)}return t.set(e,o),o}(t,this._c):[].concat(n),s=[...i,o],l=s[0],a=s.reduce((e,n)=>{const o=iA(t,n,r);return e.top=DS(o.top,e.top),e.right=ES(o.right,e.right),e.bottom=ES(o.bottom,e.bottom),e.left=DS(o.left,e.left),e},iA(t,l,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:uA,getElementRects:async function(e){const t=this.getOffsetParent||uA,n=this.getDimensions,o=await n(e.floating);return{reference:lA(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=XS(e);return{width:t,height:n}},getScale:YS,isElement:Px,isRTL:function(e){return"rtl"===Hx(e).direction}};function hA(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function pA(e,t,n,o){void 0===o&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:l="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:c=!1}=o,u=QS(e),d=r||i?[...u?Wx(u):[],...Wx(t)]:[];d.forEach(e=>{r&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)});const h=u&&a?function(e,t){let n,o=null;const r=Tx(e);function i(){var e;clearTimeout(n),null==(e=o)||e.disconnect(),o=null}return function l(a,c){void 0===a&&(a=!1),void 0===c&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:p,height:f}=u;if(a||t(),!p||!f)return;const m={rootMargin:-NS(h)+"px "+-NS(r.clientWidth-(d+p))+"px "+-NS(r.clientHeight-(h+f))+"px "+-NS(d)+"px",threshold:DS(0,ES(1,c))||1};let g=!0;function v(t){const o=t[0].intersectionRatio;if(o!==c){if(!g)return l();o?l(!1,o):n=setTimeout(()=>{l(!1,1e-7)},1e3)}1!==o||hA(u,e.getBoundingClientRect())||l(),g=!1}try{o=new IntersectionObserver(v,(0,s.A)((0,s.A)({},m),{},{root:r.ownerDocument}))}catch(wx){o=new IntersectionObserver(v,m)}o.observe(e)}(!0),i}(u,n):null;let p,f=-1,m=null;l&&(m=new ResizeObserver(e=>{let[o]=e;o&&o.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g=c?nA(e):null;return c&&function t(){const o=nA(e);g&&!hA(g,o)&&n();g=o,p=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{r&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=m)||e.disconnect(),m=null,c&&cancelAnimationFrame(p)}}const fA=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:r,y:i,placement:l,middlewareData:a}=t,c=await async function(e,t){const{placement:n,platform:o,elements:r}=e,i=await(null==o.isRTL?void 0:o.isRTL(r.floating)),s=RS(n),l=BS(n),a="y"===jS(n),c=["left","top"].includes(s)?-1:1,u=i&&a?-1:1,d=LS(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&"number"===typeof f&&(p="end"===l?-1*f:f),a?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return l===(null==(n=a.offset)?void 0:n.placement)&&null!=(o=a.arrow)&&o.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:(0,s.A)((0,s.A)({},c),{},{placement:l})}}}},mA=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:r}=t,i=LS(e,t),{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}}}=i,d=(0,l.A)(i,qS),h={x:n,y:o},p=await ZS(t,d),f=jS(RS(r)),m=IS(f);let g=h[m],v=h[f];if(a){const e="y"===m?"bottom":"right";g=_S(g+p["y"===m?"top":"left"],g,g-p[e])}if(c){const e="y"===f?"bottom":"right";v=_S(v+p["y"===f?"top":"left"],v,v-p[e])}const y=u.fn((0,s.A)((0,s.A)({},t),{},{[m]:g,[f]:v}));return(0,s.A)((0,s.A)({},y),{},{data:{x:y.x-n,y:y.y-o,enabled:{[m]:a,[f]:c}}})}}},gA=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:r,middlewareData:i,rects:s,initialPlacement:a,platform:c,elements:u}=t,d=LS(e,t),{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0}=d,y=(0,l.A)(d,WS);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const b=RS(r),w=jS(a),k=RS(a)===a,C=await(null==c.isRTL?void 0:c.isRTL(u.floating)),x=f||(k||!v?[VS(a)]:function(e){const t=VS(e);return[HS(e),t,HS(t)]}(a)),S="none"!==g;!f&&S&&x.push(...function(e,t,n,o){const r=BS(e);let i=function(e,t,n){const o=["left","right"],r=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:o:t?o:r;case"left":case"right":return t?i:s;default:return[]}}(RS(e),"start"===n,o);return r&&(i=i.map(e=>e+"-"+r),t&&(i=i.concat(i.map(HS)))),i}(a,v,g,C));const A=[a,...x],E=await ZS(t,y),D=[];let M=(null==(o=i.flip)?void 0:o.overflows)||[];if(h&&D.push(E[b]),p){const e=function(e,t,n){void 0===n&&(n=!1);const o=BS(e),r=zS(e),i=FS(r);let s="x"===r?o===(n?"end":"start")?"right":"left":"start"===o?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=VS(s)),[s,VS(s)]}(r,s,C);D.push(E[e[0]],E[e[1]])}if(M=[...M,{placement:r,overflows:D}],!D.every(e=>e<=0)){var N,T;const e=((null==(N=i.flip)?void 0:N.index)||0)+1,t=A[e];if(t){if(!("alignment"===p&&w!==jS(t))||M.every(e=>e.overflows[0]>0&&jS(e.placement)===w))return{data:{index:e,overflows:M},reset:{placement:t}}}let n=null==(T=M.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:T.placement;if(!n)switch(m){case"bestFit":{var O;const e=null==(O=M.filter(e=>{if(S){const t=jS(e.placement);return t===w||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:O[0];e&&(n=e);break}case"initialPlacement":n=a}if(r!==n)return{reset:{placement:n}}}return{}}}},vA=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,o;const{placement:r,rects:i,platform:a,elements:c}=t,u=LS(e,t),{apply:d=()=>{}}=u,h=(0,l.A)(u,GS),p=await ZS(t,h),f=RS(r),m=BS(r),g="y"===jS(r),{width:v,height:y}=i.floating;let b,w;"top"===f||"bottom"===f?(b=f,w=m===(await(null==a.isRTL?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(w=f,b="end"===m?"top":"bottom");const k=y-p.top-p.bottom,C=v-p.left-p.right,x=ES(y-p[b],k),S=ES(v-p[w],C),A=!t.middlewareData.shift;let E=x,D=S;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(D=C),null!=(o=t.middlewareData.shift)&&o.enabled.y&&(E=k),A&&!m){const e=DS(p.left,0),t=DS(p.right,0),n=DS(p.top,0),o=DS(p.bottom,0);g?D=v-2*(0!==e||0!==t?e+t:DS(p.left,p.right)):E=y-2*(0!==n||0!==o?n+o:DS(p.top,p.bottom))}await d((0,s.A)((0,s.A)({},t),{},{availableWidth:D,availableHeight:E}));const M=await a.getDimensions(c.floating);return v!==M.width||y!==M.height?{reset:{rects:!0}}:{}}}},yA=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:r,rects:i,platform:l,elements:a,middlewareData:c}=t,{element:u,padding:d=0}=LS(e,t)||{};if(null==u)return{};const h=US(d),p={x:n,y:o},f=zS(r),m=FS(f),g=await l.getDimensions(u),v="y"===f,y=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",k=i.reference[m]+i.reference[f]-p[f]-i.floating[m],C=p[f]-i.reference[f],x=await(null==l.getOffsetParent?void 0:l.getOffsetParent(u));let S=x?x[w]:0;S&&await(null==l.isElement?void 0:l.isElement(x))||(S=a.floating[w]||i.floating[m]);const A=k/2-C/2,E=S/2-g[m]/2-1,D=ES(h[y],E),M=ES(h[b],E),N=D,T=S-g[m]-M,O=S/2-g[m]/2+A,P=_S(N,O,T),_=!c.arrow&&null!=BS(r)&&O!==P&&i.reference[m]/2-(O<N?D:M)-g[m]/2<0,L=_?O<N?O-N:O-T:0;return{[f]:p[f]+L,data:(0,s.A)({[f]:P,centerOffset:O-P-L},_&&{alignmentOffset:L}),reset:_}}}),bA=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:o,rects:r,platform:i,strategy:s}=t,{padding:l=2,x:a,y:c}=LS(e,t),u=Array.from(await(null==i.getClientRects?void 0:i.getClientRects(o.reference))||[]),d=function(e){const t=e.slice().sort((e,t)=>e.y-t.y),n=[];let o=null;for(let r=0;r<t.length;r++){const e=t[r];!o||e.y-o.y>o.height/2?n.push([e]):n[n.length-1].push(e),o=e}return n.map(e=>$S(JS(e)))}(u),h=$S(JS(u)),p=US(l);const f=await i.getElementRects({reference:{getBoundingClientRect:function(){if(2===d.length&&d[0].left>d[1].right&&null!=a&&null!=c)return d.find(e=>a>e.left-p.left&&a<e.right+p.right&&c>e.top-p.top&&c<e.bottom+p.bottom)||h;if(d.length>=2){if("y"===jS(n)){const e=d[0],t=d[d.length-1],o="top"===RS(n),r=e.top,i=t.bottom,s=o?e.left:t.left,l=o?e.right:t.right;return{top:r,bottom:i,left:s,right:l,width:l-s,height:i-r,x:s,y:r}}const e="left"===RS(n),t=DS(...d.map(e=>e.right)),o=ES(...d.map(e=>e.left)),r=d.filter(n=>e?n.left===o:n.right===t),i=r[0].top,s=r[r.length-1].bottom;return{top:i,bottom:s,left:o,right:t,width:t-o,height:s-i,x:o,y:i}}return h}},floating:o.floating,strategy:s});return r.reference.x!==f.reference.x||r.reference.y!==f.reference.y||r.reference.width!==f.reference.width||r.reference.height!==f.reference.height?{reset:{rects:f}}:{}}}},wA=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:o,placement:r,rects:i,middlewareData:l}=t,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=LS(e,t),d={x:n,y:o},h=jS(r),p=IS(h);let f=d[p],m=d[h];const g=LS(a,t),v="number"===typeof g?{mainAxis:g,crossAxis:0}:(0,s.A)({mainAxis:0,crossAxis:0},g);if(c){const e="y"===p?"height":"width",t=i.reference[p]-i.floating[e]+v.mainAxis,n=i.reference[p]+i.reference[e]-v.mainAxis;f<t?f=t:f>n&&(f=n)}if(u){var y,b;const e="y"===p?"width":"height",t=["top","left"].includes(RS(r)),n=i.reference[h]-i.floating[e]+(t&&(null==(y=l.offset)?void 0:y[h])||0)+(t?0:v.crossAxis),o=i.reference[h]+i.reference[e]+(t?0:(null==(b=l.offset)?void 0:b[h])||0)-(t?v.crossAxis:0);m<n?m=n:m>o&&(m=o)}return{[p]:f,[h]:m}}}},kA=(e,t,n)=>{const o=new Map,r=(0,s.A)({platform:dA},n),i=(0,s.A)((0,s.A)({},r.platform),{},{_c:o});return(async(e,t,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:l}=n,a=i.filter(Boolean),c=await(null==l.isRTL?void 0:l.isRTL(t));let u=await l.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:h}=KS(u,o,c),p=o,f={},m=0;for(let g=0;g<a.length;g++){const{name:n,fn:i}=a[g],{x:v,y:y,data:b,reset:w}=await i({x:d,y:h,initialPlacement:o,placement:p,strategy:r,middlewareData:f,rects:u,platform:l,elements:{reference:e,floating:t}});d=null!=v?v:d,h=null!=y?y:h,f=(0,s.A)((0,s.A)({},f),{},{[n]:(0,s.A)((0,s.A)({},f[n]),b)}),w&&m<=50&&(m++,"object"===typeof w&&(w.placement&&(p=w.placement),w.rects&&(u=!0===w.rects?await l.getElementRects({reference:e,floating:t,strategy:r}):w.rects),({x:d,y:h}=KS(u,p,c))),g=-1)}return{x:d,y:h,placement:p,strategy:r,middlewareData:f}})(e,t,(0,s.A)((0,s.A)({},r),{},{platform:i}))};var CA="undefined"!==typeof document?o.useLayoutEffect:function(){};function xA(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,o,r;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(o=n;0!==o--;)if(!xA(e[o],t[o]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(o=n;0!==o--;)if(!{}.hasOwnProperty.call(t,r[o]))return!1;for(o=n;0!==o--;){const n=r[o];if(("_owner"!==n||!e.$$typeof)&&!xA(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function SA(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function AA(e,t){const n=SA(e);return Math.round(t*n)/n}function EA(e){const t=o.useRef(e);return CA(()=>{t.current=e}),t}const DA=(e,t)=>(0,s.A)((0,s.A)({},fA(e)),{},{options:[e,t]}),MA=(e,t)=>(0,s.A)((0,s.A)({},mA(e)),{},{options:[e,t]}),NA=(e,t)=>(0,s.A)((0,s.A)({},wA(e)),{},{options:[e,t]}),TA=(e,t)=>(0,s.A)((0,s.A)({},gA(e)),{},{options:[e,t]}),OA=(e,t)=>(0,s.A)((0,s.A)({},vA(e)),{},{options:[e,t]}),PA=(e,t)=>(0,s.A)((0,s.A)({},bA(e)),{},{options:[e,t]}),_A=(e,t)=>(0,s.A)((0,s.A)({},(e=>({name:"arrow",options:e,fn(t){const{element:n,padding:o}="function"===typeof e?e(t):e;return n&&(r=n,{}.hasOwnProperty.call(r,"current"))?null!=n.current?yA({element:n.current,padding:o}).fn(t):{}:n?yA({element:n,padding:o}).fn(t):{};var r}}))(e)),{},{options:[e,t]});const LA=(0,s.A)({},r),RA=LA.useInsertionEffect||(e=>e());function BA(e){const t=o.useRef(()=>{0});return RA(()=>{t.current=e}),o.useCallback(function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return null==t.current?void 0:t.current(...n)},[])}const IA="ArrowUp",FA="ArrowDown",jA="ArrowLeft",zA="ArrowRight";var HA="undefined"!==typeof document?o.useLayoutEffect:o.useEffect;const VA=[jA,zA],UA=[IA,FA];function $A(){return $A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},$A.apply(this,arguments)}let WA=!1,qA=0;const GA=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+qA++;const KA=LA.useId||function(){const[e,t]=o.useState(()=>WA?GA():void 0);return HA(()=>{null==e&&t(GA())},[]),o.useEffect(()=>{WA=!0},[]),e};function ZA(){const e=new Map;return{emit(t,n){var o;null==(o=e.get(t))||o.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var o;e.set(t,(null==(o=e.get(t))?void 0:o.filter(e=>e!==n))||[])}}}const JA=o.createContext(null),XA=o.createContext(null),QA=()=>{var e;return(null==(e=o.useContext(JA))?void 0:e.id)||null},YA=()=>o.useContext(XA);function eE(e){return"data-floating-ui-"+e}function tE(e){const t=(0,o.useRef)(e);return HA(()=>{t.current=e}),t}const nE=eE("safe-polygon");function oE(e,t,n){return n&&!eS(n)?0:"number"===typeof e?e:null==e?void 0:e[t]}function rE(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:l,elements:a}=e,{enabled:c=!0,delay:u=0,handleClose:d=null,mouseOnly:h=!1,restMs:p=0,move:f=!0}=t,m=YA(),g=QA(),v=tE(d),y=tE(u),b=tE(n),w=o.useRef(),k=o.useRef(-1),C=o.useRef(),x=o.useRef(-1),S=o.useRef(!0),A=o.useRef(!1),E=o.useRef(()=>{}),D=o.useRef(!1),M=o.useCallback(()=>{var e;const t=null==(e=i.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t},[i]);o.useEffect(()=>{if(c)return l.on("openchange",e),()=>{l.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeout(k.current),clearTimeout(x.current),S.current=!0,D.current=!1)}},[c,l]),o.useEffect(()=>{if(!c)return;if(!v.current)return;if(!n)return;function e(e){M()&&r(!1,e,"hover")}const t=tS(a.floating).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}},[a.floating,n,r,c,v,M]);const N=o.useCallback(function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="hover");const o=oE(y.current,"close",w.current);o&&!C.current?(clearTimeout(k.current),k.current=window.setTimeout(()=>r(!1,e,n),o)):t&&(clearTimeout(k.current),r(!1,e,n))},[y,r]),T=BA(()=>{E.current(),C.current=void 0}),O=BA(()=>{if(A.current){const e=tS(a.floating).body;e.style.pointerEvents="",e.removeAttribute(nE),A.current=!1}}),P=BA(()=>!!i.current.openEvent&&["click","mousedown"].includes(i.current.openEvent.type));o.useEffect(()=>{if(c&&Px(a.domReference)){var e;const r=a.domReference;return n&&r.addEventListener("mouseleave",l),null==(e=a.floating)||e.addEventListener("mouseleave",l),f&&r.addEventListener("mousemove",t,{once:!0}),r.addEventListener("mouseenter",t),r.addEventListener("mouseleave",o),()=>{var e;n&&r.removeEventListener("mouseleave",l),null==(e=a.floating)||e.removeEventListener("mouseleave",l),f&&r.removeEventListener("mousemove",t),r.removeEventListener("mouseenter",t),r.removeEventListener("mouseleave",o)}}function t(e){if(clearTimeout(k.current),S.current=!1,h&&!eS(w.current)||p>0&&!oE(y.current,"open"))return;const t=oE(y.current,"open",w.current);t?k.current=window.setTimeout(()=>{b.current||r(!0,e,"hover")},t):n||r(!0,e,"hover")}function o(e){if(P())return;E.current();const t=tS(a.floating);if(clearTimeout(x.current),D.current=!1,v.current&&i.current.floatingContext){n||clearTimeout(k.current),C.current=v.current((0,s.A)((0,s.A)({},i.current.floatingContext),{},{tree:m,x:e.clientX,y:e.clientY,onClose(){O(),T(),P()||N(e,!0,"safe-polygon")}}));const o=C.current;return t.addEventListener("mousemove",o),void(E.current=()=>{t.removeEventListener("mousemove",o)})}("touch"!==w.current||!Kx(a.floating,e.relatedTarget))&&N(e)}function l(e){P()||i.current.floatingContext&&(null==v.current||v.current((0,s.A)((0,s.A)({},i.current.floatingContext),{},{tree:m,x:e.clientX,y:e.clientY,onClose(){O(),T(),P()||N(e)}}))(e))}},[a,c,e,h,p,f,N,T,O,r,n,b,m,y,v,i,P]),HA(()=>{var e;if(c&&n&&null!=(e=v.current)&&e.__options.blockPointerEvents&&M()){A.current=!0;const e=a.floating;if(Px(a.domReference)&&e){var t;const n=tS(a.floating).body;n.setAttribute(nE,"");const o=a.domReference,r=null==m||null==(t=m.nodesRef.current.find(e=>e.id===g))||null==(t=t.context)?void 0:t.elements.floating;return r&&(r.style.pointerEvents=""),n.style.pointerEvents="none",o.style.pointerEvents="auto",e.style.pointerEvents="auto",()=>{n.style.pointerEvents="",o.style.pointerEvents="",e.style.pointerEvents=""}}}},[c,n,g,a,m,v,M]),HA(()=>{n||(w.current=void 0,D.current=!1,T(),O())},[n,T,O]),o.useEffect(()=>()=>{T(),clearTimeout(k.current),clearTimeout(x.current),O()},[c,a.domReference,T,O]);const _=o.useMemo(()=>{function e(e){w.current=e.pointerType}return{onPointerDown:e,onPointerEnter:e,onMouseMove(e){const{nativeEvent:t}=e;function o(){S.current||b.current||r(!0,t,"hover")}h&&!eS(w.current)||n||0===p||D.current&&e.movementX**2+e.movementY**2<2||(clearTimeout(x.current),"touch"===w.current?o():(D.current=!0,x.current=window.setTimeout(o,p)))}}},[h,r,n,b,p]),L=o.useMemo(()=>({onMouseEnter(){clearTimeout(k.current)},onMouseLeave(e){P()||N(e.nativeEvent,!1)}}),[N,P]);return o.useMemo(()=>c?{reference:_,floating:L}:{},[c,_,L])}const iE=()=>{},sE=o.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:iE,setState:iE,isInstantPhase:!1});function lE(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,l]=o.useReducer((e,t)=>(0,s.A)((0,s.A)({},e),t),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),a=o.useRef(null),c=o.useCallback(e=>{l({currentId:e})},[]);return HA(()=>{i.currentId?null===a.current?a.current=i.currentId:i.isInstantPhase||l({isInstantPhase:!0}):(i.isInstantPhase&&l({isInstantPhase:!1}),a.current=null)},[i.currentId,i.isInstantPhase]),o.createElement(sE.Provider,{value:o.useMemo(()=>(0,s.A)((0,s.A)({},i),{},{setState:l,setCurrentId:c}),[i,c])},t)}function aE(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s,enabled:l=!0}=t,a=null!=s?s:i,c=o.useContext(sE),{currentId:u,setCurrentId:d,initialDelay:h,setState:p,timeoutMs:f}=c;return HA(()=>{l&&u&&(p({delay:{open:1,close:oE(h,"close")}}),u!==a&&r(!1))},[l,a,r,p,u,h]),HA(()=>{function e(){r(!1),p({delay:h,currentId:null})}if(l&&u&&!n&&u===a){if(f){const t=window.setTimeout(e,f);return()=>{clearTimeout(t)}}e()}},[l,n,p,u,a,r,h,f]),HA(()=>{l&&d!==iE&&n&&d(a)},[l,n,d,a]),c}function cE(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),o=n;for(;o.length;)o=e.filter(e=>{var t;return null==(t=o)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(o);return n}const uE=()=>({getShadowRoot:!0,displayCheck:"function"===typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function dE(e,t){const n=SS(e,uE());"prev"===t&&n.reverse();const o=n.indexOf(Gx(tS(e)));return n.slice(o+1)[0]}function hE(){return dE(document.body,"next")}function pE(){return dE(document.body,"prev")}function fE(e,t){const n=t||e.currentTarget,o=e.relatedTarget;return!o||!Kx(n,o)}function mE(e){SS(e,uE()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})}function gE(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}const vE={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function yE(e){"Tab"===e.key&&(e.target,clearTimeout(undefined))}const bE=o.forwardRef(function(e,t){const[n,r]=o.useState();HA(()=>(Qx()&&r("button"),document.addEventListener("keydown",yE),()=>{document.removeEventListener("keydown",yE)}),[]);const i={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[eE("focus-guard")]:"",style:vE};return o.createElement("span",$A({},e,i))}),wE=o.createContext(null),kE=eE("portal");function CE(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,s=function(e){void 0===e&&(e={});const{id:t,root:n}=e,r=KA(),i=xE(),[s,l]=o.useState(null),a=o.useRef(null);return HA(()=>()=>{null==s||s.remove(),queueMicrotask(()=>{a.current=null})},[s]),HA(()=>{if(!r)return;if(a.current)return;const e=t?document.getElementById(t):null;if(!e)return;const n=document.createElement("div");n.id=r,n.setAttribute(kE,""),e.appendChild(n),a.current=n,l(n)},[t,r]),HA(()=>{if(null===n)return;if(!r)return;if(a.current)return;let e=n||(null==i?void 0:i.portalNode);e&&!Px(e)&&(e=e.current),e=e||document.body;let o=null;t&&(o=document.createElement("div"),o.id=t,e.appendChild(o));const s=document.createElement("div");s.id=r,s.setAttribute(kE,""),e=o||e,e.appendChild(s),a.current=s,l(s)},[t,n,r,i]),s}({id:n,root:r}),[l,a]=o.useState(null),c=o.useRef(null),u=o.useRef(null),d=o.useRef(null),h=o.useRef(null),p=null==l?void 0:l.modal,f=null==l?void 0:l.open,m=!!l&&!l.modal&&l.open&&i&&!(!r&&!s);return o.useEffect(()=>{if(s&&i&&!p)return s.addEventListener("focusin",e,!0),s.addEventListener("focusout",e,!0),()=>{s.removeEventListener("focusin",e,!0),s.removeEventListener("focusout",e,!0)};function e(e){if(s&&fE(e)){("focusin"===e.type?gE:mE)(s)}}},[s,i,p]),o.useEffect(()=>{s&&(f||gE(s))},[f,s]),o.createElement(wE.Provider,{value:o.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:u,beforeInsideRef:d,afterInsideRef:h,portalNode:s,setFocusManagerState:a}),[i,s])},m&&s&&o.createElement(bE,{"data-type":"outside",ref:c,onFocus:e=>{if(fE(e,s)){var t;null==(t=d.current)||t.focus()}else{const e=pE()||(null==l?void 0:l.refs.domReference.current);null==e||e.focus()}}}),m&&s&&o.createElement("span",{"aria-owns":s.id,style:vE}),s&&AS.createPortal(t,s),m&&s&&o.createElement(bE,{"data-type":"outside",ref:u,onFocus:e=>{if(fE(e,s)){var t;null==(t=h.current)||t.focus()}else{const t=hE()||(null==l?void 0:l.refs.domReference.current);null==t||t.focus(),(null==l?void 0:l.closeOnFocusOut)&&(null==l||l.onOpenChange(!1,e.nativeEvent,"focus-out"))}}}))}const xE=()=>o.useContext(wE),SE="data-floating-ui-focusable";const AE={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},EE={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},DE=e=>{var t,n;return{escapeKey:"boolean"===typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"===typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function ME(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:l=!0,escapeKey:a=!0,outsidePress:c=!0,outsidePressEvent:u="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:f,capture:m}=t,g=YA(),v=BA("function"===typeof c?c:()=>!1),y="function"===typeof c?v:c,b=o.useRef(!1),w=o.useRef(!1),{escapeKey:k,outsidePress:C}=DE(f),{escapeKey:x,outsidePress:S}=DE(m),A=o.useRef(!1),E=BA(e=>{var t;if(!n||!l||!a||"Escape"!==e.key)return;if(A.current)return;const o=null==(t=s.current.floatingContext)?void 0:t.nodeId,i=g?cE(g.nodesRef.current,o):[];if(!k&&(e.stopPropagation(),i.length>0)){let e=!0;if(i.forEach(t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)}),!e)return}r(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")}),D=BA(e=>{var t;const n=()=>{var t;E(e),null==(t=oS(e))||t.removeEventListener("keydown",n)};null==(t=oS(e))||t.addEventListener("keydown",n)}),M=BA(e=>{var t;const n=b.current;b.current=!1;const o=w.current;if(w.current=!1,"click"===u&&o)return;if(n)return;if("function"===typeof y&&!y(e))return;const l=oS(e),a="["+eE("inert")+"]",c=tS(i.floating).querySelectorAll(a);let d=Px(l)?l:null;for(;d&&!zx(d);){const e=Ux(d);if(zx(e)||!Px(e))break;d=e}if(c.length&&Px(l)&&!l.matches("html,body")&&!Kx(l,i.floating)&&Array.from(c).every(e=>!Kx(d,e)))return;if(_x(l)&&O){const t=l.clientWidth>0&&l.scrollWidth>l.clientWidth,n=l.clientHeight>0&&l.scrollHeight>l.clientHeight;let o=n&&e.offsetX>l.clientWidth;if(n){"rtl"===Hx(l).direction&&(o=e.offsetX<=l.offsetWidth-l.clientWidth)}if(o||t&&e.offsetY>l.clientHeight)return}const h=null==(t=s.current.floatingContext)?void 0:t.nodeId,p=g&&cE(g.nodesRef.current,h).some(t=>{var n;return nS(e,null==(n=t.context)?void 0:n.elements.floating)});if(nS(e,i.floating)||nS(e,i.domReference)||p)return;const f=g?cE(g.nodesRef.current,h):[];if(f.length>0){let e=!0;if(f.forEach(t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)}),!e)return}r(!1,e,"outside-press")}),N=BA(e=>{var t;const n=()=>{var t;M(e),null==(t=oS(e))||t.removeEventListener(u,n)};null==(t=oS(e))||t.addEventListener(u,n)});o.useEffect(()=>{if(!n||!l)return;s.current.__escapeKeyBubbles=k,s.current.__outsidePressBubbles=C;let e=-1;function t(e){r(!1,e,"ancestor-scroll")}function o(){window.clearTimeout(e),A.current=!0}function c(){e=window.setTimeout(()=>{A.current=!1},jx()?5:0)}const d=tS(i.floating);a&&(d.addEventListener("keydown",x?D:E,x),d.addEventListener("compositionstart",o),d.addEventListener("compositionend",c)),y&&d.addEventListener(u,S?N:M,S);let h=[];return p&&(Px(i.domReference)&&(h=Wx(i.domReference)),Px(i.floating)&&(h=h.concat(Wx(i.floating))),!Px(i.reference)&&i.reference&&i.reference.contextElement&&(h=h.concat(Wx(i.reference.contextElement)))),h=h.filter(e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)}),h.forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),()=>{a&&(d.removeEventListener("keydown",x?D:E,x),d.removeEventListener("compositionstart",o),d.removeEventListener("compositionend",c)),y&&d.removeEventListener(u,S?N:M,S),h.forEach(e=>{e.removeEventListener("scroll",t)}),window.clearTimeout(e)}},[s,i,a,y,u,n,r,p,l,k,C,E,x,D,M,S,N]),o.useEffect(()=>{b.current=!1},[y,u]);const T=o.useMemo(()=>({onKeyDown:E,[AE[h]]:e=>{d&&r(!1,e.nativeEvent,"reference-press")}}),[E,r,d,h]),O=o.useMemo(()=>({onKeyDown:E,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[EE[u]]:()=>{b.current=!0}}),[E,u]);return o.useMemo(()=>l?{reference:T,floating:O}:{},[l,T,O])}function NE(e){void 0===e&&(e={});const{nodeId:t}=e,n=function(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=KA(),s=o.useRef({}),[l]=o.useState(()=>ZA()),a=null!=QA(),[c,u]=o.useState(r.reference),d=BA((e,t,o)=>{s.current.openEvent=e?t:void 0,l.emit("openchange",{open:e,event:t,reason:o,nested:a}),null==n||n(e,t,o)}),h=o.useMemo(()=>({setPositionReference:u}),[]),p=o.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return o.useMemo(()=>({dataRef:s,open:t,onOpenChange:d,elements:p,events:l,floatingId:i,refs:h}),[t,d,p,l,i,h])}((0,s.A)((0,s.A)({},e),{},{elements:(0,s.A)({reference:null,floating:null},e.elements)})),r=e.rootContext||n,i=r.elements,[l,a]=o.useState(null),[c,u]=o.useState(null),d=(null==i?void 0:i.domReference)||l,h=o.useRef(null),p=YA();HA(()=>{d&&(h.current=d)},[d]);const f=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:l,floating:a}={},transform:c=!0,whileElementsMounted:u,open:d}=e,[h,p]=o.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=o.useState(r);xA(f,r)||m(r);const[g,v]=o.useState(null),[y,b]=o.useState(null),w=o.useCallback(e=>{e!==S.current&&(S.current=e,v(e))},[]),k=o.useCallback(e=>{e!==A.current&&(A.current=e,b(e))},[]),C=l||g,x=a||y,S=o.useRef(null),A=o.useRef(null),E=o.useRef(h),D=null!=u,M=EA(u),N=EA(i),T=EA(d),O=o.useCallback(()=>{if(!S.current||!A.current)return;const e={placement:t,strategy:n,middleware:f};N.current&&(e.platform=N.current),kA(S.current,A.current,e).then(e=>{const t=(0,s.A)((0,s.A)({},e),{},{isPositioned:!1!==T.current});P.current&&!xA(E.current,t)&&(E.current=t,AS.flushSync(()=>{p(t)}))})},[f,t,n,N,T]);CA(()=>{!1===d&&E.current.isPositioned&&(E.current.isPositioned=!1,p(e=>(0,s.A)((0,s.A)({},e),{},{isPositioned:!1})))},[d]);const P=o.useRef(!1);CA(()=>(P.current=!0,()=>{P.current=!1}),[]),CA(()=>{if(C&&(S.current=C),x&&(A.current=x),C&&x){if(M.current)return M.current(C,x,O);O()}},[C,x,O,M,D]);const _=o.useMemo(()=>({reference:S,floating:A,setReference:w,setFloating:k}),[w,k]),L=o.useMemo(()=>({reference:C,floating:x}),[C,x]),R=o.useMemo(()=>{const e={position:n,left:0,top:0};if(!L.floating)return e;const t=AA(L.floating,h.x),o=AA(L.floating,h.y);return c?(0,s.A)((0,s.A)({},e),{},{transform:"translate("+t+"px, "+o+"px)"},SA(L.floating)>=1.5&&{willChange:"transform"}):{position:n,left:t,top:o}},[n,c,L.floating,h.x,h.y]);return o.useMemo(()=>(0,s.A)((0,s.A)({},h),{},{update:O,refs:_,elements:L,floatingStyles:R}),[h,O,_,L,R])}((0,s.A)((0,s.A)({},e),{},{elements:(0,s.A)((0,s.A)({},i),c&&{reference:c})})),m=o.useCallback(e=>{const t=Px(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;u(t),f.refs.setReference(t)},[f.refs]),g=o.useCallback(e=>{(Px(e)||null===e)&&(h.current=e,a(e)),(Px(f.refs.reference.current)||null===f.refs.reference.current||null!==e&&!Px(e))&&f.refs.setReference(e)},[f.refs]),v=o.useMemo(()=>(0,s.A)((0,s.A)({},f.refs),{},{setReference:g,setPositionReference:m,domReference:h}),[f.refs,g,m]),y=o.useMemo(()=>(0,s.A)((0,s.A)({},f.elements),{},{domReference:d}),[f.elements,d]),b=o.useMemo(()=>(0,s.A)((0,s.A)((0,s.A)({},f),r),{},{refs:v,elements:y,nodeId:t}),[f,v,y,t,r]);return HA(()=>{r.dataRef.current.floatingContext=b;const e=null==p?void 0:p.nodesRef.current.find(e=>e.id===t);e&&(e.context=b)}),o.useMemo(()=>(0,s.A)((0,s.A)({},f),{},{context:b,refs:v,elements:y}),[f,v,y,b])}function TE(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:l}=e,{enabled:a=!0,visibleOnly:c=!0}=t,u=o.useRef(!1),d=o.useRef(),h=o.useRef(!0);o.useEffect(()=>{if(!a)return;const e=Nx(l.domReference);function t(){!n&&_x(l.domReference)&&l.domReference===Gx(tS(l.domReference))&&(u.current=!0)}function o(){h.current=!0}return e.addEventListener("blur",t),e.addEventListener("keydown",o,!0),()=>{e.removeEventListener("blur",t),e.removeEventListener("keydown",o,!0)}},[l.domReference,n,a]),o.useEffect(()=>{if(a)return i.on("openchange",e),()=>{i.off("openchange",e)};function e(e){let{reason:t}=e;"reference-press"!==t&&"escape-key"!==t||(u.current=!0)}},[i,a]),o.useEffect(()=>()=>{clearTimeout(d.current)},[]);const p=o.useMemo(()=>({onPointerDown(e){Xx(e.nativeEvent)||(h.current=!1)},onMouseLeave(){u.current=!1},onFocus(e){if(u.current)return;const t=oS(e.nativeEvent);if(c&&Px(t))try{if(Qx()&&Zx().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints)throw Error();if(!t.matches(":focus-visible"))return}catch(tz){if(!h.current&&!rS(t))return}r(!0,e.nativeEvent,"focus")},onBlur(e){u.current=!1;const t=e.relatedTarget,n=e.nativeEvent,o=Px(t)&&t.hasAttribute(eE("focus-guard"))&&"outside"===t.getAttribute("data-type");d.current=window.setTimeout(()=>{var e;const i=Gx(l.domReference?l.domReference.ownerDocument:document);(t||i!==l.domReference)&&(Kx(null==(e=s.current.floatingContext)?void 0:e.refs.floating.current,i)||Kx(l.domReference,i)||o||r(!1,n,"focus"))})}}),[s,l.domReference,r,c]);return o.useMemo(()=>a?{reference:p}:{},[a,p])}const OE="active",PE="selected";function _E(e,t,n){const o=new Map,r="item"===n;let i=e;if(r&&e){const{[OE]:t,[PE]:n}=e;i=(0,l.A)(e,[OE,PE].map(Ex.A))}return(0,s.A)((0,s.A)((0,s.A)({},"floating"===n&&{tabIndex:-1,[SE]:""}),i),t.map(t=>{const o=t?t[n]:null;return"function"===typeof o?e?o(e):null:o}).concat(e).reduce((e,t)=>t?(Object.entries(t).forEach(t=>{let[n,i]=t;var s;r&&[OE,PE].includes(n)||(0===n.indexOf("on")?(o.has(n)||o.set(n,[]),"function"===typeof i&&(null==(s=o.get(n))||s.push(i),e[n]=function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null==(e=o.get(n))?void 0:e.map(e=>e(...r)).find(e=>void 0!==e)})):e[n]=i)}),e):e,{}))}function LE(e){void 0===e&&(e=[]);const t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),r=e.map(e=>null==e?void 0:e.item),i=o.useCallback(t=>_E(t,e,"reference"),t),s=o.useCallback(t=>_E(t,e,"floating"),n),l=o.useCallback(t=>_E(t,e,"item"),r);return o.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:l}),[i,s,l])}const RE=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function BE(e,t){var n;void 0===t&&(t={});const{open:r,floatingId:i}=e,{enabled:l=!0,role:a="dialog"}=t,c=null!=(n=RE.get(a))?n:a,u=KA(),d=null!=QA(),h=o.useMemo(()=>"tooltip"===c||"label"===a?{["aria-"+("label"===a?"labelledby":"describedby")]:r?i:void 0}:(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===c?"dialog":c,"aria-controls":r?i:void 0},"listbox"===c&&{role:"combobox"}),"menu"===c&&{id:u}),"menu"===c&&d&&{role:"menuitem"}),"select"===a&&{"aria-autocomplete":"none"}),"combobox"===a&&{"aria-autocomplete":"list"}),[c,i,d,r,u,a]),p=o.useMemo(()=>{const e=(0,s.A)({id:i},c&&{role:c});return"tooltip"===c||"label"===a?e:(0,s.A)((0,s.A)({},e),"menu"===c&&{"aria-labelledby":u})},[c,i,u,a]),f=o.useCallback(e=>{let{active:t,selected:n}=e;const o=(0,s.A)({role:"option"},t&&{id:i+"-option"});switch(a){case"select":return(0,s.A)((0,s.A)({},o),{},{"aria-selected":t&&n});case"combobox":return(0,s.A)((0,s.A)({},o),t&&{"aria-selected":!0})}return{}},[i,a]);return o.useMemo(()=>l?{reference:h,floating:p,item:f}:{},[l,h,p,f])}const IE=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,t)=>(t?"-":"")+e.toLowerCase());function FE(e,t){return"function"===typeof e?e(t):e}function jE(e,t){void 0===t&&(t={});const{open:n,elements:{floating:r}}=e,{duration:i=250}=t,s=("number"===typeof i?i:i.close)||0,[l,a]=o.useState("unmounted"),c=function(e,t){const[n,r]=o.useState(e);return e&&!n&&r(!0),o.useEffect(()=>{if(!e&&n){const e=setTimeout(()=>r(!1),t);return()=>clearTimeout(e)}},[e,n,t]),n}(n,s);return c||"close"!==l||a("unmounted"),HA(()=>{if(r){if(n){a("initial");const e=requestAnimationFrame(()=>{a("open")});return()=>{cancelAnimationFrame(e)}}a("close")}},[n,r]),{isMounted:c,status:l}}function zE(e,t){void 0===t&&(t={});const{initial:n={opacity:0},open:r,close:i,common:l,duration:a=250}=t,c=e.placement,u=c.split("-")[0],d=o.useMemo(()=>({side:u,placement:c}),[u,c]),h="number"===typeof a,p=(h?a:a.open)||0,f=(h?a:a.close)||0,[m,g]=o.useState(()=>(0,s.A)((0,s.A)({},FE(l,d)),FE(n,d))),{isMounted:v,status:y}=jE(e,{duration:a}),b=tE(n),w=tE(r),k=tE(i),C=tE(l);return HA(()=>{const e=FE(b.current,d),t=FE(k.current,d),n=FE(C.current,d),o=FE(w.current,d)||Object.keys(e).reduce((e,t)=>(e[t]="",e),{});if("initial"===y&&g(t=>(0,s.A)((0,s.A)({transitionProperty:t.transitionProperty},n),e)),"open"===y&&g((0,s.A)((0,s.A)({transitionProperty:Object.keys(o).map(IE).join(","),transitionDuration:p+"ms"},n),o)),"close"===y){const o=t||e;g((0,s.A)((0,s.A)({transitionProperty:Object.keys(o).map(IE).join(","),transitionDuration:f+"ms"},n),o))}},[f,k,b,w,C,p,y,d]),{isMounted:v,styles:m}}const HE=["editor","innerRef"];var VE,UE={exports:{}},$E={};UE.exports=function(){if(VE)return $E;VE=1;var e=o,t="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},n=e.useState,r=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function l(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!t(e,o)}catch(r){return!0}}var a="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),a=n({inst:{value:o,getSnapshot:t}}),c=a[0].inst,u=a[1];return i(function(){c.value=o,c.getSnapshot=t,l(c)&&u({inst:c})},[e,o,t]),r(function(){return l(c)&&u({inst:c}),e(function(){l(c)&&u({inst:c})})},[e]),s(o),o};return $E.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:a,$E}();var WE=UE.exports;const qE=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):t&&(t.current=e)})}},GE=e=>{let{contentComponent:t}=e;const n=WE.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return o.createElement(o.Fragment,null,Object.values(n))};class KE extends o.Component{constructor(e){var t;super(e),this.editorContentRef=o.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:Boolean(null===(t=e.editor)||void 0===t?void 0:t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=function(){const e=new Set;let t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,o){t=(0,s.A)((0,s.A)({},t),{},{[n]:AS.createPortal(o.reactElement,o.element,n)}),e.forEach(e=>e())},removeRenderer(n){const o=(0,s.A)({},t);delete o[n],t=o,e.forEach(e=>e())}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e)return;if(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild)return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const e=this.props,{editor:t,innerRef:n}=e,r=(0,l.A)(e,HE);return o.createElement(o.Fragment,null,o.createElement("div",(0,s.A)({ref:qE(n,this.editorContentRef)},r)),(null===t||void 0===t?void 0:t.contentComponent)&&o.createElement(GE,{contentComponent:t.contentComponent}))}}const ZE=(0,o.forwardRef)((e,t)=>{const n=o.useMemo(()=>Math.floor(4294967295*Math.random()).toString(),[e.editor]);return o.createElement(KE,(0,s.A)({key:n,innerRef:t},e))});o.memo(ZE);var JE,XE={exports:{}},QE={};XE.exports=function(){if(JE)return QE;JE=1;var e=o,t=WE,n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},r=t.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,a=e.useDebugValue;return QE.useSyncExternalStoreWithSelector=function(e,t,o,c,u){var d=i(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=l(function(){function e(e){if(!s){if(s=!0,r=e,e=c(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return i=t}return i=e}if(t=i,n(r,e))return t;var o=c(e);return void 0!==u&&u(t,o)?t:(r=e,i=o)}var r,i,s=!1,l=void 0===o?null:o;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,o,c,u]);var p=r(e,d[0],d[1]);return s(function(){h.hasValue=!0,h.value=p},[p]),a(p),p},QE}();XE.exports;"undefined"!==typeof window?o.useLayoutEffect:o.useEffect;const YE="undefined"===typeof window;YE||Boolean("undefined"!==typeof window&&window.next);const eD=(0,o.createContext)({editor:null});eD.Consumer;const tD=(0,o.createContext)({onDragStart:void 0}),nD=()=>(0,o.useContext)(tD),oD=o.forwardRef((e,t)=>{const{onDragStart:n}=nD(),r=e.as||"div";return o.createElement(r,(0,s.A)((0,s.A)({},e),{},{ref:t,"data-node-view-wrapper":"",onDragStart:n,style:(0,s.A)({whiteSpace:"normal"},e.style)}))});class rD{constructor(e,t){let{editor:n,props:o={},as:r="div",className:i=""}=t;this.ref=null,this.id=Math.floor(4294967295*Math.random()).toString(),this.component=e,this.editor=n,this.props=o,this.element=document.createElement(r),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?(0,AS.flushSync)(()=>{this.render()}):this.render()}render(){var e;const t=this.component,n=this.props,r=this.editor,i=function(){try{if(o.version)return parseInt(o.version.split(".")[0],10)>=19}catch(e){}return!1}(),l=function(e){return!("function"!==typeof e||!e.prototype||!e.prototype.isReactComponent)}(t),a=function(e){var t;return!("object"!==typeof e||"Symbol(react.forward_ref)"!==(null===(t=e.$$typeof)||void 0===t?void 0:t.toString()))}(t),c=(0,s.A)({},n);c.ref||(i||l||a)&&(c.ref=e=>{this.ref=e}),this.reactElement=o.createElement(t,(0,s.A)({},c)),null===(e=null===r||void 0===r?void 0:r.contentComponent)||void 0===e||e.setRenderer(this.id,this)}updateProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props=(0,s.A)((0,s.A)({},this.props),e),this.render()}destroy(){var e;const t=this.editor;null===(e=null===t||void 0===t?void 0:t.contentComponent)||void 0===e||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}}class iD extends vl{mount(){var e=this;const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.updateAttributes(t)},deleteNode:()=>this.deleteNode(),ref:(0,o.createRef)()};if(!this.component.displayName){const e=e=>e.charAt(0).toUpperCase()+e.substring(1);this.component.displayName=e(this.extension.name)}const n={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&e.appendChild(this.contentDOMElement)}},r=this.component,i=(0,o.memo)(e=>o.createElement(tD.Provider,{value:n},(0,o.createElement)(r,e)));i.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let s=this.node.isInline?"span":"div";this.options.as&&(s=this.options.as);const{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new rD(i,{editor:this.editor,props:t,as:s,className:"node-".concat(this.node.type.name," ").concat(l).trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null===(e=this.renderer.element.firstElementChild)||void 0===e?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:t}=this.editor.state.selection,n=this.getPos();if("number"===typeof n)if(e<=n&&t>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,n){const o=e=>{this.renderer.updateProps(e),"function"===typeof this.options.attrs&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"===typeof this.options.update){const r=this.node,i=this.decorations,s=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:r,oldDecorations:i,newNode:e,newDecorations:t,oldInnerDecorations:s,innerDecorations:n,updateProps:()=>o({node:e,decorations:t,innerDecorations:n})})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,o({node:e,decorations:t,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if("function"===typeof this.options.attrs){const t=this.editor.extensionManager.attributes,n=qi(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function sD(e,t){return n=>n.editor.contentComponent?new iD(e,n,t):{}}const lD=["show","referencePos"],aD=["show","referencePos"],cD=["show","referencePos"],uD=["editor","className","theme","children","editable","onSelectionChange","onChange","formattingToolbar","linkToolbar","slashMenu","emojiPicker","sideMenu","filePanel","tableHandles","comments","autoFocus","renderEditor"],dD=["className","renderEditor","editorColorScheme","children"];Object.defineProperty;const hD=(0,o.createContext)(void 0);function pD(e){return(0,o.useContext)(hD)}function fD(e){const t=pD();if(null==t||!t.editor)throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return t.editor}function mD(e,t,n){const r=pD();t||(t=null==r?void 0:r.editor),(0,o.useEffect)(()=>{if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onSelectionChange(e,n)},[e,t,n])}function gD(e,t,n,r){const{refs:i,update:l,context:a,floatingStyles:c,isPositioned:u}=NE((0,s.A)({open:e},r)),{isMounted:d,styles:h}=zE(a),p=ME(a,"object"==typeof(null==r?void 0:r.canDismiss)?r.canDismiss:{enabled:null==r?void 0:r.canDismiss}),{getReferenceProps:f,getFloatingProps:m}=LE([p]);return(0,o.useEffect)(()=>{l()},[t,l]),(0,o.useEffect)(()=>{null!==t&&(t instanceof HTMLElement||function(e){return void 0!==e.getBoundingClientRect}(t)?i.setReference(t):i.setReference({getBoundingClientRect:()=>t}))},[t,i]),(0,o.useMemo)(()=>({isMounted:d,ref:i.setFloating,setReference:i.setReference,style:(0,s.A)((0,s.A)((0,s.A)({display:"flex"},h),c),{},{zIndex:n}),getFloatingProps:m,getReferenceProps:f,isPositioned:u}),[u,c,d,i.setFloating,i.setReference,h,n,m,f])}function vD(e){const[t,n]=(0,o.useState)();return(0,o.useEffect)(()=>e(e=>{n((0,s.A)({},e))}),[e]),t}const yD=(0,o.createContext)(void 0);function bD(){return(0,o.useContext)(yD)}const wD=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,o.useMemo)(()=>{const t=Cx.create(e);return window&&(window.ProseMirror=t._tiptapEditor),t},t)};function kD(){return pD().editor.dictionary}function CD(e,t){const n=pD();t||(t=null==n?void 0:n.editor),(0,o.useEffect)(()=>{if(!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onChange(e)},[e,t])}const xD=e=>{const[t,n]=(0,o.useState)(!1),[r,i]=(0,o.useState)(e.editor.isEmpty),s=bD();CD(()=>{i(e.editor.isEmpty)},e.editor);const l=(0,o.useCallback)(()=>{n(!0)},[]),a=(0,o.useCallback)(()=>{n(!1)},[]);return(0,o.useEffect)(()=>{e.editable&&e.autoFocus&&e.editor.focus()},[e.autoFocus,e.editable,e.editor]),(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(s.Comments.Editor,{autoFocus:e.autoFocus,className:"bn-comment-editor",editor:e.editor,onFocus:l,onBlur:a,editable:e.editable}),e.actions&&(0,Ax.jsx)("div",{className:"bn-comment-actions-wrapper",children:(0,Ax.jsx)(e.actions,{isFocused:t,isEmpty:r})})]})},SD=Ry(_y(Uw.paragraph.implementation.node.config),{}),{textColor:AD,backgroundColor:ED}=Ww,DD=(0,l.A)(Ww,["textColor","backgroundColor"]),MD=ok.create({blockSpecs:{paragraph:SD},styleSpecs:DD});function ND(){const e=fD();if(!e.comments)throw new Error("Comments plugin not found");const t=e.comments,n=bD(),o=kD(),r=wD({trailingBlock:!1,dictionary:(0,s.A)((0,s.A)({},o),{},{placeholders:{emptyDocument:o.placeholders.new_comment}}),schema:MD,sideMenuDetection:"editor"});return(0,Ax.jsx)(n.Comments.Card,{className:"bn-thread",children:(0,Ax.jsx)(xD,{autoFocus:!0,editable:!0,editor:r,actions:e=>{let{isEmpty:o}=e;return(0,Ax.jsx)(n.Generic.Toolbar.Root,{className:Cy("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:(0,Ax.jsx)(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:o,onClick:async()=>{await t.createThread({initialComment:{body:r.document}}),t.stopPendingComment()},children:"Save"})})}})})}const TD=e=>{const t=fD();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=t.comments;(0,o.useEffect)(()=>{const e=n.onUpdate(e=>t.setForceSelectionVisible(e.pendingComment));return()=>e()},[n,t]);const r=vD(n.onUpdate.bind(n)),i=function(e,t){const n=fD();t=t||n;const[r,i]=(0,o.useState)(()=>{if(e)return t.getSelectionBoundingBox()});return mD((0,o.useCallback)(()=>{if(!e)return;const n=t.getSelectionBoundingBox();i(n)},[t,e]),t,!0),(0,o.useEffect)(()=>{i(e?t.getSelectionBoundingBox():void 0)},[e,t]),r}(null==r?void 0:r.pendingComment),{isMounted:l,ref:a,style:c,getFloatingProps:u}=gD((null==r?void 0:r.pendingComment)||!1,i||null,5e3,(0,s.A)({placement:"bottom",middleware:[DA(10),MA(),TA()],onOpenChange:e=>{e||(n.stopPendingComment(),t.focus())}},e.floatingOptions));if(!l||!r)return null;const d=e.floatingComposer||ND;return(0,Ax.jsx)("div",(0,s.A)((0,s.A)({ref:a,style:c},u()),{},{children:(0,Ax.jsx)(d,{})}))};var OD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},PD=o.createContext&&o.createContext(OD),_D=["attr","size","title"];function LD(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function RD(){return RD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},RD.apply(this,arguments)}function BD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function ID(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BD(Object(n),!0).forEach(function(t){FD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function FD(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jD(e){return e&&e.map((e,t)=>o.createElement(e.tag,ID({key:t},e.attr),jD(e.child)))}function zD(e){return t=>o.createElement(HD,RD({attr:ID({},e.attr)},t),jD(e.child))}function HD(e){var t=t=>{var n,{attr:r,size:i,title:s}=e,l=LD(e,_D),a=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),o.createElement("svg",RD({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:n,style:ID(ID({color:e.color||t.color},t.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&o.createElement("title",null,s),e.children)};return void 0!==PD?o.createElement(PD.Consumer,null,e=>t(e)):t(OD)}function VD(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(e)}function UD(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(e)}function $D(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(e)}function WD(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(e)}function qD(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(e)}function GD(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(e)}function KD(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(e)}function ZD(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function JD(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(e)}function XD(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(e)}function QD(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(e)}function YD(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(e)}function eM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(e)}function tM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(e)}function nM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function oM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function rM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(e)}function iM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(e)}function sM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(e)}function lM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(e)}function aM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(e)}function cM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(e)}function uM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(e)}function dM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(e)}function hM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(e)}function pM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(e)}function fM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(e)}function mM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function gM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function vM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(e)}function yM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(e)}function bM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(e)}function wM(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(e)}let kM;function CM(e){const t=(0,o.useRef)(null),r=(0,o.useRef)(null);return r.current&&r.current.update(e),(0,o.useEffect)(()=>((async()=>{const{emojiMart:o}=await async function(){return kM||(kM=(async()=>{const[e,t]=await Promise.all([n.e(412).then(n.bind(n,3412)),n.e(410).then(n.t.bind(n,410,17))]),o="default"in e?e.default:e,r="default"in t?t.default:t;return await o.init({data:r}),{emojiMart:o,emojiData:r}})(),kM)}();r.current=new o.Picker((0,s.A)((0,s.A)({},e),{},{ref:t}))})(),()=>{r.current=null}),[]),o.createElement("div",{ref:t})}const xM=e=>{const[t,n]=(0,o.useState)(!1),r=bD(),i=pD();return(0,Ax.jsxs)(r.Generic.Popover.Root,{opened:t,children:[(0,Ax.jsx)(r.Generic.Popover.Trigger,{children:(0,Ax.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),n(!t)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.children})}),(0,Ax.jsx)(r.Generic.Popover.Content,{variant:"panel-popover",children:(0,Ax.jsx)(CM,{perLine:7,onClickOutside:()=>n(!1),onEmojiSelect:t=>{e.onEmojiSelect(t),n(!1)},theme:null==i?void 0:i.colorSchemePreference})})]})};function SM(e,t){const n=e.comments;if(!n)throw new Error("Comments plugin not found");const r=n.userStore,i=(0,o.useCallback)(()=>{const e=new Map;for(const n of t){const t=r.getUser(n);t&&e.set(n,t)}return e},[r,t]),s=(0,o.useMemo)(()=>({current:i()}),[i]),l=(0,o.useCallback)(e=>{const n=r.subscribe(t=>{s.current=i(),e()});return r.loadUsers(t),n},[r,i,t,s]);return(0,o.useSyncExternalStore)(l,()=>s.current)}const AM=e=>{const t=bD(),n=kD(),r=fD();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const i=e.comment.reactions.find(t=>t.emoji===e.emoji);if(!i)throw new Error("Trying to render reaction badge for non-existing reaction");const[s,l]=(0,o.useState)([]),a=SM(r,s);return(0,Ax.jsx)(t.Generic.Badge.Root,{className:Cy("bn-badge","bn-comment-reaction"),text:i.userIds.length.toString(),icon:i.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(e.comment,i.emoji),onClick:()=>e.onReactionSelect(i.emoji),onMouseEnter:()=>l(i.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:"".concat(Array.from(a.values()).map(e=>e.username).join("\n"))},i.emoji)},EM=e=>{let{comment:t,thread:n,showResolveButton:r}=e;const i=kD(),l=wD({initialContent:t.body,trailingBlock:!1,dictionary:(0,s.A)((0,s.A)({},i),{},{placeholders:{emptyDocument:i.placeholders.edit_comment}}),schema:MD,sideMenuDetection:"editor"},[t.body]),a=bD(),[c,u]=(0,o.useState)(!1),d=fD();if(!d.comments)throw new Error("Comments plugin not found");const h=d.comments.threadStore,p=(0,o.useCallback)(()=>{u(!0)},[]),f=(0,o.useCallback)(()=>{l.replaceBlocks(l.document,t.body),u(!1)},[l,t.body]),m=(0,o.useCallback)(async e=>{await h.updateComment({commentId:t.id,comment:{body:l.document},threadId:n.id}),u(!1)},[t,n.id,l,h]),g=(0,o.useCallback)(async()=>{await h.deleteComment({commentId:t.id,threadId:n.id})},[t,n.id,h]),v=(0,o.useCallback)(async e=>{h.auth.canAddReaction(t,e)?await h.addReaction({threadId:n.id,commentId:t.id,emoji:e}):h.auth.canDeleteReaction(t,e)&&await h.deleteReaction({threadId:n.id,commentId:t.id,emoji:e})},[h,t,n.id]),y=(0,o.useCallback)(async()=>{await h.resolveThread({threadId:n.id})},[n.id,h]),b=(0,o.useCallback)(async()=>{await h.unresolveThread({threadId:n.id})},[n.id,h]),w=function(e,t){return SM(e,[t]).get(t)}(d,t.userId);if(!t.body)return null;let k;const C=h.auth.canAddReaction(t),x=h.auth.canDeleteComment(t),S=h.auth.canUpdateComment(t),A=r&&(n.resolved?h.auth.canUnresolveThread(n):h.auth.canResolveThread(n));c||(k=(0,Ax.jsxs)(a.Generic.Toolbar.Root,{className:Cy("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[C&&(0,Ax.jsx)(xM,{onEmojiSelect:e=>v(e.native),children:(0,Ax.jsx)(a.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.add_reaction,variant:"compact",children:(0,Ax.jsx)(wM,{size:16})},"add-reaction")}),A&&(n.resolved?(0,Ax.jsx)(a.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:b,children:(0,Ax.jsx)(VD,{size:16})},"reopen"):(0,Ax.jsx)(a.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.resolve,variant:"compact",onClick:y,children:(0,Ax.jsx)(fM,{size:16})},"resolve")),(x||S)&&(0,Ax.jsxs)(a.Generic.Menu.Root,{position:"bottom-start",children:[(0,Ax.jsx)(a.Generic.Menu.Trigger,{children:(0,Ax.jsx)(a.Generic.Toolbar.Button,{mainTooltip:i.comments.actions.more_actions,variant:"compact",children:(0,Ax.jsx)(bM,{size:16})},"more-actions")}),(0,Ax.jsxs)(a.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[S&&(0,Ax.jsx)(a.Generic.Menu.Item,{icon:(0,Ax.jsx)($D,{}),onClick:p,children:i.comments.actions.edit_comment},"edit-comment"),x&&(0,Ax.jsx)(a.Generic.Menu.Item,{icon:(0,Ax.jsx)(gM,{}),onClick:g,children:i.comments.actions.delete_comment},"delete-comment")]})]})]}));const E=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return(0,Ax.jsx)(a.Comments.Comment,{authorInfo:null!==w&&void 0!==w?w:"loading",timeString:E,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:k,className:"bn-thread-comment",children:(0,Ax.jsx)(xD,{autoFocus:c,editor:l,editable:c,actions:t.reactions.length>0||c?e=>{let{isEmpty:n}=e;return(0,Ax.jsxs)(Ax.Fragment,{children:[t.reactions.length>0&&!c&&(0,Ax.jsxs)(a.Generic.Badge.Group,{className:Cy("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map(e=>(0,Ax.jsx)(AM,{comment:t,emoji:e.emoji,onReactionSelect:v},e.emoji)),(0,Ax.jsx)(xM,{onEmojiSelect:e=>v(e.native),children:(0,Ax.jsx)(a.Generic.Badge.Root,{className:Cy("bn-badge","bn-comment-add-reaction"),text:"+",icon:(0,Ax.jsx)(wM,{size:16}),mainTooltip:i.comments.actions.add_reaction})})]}),c&&(0,Ax.jsxs)(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:Cy("bn-action-toolbar","bn-comment-actions"),children:[(0,Ax.jsx)(a.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",onClick:m,isDisabled:n,children:"Save"}),(0,Ax.jsx)(a.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Cancel",variant:"compact",onClick:f,children:"Cancel"})]})]})}:void 0})})},DM=e=>{let{thread:t,maxCommentsBeforeCollapse:n}=e;const o=bD(),r=kD(),i=SM(fD(),t.resolvedBy?[t.resolvedBy]:[]),s=t.comments.map((e,n)=>(0,Ax.jsx)(EM,{thread:t,comment:e,showResolveButton:0===n},e.id));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!i.get(t.resolvedBy))throw new Error("User ".concat(t.resolvedBy," resolved thread ").concat(t.id,", but their data could not be found."));const e=t.comments.findLastIndex(e=>t.resolvedUpdatedAt.getTime()>e.createdAt.getTime())+1;s.splice(e,0,(0,Ax.jsx)(o.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&i.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:(0,Ax.jsx)("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return n&&s.length>n&&s.splice(1,s.length-2,(0,Ax.jsx)(o.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),s},MM=e=>{let{thread:t,selected:n,referenceText:r,maxCommentsBeforeCollapse:i,onFocus:l,onBlur:a,tabIndex:c}=e;const u=bD(),d=kD(),h=fD().comments;if(!h)throw new Error("Comments plugin not found");const p=wD({trailingBlock:!1,dictionary:(0,s.A)((0,s.A)({},d),{},{placeholders:{emptyDocument:d.placeholders.comment_reply}}),schema:MD,sideMenuDetection:"editor"}),f=(0,o.useCallback)(async()=>{await h.threadStore.addComment({comment:{body:p.document},threadId:t.id}),p.removeBlocks(p.document)},[h,p,t.id]);return(0,Ax.jsxs)(u.Comments.Card,{className:"bn-thread",headerText:r,onFocus:l,onBlur:a,selected:n,tabIndex:c,children:[(0,Ax.jsx)(u.Comments.CardSection,{className:"bn-thread-comments",children:(0,Ax.jsx)(DM,{thread:t,maxCommentsBeforeCollapse:n?void 0:i||5})}),n&&(0,Ax.jsx)(u.Comments.CardSection,{className:"bn-thread-composer",children:(0,Ax.jsx)(xD,{autoFocus:!1,editable:!0,editor:p,actions:e=>{let{isEmpty:t}=e;return t?null:(0,Ax.jsx)(u.Generic.Toolbar.Root,{variant:"action-toolbar",className:Cy("bn-action-toolbar","bn-comment-actions"),children:(0,Ax.jsx)(u.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",isDisabled:t,onClick:f,children:"Save"})})}})})]})};function NM(e){const t=e.comments;if(!t)throw new Error("Comments plugin not found");const n=t.threadStore,r=(0,o.useRef)();r.current||(r.current=n.getThreads());const i=(0,o.useCallback)(e=>n.subscribe(t=>{r.current=t,e()}),[n]);return(0,o.useSyncExternalStore)(i,()=>r.current)}const TM=e=>{const t=fD();if(!t.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=vD(t.comments.onUpdate.bind(t.comments)),{isMounted:r,ref:i,style:l,getFloatingProps:a,setReference:c}=gD(!(null==n||!n.selectedThreadId),null,5e3,(0,s.A)({placement:"bottom",middleware:[DA(10),MA(),TA()],onOpenChange:e=>{var n;e||(null==(n=t.comments)||n.selectThread(void 0),t.focus())}},e.floatingOptions)),u=(0,o.useCallback)(()=>{var e;if(null==n||!n.selectedThreadId)return;const o=null==(e=t.domElement)?void 0:e.querySelector('[data-bn-thread-id="'.concat(null==n?void 0:n.selectedThreadId,'"]'));o&&c(o)},[c,t,null==n?void 0:n.selectedThreadId]);(0,o.useEffect)(()=>{if(null!=n&&n.selectedThreadId)return t.onChange(()=>{u()})},[t,u,null==n?void 0:n.selectedThreadId]),(0,o.useLayoutEffect)(u,[u]);const d=NM(t);if(!r||!n||!n.selectedThreadId)return null;const h=e.floatingThread||MM;return(0,Ax.jsx)("div",(0,s.A)((0,s.A)({ref:i,style:l},a()),{},{children:(0,Ax.jsx)(h,{thread:d.get(n.selectedThreadId),selected:!0})}))},OM=e=>{const t=bD(),n=kD(),{block:r}=e,i=fD(),[s,l]=(0,o.useState)(""),a=(0,o.useCallback)(e=>{l(e.currentTarget.value)},[]),c=(0,o.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),i.updateBlock(r,{props:{name:Ny(s),url:s}}))},[i,r,s]),u=(0,o.useCallback)(()=>{i.updateBlock(r,{props:{name:Ny(s),url:s}})},[i,r,s]);return(0,Ax.jsxs)(t.FilePanel.TabPanel,{className:"bn-tab-panel",children:[(0,Ax.jsx)(t.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:s,onChange:a,onKeyDown:c,"data-test":"embed-input"}),(0,Ax.jsx)(t.FilePanel.Button,{className:"bn-button",onClick:u,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},PM=e=>{var t;const n=bD(),r=kD(),{block:i,setLoading:s}=e,l=fD(),[a,c]=(0,o.useState)(!1);(0,o.useEffect)(()=>{a&&setTimeout(()=>{c(!1)},3e3)},[a]);const u=(0,o.useCallback)(e=>{null!==e&&async function(e){if(s(!0),void 0!==l.uploadFile)try{let t=await l.uploadFile(e,i.id);"string"==typeof t&&(t={props:{name:e.name,url:t}}),l.updateBlock(i,t)}catch(t){c(!0)}finally{s(!1)}}(e)},[i,l,s]),d=l.schema.blockSchema[i.type],h=d.isFileBlock&&null!=(t=d.fileBlockAccept)&&t.length?d.fileBlockAccept.join(","):"*/*";return(0,Ax.jsxs)(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[(0,Ax.jsx)(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:h,placeholder:r.file_panel.upload.file_placeholder[i.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:u}),a&&(0,Ax.jsx)("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},_M=e=>{var t;const n=bD(),r=kD(),i=fD(),[s,l]=(0,o.useState)(!1),a=null!==(t=e.tabs)&&void 0!==t?t:[...void 0!==i.uploadFile?[{name:r.file_panel.upload.title,tabPanel:(0,Ax.jsx)(PM,{block:e.block,setLoading:l})}]:[],{name:r.file_panel.embed.title,tabPanel:(0,Ax.jsx)(OM,{block:e.block})}],[c,u]=(0,o.useState)(e.defaultOpenTab||a[0].name);return(0,Ax.jsx)(n.FilePanel.Root,{className:"bn-panel",defaultOpenTab:c,openTab:c,setOpenTab:u,tabs:a,loading:s})},LM=e=>{const t=fD();if(!t.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=vD(t.filePanel.onUpdate.bind(t.filePanel)),{isMounted:o,ref:r,style:i,getFloatingProps:a}=gD((null==n?void 0:n.show)||!1,(null==n?void 0:n.referencePos)||null,5e3,(0,s.A)({placement:"bottom",middleware:[DA(10),TA()],onOpenChange:e=>{e||(t.filePanel.closeMenu(),t.focus())}},e.floatingOptions));if(!o||!n)return null;const{show:c,referencePos:u}=n,d=(0,l.A)(n,lD),h=e.filePanel||_M;return(0,Ax.jsx)("div",(0,s.A)((0,s.A)({ref:r,style:i},a()),{},{children:(0,Ax.jsx)(h,(0,s.A)({},d))}))};function RM(e,t){CD(e,t),mD(e,t)}function BM(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function IM(e){const t=pD();if(e||(e=null==t?void 0:t.editor),!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=e,[r,i]=(0,o.useState)(()=>{var e;return(null==(e=n.getSelection())?void 0:e.blocks)||[n.getTextCursorPosition().block]});return RM(()=>{var e;return i((null==(e=n.getSelection())?void 0:e.blocks)||[n.getTextCursorPosition().block])},n),r}const FM={bold:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(e)},italic:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(e)},underline:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(e)},strike:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(e)},code:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(e)}};const jM=e=>{const t=kD(),n=bD(),r=fD(),i=function(e,t){return e in t.schema.styleSchema&&t.schema.styleSchema[e].type===e&&"boolean"===t.schema.styleSchema[e].propSchema}(e.basicTextStyle,r),s=IM(r),[l,a]=(0,o.useState)(e.basicTextStyle in r.getActiveStyles());RM(()=>{i&&a(e.basicTextStyle in r.getActiveStyles())},r);if(!(0,o.useMemo)(()=>!!i&&!!s.find(e=>void 0!==e.content),[i,s])||!r.isEditable)return null;const c=FM[e.basicTextStyle];return(0,Ax.jsx)(n.FormattingToolbar.Button,{className:"bn-button","data-test":e.basicTextStyle,onClick:()=>(e=>{if(r.focus(),i){if("boolean"!==r.schema.styleSchema[e].propSchema)throw new Error("can only toggle boolean styles");r.toggleStyles({[e]:!0})}})(e.basicTextStyle),isSelected:l,label:t.formatting_toolbar[e.basicTextStyle].tooltip,mainTooltip:t.formatting_toolbar[e.basicTextStyle].tooltip,secondaryTooltip:ky(t.formatting_toolbar[e.basicTextStyle].secondary_tooltip,t.generic.ctrl_shortcut),icon:(0,Ax.jsx)(c,{})})},zM=e=>{const t=e.textColor||"default",n=e.backgroundColor||"default",r=e.size||16,i=(0,o.useMemo)(()=>({pointerEvents:"none",fontSize:(.75*r).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return(0,Ax.jsx)("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":t,style:i,children:"A"})},HM=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],VM=e=>{const t=bD(),n=kD();return(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(()=>e.text?(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(t.Generic.Menu.Label,{children:n.color_picker.text_title}),HM.map(o=>(0,Ax.jsx)(t.Generic.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.text.setColor(o)},"data-test":"text-color-"+o,icon:(0,Ax.jsx)(zM,{textColor:o,size:e.iconSize}),checked:e.text.color===o,children:n.color_picker.colors[o]},"text-color-"+o))]}):null,{}),(0,Ax.jsx)(()=>e.background?(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(t.Generic.Menu.Label,{children:n.color_picker.background_title}),HM.map(o=>(0,Ax.jsx)(t.Generic.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.background.setColor(o)},"data-test":"background-color-"+o,icon:(0,Ax.jsx)(zM,{backgroundColor:o,size:e.iconSize}),checked:e.background.color===o,children:n.color_picker.colors[o]},"background-color-"+o))]}):null,{})]})};function UM(e,t){return"".concat(e,"Color")in t.schema.styleSchema&&t.schema.styleSchema["".concat(e,"Color")].type==="".concat(e,"Color")&&"string"===t.schema.styleSchema["".concat(e,"Color")].propSchema}const $M=()=>{const e=bD(),t=kD(),n=fD(),r=UM("text",n),i=UM("background",n),s=IM(n),[l,a]=(0,o.useState)(r&&n.getActiveStyles().textColor||"default"),[c,u]=(0,o.useState)(i&&n.getActiveStyles().backgroundColor||"default");RM(()=>{r&&a(n.getActiveStyles().textColor||"default"),i&&u(n.getActiveStyles().backgroundColor||"default")},n);const d=(0,o.useCallback)(e=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");"default"===e?n.removeStyles({textColor:e}):n.addStyles({textColor:e}),setTimeout(()=>{n.focus()})},[n,r]),h=(0,o.useCallback)(e=>{if(!i)throw Error("Tried to set background color, but style does not exist in editor schema.");"default"===e?n.removeStyles({backgroundColor:e}):n.addStyles({backgroundColor:e}),setTimeout(()=>{n.focus()})},[i,n]);return(0,o.useMemo)(()=>{if(!r&&!i)return!1;for(const e of s)if(void 0!==e.content)return!0;return!1},[i,s,r])&&n.isEditable?(0,Ax.jsxs)(e.Generic.Menu.Root,{children:[(0,Ax.jsx)(e.Generic.Menu.Trigger,{children:(0,Ax.jsx)(e.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:t.formatting_toolbar.colors.tooltip,mainTooltip:t.formatting_toolbar.colors.tooltip,icon:(0,Ax.jsx)(zM,{textColor:l,backgroundColor:c,size:20})})}),(0,Ax.jsx)(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,Ax.jsx)(VM,{text:r?{color:l,setColor:d}:void 0,background:i?{color:c,setColor:h}:void 0})})]}):null},WM=e=>{for(const t of SC)if(e.startsWith(t))return e;return"".concat(AC,"://").concat(e)},qM=e=>{const t=bD(),n=kD(),{url:r,text:i,editLink:s,showTextField:l}=e,[a,c]=(0,o.useState)(r),[u,d]=(0,o.useState)(i);(0,o.useEffect)(()=>{c(r),d(i)},[i,r]);const h=(0,o.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),s(WM(a),u))},[s,a,u]),p=(0,o.useCallback)(e=>c(e.currentTarget.value),[]),f=(0,o.useCallback)(e=>d(e.currentTarget.value),[]),m=(0,o.useCallback)(()=>s(WM(a),u),[s,a,u]);return(0,Ax.jsxs)(t.Generic.Form.Root,{children:[(0,Ax.jsx)(t.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:(0,Ax.jsx)(eM,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:h,onChange:p,onSubmit:m}),!1!==l&&(0,Ax.jsx)(t.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:(0,Ax.jsx)(lM,{}),placeholder:n.link_toolbar.form.title_placeholder,value:u,onKeyDown:h,onChange:f,onSubmit:m})]})};const GM=()=>{var e;const t=fD(),n=bD(),r=kD(),i=function(e){return"link"in e.schema.inlineContentSchema&&"link"===e.schema.inlineContentSchema.link}(t),s=IM(t),[l,a]=(0,o.useState)(!1),[c,u]=(0,o.useState)(t.getSelectedLinkUrl()||""),[d,h]=(0,o.useState)(t.getSelectedText());RM(()=>{h(t.getSelectedText()||""),u(t.getSelectedLinkUrl()||"")},t),(0,o.useEffect)(()=>{var e;const n=e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key&&(a(!0),e.preventDefault())};return null==(e=t.prosemirrorView)||e.dom.addEventListener("keydown",n),()=>{var e;null==(e=t.prosemirrorView)||e.dom.removeEventListener("keydown",n)}},[null==(e=t.prosemirrorView)?void 0:e.dom]);const p=(0,o.useCallback)(e=>{t.createLink(e),t.focus()},[t]),f=t.transact(e=>Yw(e.selection));return(0,o.useMemo)(()=>{if(!i)return!1;for(const e of s)if(void 0===e.content)return!1;return!f},[i,s,f])&&"link"in t.schema.inlineContentSchema&&t.isEditable?(0,Ax.jsxs)(n.Generic.Popover.Root,{opened:l,children:[(0,Ax.jsx)(n.Generic.Popover.Trigger,{children:(0,Ax.jsx)(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:ky(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:(0,Ax.jsx)(eM,{}),onClick:()=>a(!0)})}),(0,Ax.jsx)(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,Ax.jsx)(qM,{url:c,text:d,editLink:p,showTextField:!1})})]}):null},KM=()=>{const e=kD(),t=bD(),n=fD(),[r,i]=(0,o.useState)(),s=IM(n),l=(0,o.useMemo)(()=>{if(1!==s.length)return;const e=s[0];return Zw(e,n)?(i(e.props.caption),e):void 0},[n,s]),a=(0,o.useCallback)(e=>{l&&"Enter"===e.key&&(e.preventDefault(),n.updateBlock(l,{props:{caption:r}}))},[r,n,l]),c=(0,o.useCallback)(e=>i(e.currentTarget.value),[]);return l&&!Jw(l,n)&&n.isEditable?(0,Ax.jsxs)(t.Generic.Popover.Root,{children:[(0,Ax.jsx)(t.Generic.Popover.Trigger,{children:(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_caption.tooltip,mainTooltip:e.formatting_toolbar.file_caption.tooltip,icon:(0,Ax.jsx)(QD,{}),isSelected:""!==l.props.caption})}),(0,Ax.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,Ax.jsx)(t.Generic.Form.Root,{children:(0,Ax.jsx)(t.Generic.Form.TextInput,{name:"file-caption",icon:(0,Ax.jsx)(QD,{}),value:r||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:c})})})]}):null},ZM=()=>{const e=kD(),t=bD(),n=fD(),r=IM(n),i=(0,o.useMemo)(()=>{if(1!==r.length)return;const e=r[0];return Zw(e,n)?e:void 0},[n,r]),s=(0,o.useCallback)(()=>{n.focus(),n.removeBlocks([i])},[n,i]);return i&&!Jw(i,n)&&n.isEditable?(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_delete.tooltip[i.type]||e.formatting_toolbar.file_delete.tooltip.file,mainTooltip:e.formatting_toolbar.file_delete.tooltip[i.type]||e.formatting_toolbar.file_delete.tooltip.file,icon:(0,Ax.jsx)(mM,{}),onClick:s}):null},JM=()=>{const e=kD(),t=bD(),n=fD(),[r,i]=(0,o.useState)(),s=IM(n),l=(0,o.useMemo)(()=>{if(1!==s.length)return;const e=s[0];return Zw(e,n)?(i(e.props.name),e):void 0},[n,s]),a=(0,o.useCallback)(e=>{l&&"Enter"===e.key&&(e.preventDefault(),n.updateBlock(l,{props:{name:r}}))},[r,n,l]),c=(0,o.useCallback)(e=>i(e.currentTarget.value),[]);return l&&!Jw(l,n)&&n.isEditable?(0,Ax.jsxs)(t.Generic.Popover.Root,{children:[(0,Ax.jsx)(t.Generic.Popover.Trigger,{children:(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_rename.tooltip[l.type]||e.formatting_toolbar.file_rename.tooltip.file,mainTooltip:e.formatting_toolbar.file_rename.tooltip[l.type]||e.formatting_toolbar.file_rename.tooltip.file,icon:(0,Ax.jsx)(qD,{})})}),(0,Ax.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,Ax.jsx)(t.Generic.Form.Root,{children:(0,Ax.jsx)(t.Generic.Form.TextInput,{name:"file-name",icon:(0,Ax.jsx)(qD,{}),value:r||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_rename.input_placeholder[l.type]||e.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:c})})})]}):null},XM=()=>{const e=kD(),t=bD(),n=fD(),r=IM(n),[i,s]=(0,o.useState)(!1);(0,o.useEffect)(()=>{s(!1)},[r]);const l=1===r.length?r[0]:void 0;return void 0!==l&&Zw(l,n)&&n.isEditable?(0,Ax.jsxs)(t.Generic.Popover.Root,{opened:i,position:"bottom",children:[(0,Ax.jsx)(t.Generic.Popover.Trigger,{children:(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button",onClick:()=>s(!i),isSelected:i,mainTooltip:e.formatting_toolbar.file_replace.tooltip[l.type]||e.formatting_toolbar.file_replace.tooltip.file,label:e.formatting_toolbar.file_replace.tooltip[l.type]||e.formatting_toolbar.file_replace.tooltip.file,icon:(0,Ax.jsx)(uM,{})})}),(0,Ax.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:(0,Ax.jsx)(_M,{block:l})})]}):null},QM=()=>{const e=kD(),t=bD(),n=fD(),r=IM(n),[i,s]=(0,o.useState)(()=>n.canNestBlock());RM(()=>{s(n.canNestBlock())},n);const l=(0,o.useCallback)(()=>{n.focus(),n.nestBlock()},[n]);return(0,o.useMemo)(()=>!r.find(e=>"inline"!==n.schema.blockSchema[e.type].content),[n.schema.blockSchema,r])&&n.isEditable?(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:l,isDisabled:!i,label:e.formatting_toolbar.nest.tooltip,mainTooltip:e.formatting_toolbar.nest.tooltip,secondaryTooltip:ky(e.formatting_toolbar.nest.secondary_tooltip,e.generic.ctrl_shortcut),icon:(0,Ax.jsx)(XD,{})}):null},YM=()=>{const e=kD(),t=bD(),n=fD(),r=IM(n),[i,s]=(0,o.useState)(()=>n.canUnnestBlock());RM(()=>{s(n.canUnnestBlock())},n);const l=(0,o.useCallback)(()=>{n.focus(),n.unnestBlock()},[n]);return(0,o.useMemo)(()=>!r.find(e=>"inline"!==n.schema.blockSchema[e.type].content),[n.schema.blockSchema,r])&&n.isEditable?(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:l,isDisabled:!i,label:e.formatting_toolbar.unnest.tooltip,mainTooltip:e.formatting_toolbar.unnest.tooltip,secondaryTooltip:ky(e.formatting_toolbar.unnest.secondary_tooltip,e.generic.ctrl_shortcut),icon:(0,Ax.jsx)(JD,{})}):null},eN=e=>{const t=bD(),n=kD(),r=fD(),i=IM(r),[s,l]=(0,o.useState)(r.getTextCursorPosition().block),a=(0,o.useMemo)(()=>(e.items||(e=>[{name:e.slash_menu.paragraph.title,type:"paragraph",icon:lM,isSelected:e=>"paragraph"===e.type},{name:e.slash_menu.heading.title,type:"heading",props:{level:1},icon:GD,isSelected:e=>"heading"===e.type&&"level"in e.props&&1===e.props.level},{name:e.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:KD,isSelected:e=>"heading"===e.type&&"level"in e.props&&2===e.props.level},{name:e.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:ZD,isSelected:e=>"heading"===e.type&&"level"in e.props&&3===e.props.level},{name:e.slash_menu.quote.title,type:"quote",icon:sM,isSelected:e=>"quote"===e.type},{name:e.slash_menu.bullet_list.title,type:"bulletListItem",icon:oM,isSelected:e=>"bulletListItem"===e.type},{name:e.slash_menu.numbered_list.title,type:"numberedListItem",icon:nM,isSelected:e=>"numberedListItem"===e.type},{name:e.slash_menu.check_list.title,type:"checkListItem",icon:tM,isSelected:e=>"checkListItem"===e.type}])(n)).filter(e=>e.type in r.schema.blockSchema),[r,n,e.items]),c=(0,o.useMemo)(()=>void 0!==a.find(e=>e.type===s.type),[s.type,a]),u=(0,o.useMemo)(()=>a.map(e=>{const t=e.icon;return{text:e.name,icon:(0,Ax.jsx)(t,{size:16}),onClick:()=>(e=>{r.focus(),r.transact(()=>{for(const t of i)r.updateBlock(t,{type:e.type,props:e.props})})})(e),isSelected:e.isSelected(s)}}),[s,a,r,i]);return RM(()=>{l(r.getTextCursorPosition().block)},r),c&&r.isEditable?(0,Ax.jsx)(t.FormattingToolbar.Select,{className:"bn-select",items:u}):null},tN=()=>{const e=kD(),t=bD(),n=fD(),r=(0,o.useCallback)(()=>{var e;null==(e=n.comments)||e.startPendingComment(),n.formattingToolbar.closeMenu()},[n]);return n.comments?(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:(0,Ax.jsx)(UD,{}),onClick:r}):null},nN=()=>{const e=kD(),t=bD(),n=fD(),r=(0,o.useCallback)(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return n._tiptapEditor.commands.addPendingComment&&n.isEditable?(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.comment.tooltip,mainTooltip:e.formatting_toolbar.comment.tooltip,icon:(0,Ax.jsx)(UD,{}),onClick:r}):null};function oN(e,t){try{const n=new URL(e,t);if("javascript:"!==n.protocol)return n.href}catch(n){}return"#"}const rN=()=>{const e=kD(),t=bD(),n=fD(),r=IM(n),i=(0,o.useMemo)(()=>{if(1!==r.length)return;const e=r[0];return Zw(e,n)?e:void 0},[n,r]),s=(0,o.useCallback)(()=>{i&&i.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(i.props.url).then(e=>window.open(oN(e,window.location.href))):window.open(oN(i.props.url,window.location.href)))},[n,i]);return!i||Jw(i,n)?null:(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_download.tooltip[i.type]||e.formatting_toolbar.file_download.tooltip.file,mainTooltip:e.formatting_toolbar.file_download.tooltip[i.type]||e.formatting_toolbar.file_download.tooltip.file,icon:(0,Ax.jsx)(vM,{}),onClick:s})},iN=()=>{const e=kD(),t=bD(),n=fD(),r=IM(n),i=(0,o.useMemo)(()=>{if(1!==r.length)return;const e=r[0];return function(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock&&"showPreview"in t.schema.blockSchema[e.type].propSchema||!1}(e,n)?e:void 0},[n,r]),s=(0,o.useCallback)(()=>{i&&n.updateBlock(i,{props:{showPreview:!i.props.showPreview}})},[n,i]);return i&&!Jw(i,n)&&n.isEditable?(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:e.formatting_toolbar.file_preview_toggle.tooltip,icon:(0,Ax.jsx)(cM,{}),isSelected:i.props.showPreview,onClick:s}):null},sN=()=>{const e=kD(),t=bD(),n=fD(),r=IM(n),i=(0,o.useMemo)(()=>{var e;if(1!==r.length)return;const t=r[0];return"table"===t.type?null==(e=n.tableHandles)?void 0:e.getMergeDirection(t):void 0},[n,r]),s=(0,o.useCallback)(()=>{var e;null==(e=n.tableHandles)||e.mergeCells()},[n]);return n.isEditable&&void 0!==i&&n.settings.tables.splitCells?(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:e.formatting_toolbar.table_cell_merge.tooltip,icon:"horizontal"===i?(0,Ax.jsx)(rM,{}):(0,Ax.jsx)(iM,{}),onClick:s}):null},lN={left:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(e)},center:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(e)},right:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(e)},justify:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(e)}},aN=e=>{const t=bD(),n=kD(),r=fD(),i=IM(r),l=(0,o.useMemo)(()=>{var e;const t=i[0];if(Qw("textAlignment",t,r))return t.props.textAlignment;if("table"===t.type){const n=null==(e=r.tableHandles)?void 0:e.getCellSelection();if(!n)return;const o=n.cells.map(e=>{let{row:n,col:o}=e;return fy(t.content.rows[n].cells[o]).props.textAlignment}),i=o[0];if(o.every(e=>e===i))return i}},[r,i]),a=(0,o.useCallback)(e=>{var t;r.focus();for(const n of i)if(Xw("textAlignment",n.type,r))r.updateBlock(n,{props:{textAlignment:e}});else if("table"===n.type){const o=null==(t=r.tableHandles)?void 0:t.getCellSelection();if(!o)continue;const i=n.content.rows.map(e=>(0,s.A)((0,s.A)({},e),{},{cells:e.cells.map(e=>fy(e))}));o.cells.forEach(t=>{let{row:n,col:o}=t;i[n].cells[o].props.textAlignment=e}),r.updateBlock(n,{type:"table",content:(0,s.A)((0,s.A)({},n.content),{},{type:"tableContent",rows:i})}),r.setTextCursorPosition(n)}},[r,i]);if(!(0,o.useMemo)(()=>!!i.find(e=>"textAlignment"in e.props||"table"===e.type&&e.children),[i])||!r.isEditable)return null;const c=lN[e.textAlignment];return(0,Ax.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"alignText".concat(e.textAlignment.slice(0,1).toUpperCase()+e.textAlignment.slice(1)),onClick:()=>a(e.textAlignment),isSelected:l===e.textAlignment,label:n.formatting_toolbar["align_".concat(e.textAlignment)].tooltip,mainTooltip:n.formatting_toolbar["align_".concat(e.textAlignment)].tooltip,icon:(0,Ax.jsx)(c,{})})},cN=e=>[(0,Ax.jsx)(eN,{items:e},"blockTypeSelect"),(0,Ax.jsx)(sN,{},"tableCellMergeButton"),(0,Ax.jsx)(KM,{},"fileCaptionButton"),(0,Ax.jsx)(XM,{},"replaceFileButton"),(0,Ax.jsx)(JM,{},"fileRenameButton"),(0,Ax.jsx)(ZM,{},"fileDeleteButton"),(0,Ax.jsx)(rN,{},"fileDownloadButton"),(0,Ax.jsx)(iN,{},"filePreviewButton"),(0,Ax.jsx)(jM,{basicTextStyle:"bold"},"boldStyleButton"),(0,Ax.jsx)(jM,{basicTextStyle:"italic"},"italicStyleButton"),(0,Ax.jsx)(jM,{basicTextStyle:"underline"},"underlineStyleButton"),(0,Ax.jsx)(jM,{basicTextStyle:"strike"},"strikeStyleButton"),(0,Ax.jsx)(aN,{textAlignment:"left"},"textAlignLeftButton"),(0,Ax.jsx)(aN,{textAlignment:"center"},"textAlignCenterButton"),(0,Ax.jsx)(aN,{textAlignment:"right"},"textAlignRightButton"),(0,Ax.jsx)($M,{},"colorStyleButton"),(0,Ax.jsx)(QM,{},"nestBlockButton"),(0,Ax.jsx)(YM,{},"unnestBlockButton"),(0,Ax.jsx)(GM,{},"createLinkButton"),(0,Ax.jsx)(tN,{},"addCommentButton"),(0,Ax.jsx)(nN,{},"addTiptapCommentButton")],uN=e=>{const t=bD();return(0,Ax.jsx)(t.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:e.children||cN(e.blockTypeSelectItems)})},dN=e=>{switch(e){case"left":default:return"top-start";case"center":return"top";case"right":return"top-end"}},hN=e=>{const t=(0,o.useRef)(null),n=fD(),[r,i]=(0,o.useState)(()=>{const e=n.getTextCursorPosition().block;return"textAlignment"in e.props?dN(e.props.textAlignment):"top-start"});RM(()=>{const e=n.getTextCursorPosition().block;"textAlignment"in e.props?i(dN(e.props.textAlignment)):i("top-start")},n);const l=vD(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:a,ref:c,style:u,getFloatingProps:d}=gD((null==l?void 0:l.show)||!1,(null==l?void 0:l.referencePos)||null,3e3,(0,s.A)({placement:r,middleware:[DA(10),MA(),TA()],onOpenChange:(e,t)=>{e||(n.formattingToolbar.closeMenu(),n.focus())}},e.floatingOptions)),h=(0,o.useMemo)(()=>BM([t,c]),[t,c]);if(!a||!l)return null;if(!l.show&&t.current)return(0,Ax.jsx)("div",{ref:h,style:u,dangerouslySetInnerHTML:{__html:t.current.innerHTML}});const p=e.formattingToolbar||uN;return(0,Ax.jsx)("div",(0,s.A)((0,s.A)({ref:h,style:u},d()),{},{children:(0,Ax.jsx)(p,{})}))},pN=e=>{const t=bD(),n=kD();return(0,Ax.jsx)(t.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:e.deleteLink,icon:(0,Ax.jsx)(YD,{})})},fN=e=>{const t=bD(),n=kD();return(0,Ax.jsxs)(t.Generic.Popover.Root,{children:[(0,Ax.jsx)(t.Generic.Popover.Trigger,{children:(0,Ax.jsx)(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),(0,Ax.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,Ax.jsx)(qM,(0,s.A)({},e))})]})},mN=e=>{const t=bD(),n=kD();return(0,Ax.jsx)(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(oN(e.url,window.location.href),"_blank")},icon:(0,Ax.jsx)(yM,{})})},gN=e=>{const t=bD();return e.children?(0,Ax.jsx)(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:e.children}):(0,Ax.jsxs)(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:e.stopHideTimer,onMouseLeave:e.startHideTimer,children:[(0,Ax.jsx)(fN,{url:e.url,text:e.text,editLink:e.editLink}),(0,Ax.jsx)(mN,{url:e.url}),(0,Ax.jsx)(pN,{deleteLink:e.deleteLink})]})},vN=e=>{const t=fD(),n={deleteLink:t.linkToolbar.deleteLink,editLink:t.linkToolbar.editLink,startHideTimer:t.linkToolbar.startHideTimer,stopHideTimer:t.linkToolbar.stopHideTimer},o=vD(t.linkToolbar.onUpdate.bind(t.linkToolbar)),{isMounted:r,ref:i,style:a,getFloatingProps:c}=gD((null==o?void 0:o.show)||!1,(null==o?void 0:o.referencePos)||null,4e3,(0,s.A)({placement:"top-start",middleware:[DA(10),TA()],onOpenChange:e=>{e||(t.linkToolbar.closeMenu(),t.focus())}},e.floatingOptions));if(!r||!o)return null;const{show:u,referencePos:d}=o,h=(0,l.A)(o,aD),p=e.linkToolbar||gN;return(0,Ax.jsx)("div",(0,s.A)((0,s.A)({ref:i,style:a},c()),{},{children:(0,Ax.jsx)(p,(0,s.A)((0,s.A)({},h),n))}))};function yN(e){return zD({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(e)}const bN=e=>{const t=bD(),n=kD(),r=fD(),i=(0,o.useCallback)(()=>{const t=e.block.content;if(void 0!==t&&Array.isArray(t)&&0===t.length)r.setTextCursorPosition(e.block),r.openSuggestionMenu("/");else{const t=r.insertBlocks([{type:"paragraph"}],e.block,"after")[0];r.setTextCursorPosition(t),r.openSuggestionMenu("/")}},[r,e.block]);return(0,Ax.jsx)(t.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:(0,Ax.jsx)(yN,{size:24,onClick:i,"data-test":"dragHandleAdd"})})};function wN(e){return zD({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(e)}function kN(e){return zD({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(e)}const CN=e=>{const t=bD(),n=fD();return Xw("textColor",e.block.type,n)||Xw("backgroundColor",e.block.type,n)?(0,Ax.jsxs)(t.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,Ax.jsx)(t.Generic.Menu.Trigger,{sub:!0,children:(0,Ax.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children})}),(0,Ax.jsx)(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,Ax.jsx)(VM,{iconSize:18,text:Xw("textColor",e.block.type,n)&&Qw("textColor",e.block,n)?{color:e.block.props.textColor,setColor:t=>n.updateBlock(e.block,{type:e.block.type,props:{textColor:t}})}:void 0,background:Xw("backgroundColor",e.block.type,n)&&Qw("backgroundColor",e.block,n)?{color:e.block.props.backgroundColor,setColor:t=>n.updateBlock(e.block,{props:{backgroundColor:t}})}:void 0})})]}):null},xN=e=>{const t=bD(),n=fD();return(0,Ax.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([e.block]),children:e.children})},SN=e=>{const t=bD(),n=fD();if("table"!==e.block.type||!n.settings.tables.headers)return null;const o=!!e.block.content.headerRows;return(0,Ax.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const t=n.getBlock(e.block.id);t&&n.updateBlock(t,(0,s.A)((0,s.A)({},t),{},{content:(0,s.A)((0,s.A)({},t.content),{},{headerRows:o?void 0:1})}))},children:e.children})},AN=e=>{const t=bD(),n=fD();if("table"!==e.block.type||!n.settings.tables.headers)return null;const o=!!e.block.content.headerCols;return(0,Ax.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{n.updateBlock(e.block,{type:"table",content:(0,s.A)((0,s.A)({},e.block.content),{},{type:"tableContent",headerCols:o?void 0:1})})},children:e.children})},EN=e=>{const t=bD(),n=kD();return(0,Ax.jsx)(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(xN,(0,s.A)((0,s.A)({},e),{},{children:n.drag_handle.delete_menuitem})),(0,Ax.jsx)(CN,(0,s.A)((0,s.A)({},e),{},{children:n.drag_handle.colors_menuitem})),(0,Ax.jsx)(SN,(0,s.A)((0,s.A)({},e),{},{children:n.drag_handle.header_row_menuitem})),(0,Ax.jsx)(AN,(0,s.A)((0,s.A)({},e),{},{children:n.drag_handle.header_column_menuitem}))]})})},DN=e=>{const t=bD(),n=kD(),o=e.dragHandleMenu||EN;return(0,Ax.jsxs)(t.Generic.Menu.Root,{onOpenChange:t=>{t?e.freezeMenu():e.unfreezeMenu()},position:"left",children:[(0,Ax.jsx)(t.Generic.Menu.Trigger,{children:(0,Ax.jsx)(t.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:t=>e.blockDragStart(t,e.block),onDragEnd:e.blockDragEnd,className:"bn-button",icon:(0,Ax.jsx)(wN,{size:24,"data-test":"dragHandle"})})}),(0,Ax.jsx)(o,{block:e.block,children:e.children})]})},MN=e=>{const t=bD(),n=(0,o.useMemo)(()=>{const t={"data-block-type":e.block.type};return"heading"===e.block.type&&(t["data-level"]=e.block.props.level.toString()),e.editor.schema.blockSchema[e.block.type].isFileBlock&&(e.block.props.url?t["data-url"]="true":t["data-url"]="false"),t},[e.block,e.editor.schema.blockSchema]);return(0,Ax.jsx)(t.SideMenu.Root,(0,s.A)((0,s.A)({className:"bn-side-menu"},n),{},{children:e.children||(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(bN,(0,s.A)({},e)),(0,Ax.jsx)(DN,(0,s.A)({},e))]})}))},NN=e=>{const t=fD(),n={blockDragStart:t.sideMenu.blockDragStart,blockDragEnd:t.sideMenu.blockDragEnd,freezeMenu:t.sideMenu.freezeMenu,unfreezeMenu:t.sideMenu.unfreezeMenu},o=vD(t.sideMenu.onUpdate.bind(t.sideMenu)),{isMounted:r,ref:i,style:a,getFloatingProps:c}=gD((null==o?void 0:o.show)||!1,(null==o?void 0:o.referencePos)||null,1e3,(0,s.A)({placement:"left-start"},e.floatingOptions));if(!r||!o)return null;const{show:u,referencePos:d}=o,h=(0,l.A)(o,cD),p=e.sideMenu||MN;return(0,Ax.jsx)("div",(0,s.A)((0,s.A)({ref:i,style:a},c()),{},{children:(0,Ax.jsx)(p,(0,s.A)((0,s.A)((0,s.A)({},h),n),{},{editor:t}))}))};function TN(e){const t=bD(),n=kD(),{items:r,loadingState:i,selectedIndex:s,onItemClick:l,columns:a}=e,c="loading-initial"===i||"loading"===i?(0,Ax.jsx)(t.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,u=(0,o.useMemo)(()=>{const e=[];for(let n=0;n<r.length;n++){const o=r[n];e.push((0,Ax.jsx)(t.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:o,id:"bn-grid-suggestion-menu-item-".concat(n),isSelected:n===s,onClick:()=>null==l?void 0:l(o)},o.id))}return e},[t,r,l,s]);return(0,Ax.jsxs)(t.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[c,u,0===u.length&&"loaded"===e.loadingState&&(0,Ax.jsx)(t.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function ON(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;const i=(0,o.useRef)(0);(0,o.useEffect)(()=>{void 0!==t&&(e.length>0?i.current=t.length:t.length-i.current>r&&n())},[n,r,e.length,t])}function PN(e,t){const[n,r]=(0,o.useState)([]),[i,s]=(0,o.useState)(!1),l=(0,o.useRef)(),a=(0,o.useRef)();return(0,o.useEffect)(()=>{const n=e;l.current=e,s(!0),t(e).then(e=>{l.current===n&&(r(e),s(!1),a.current=n)})},[e,t]),{items:n||[],usedQuery:a.current,loadingState:void 0===a.current?"loading-initial":i?"loading":"loaded"}}function _N(e){const t=pD().setContentEditableProps,n=fD(),{getItems:r,gridSuggestionMenuComponent:i,query:l,clearQuery:a,closeMenu:c,onItemClick:u,columns:d}=e,h=(0,o.useCallback)(e=>{c(),a(),null==u||u(e)},[u,c,a]),{items:p,usedQuery:f,loadingState:m}=PN(l,r);ON(p,f,c);const{selectedIndex:g}=function(e,t,n,r,i){const[s,l]=(0,o.useState)(0),a=void 0!==r&&r>1;return(0,o.useEffect)(()=>{var t;const o=e=>("ArrowLeft"===e.key&&(e.preventDefault(),n.length&&l((s-1+n.length)%n.length)),"ArrowRight"===e.key&&(e.preventDefault(),n.length&&l((s+1+n.length)%n.length)),"ArrowUp"===e.key?(e.preventDefault(),n.length&&l((s-r+n.length)%n.length),!0):"ArrowDown"===e.key?(e.preventDefault(),n.length&&l((s+r)%n.length),!0):"Enter"===e.key&&!e.isComposing&&(e.stopPropagation(),e.preventDefault(),n.length&&(null==i||i(n[s])),!0));return null==(t=e.domElement)||t.addEventListener("keydown",o,!0),()=>{var t;null==(t=e.domElement)||t.removeEventListener("keydown",o,!0)}},[e.domElement,n,s,i,r,a]),(0,o.useEffect)(()=>{l(0)},[t]),{selectedIndex:0===n.length?void 0:s}}(n,l,p,d,h);return(0,o.useEffect)(()=>(t(e=>(0,s.A)((0,s.A)({},e),{},{"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{t(e=>(0,s.A)((0,s.A)({},e),{},{"aria-expanded":!1,"aria-controls":void 0}))}),[t]),(0,o.useEffect)(()=>(t(e=>(0,s.A)((0,s.A)({},e),{},{"aria-activedescendant":g?"bn-suggestion-menu-item-"+g:void 0})),()=>{t(e=>(0,s.A)((0,s.A)({},e),{},{"aria-activedescendant":void 0}))}),[t,g]),(0,Ax.jsx)(i,{items:p,onItemClick:h,loadingState:m,selectedIndex:g,columns:d})}function LN(e){const t=fD(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:i,minQueryLength:l,onItemClick:a,getItems:c,floatingOptions:u}=e,d=(0,o.useMemo)(()=>a||(e=>{e.onItemClick(t)}),[t,a]),h=(0,o.useMemo)(()=>c||(async e=>await async function(e,t){return(await Sx(e,t)).map(e=>{let{id:t,onItemClick:n}=e;return{id:t,onItemClick:n,icon:t}})}(t,e)),[t,c]),p={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},f=vD((0,o.useCallback)(e=>t.suggestionMenus.onUpdate(n,e),[t.suggestionMenus,n])),{isMounted:m,ref:g,style:v,getFloatingProps:y}=gD((null==f?void 0:f.show)||!1,(null==f?void 0:f.referencePos)||null,2e3,(0,s.A)({placement:"bottom-start",middleware:[DA(10),TA(),OA({apply(e){let{availableHeight:t,elements:n}=e;Object.assign(n.floating.style,{maxHeight:"".concat(t-10,"px")})}})],onOpenChange(e){e||t.suggestionMenus.closeMenu()}},u));return m&&f&&(null!=f&&f.ignoreQueryLength||!l||!(f.query.startsWith(" ")||f.query.length<l))?(0,Ax.jsx)("div",(0,s.A)((0,s.A)({ref:g,style:v},y()),{},{children:(0,Ax.jsx)(_N,{query:f.query,closeMenu:p.closeMenu,clearQuery:p.clearQuery,getItems:h,columns:i,gridSuggestionMenuComponent:r||TN,onItemClick:d})})):null}function RN(e){const t=bD(),n=kD(),{items:r,loadingState:i,selectedIndex:s,onItemClick:l}=e,a="loading-initial"===i||"loading"===i?(0,Ax.jsx)(t.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,c=(0,o.useMemo)(()=>{let e;const n=[];for(let o=0;o<r.length;o++){const i=r[o];i.group!==e&&(e=i.group,n.push((0,Ax.jsx)(t.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:e},e))),n.push((0,Ax.jsx)(t.SuggestionMenu.Item,{className:Cy("bn-suggestion-menu-item","small"===i.size?"bn-suggestion-menu-item-small":""),item:i,id:"bn-suggestion-menu-item-".concat(o),isSelected:o===s,onClick:()=>null==l?void 0:l(i)},i.title))}return n},[t,r,l,s]);return(0,Ax.jsxs)(t.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[c,0===c.length&&("loading"===e.loadingState||"loaded"===e.loadingState)&&(0,Ax.jsx)(t.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function BN(e,t,n,r,i){const{selectedIndex:s,setSelectedIndex:l,handler:a}=function(e,t){const[n,r]=(0,o.useState)(0);return{selectedIndex:n,setSelectedIndex:r,handler:o=>{if("ArrowUp"===o.key)return o.preventDefault(),e.length&&r((n-1+e.length)%e.length),!0;if("ArrowDown"===o.key)return o.preventDefault(),e.length&&r((n+1)%e.length),!0;const i=function(e){return void 0!==e.nativeEvent}(o)?o.nativeEvent.isComposing:o.isComposing;return"Enter"===o.key&&!i&&(o.preventDefault(),o.stopPropagation(),e.length&&(null==t||t(e[n])),!0)}}}(n,r);return(0,o.useEffect)(()=>{var t;return null==(t=i||e.domElement)||t.addEventListener("keydown",a,!0),()=>{var t;null==(t=i||e.domElement)||t.removeEventListener("keydown",a,!0)}},[e.domElement,n,s,r,i,a]),(0,o.useEffect)(()=>{l(0)},[t,l]),{selectedIndex:0===n.length?void 0:s}}function IN(e){const t=pD().setContentEditableProps,n=fD(),{getItems:r,suggestionMenuComponent:i,query:l,clearQuery:a,closeMenu:c,onItemClick:u}=e,d=(0,o.useCallback)(e=>{c(),a(),null==u||u(e)},[u,c,a]),{items:h,usedQuery:p,loadingState:f}=PN(l,r);ON(h,p,c);const{selectedIndex:m}=BN(n,l,h,d);return(0,o.useEffect)(()=>(t(e=>(0,s.A)((0,s.A)({},e),{},{"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{t(e=>(0,s.A)((0,s.A)({},e),{},{"aria-expanded":!1,"aria-controls":void 0}))}),[t]),(0,o.useEffect)(()=>(t(e=>(0,s.A)((0,s.A)({},e),{},{"aria-activedescendant":m?"bn-suggestion-menu-item-"+m:void 0})),()=>{t(e=>(0,s.A)((0,s.A)({},e),{},{"aria-activedescendant":void 0}))}),[t,m]),(0,Ax.jsx)(i,{items:h,onItemClick:d,loadingState:f,selectedIndex:m})}const FN={heading:GD,heading_2:KD,heading_3:ZD,quote:sM,numbered_list:nM,bullet_list:oM,check_list:tM,paragraph:lM,table:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(e)},image:aM,video:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(e)},audio:hM,file:WD,emoji:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(e)},code_block:function(e){return zD({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(e)}};function jN(e){return function(e){const t=[];return Kw("heading",e)&&t.push((0,s.A)({onItemClick:()=>{ek(e,{type:"heading",props:{level:1}})},badge:ky("Mod-Alt-1"),key:"heading"},e.dictionary.slash_menu.heading),(0,s.A)({onItemClick:()=>{ek(e,{type:"heading",props:{level:2}})},badge:ky("Mod-Alt-2"),key:"heading_2"},e.dictionary.slash_menu.heading_2),(0,s.A)({onItemClick:()=>{ek(e,{type:"heading",props:{level:3}})},badge:ky("Mod-Alt-3"),key:"heading_3"},e.dictionary.slash_menu.heading_3)),Kw("quote",e)&&t.push((0,s.A)({onItemClick:()=>{ek(e,{type:"quote"})},key:"quote"},e.dictionary.slash_menu.quote)),Kw("numberedListItem",e)&&t.push((0,s.A)({onItemClick:()=>{ek(e,{type:"numberedListItem"})},badge:ky("Mod-Shift-7"),key:"numbered_list"},e.dictionary.slash_menu.numbered_list)),Kw("bulletListItem",e)&&t.push((0,s.A)({onItemClick:()=>{ek(e,{type:"bulletListItem"})},badge:ky("Mod-Shift-8"),key:"bullet_list"},e.dictionary.slash_menu.bullet_list)),Kw("checkListItem",e)&&t.push((0,s.A)({onItemClick:()=>{ek(e,{type:"checkListItem"})},badge:ky("Mod-Shift-9"),key:"check_list"},e.dictionary.slash_menu.check_list)),Kw("paragraph",e)&&t.push((0,s.A)({onItemClick:()=>{ek(e,{type:"paragraph"})},badge:ky("Mod-Alt-0"),key:"paragraph"},e.dictionary.slash_menu.paragraph)),Kw("codeBlock",e)&&t.push((0,s.A)({onItemClick:()=>{ek(e,{type:"codeBlock"})},badge:ky("Mod-Alt-c"),key:"code_block"},e.dictionary.slash_menu.code_block)),Kw("table",e)&&t.push((0,s.A)({onItemClick:()=>{ek(e,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table"},e.dictionary.slash_menu.table)),Kw("image",e)&&t.push((0,s.A)({onItemClick:()=>{const t=ek(e,{type:"image"});e.transact(n=>n.setMeta(e.filePanel.plugins[0],{block:t}))},key:"image"},e.dictionary.slash_menu.image)),Kw("video",e)&&t.push((0,s.A)({onItemClick:()=>{const t=ek(e,{type:"video"});e.transact(n=>n.setMeta(e.filePanel.plugins[0],{block:t}))},key:"video"},e.dictionary.slash_menu.video)),Kw("audio",e)&&t.push((0,s.A)({onItemClick:()=>{const t=ek(e,{type:"audio"});e.transact(n=>n.setMeta(e.filePanel.plugins[0],{block:t}))},key:"audio"},e.dictionary.slash_menu.audio)),Kw("file",e)&&t.push((0,s.A)({onItemClick:()=>{const t=ek(e,{type:"file"});e.transact(n=>n.setMeta(e.filePanel.plugins[0],{block:t}))},key:"file"},e.dictionary.slash_menu.file)),t.push((0,s.A)({onItemClick:()=>{e.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji"},e.dictionary.slash_menu.emoji)),t}(e).map(e=>{const t=FN[e.key];return(0,s.A)((0,s.A)({},e),{},{icon:(0,Ax.jsx)(t,{size:18})})})}function zN(e){const t=fD(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:i,onItemClick:l,getItems:a,floatingOptions:c}=e,u=(0,o.useMemo)(()=>l||(e=>{e.onItemClick(t)}),[t,l]),d=(0,o.useMemo)(()=>a||(async e=>tk(jN(t),e)),[t,a]),h={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},p=vD((0,o.useCallback)(e=>t.suggestionMenus.onUpdate(n,e),[t.suggestionMenus,n])),{isMounted:f,ref:m,style:g,getFloatingProps:v}=gD((null==p?void 0:p.show)||!1,(null==p?void 0:p.referencePos)||null,2e3,(0,s.A)({placement:"bottom-start",middleware:[DA(10),TA({mainAxis:!0,crossAxis:!1}),MA(),OA({apply(e){let{availableHeight:t,elements:n}=e;Object.assign(n.floating.style,{maxHeight:"".concat(t-10,"px")})}})],onOpenChange(e){e||t.suggestionMenus.closeMenu()}},c));return f&&p&&(null!=p&&p.ignoreQueryLength||!i||!(p.query.startsWith(" ")||p.query.length<i))?(0,Ax.jsx)("div",(0,s.A)((0,s.A)({ref:m,style:g},v()),{},{children:(0,Ax.jsx)(IN,{query:p.query,closeMenu:h.closeMenu,clearQuery:h.clearQuery,getItems:d,suggestionMenuComponent:r||RN,onItemClick:u})})):null}const HN=e=>{const t=bD(),n=(0,o.useRef)(!1),[r,i]=(0,o.useState)(),l=(0,o.useCallback)(t=>{e.onMouseDown(),i({originalContent:e.block.content,originalCroppedContent:{rows:e.editor.tableHandles.cropEmptyRowsOrColumns(e.block,"addOrRemoveColumns"===e.orientation?"columns":"rows")},startPos:"addOrRemoveColumns"===e.orientation?t.clientX:t.clientY}),n.current=!1,t.preventDefault()},[e]),a=(0,o.useCallback)(()=>{n.current||e.editor.updateBlock(e.block,{type:"table",content:(0,s.A)((0,s.A)({},e.block.content),{},{rows:"addOrRemoveColumns"===e.orientation?e.editor.tableHandles.addRowsOrColumns(e.block,"columns",1):e.editor.tableHandles.addRowsOrColumns(e.block,"rows",1)})})},[e.block,e.orientation,e.editor]);return(0,o.useEffect)(()=>{const t=t=>{var o,i,l,a;if(!r)throw new Error("editingState is undefined");n.current=!0;const c=("addOrRemoveColumns"===e.orientation?t.clientX:t.clientY)-r.startPos,u="addOrRemoveColumns"===e.orientation?null!==(o=null==(l=r.originalCroppedContent.rows[0])?void 0:l.cells.length)&&void 0!==o?o:0:r.originalCroppedContent.rows.length,d="addOrRemoveColumns"===e.orientation?null!==(i=null==(a=r.originalContent.rows[0])?void 0:a.cells.length)&&void 0!==i?i:0:r.originalContent.rows.length,h="addOrRemoveColumns"===e.orientation?e.block.content.rows[0].cells.length:e.block.content.rows.length,p=d+function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;const n=Math.floor(e)+t,o=Math.ceil(e)-t;return e>=n&&e<=o?Math.round(e):e<n?Math.floor(e):Math.ceil(e)}(c/("addOrRemoveColumns"===e.orientation?120:31),.3);p>=u&&p>0&&p!==h&&(e.editor.updateBlock(e.block,{type:"table",content:(0,s.A)((0,s.A)({},e.block.content),{},{rows:"addOrRemoveColumns"===e.orientation?e.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"columns",p-u):e.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"rows",p-u)})}),e.block.content&&e.editor.setTextCursorPosition(e.block))};return r&&window.addEventListener("mousemove",t),()=>{window.removeEventListener("mousemove",t)}},[r,e.block,e.editor,e.orientation]),(0,o.useEffect)(()=>{const t=e.onMouseUp,n=()=>{i(void 0),t()};return r&&window.addEventListener("mouseup",n),()=>{window.removeEventListener("mouseup",n)}},[r,e.onMouseUp]),(0,Ax.jsx)(t.TableHandle.ExtendButton,{className:Cy("bn-extend-button","addOrRemoveColumns"===e.orientation?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",null!==r?"bn-extend-button-editing":""),onClick:a,onMouseDown:l,children:e.children||(0,Ax.jsx)(pM,{size:18,"data-test":"extendButton"})})},VN=e=>{const t=bD(),n=kD(),o=fD().tableHandles;return o?(0,Ax.jsx)(t.Generic.Menu.Item,{onClick:()=>{o.addRowOrColumn(e.index,"row"===e.orientation?{orientation:"row",side:e.side}:{orientation:"column",side:e.side})},children:n.table_handle["add_".concat(e.side,"_menuitem")]}):null},UN=e=>{const t=bD(),n=kD(),o=fD().tableHandles;return o?(0,Ax.jsx)(t.Generic.Menu.Item,{onClick:()=>{o.removeRowOrColumn(e.index,e.orientation)},children:"row"===e.orientation?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},$N=e=>{const t=bD(),n=kD(),r=fD(),i=r.tableHandles,l=(0,o.useMemo)(()=>i&&e.block?"row"===e.orientation?i.getCellsAtRowHandle(e.block,e.index):i.getCellsAtColumnHandle(e.block,e.index):[],[e.block,e.index,e.orientation,i]),a=(t,n)=>{const o=e.block.content.rows.map(e=>(0,s.A)((0,s.A)({},e),{},{cells:e.cells.map(e=>fy(e))}));l.forEach(e=>{let{row:r,col:i}=e;"text"===n?o[r].cells[i].props.textColor=t:o[r].cells[i].props.backgroundColor=t}),r.updateBlock(e.block,{type:"table",content:(0,s.A)((0,s.A)({},e.block.content),{},{rows:o})}),r.setTextCursorPosition(e.block)};if(!l||!l[0]||!i||!1===r.settings.tables.cellTextColor&&!1===r.settings.tables.cellBackgroundColor)return null;const c=fy(l[0].cell);return(0,Ax.jsxs)(t.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,Ax.jsx)(t.Generic.Menu.Trigger,{sub:!0,children:(0,Ax.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||n.drag_handle.colors_menuitem})}),(0,Ax.jsx)(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,Ax.jsx)(VM,{iconSize:18,text:r.settings.tables.cellTextColor?{color:l.every(e=>{let{cell:t}=e;return gy(t)&&t.props.textColor===c.props.textColor})?c.props.textColor:"default",setColor:e=>{a(e,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:l.every(e=>{let{cell:t}=e;return gy(t)&&t.props.backgroundColor===c.props.backgroundColor})?c.props.backgroundColor:"default",setColor:e=>a(e,"background")}:void 0})})]})},WN=e=>{const t=bD(),n=kD(),o=fD();if(!o.tableHandles||0!==e.index||"row"!==e.orientation||!o.settings.tables.headers)return null;const r=!!e.block.content.headerRows;return(0,Ax.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const t=o.getBlock(e.block.id);t&&o.updateBlock(t,(0,s.A)((0,s.A)({},t),{},{content:(0,s.A)((0,s.A)({},t.content),{},{headerRows:r?void 0:1})}))},children:n.drag_handle.header_row_menuitem})},qN=e=>{const t=bD(),n=kD(),o=fD();if(!o.tableHandles||0!==e.index||"column"!==e.orientation||!o.settings.tables.headers)return null;const r=!!e.block.content.headerCols;return(0,Ax.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const t=o.getBlock(e.block.id);t&&o.updateBlock(t,(0,s.A)((0,s.A)({},t),{},{content:(0,s.A)((0,s.A)({},t.content),{},{headerCols:r?void 0:1})}))},children:n.drag_handle.header_column_menuitem})},GN=e=>{const t=bD();return(0,Ax.jsx)(t.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:e.children||(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(UN,{orientation:e.orientation,block:e.block,index:e.index}),(0,Ax.jsx)(VN,{orientation:e.orientation,block:e.block,index:e.index,side:"row"===e.orientation?"above":"left"}),(0,Ax.jsx)(VN,{orientation:e.orientation,block:e.block,index:e.index,side:"row"===e.orientation?"below":"right"}),(0,Ax.jsx)(WN,{orientation:e.orientation,block:e.block,index:e.index}),(0,Ax.jsx)(qN,{orientation:e.orientation,block:e.block,index:e.index}),(0,Ax.jsx)($N,{orientation:e.orientation,block:e.block,index:e.index})]})})},KN=e=>{const t=bD(),[n,r]=(0,o.useState)(!1),i=e.tableHandleMenu||GN,s=(0,o.useMemo)(()=>{const t=e.editor.tableHandles;return!(!t||!e.block||"table"!==e.block.type)&&("column"===e.orientation?t.getCellsAtColumnHandle(e.block,e.index).every(e=>{let{cell:t}=e;return 1===vy(t)}):t.getCellsAtRowHandle(e.block,e.index).every(e=>{let{cell:t}=e;return 1===yy(t)}))},[e.block,e.editor.tableHandles,e.index,e.orientation]);return(0,Ax.jsxs)(t.Generic.Menu.Root,{onOpenChange:t=>{t?(e.freezeHandles(),e.hideOtherSide()):(e.unfreezeHandles(),e.showOtherSide(),e.editor.focus())},position:"right",children:[(0,Ax.jsx)(t.Generic.Menu.Trigger,{children:(0,Ax.jsx)(t.TableHandle.Root,{className:Cy("bn-table-handle",n?"bn-table-handle-dragging":"",s?"":"bn-table-handle-not-draggable"),draggable:s,onDragStart:t=>{r(!0),e.dragStart(t)},onDragEnd:()=>{e.dragEnd(),r(!1)},style:"column"===e.orientation?{transform:"rotate(0.25turn)"}:void 0,children:e.children||(0,Ax.jsx)(wN,{size:24,"data-test":"tableHandle"})})}),(0,AS.createPortal)((0,Ax.jsx)(i,{orientation:e.orientation,block:e.block,index:e.index}),e.menuContainer)]})};function ZN(e,t,n){const{refs:r,update:i,context:l,floatingStyles:a}=NE({open:t,placement:"addOrRemoveColumns"===e?"right":"bottom",middleware:[OA({apply(t){let{rects:n,elements:o}=t;Object.assign(o.floating.style,"addOrRemoveColumns"===e?{height:"".concat(n.reference.height,"px")}:{width:"".concat(n.reference.width,"px")})}})]}),{isMounted:c,styles:u}=zE(l);return(0,o.useEffect)(()=>{i()},[n,i]),(0,o.useEffect)(()=>{null!==n&&r.setReference({getBoundingClientRect:()=>n})},[e,n,r]),(0,o.useMemo)(()=>({isMounted:c,ref:r.setFloating,style:(0,s.A)((0,s.A)({display:"flex"},u),a)}),[a,c,r.setFloating,u])}function JN(e,t,n){return n&&"row"===n.draggedCellOrientation?new DOMRect(t.x,n.mousePos,t.width,0):new DOMRect(t.x,e.y,t.width,e.height)}function XN(e,t,n){return n&&"col"===n.draggedCellOrientation?new DOMRect(n.mousePos,t.y,0,t.height):new DOMRect(e.x,t.y,e.width,t.height)}function QN(e){return new DOMRect(e.x,e.y,e.width,0)}function YN(e,t,n,r,i){const{refs:l,update:a,context:c,floatingStyles:u}=NE({open:t,placement:"row"===e?"left":"col"===e?"top":"bottom-end",middleware:[DA("row"===e?-10:"col"===e?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:d,styles:h}=zE(c);return(0,o.useEffect)(()=>{a()},[n,r,a]),(0,o.useEffect)(()=>{null===n||null===r||i&&"cell"===e||l.setReference({getBoundingClientRect:()=>("row"===e?JN:"col"===e?XN:QN)(n,r,i)})},[i,e,n,r,l]),(0,o.useMemo)(()=>({isMounted:d,ref:l.setFloating,style:(0,s.A)((0,s.A)({display:"flex"},h),u)}),[u,d,l.setFloating,h])}const eT=e=>{var t,n;const o=bD(),r=kD(),i=fD(),l=(t,n)=>{const o=e.block.content.rows.map(e=>(0,s.A)((0,s.A)({},e),{},{cells:e.cells.map(e=>fy(e))}));"text"===n?o[e.rowIndex].cells[e.colIndex].props.textColor=t:o[e.rowIndex].cells[e.colIndex].props.backgroundColor=t,i.updateBlock(e.block,{type:"table",content:(0,s.A)((0,s.A)({},e.block.content),{},{rows:o})}),i.setTextCursorPosition(e.block)},a=null==(n=null==(t=e.block.content.rows[e.rowIndex])?void 0:t.cells)?void 0:n[e.colIndex];return!a||!1===i.settings.tables.cellTextColor&&!1===i.settings.tables.cellBackgroundColor?null:(0,Ax.jsxs)(o.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,Ax.jsx)(o.Generic.Menu.Trigger,{sub:!0,children:(0,Ax.jsx)(o.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children||r.drag_handle.colors_menuitem})}),(0,Ax.jsx)(o.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,Ax.jsx)(VM,{iconSize:18,text:i.settings.tables.cellTextColor?{color:gy(a)?a.props.textColor:"default",setColor:e=>l(e,"text")}:void 0,background:i.settings.tables.cellBackgroundColor?{color:gy(a)?a.props.backgroundColor:"default",setColor:e=>l(e,"background")}:void 0})})]})},tT=e=>{var t,n;const o=bD(),r=kD(),i=fD(),s=null==(n=null==(t=e.block.content.rows[e.rowIndex])?void 0:t.cells)?void 0:n[e.colIndex];return s&&gy(s)&&(1!==yy(s)||1!==vy(s))&&i.settings.tables.splitCells?(0,Ax.jsx)(o.Generic.Menu.Item,{onClick:()=>{var t;null==(t=i.tableHandles)||t.splitCell({row:e.rowIndex,col:e.colIndex})},children:r.table_handle.split_cell_menuitem}):null},nT=e=>{const t=bD();return(0,Ax.jsx)(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(tT,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),(0,Ax.jsx)(eT,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex})]})})},oT=e=>{const t=bD(),n=e.tableCellMenu||nT;return e.editor.settings.tables.splitCells||e.editor.settings.tables.cellBackgroundColor||e.editor.settings.tables.cellTextColor?(0,Ax.jsxs)(t.Generic.Menu.Root,{onOpenChange:t=>{t?e.freezeHandles():(e.unfreezeHandles(),e.editor.focus())},position:"right",children:[(0,Ax.jsx)(t.Generic.Menu.Trigger,{children:(0,Ax.jsx)(t.Generic.Menu.Button,{className:"bn-table-cell-handle",children:e.children||(0,Ax.jsx)(kN,{size:12,"data-test":"tableCellHandle"})})}),(0,AS.createPortal)((0,Ax.jsx)(n,{block:e.block,rowIndex:e.rowIndex,colIndex:e.colIndex}),e.menuContainer)]}):null},rT=e=>{var t,n;const r=fD(),[i,s]=(0,o.useState)(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const l={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:c}=l,u=(0,o.useCallback)(()=>{a(),C(!0),w(!0)},[a]),d=(0,o.useCallback)(()=>{c(),C(!1),w(!1)},[c]),h=vD(r.tableHandles.onUpdate.bind(r.tableHandles)),p=(0,o.useMemo)(()=>{var e,t;return null!=h&&h.draggingState?{draggedCellOrientation:null==(e=null==h?void 0:h.draggingState)?void 0:e.draggedCellOrientation,mousePos:null==(t=null==h?void 0:h.draggingState)?void 0:t.mousePos}:void 0},[null==h?void 0:h.draggingState,null==(t=null==h?void 0:h.draggingState)?void 0:t.draggedCellOrientation,null==(n=null==h?void 0:h.draggingState)?void 0:n.mousePos]),{rowHandle:f,colHandle:m,cellHandle:g}=function(e,t,n,r){const i=YN("row",e,t,n,r),s=YN("col",e,t,n,r),l=YN("cell",e,t,n,r);return(0,o.useMemo)(()=>({rowHandle:i,colHandle:s,cellHandle:l}),[s,i,l])}((null==h?void 0:h.show)||!1,(null==h?void 0:h.referencePosCell)||null,(null==h?void 0:h.referencePosTable)||null,p),{addOrRemoveColumnsButton:v,addOrRemoveRowsButton:y}=function(e,t,n){const r=ZN("addOrRemoveRows",t,n),i=ZN("addOrRemoveColumns",e,n);return(0,o.useMemo)(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:i}),[i,r])}((null==h?void 0:h.showAddOrRemoveColumnsButton)||!1,(null==h?void 0:h.showAddOrRemoveRowsButton)||!1,(null==h?void 0:h.referencePosTable)||null),[b,w]=(0,o.useState)(!1),[k,C]=(0,o.useState)(!1);if(!h)return null;const x=e.tableHandle||KN,S=e.extendButton||HN,A=e.tableCellHandle||oT;return(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)("div",{ref:s}),(0,Ax.jsxs)(CE,{root:h.widgetContainer,children:[!b&&i&&f.isMounted&&void 0!==h.rowIndex&&(0,Ax.jsx)("div",{ref:f.ref,style:f.style,children:(0,Ax.jsx)(x,{editor:r,orientation:"row",showOtherSide:()=>C(!1),hideOtherSide:()=>C(!0),index:h.rowIndex,block:h.block,dragStart:l.rowDragStart,dragEnd:l.dragEnd,freezeHandles:l.freezeHandles,unfreezeHandles:l.unfreezeHandles,menuContainer:i})}),!k&&i&&m.isMounted&&void 0!==h.colIndex&&(0,Ax.jsx)("div",{ref:m.ref,style:m.style,children:(0,Ax.jsx)(x,{editor:r,orientation:"column",showOtherSide:()=>w(!1),hideOtherSide:()=>w(!0),index:h.colIndex,block:h.block,dragStart:l.colDragStart,dragEnd:l.dragEnd,freezeHandles:l.freezeHandles,unfreezeHandles:l.unfreezeHandles,menuContainer:i})}),i&&g.isMounted&&void 0!==h.colIndex&&void 0!==h.rowIndex&&(0,Ax.jsx)("div",{ref:g.ref,style:g.style,children:(0,Ax.jsx)(A,{editor:r,block:h.block,rowIndex:h.rowIndex,colIndex:h.colIndex,menuContainer:i,freezeHandles:l.freezeHandles,unfreezeHandles:l.unfreezeHandles})}),(0,Ax.jsx)("div",{ref:y.ref,style:y.style,children:(0,Ax.jsx)(S,{editor:r,orientation:"addOrRemoveRows",block:h.block,onMouseDown:u,onMouseUp:d})}),(0,Ax.jsx)("div",{ref:v.ref,style:v.style,children:(0,Ax.jsx)(S,{editor:r,orientation:"addOrRemoveColumns",block:h.block,onMouseDown:u,onMouseUp:d})})]})]})};function iT(e){const t=fD();if(!t)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return(0,Ax.jsxs)(Ax.Fragment,{children:[!1!==e.formattingToolbar&&(0,Ax.jsx)(hN,{}),!1!==e.linkToolbar&&(0,Ax.jsx)(vN,{}),!1!==e.slashMenu&&(0,Ax.jsx)(zN,{triggerCharacter:"/"}),!1!==e.emojiPicker&&(0,Ax.jsx)(LN,{triggerCharacter:":",columns:10,minQueryLength:2}),!1!==e.sideMenu&&(0,Ax.jsx)(NN,{}),t.filePanel&&!1!==e.filePanel&&(0,Ax.jsx)(LM,{}),t.tableHandles&&!1!==e.tableHandles&&(0,Ax.jsx)(rT,{}),t.comments&&!1!==e.comments&&(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(TD,{}),(0,Ax.jsx)(TM,{})]})]})}const sT=()=>{const e=(0,o.useMemo)(()=>{var e;return null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: dark)")},[]),t=(0,o.useMemo)(()=>{var e;return null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: light)")},[]),n=null==e?void 0:e.matches,r=null==t?void 0:t.matches,[i,s]=(0,o.useState)(n?"dark":r?"light":"no-preference");return(0,o.useEffect)(()=>{s(n?"dark":r?"light":"no-preference")},[n,r]),(0,o.useEffect)(()=>{if("function"==typeof(null==e?void 0:e.addEventListener)){const n=e=>{let{matches:t}=e;return t&&s("dark")},o=e=>{let{matches:t}=e;return t&&s("light")};return null==e||e.addEventListener("change",n),null==t||t.addEventListener("change",o),()=>{null==e||e.removeEventListener("change",n),null==t||t.removeEventListener("change",o)}}{const n=()=>s(e.matches?"dark":t.matches?"light":"no-preference");return null==e||e.addEventListener("change",n),null==t||t.addEventListener("change",n),()=>{null==e||e.removeEventListener("change",n),null==t||t.removeEventListener("change",n)}}},[e,t]),window.matchMedia,i},lT=(0,o.createContext)(void 0);const aT=e=>{let{contentComponent:t}=e;const n=(0,o.useSyncExternalStore)(t.subscribe,t.getSnapshot,t.getServerSnapshot);return(0,Ax.jsx)(Ax.Fragment,{children:Object.values(n)})},cT=(0,o.forwardRef)((e,t)=>{const[n,r]=(0,o.useState)();return(0,o.useImperativeHandle)(t,()=>(e,t)=>{(0,AS.flushSync)(()=>{r({node:e,container:t})}),r(void 0)},[]),(0,Ax.jsx)(Ax.Fragment,{children:n&&(0,AS.createPortal)(n.node,n.container)})}),uT=()=>{};const dT=o.forwardRef((e,t)=>{let{className:n,renderEditor:o,editorColorScheme:r,children:i}=e,a=(0,l.A)(e,dD);return(0,Ax.jsx)("div",(0,s.A)((0,s.A)({className:Cy("bn-container",r,n),"data-color-scheme":r},a),{},{ref:t,children:o?(0,Ax.jsx)(pT,{children:i}):i}))}),hT=o.forwardRef(function(e,t){const{editor:n,className:r,theme:i,children:a,editable:c,onSelectionChange:u,onChange:d,formattingToolbar:h,linkToolbar:p,slashMenu:f,emojiPicker:m,sideMenu:g,filePanel:v,tableHandles:y,comments:b,autoFocus:w,renderEditor:k=!n.headless}=e,C=(0,l.A)(e,uD),[x,S]=(0,o.useState)(),A=pD(),E=sT(),D=(null==A?void 0:A.colorSchemePreference)||E,M=i||("dark"===D?"dark":"light");CD(d||uT,n),mD(u||uT,n),(0,o.useEffect)(()=>{n.isEditable=!1!==c},[c,n]);const N=(0,o.useCallback)(e=>{n.elementRenderer=e},[n]),T=(0,o.useMemo)(()=>(0,s.A)((0,s.A)({},A),{},{editor:n,setContentEditableProps:S}),[A,n]),O={formattingToolbar:h,linkToolbar:p,slashMenu:f,emojiPicker:m,sideMenu:g,filePanel:v,tableHandles:y,comments:b},P={autoFocus:w,contentEditableProps:x};return(0,Ax.jsx)(hD.Provider,{value:T,children:(0,Ax.jsxs)(lT.Provider,{value:{editorProps:P,defaultUIProps:O},children:[(0,Ax.jsx)(cT,{ref:N}),(0,Ax.jsx)(dT,(0,s.A)((0,s.A)({className:r,renderEditor:k,editorColorScheme:M,ref:t},C),{},{children:a}))]})})}),pT=e=>{const t=(0,o.useContext)(lT),n=fD(),r=(0,o.useMemo)(()=>function(){const e=new Set;let t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,o){t=(0,s.A)((0,s.A)({},t),{},{[n]:(0,AS.createPortal)(o.reactElement,o.element,n)}),e.forEach(e=>e())},removeRenderer(n){const o=(0,s.A)({},t);delete o[n],t=o,e.forEach(e=>e())}}}(),[]),i=(0,o.useCallback)(e=>{n.mount(e,r)},[n,r]);return(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(aT,{contentComponent:r}),(0,Ax.jsx)(fT,(0,s.A)((0,s.A)((0,s.A)({},t.editorProps),e),{},{mount:i})),(0,Ax.jsx)(iT,(0,s.A)({},t.defaultUIProps)),e.children]})},fT=e=>{const{autoFocus:t,mount:n,contentEditableProps:o}=e;return(0,Ax.jsx)("div",(0,s.A)({"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":t,ref:n},o))};function mT(e,t){let n;const o=document.createElement("div");let r;if(null!=t&&t.elementRenderer)t.elementRenderer(e(e=>n=e||void 0),o);else{if(null==t||!t.headless)throw new Error("elementRenderer not available, expected headless editor");r=(0,i.createRoot)(o),(0,AS.flushSync)(()=>{r.render(e(e=>n=e||void 0))})}if(!o.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};null==n||n.setAttribute("data-tmp-find","true");const s=o.cloneNode(!0),l=s.firstElementChild,a=s.querySelector("[data-tmp-find]");return null==a||a.removeAttribute("data-tmp-find"),null==r||r.unmount(),{dom:l,contentDOM:a||void 0}}function gT(e){var t;return(0,Ax.jsx)(oD,(0,s.A)((0,s.A)((0,s.A)({onDragOver:e=>e.preventDefault()},Object.fromEntries(Object.entries(e.domAttributes||{}).filter(e=>{let[t]=e;return"class"!==t}))),{},{className:Cy("bn-block-content",(null==(t=e.domAttributes)?void 0:t.class)||""),"data-content-type":e.blockType},Object.fromEntries(Object.entries(e.blockProps).filter(t=>{let[n,o]=t;const r=e.propSchema[n];return!Dy.includes(n)&&o!==r.default}).map(e=>{let[t,n]=e;return[My(t),n]}))),{},{"data-file-block":!0===e.isFileBlock||void 0,children:e.children}))}function vT(e,t){var n;const o=_y({name:e.type,content:"inline"===e.content?"inline*":"",group:"blockContent",selectable:null===(n=e.isSelectable)||void 0===n||n,isolating:!0,addAttributes:()=>Ty(e.propSchema),parseHTML:()=>Fy(e,t.parse),renderHTML(t){let{HTMLAttributes:n}=t;const o=document.createElement("div");return Py({dom:o,contentDOM:"inline"===e.content?o:void 0},e.type,{},e.propSchema,e.isFileBlock,n)},addNodeView(){return n=>{const o=sD(n=>{var o;const r=this.options.editor,i=Oy(n.getPos,r,this.editor,e.type),s=(null==(o=this.options.domAttributes)?void 0:o.blockContent)||{},l=nD().nodeViewContentRef;if(!l)throw new Error("nodeViewContentRef is not set");const a=t.render;return(0,Ax.jsx)(gT,{blockType:i.type,blockProps:i.props,propSchema:e.propSchema,isFileBlock:e.isFileBlock,domAttributes:s,children:(0,Ax.jsx)(a,{block:i,editor:r,contentRef:e=>{l(e),e&&(e.className=Cy("bn-inline-content",e.className))}})})},{className:"bn-react-node-view-renderer"})(n);return!1===e.isSelectable&&Iy(o,this.editor),o}}});return Ly(e,{node:o,toInternalHTML:(n,r)=>{var i;const s=(null==(i=o.options.domAttributes)?void 0:i.blockContent)||{},l=t.render;return mT(t=>(0,Ax.jsx)(gT,{blockType:n.type,blockProps:n.props,propSchema:e.propSchema,domAttributes:s,children:(0,Ax.jsx)(l,{block:n,editor:r,contentRef:e=>{t(e),e&&(e.className=Cy("bn-inline-content",e.className))}})}),r)},toExternalHTML:(n,r)=>{var i;const s=(null==(i=o.options.domAttributes)?void 0:i.blockContent)||{},l=t.toExternalHTML||t.render;return mT(t=>(0,Ax.jsx)(gT,{blockType:n.type,blockProps:n.props,propSchema:e.propSchema,domAttributes:s,children:(0,Ax.jsx)(l,{block:n,editor:r,contentRef:e=>{t(e),e&&(e.className=Cy("bn-inline-content",e.className))}})}),r)}})}function yT(e){const t=fD(),[n,r]=(0,o.useState)("loading"),[i,s]=(0,o.useState)();if((0,o.useEffect)(()=>{let n=!0;return(async()=>{let o="";r("loading");try{o=t.resolveFileUrl?await t.resolveFileUrl(e):e}catch(i){return void r("error")}n&&(r("loaded"),s(o))})(),()=>{n=!1}},[t,e]),"loaded"!==n)return{loadingState:n};if(!i)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:i}}const bT=e=>(0,Ax.jsxs)("figure",{children:[e.children,(0,Ax.jsx)("figcaption",{children:e.caption})]});function wT(e){const[t,n]=(0,o.useState)(!1);return function(e){const t=fD();(0,o.useEffect)(()=>t.onUploadStart(e),[e,t])}(t=>{t===e&&n(!0)}),function(e){const t=fD();(0,o.useEffect)(()=>t.onUploadEnd(e),[e,t])}(t=>{t===e&&n(!1)}),t}const kT=e=>{const t=kD(),n=(0,o.useCallback)(e=>{e.preventDefault()},[]),r=(0,o.useCallback)(()=>{e.editor.transact(t=>t.setMeta(e.editor.filePanel.plugins[0],{block:e.block}))},[e.block,e.editor]);return(0,Ax.jsxs)("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[(0,Ax.jsx)("div",{className:"bn-add-file-button-icon",children:e.buttonIcon||(0,Ax.jsx)(WD,{size:24})}),(0,Ax.jsx)("div",{className:"bn-add-file-button-text",children:e.buttonText||t.file_blocks.file.add_button_text})]})},CT=e=>(0,Ax.jsxs)("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[(0,Ax.jsx)("div",{className:"bn-file-icon",children:(0,Ax.jsx)(WD,{size:24})}),(0,Ax.jsx)("p",{className:"bn-file-name",children:e.block.props.name})]}),xT=e=>{const t=wT(e.block.id);return(0,Ax.jsx)("div",{className:"bn-file-block-content-wrapper",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:e.style,children:t?(0,Ax.jsx)("div",{className:"bn-file-loading-preview",children:"Loading..."}):""===e.block.props.url?(0,Ax.jsx)(kT,(0,s.A)({},e)):(0,Ax.jsxs)(Ax.Fragment,{children:[!1!==e.block.props.showPreview&&e.children?e.children:(0,Ax.jsx)(CT,(0,s.A)({},e)),e.block.props.caption&&(0,Ax.jsx)("p",{className:"bn-file-caption",children:e.block.props.caption})]})})},ST=e=>(0,Ax.jsxs)("div",{children:[e.children,(0,Ax.jsx)("p",{children:e.caption})]}),AT=e=>{const t=yT(e.block.props.url);return(0,Ax.jsx)("audio",{className:"bn-audio",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},ET=(vT(Kb,{render:e=>(0,Ax.jsx)(xT,(0,s.A)((0,s.A)({},e),{},{buttonText:e.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:(0,Ax.jsx)(hM,{size:24}),children:(0,Ax.jsx)(AT,(0,s.A)({},e))})),parse:Zb,toExternalHTML:e=>{if(!e.block.props.url)return(0,Ax.jsx)("p",{children:"Add audio"});const t=e.block.props.showPreview?(0,Ax.jsx)("audio",{src:e.block.props.url}):(0,Ax.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,Ax.jsx)(bT,{caption:e.block.props.caption,children:t}):(0,Ax.jsx)(ST,{caption:e.block.props.caption,children:t}):t}}),vT(iw,{render:e=>(0,Ax.jsx)(xT,(0,s.A)({},e)),parse:sw,toExternalHTML:e=>{if(!e.block.props.url)return(0,Ax.jsx)("p",{children:"Add file"});const t=(0,Ax.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?(0,Ax.jsx)(ST,{caption:e.block.props.caption,children:t}):t}}),e=>{const[t,n]=(0,o.useState)(void 0),[r,i]=(0,o.useState)(e.block.props.previewWidth),[l,a]=(0,o.useState)(!1),c=(0,o.useRef)(null);(0,o.useEffect)(()=>{const o=n=>{var o,r;let s;s="center"===e.block.props.textAlignment?"left"===t.handleUsed?t.initialWidth+2*(t.initialClientX-n.clientX):t.initialWidth+2*(n.clientX-t.initialClientX):"left"===t.handleUsed?t.initialWidth+t.initialClientX-n.clientX:t.initialWidth+n.clientX-t.initialClientX,i(Math.min(Math.max(s,64),(null==(r=null==(o=e.editor.domElement)?void 0:o.firstElementChild)?void 0:r.clientWidth)||Number.MAX_VALUE))},s=()=>{n(void 0),e.editor.updateBlock(e.block,{props:{previewWidth:r}})};return t&&(window.addEventListener("mousemove",o),window.addEventListener("mouseup",s)),()=>{window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",s)}},[e,t,r]);const u=(0,o.useCallback)(()=>{e.editor.isEditable&&a(!0)},[e.editor.isEditable]),d=(0,o.useCallback)(()=>{a(!1)},[]),h=(0,o.useCallback)(e=>{e.preventDefault(),n({handleUsed:"left",initialWidth:c.current.clientWidth,initialClientX:e.clientX})},[]),p=(0,o.useCallback)(e=>{e.preventDefault(),n({handleUsed:"right",initialWidth:c.current.clientWidth,initialClientX:e.clientX})},[]),f=wT(e.block.id);return(0,Ax.jsx)(xT,(0,s.A)((0,s.A)({},e),{},{onMouseEnter:u,onMouseLeave:d,style:e.block.props.url&&!f&&e.block.props.showPreview?{width:r?"".concat(r,"px"):"fit-content"}:void 0,children:(0,Ax.jsxs)("div",{className:"bn-visual-media-wrapper",ref:c,children:[e.children,(l||t)&&(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:h}),(0,Ax.jsx)("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:p})]})]})}))}),DT=e=>{const t=yT(e.block.props.url);return(0,Ax.jsx)("img",{className:"bn-visual-media",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,alt:e.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})};vT(pw,{render:e=>(0,Ax.jsx)(ET,(0,s.A)((0,s.A)({},e),{},{buttonText:e.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:(0,Ax.jsx)(aM,{size:24}),children:(0,Ax.jsx)(DT,(0,s.A)({},e))})),parse:fw,toExternalHTML:e=>{if(!e.block.props.url)return(0,Ax.jsx)("p",{children:"Add image"});const t=e.block.props.showPreview?(0,Ax.jsx)("img",{src:e.block.props.url,alt:e.block.props.name||e.block.props.caption||"BlockNote image",width:e.block.props.previewWidth}):(0,Ax.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,Ax.jsx)(bT,{caption:e.block.props.caption,children:t}):(0,Ax.jsx)(ST,{caption:e.block.props.caption,children:t}):t}});const MT=e=>{const t=yT(e.block.props.url);return(0,Ax.jsx)("video",{className:"bn-visual-media",src:"loading"===t.loadingState?e.block.props.url:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})};vT(zw,{render:e=>(0,Ax.jsx)(ET,(0,s.A)((0,s.A)({},e),{},{buttonText:e.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:(0,Ax.jsx)(dM,{size:24}),children:(0,Ax.jsx)(MT,(0,s.A)({},e))})),parse:Hw,toExternalHTML:e=>{if(!e.block.props.url)return(0,Ax.jsx)("p",{children:"Add video"});const t=e.block.props.showPreview?(0,Ax.jsx)("video",{src:e.block.props.url}):(0,Ax.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,Ax.jsx)(bT,{caption:e.block.props.caption,children:t}):(0,Ax.jsx)(ST,{caption:e.block.props.caption,children:t}):t}}),o.memo(e=>{let{thread:t,selectedThreadId:n,editor:r,maxCommentsBeforeCollapse:i,referenceText:s}=e;const l=(0,o.useCallback)(e=>{var n;e.target.closest(".bn-action-toolbar")||null==(n=r.comments)||n.selectThread(t.id)},[r.comments,t.id]),a=(0,o.useCallback)(e=>{var t;if(!e.relatedTarget||e.relatedTarget.closest(".bn-action-toolbar"))return;const n=e.target instanceof Node?e.target:null,o=e.relatedTarget instanceof Node?e.relatedTarget.closest(".bn-thread"):null;(!n||!o||!o.contains(n))&&(null==(t=r.comments)||t.selectThread(void 0))},[r.comments]);return(0,Ax.jsx)(MM,{thread:t,selected:t.id===n,referenceText:s,maxCommentsBeforeCollapse:i,onFocus:l,onBlur:a,tabIndex:0})});function NT(e){return(0,Ax.jsx)(oD,(0,s.A)((0,s.A)({as:"span",className:"bn-inline-content-section","data-inline-content-type":e.inlineContentType},Object.fromEntries(Object.entries(e.inlineContentProps).filter(t=>{let[n,o]=t;return o!==e.propSchema[n].default}).map(e=>{let[t,n]=e;return[My(t),n]}))),{},{children:e.children}))}new WeakSet;function TT(e,t){const n=e.getBoundingClientRect(),o=t.getBoundingClientRect(),r=n.top<o.top,i=n.bottom>o.bottom;return r&&i?"both":r?"top":i?"bottom":"none"}function OT(e){if("number"===typeof e)return!0;if("string"===typeof e){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&""!==e.trim())return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(e=>t.test(e))}return!1}function PT(e){return"0rem"===e?"0rem":"calc(".concat(e," * var(--mantine-scale))")}function _T(e){let{shouldScale:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function n(o){if(0===o||"0"===o)return"0".concat(e);if("number"===typeof o){const n="".concat(o/16).concat(e);return t?PT(n):n}if("string"===typeof o){if(""===o)return o;if(o.startsWith("calc(")||o.startsWith("clamp(")||o.includes("rgba("))return o;if(o.includes(","))return o.split(",").map(e=>n(e)).join(",");if(o.includes(" "))return o.split(" ").map(e=>n(e)).join(" ");if(o.includes(e))return t?PT(o):o;const r=o.replace("px","");if(!Number.isNaN(Number(r))){const n="".concat(Number(r)/16).concat(e);return t?PT(n):n}}return o}}const LT=_T("rem",{shouldScale:!0}),RT=_T("em");function BT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"size",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e)return OT(e)?n?LT(e):e:"var(--".concat(t,"-").concat(e,")")}function IT(e){return BT(e,"mantine-spacing")}function FT(e){return void 0===e?"var(--mantine-radius-default)":BT(e,"mantine-radius")}function jT(e){return BT(e,"mantine-font-size")}function zT(e){return BT(e,"mantine-line-height",!1)}function HT(e){if(e)return BT(e,"mantine-shadow",!1)}function VT(e){return Object.keys(e).reduce((t,n)=>(void 0!==e[n]&&(t[n]=e[n]),t),{})}function UT(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)?function(e){let t=e.replace("#","");if(3===t.length){const e=t.split("");t=[e[0],e[0],e[1],e[1],e[2],e[2]].join("")}if(8===t.length){const e=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:e}}const n=parseInt(t,16);return{r:n>>16&255,g:n>>8&255,b:255&n,a:1}}(e):e.startsWith("rgb")?function(e){const[t,n,o,r]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:o,a:void 0===r?1:r}}(e):e.startsWith("hsl")?function(e){const t=e.match(/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i);if(!t)return{r:0,g:0,b:0,a:1};const n=parseInt(t[1],10),o=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100,i=t[5]?parseFloat(t[5]):void 0,s=(1-Math.abs(2*r-1))*o,l=n/60,a=s*(1-Math.abs(l%2-1)),c=r-s/2;let u,d,h;return l>=0&&l<1?(u=s,d=a,h=0):l>=1&&l<2?(u=a,d=s,h=0):l>=2&&l<3?(u=0,d=s,h=a):l>=3&&l<4?(u=0,d=a,h=s):l>=4&&l<5?(u=a,d=0,h=s):(u=s,d=0,h=a),{r:Math.round(255*(u+c)),g:Math.round(255*(d+c)),b:Math.round(255*(h+c)),a:i||1}}(e):{r:0,g:0,b:0,a:1}}function $T(e,t){if(e.startsWith("var("))return"color-mix(in srgb, ".concat(e,", black ").concat(100*t,"%)");const{r:n,g:o,b:r,a:i}=UT(e),s=1-t,l=e=>Math.round(e*s);return"rgba(".concat(l(n),", ").concat(l(o),", ").concat(l(r),", ").concat(i,")")}function WT(e,t){return"number"===typeof e.primaryShade?e.primaryShade:"dark"===t?e.primaryShade.dark:e.primaryShade.light}function qT(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function GT(e){if(e.startsWith("oklch("))return(function(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}(e)||0)/100;const{r:t,g:n,b:o}=UT(e),r=n/255,i=o/255;return.2126*qT(t/255)+.7152*qT(r)+.0722*qT(i)}function KT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.179;return!e.startsWith("var(")&&GT(e)>t}function ZT(e){let{color:t,theme:n,colorScheme:o}=e;if("string"!==typeof t)throw new Error("[@mantine/core] Failed to parse color. Expected color to be a string, instead got ".concat(typeof t));if("bright"===t)return{color:t,value:"dark"===o?n.white:n.black,shade:void 0,isThemeColor:!1,isLight:KT("dark"===o?n.white:n.black,n.luminanceThreshold),variable:"--mantine-color-bright"};if("dimmed"===t)return{color:t,value:"dark"===o?n.colors.dark[2]:n.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:KT("dark"===o?n.colors.dark[2]:n.colors.gray[6],n.luminanceThreshold),variable:"--mantine-color-dimmed"};if("white"===t||"black"===t)return{color:t,value:"white"===t?n.white:n.black,shade:void 0,isThemeColor:!1,isLight:KT("white"===t?n.white:n.black,n.luminanceThreshold),variable:"--mantine-color-".concat(t)};const[r,i]=t.split("."),s=i?Number(i):void 0,l=r in n.colors;if(l){const e=void 0!==s?n.colors[r][s]:n.colors[r][WT(n,o||"light")];return{color:r,value:e,shade:s,isThemeColor:l,isLight:KT(e,n.luminanceThreshold),variable:i?"--mantine-color-".concat(r,"-").concat(s):"--mantine-color-".concat(r,"-filled")}}return{color:t,value:t,isThemeColor:l,isLight:KT(t,n.luminanceThreshold),shade:s,variable:void 0}}function JT(e,t){const n=ZT({color:e||t.primaryColor,theme:t});return n.variable?"var(".concat(n.variable,")"):e}function XT(e,t){var n,o;const r={from:(null===e||void 0===e?void 0:e.from)||t.defaultGradient.from,to:(null===e||void 0===e?void 0:e.to)||t.defaultGradient.to,deg:null!==(n=null!==(o=null===e||void 0===e?void 0:e.deg)&&void 0!==o?o:t.defaultGradient.deg)&&void 0!==n?n:0},i=JT(r.from,t),s=JT(r.to,t);return"linear-gradient(".concat(r.deg,"deg, ").concat(i," 0%, ").concat(s," 100%)")}function QT(e,t){if("string"!==typeof e||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const n=100*(1-t);return"color-mix(in srgb, ".concat(e,", transparent ").concat(n,"%)")}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,"/ ".concat(t,")")):e.replace(")"," / ".concat(t,")"));const{r:n,g:o,b:r}=UT(e);return"rgba(".concat(n,", ").concat(o,", ").concat(r,", ").concat(t,")")}const YT=QT,eO="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",tO={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:{dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:e=>{let{color:t,theme:n,variant:o,gradient:r,autoContrast:i}=e;const s=ZT({color:t,theme:n}),l="boolean"===typeof i?i:n.autoContrast;if("filled"===o){const e=l&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?void 0===s.shade?{background:"var(--mantine-color-".concat(t,"-filled)"),hover:"var(--mantine-color-".concat(t,"-filled-hover)"),color:e,border:"".concat(LT(1)," solid transparent")}:{background:"var(--mantine-color-".concat(s.color,"-").concat(s.shade,")"),hover:"var(--mantine-color-".concat(s.color,"-").concat(9===s.shade?8:s.shade+1,")"),color:e,border:"".concat(LT(1)," solid transparent")}:{background:t,hover:$T(t,.1),color:e,border:"".concat(LT(1)," solid transparent")}}if("light"===o){if(s.isThemeColor){if(void 0===s.shade)return{background:"var(--mantine-color-".concat(t,"-light)"),hover:"var(--mantine-color-".concat(t,"-light-hover)"),color:"var(--mantine-color-".concat(t,"-light-color)"),border:"".concat(LT(1)," solid transparent")};const e=n.colors[s.color][s.shade];return{background:QT(e,.1),hover:QT(e,.12),color:"var(--mantine-color-".concat(s.color,"-").concat(Math.min(s.shade,6),")"),border:"".concat(LT(1)," solid transparent")}}return{background:QT(t,.1),hover:QT(t,.12),color:t,border:"".concat(LT(1)," solid transparent")}}if("outline"===o)return s.isThemeColor?void 0===s.shade?{background:"transparent",hover:"var(--mantine-color-".concat(t,"-outline-hover)"),color:"var(--mantine-color-".concat(t,"-outline)"),border:"".concat(LT(1)," solid var(--mantine-color-").concat(t,"-outline)")}:{background:"transparent",hover:QT(n.colors[s.color][s.shade],.05),color:"var(--mantine-color-".concat(s.color,"-").concat(s.shade,")"),border:"".concat(LT(1)," solid var(--mantine-color-").concat(s.color,"-").concat(s.shade,")")}:{background:"transparent",hover:QT(t,.05),color:t,border:"".concat(LT(1)," solid ").concat(t)};if("subtle"===o){if(s.isThemeColor){if(void 0===s.shade)return{background:"transparent",hover:"var(--mantine-color-".concat(t,"-light-hover)"),color:"var(--mantine-color-".concat(t,"-light-color)"),border:"".concat(LT(1)," solid transparent")};return{background:"transparent",hover:QT(n.colors[s.color][s.shade],.12),color:"var(--mantine-color-".concat(s.color,"-").concat(Math.min(s.shade,6),")"),border:"".concat(LT(1)," solid transparent")}}return{background:"transparent",hover:QT(t,.12),color:t,border:"".concat(LT(1)," solid transparent")}}return"transparent"===o?s.isThemeColor?void 0===s.shade?{background:"transparent",hover:"transparent",color:"var(--mantine-color-".concat(t,"-light-color)"),border:"".concat(LT(1)," solid transparent")}:{background:"transparent",hover:"transparent",color:"var(--mantine-color-".concat(s.color,"-").concat(Math.min(s.shade,6),")"),border:"".concat(LT(1)," solid transparent")}:{background:"transparent",hover:"transparent",color:t,border:"".concat(LT(1)," solid transparent")}:"white"===o?s.isThemeColor?void 0===s.shade?{background:"var(--mantine-color-white)",hover:$T(n.white,.01),color:"var(--mantine-color-".concat(t,"-filled)"),border:"".concat(LT(1)," solid transparent")}:{background:"var(--mantine-color-white)",hover:$T(n.white,.01),color:"var(--mantine-color-".concat(s.color,"-").concat(s.shade,")"),border:"".concat(LT(1)," solid transparent")}:{background:"var(--mantine-color-white)",hover:$T(n.white,.01),color:t,border:"".concat(LT(1)," solid transparent")}:"gradient"===o?{background:XT(r,n),hover:XT(r,n),color:"var(--mantine-color-white)",border:"none"}:"default"===o?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:"".concat(LT(1)," solid var(--mantine-color-default-border)")}:{}},autoContrast:!1,luminanceThreshold:.3,fontFamily:eO,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:eO,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:LT(34),lineHeight:"1.3"},h2:{fontSize:LT(26),lineHeight:"1.35"},h3:{fontSize:LT(22),lineHeight:"1.4"},h4:{fontSize:LT(18),lineHeight:"1.45"},h5:{fontSize:LT(16),lineHeight:"1.5"},h6:{fontSize:LT(14),lineHeight:"1.5"}}},fontSizes:{xs:LT(12),sm:LT(14),md:LT(16),lg:LT(18),xl:LT(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:LT(2),sm:LT(4),md:LT(8),lg:LT(16),xl:LT(32)},spacing:{xs:LT(10),sm:LT(12),md:LT(16),lg:LT(20),xl:LT(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:"0 ".concat(LT(1)," ").concat(LT(3)," rgba(0, 0, 0, 0.05), 0 ").concat(LT(1)," ").concat(LT(2)," rgba(0, 0, 0, 0.1)"),sm:"0 ".concat(LT(1)," ").concat(LT(3)," rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ").concat(LT(10)," ").concat(LT(15)," ").concat(LT(-5),", rgba(0, 0, 0, 0.04) 0 ").concat(LT(7)," ").concat(LT(7)," ").concat(LT(-5)),md:"0 ".concat(LT(1)," ").concat(LT(3)," rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ").concat(LT(20)," ").concat(LT(25)," ").concat(LT(-5),", rgba(0, 0, 0, 0.04) 0 ").concat(LT(10)," ").concat(LT(10)," ").concat(LT(-5)),lg:"0 ".concat(LT(1)," ").concat(LT(3)," rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ").concat(LT(28)," ").concat(LT(23)," ").concat(LT(-7),", rgba(0, 0, 0, 0.04) 0 ").concat(LT(12)," ").concat(LT(12)," ").concat(LT(-7)),xl:"0 ".concat(LT(1)," ").concat(LT(3)," rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ").concat(LT(36)," ").concat(LT(28)," ").concat(LT(-7),", rgba(0, 0, 0, 0.04) 0 ").concat(LT(17)," ").concat(LT(17)," ").concat(LT(-7))},other:{},components:{}};function nO(e){return e&&"object"===typeof e&&!Array.isArray(e)}function oO(e,t){const n=(0,s.A)({},e),o=t;return nO(e)&&nO(t)&&Object.keys(t).forEach(t=>{nO(o[t])?n[t]=t in e?oO(n[t],o[t]):o[t]:n[t]=o[t]}),n}const rO="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function iO(e){return!(e<0||e>9)&&parseInt(e.toString(),10)===e}function sO(e){if(!(e.primaryColor in e.colors))throw new Error("[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more \u2013 https://mantine.dev/theming/colors/#primary-color");if("object"===typeof e.primaryShade&&(!iO(e.primaryShade.dark)||!iO(e.primaryShade.light)))throw new Error(rO);if("number"===typeof e.primaryShade&&!iO(e.primaryShade))throw new Error(rO)}const lO=(0,o.createContext)(null);function aO(){const e=(0,o.useContext)(lO);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function cO(e){let{theme:t,children:n,inherit:r=!0}=e;const i=(0,o.useContext)(lO)||tO,s=(0,o.useMemo)(()=>function(e,t){var n;if(!t)return sO(e),e;const o=oO(e,t);return!t.fontFamily||null!==(n=t.headings)&&void 0!==n&&n.fontFamily||(o.headings.fontFamily=t.fontFamily),sO(o),o}(r?i:tO,t),[t,i,r]);return(0,Ax.jsx)(lO.Provider,{value:s,children:n})}function uO(e,t,n){var o;const r=aO(),i=null===(o=r.components[e])||void 0===o?void 0:o.defaultProps,l="function"===typeof i?i(r):i;return(0,s.A)((0,s.A)((0,s.A)({},t),l),VT(n))}cO.displayName="@mantine/core/MantineThemeProvider";const dO=(0,o.createContext)(null);function hO(){const e=(0,o.useContext)(dO);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function pO(){return hO().getStyleNonce}function fO(){return hO().env||"default"}function mO(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=mO(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}const gO=function(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=mO(e))&&(o&&(o+=" "),o+=t);return o},vO={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};const yO={};function bO(e){let{theme:t,classNames:n,props:o,stylesCtx:r}=e;return function(e){const t={};return e.forEach(e=>{Object.entries(e).forEach(e=>{let[n,o]=e;t[n]?t[n]=gO(t[n],o):t[n]=o})}),t}((Array.isArray(n)?n:[n]).map(e=>"function"===typeof e?e(t,o,r):e||yO))}function wO(e){let{selector:t,stylesCtx:n,theme:o,classNames:r,props:i}=e;return bO({theme:o,classNames:r,props:i,stylesCtx:n})[t]}function kO(e){let{theme:t,options:n,themeName:o,selector:r,classNamesPrefix:i,classNames:s,classes:l,unstyled:a,className:c,rootSelector:u,props:d,stylesCtx:h,withStaticClasses:p,headless:f,transformedStyles:m}=e;return gO(function(e){let{theme:t,options:n,unstyled:o}=e;return gO((null===n||void 0===n?void 0:n.focusable)&&!o&&(t.focusClassName||vO[t.focusRing]),(null===n||void 0===n?void 0:n.active)&&!o&&t.activeClassName)}({theme:t,options:n,unstyled:a||f}),function(e){let{themeName:t,theme:n,selector:o,props:r,stylesCtx:i}=e;return t.map(e=>{var t,s;return null===(t=bO({theme:n,classNames:null===(s=n.components[e])||void 0===s?void 0:s.classNames,props:r,stylesCtx:i}))||void 0===t?void 0:t[o]})}({theme:t,themeName:o,selector:r,props:d,stylesCtx:h}),function(e){let{options:t,classes:n,selector:o,unstyled:r}=e;return null!==t&&void 0!==t&&t.variant&&!r?n["".concat(o,"--").concat(t.variant)]:void 0}({options:n,classes:l,selector:r,unstyled:a}),wO({selector:r,stylesCtx:h,theme:t,classNames:s,props:d}),wO({selector:r,stylesCtx:h,theme:t,classNames:m,props:d}),function(e){let{selector:t,stylesCtx:n,options:o,props:r,theme:i}=e;return bO({theme:i,classNames:null===o||void 0===o?void 0:o.classNames,props:(null===o||void 0===o?void 0:o.props)||r,stylesCtx:n})[t]}({selector:r,stylesCtx:h,options:n,props:d,theme:t}),function(e){let{rootSelector:t,selector:n,className:o}=e;return t===n?o:void 0}({rootSelector:u,selector:r,className:c}),function(e){let{selector:t,classes:n,unstyled:o}=e;return o?void 0:n[t]}({selector:r,classes:l,unstyled:a||f}),p&&!f&&function(e){let{themeName:t,classNamesPrefix:n,selector:o,withStaticClass:r}=e;return!1===r?[]:t.map(e=>"".concat(n,"-").concat(e,"-").concat(o))}({themeName:o,classNamesPrefix:i,selector:r,withStaticClass:null===n||void 0===n?void 0:n.withStaticClass}),null===n||void 0===n?void 0:n.className)}function CO(e){let{theme:t,styles:n,props:o,stylesCtx:r}=e;return(Array.isArray(n)?n:[n]).reduce((e,n)=>"function"===typeof n?(0,s.A)((0,s.A)({},e),n(t,o,r)):(0,s.A)((0,s.A)({},e),n),{})}function xO(e){let{style:t,theme:n}=e;return Array.isArray(t)?[...t].reduce((e,t)=>(0,s.A)((0,s.A)({},e),xO({style:t,theme:n})),{}):"function"===typeof t?t(n):null==t?{}:t}function SO(e){var t;let{vars:n,varsResolver:o,theme:r,props:i,stylesCtx:l,selector:a,themeName:c,headless:u}=e;return null===(t=function(e){return e.reduce((e,t)=>(t&&Object.keys(t).forEach(n=>{e[n]=(0,s.A)((0,s.A)({},e[n]),VT(t[n]))}),e),{})}([u?{}:null===o||void 0===o?void 0:o(r,i,l),...c.map(e=>{var t,n;return null===(t=r.components)||void 0===t||null===(t=t[e])||void 0===t||null===(n=t.vars)||void 0===n?void 0:n.call(t,r,i,l)}),null===n||void 0===n?void 0:n(r,i,l)]))||void 0===t?void 0:t[a]}function AO(e){let{theme:t,themeName:n,selector:o,options:r,props:i,stylesCtx:l,rootSelector:a,styles:c,style:u,vars:d,varsResolver:h,headless:p,withStylesTransform:f}=e;return(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({},!f&&function(e){let{theme:t,themeName:n,props:o,stylesCtx:r,selector:i}=e;return n.map(e=>{var n;return CO({theme:t,styles:null===(n=t.components[e])||void 0===n?void 0:n.styles,props:o,stylesCtx:r})[i]}).reduce((e,t)=>(0,s.A)((0,s.A)({},e),t),{})}({theme:t,themeName:n,props:i,stylesCtx:l,selector:o})),!f&&CO({theme:t,styles:c,props:i,stylesCtx:l})[o]),!f&&CO({theme:t,styles:null===r||void 0===r?void 0:r.styles,props:(null===r||void 0===r?void 0:r.props)||i,stylesCtx:l})[o]),SO({theme:t,props:i,stylesCtx:l,vars:d,varsResolver:h,selector:o,themeName:n,headless:p})),a===o?xO({style:u,theme:t}):null),xO({style:null===r||void 0===r?void 0:r.style,theme:t}))}function EO(e){var t;let{props:n,stylesCtx:o,themeName:r}=e;const i=aO(),s=null===(t=function(){var e;return null===(e=hO().stylesTransform)||void 0===e?void 0:e.styles}())||void 0===t?void 0:t();return{getTransformedStyles:e=>{if(!s)return[];const t=e.map(e=>s(e,{props:n,theme:i,ctx:o}));return[...t,...r.map(e=>{var t;return s(null===(t=i.components[e])||void 0===t?void 0:t.styles,{props:n,theme:i,ctx:o})})].filter(Boolean)},withStylesTransform:!!s}}function DO(e){let{name:t,classes:n,props:o,stylesCtx:r,className:i,style:s,rootSelector:l="root",unstyled:a,classNames:c,styles:u,vars:d,varsResolver:h}=e;const p=aO(),f=hO().classNamesPrefix,m=hO().withStaticClasses,g=hO().headless,v=(Array.isArray(t)?t:[t]).filter(e=>e),{withStylesTransform:y,getTransformedStyles:b}=EO({props:o,stylesCtx:r,themeName:v});return(e,t)=>({className:kO({theme:p,options:t,themeName:v,selector:e,classNamesPrefix:f,classNames:c,classes:n,unstyled:a,className:i,rootSelector:l,props:o,stylesCtx:r,withStaticClasses:m,headless:g,transformedStyles:b([null===t||void 0===t?void 0:t.styles,u])}),style:AO({theme:p,themeName:v,selector:e,options:t,props:o,stylesCtx:r,rootSelector:l,styles:u,style:s,vars:d,varsResolver:h,headless:g,withStylesTransform:y})})}function MO(e){return Object.keys(e)}function NO(e){return MO(e).reduce((t,n)=>{return void 0!==e[n]?"".concat(t).concat((o=n,o.replace(/[A-Z]/g,e=>"-".concat(e.toLowerCase()))),":").concat(e[n],";"):t;var o},"").trim()}function TO(e){let{selector:t,styles:n,media:o,container:r}=e;const i=n?NO(n):"",s=Array.isArray(o)?o.map(e=>"@media".concat(e.query,"{").concat(t,"{").concat(NO(e.styles),"}}")):[],l=Array.isArray(r)?r.map(e=>"@container ".concat(e.query,"{").concat(t,"{").concat(NO(e.styles),"}}")):[];return"".concat(i?"".concat(t,"{").concat(i,"}"):"").concat(s.join("")).concat(l.join("")).trim()}function OO(e){const t=pO();return(0,Ax.jsx)("style",{"data-mantine-styles":"inline",nonce:null===t||void 0===t?void 0:t(),dangerouslySetInnerHTML:{__html:TO(e)}})}function PO(e){return e.startsWith("data-")?e:"data-".concat(e)}function _O(e){return e?"string"===typeof e?{[PO(e)]:!0}:Array.isArray(e)?[...e].reduce((e,t)=>(0,s.A)((0,s.A)({},e),_O(t)),{}):(t=e,Object.keys(t).reduce((e,n)=>{const o=t[n];return void 0===o||""===o||!1===o||null===o||(e[PO(n)]=t[n]),e},{})):null;var t}function LO(e,t){return Array.isArray(e)?[...e].reduce((e,n)=>(0,s.A)((0,s.A)({},e),LO(n,t)),{}):"function"===typeof e?e(t):null==e?{}:e}function RO(e){let{theme:t,style:n,vars:o,styleProps:r}=e;const i=LO(n,t),l=LO(o,t);return(0,s.A)((0,s.A)((0,s.A)({},i),l),r)}const BO=["m","mx","my","mt","mb","ml","mr","me","ms","p","px","py","pt","pb","pl","pr","pe","ps","bd","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display","flex","hiddenFrom","visibleFrom","lightHidden","darkHidden","sx"];function IO(e){const{m:t,mx:n,my:o,mt:r,mb:i,ml:s,mr:a,me:c,ms:u,p:d,px:h,py:p,pt:f,pb:m,pl:g,pr:v,pe:y,ps:b,bd:w,bg:k,c:C,opacity:x,ff:S,fz:A,fw:E,lts:D,ta:M,lh:N,fs:T,tt:O,td:P,w:_,miw:L,maw:R,h:B,mih:I,mah:F,bgsz:j,bgp:z,bgr:H,bga:V,pos:U,top:$,left:W,bottom:q,right:G,inset:K,display:Z,flex:J,hiddenFrom:X,visibleFrom:Q,lightHidden:Y,darkHidden:ee,sx:te}=e,ne=(0,l.A)(e,BO);return{styleProps:VT({m:t,mx:n,my:o,mt:r,mb:i,ml:s,mr:a,me:c,ms:u,p:d,px:h,py:p,pt:f,pb:m,pl:g,pr:v,pe:y,ps:b,bd:w,bg:k,c:C,opacity:x,ff:S,fz:A,fw:E,lts:D,ta:M,lh:N,fs:T,tt:O,td:P,w:_,miw:L,maw:R,h:B,mih:I,mah:F,bgsz:j,bgp:z,bgr:H,bga:V,pos:U,top:$,left:W,bottom:q,right:G,inset:K,display:Z,flex:J,hiddenFrom:X,visibleFrom:Q,lightHidden:Y,darkHidden:ee,sx:te}),rest:ne}}const FO={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function jO(e,t){const n=ZT({color:e,theme:t});return"dimmed"===n.color?"var(--mantine-color-dimmed)":"bright"===n.color?"var(--mantine-color-bright)":n.variable?"var(".concat(n.variable,")"):n.color}const zO={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};const HO=["h1","h2","h3","h4","h5","h6"];const VO=["h1","h2","h3","h4","h5","h6"];const UO={color:jO,textColor:function(e,t){const n=ZT({color:e,theme:t});return n.isThemeColor&&void 0===n.shade?"var(--mantine-color-".concat(n.color,"-text)"):jO(e,t)},fontSize:function(e,t){return"string"===typeof e&&e in t.fontSizes?"var(--mantine-font-size-".concat(e,")"):"string"===typeof e&&HO.includes(e)?"var(--mantine-".concat(e,"-font-size)"):"number"===typeof e||"string"===typeof e?LT(e):e},spacing:function(e,t){if("number"===typeof e)return LT(e);if("string"===typeof e){const n=e.replace("-","");if(!(n in t.spacing))return LT(e);const o="--mantine-spacing-".concat(n);return e.startsWith("-")?"calc(var(".concat(o,") * -1)"):"var(".concat(o,")")}return e},identity:function(e){return e},size:function(e){return"number"===typeof e?LT(e):e},lineHeight:function(e,t){return"string"===typeof e&&e in t.lineHeights?"var(--mantine-line-height-".concat(e,")"):"string"===typeof e&&VO.includes(e)?"var(--mantine-".concat(e,"-line-height)"):e},fontFamily:function(e){return"string"===typeof e&&e in zO?zO[e]:e},border:function(e,t){if("number"===typeof e)return LT(e);if("string"===typeof e){const[n,o,...r]=e.split(" ").filter(e=>""!==e.trim());let i="".concat(LT(n));return o&&(i+=" ".concat(o)),r.length>0&&(i+=" ".concat(jO(r.join(" "),t))),i.trim()}return e}},$O=["media"];function WO(e){return e.replace("(min-width: ","").replace("em)","")}function qO(e,t){return"object"===typeof e&&null!==e&&t in e?e[t]:e}function GO(e){let{styleProps:t,data:n,theme:o}=e;return function(e){let{media:t}=e,n=(0,l.A)(e,$O);const o=Object.keys(t).sort((e,t)=>Number(WO(e))-Number(WO(t))).map(e=>({query:e,styles:t[e]}));return(0,s.A)((0,s.A)({},n),{},{media:o})}(MO(t).reduce((e,r)=>{if("hiddenFrom"===r||"visibleFrom"===r||"sx"===r)return e;const i=n[r],l=Array.isArray(i.property)?i.property:[i.property],a="object"===typeof(c=t[r])&&null!==c?"base"in c?c.base:void 0:c;var c;if(!function(e){if("object"!==typeof e||null===e)return!1;const t=Object.keys(e);return 1!==t.length||"base"!==t[0]}(t[r]))return l.forEach(t=>{e.inlineStyles[t]=UO[i.type](a,o)}),e;e.hasResponsiveStyles=!0;const u=function(e){return"object"===typeof e&&null!==e?MO(e).filter(e=>"base"!==e):[]}(t[r]);return l.forEach(n=>{a&&(e.styles[n]=UO[i.type](a,o)),u.forEach(l=>{const a="(min-width: ".concat(o.breakpoints[l],")");e.media[a]=(0,s.A)((0,s.A)({},e.media[a]),{},{[n]:UO[i.type](qO(t[r],l),o)})})}),e},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function KO(){const e=(0,o.useId)().replace(/:/g,"");return"__m__-".concat(e)}const ZO=["component","style","__vars","className","variant","mod","size","hiddenFrom","visibleFrom","lightHidden","darkHidden","renderRoot","__size"],JO=(0,o.forwardRef)((e,t)=>{var n;let{component:o,style:r,__vars:i,className:a,variant:c,mod:u,size:d,hiddenFrom:h,visibleFrom:p,lightHidden:f,darkHidden:m,renderRoot:g,__size:v}=e,y=(0,l.A)(e,ZO);const b=aO(),w=o||"div",{styleProps:k,rest:C}=IO(y),x=function(){var e;return null===(e=hO().stylesTransform)||void 0===e?void 0:e.sx}(),S=null===x||void 0===x||null===(n=x())||void 0===n?void 0:n(k.sx),A=KO(),E=GO({styleProps:k,theme:b,data:FO}),D=(0,s.A)((0,s.A)({ref:t,style:RO({theme:b,style:r,vars:i,styleProps:E.inlineStyles}),className:gO(a,S,{[A]:E.hasResponsiveStyles,"mantine-light-hidden":f,"mantine-dark-hidden":m,["mantine-hidden-from-".concat(h)]:h,["mantine-visible-from-".concat(p)]:p}),"data-variant":c,"data-size":OT(d)?void 0:d||void 0,size:v},_O(u)),C);return(0,Ax.jsxs)(Ax.Fragment,{children:[E.hasResponsiveStyles&&(0,Ax.jsx)(OO,{selector:".".concat(A),styles:E.styles,media:E.media}),"function"===typeof g?g(D):(0,Ax.jsx)(w,(0,s.A)({},D))]})});JO.displayName="@mantine/core/Box";const XO=JO;function QO(e){return e}function YO(e){const t=(0,o.forwardRef)(e);return t.extend=QO,t.withProps=e=>{const n=(0,o.forwardRef)((n,o)=>(0,Ax.jsx)(t,(0,s.A)((0,s.A)((0,s.A)({},e),n),{},{ref:o})));return n.extend=t.extend,n.displayName="WithProps(".concat(t.displayName,")"),n},t}var eP={root:"m_6d731127"};const tP=["classNames","className","style","styles","unstyled","vars","align","justify","gap","variant"],nP={gap:"md",align:"stretch",justify:"flex-start"},oP=(e,t)=>{let{gap:n,align:o,justify:r}=t;return{root:{"--stack-gap":IT(n),"--stack-align":o,"--stack-justify":r}}},rP=YO((e,t)=>{const n=uO("Stack",nP,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,vars:u,align:d,justify:h,gap:p,variant:f}=n,m=(0,l.A)(n,tP),g=DO({name:"Stack",props:n,classes:eP,className:r,style:i,classNames:o,styles:a,unstyled:c,vars:u,varsResolver:oP});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({ref:t},g("root")),{},{variant:f},m))});function iP(e){const t=(0,o.forwardRef)(e);return t.withProps=e=>{const n=(0,o.forwardRef)((n,o)=>(0,Ax.jsx)(t,(0,s.A)((0,s.A)((0,s.A)({},e),n),{},{ref:o})));return n.extend=t.extend,n.displayName="WithProps(".concat(t.displayName,")"),n},t.extend=QO,t}rP.classes=eP,rP.displayName="@mantine/core/Stack";var sP={root:"m_b6d8b162"};const lP=["lineClamp","truncate","inline","inherit","gradient","span","__staticSelector","vars","className","style","classNames","styles","unstyled","variant","mod","size"];function aP(e){return"start"===e?"start":"end"===e||e?"end":void 0}const cP={inherit:!1},uP=(e,t)=>{let{variant:n,lineClamp:o,gradient:r,size:i,color:s}=t;return{root:{"--text-fz":jT(i),"--text-lh":zT(i),"--text-gradient":"gradient"===n?XT(r,e):void 0,"--text-line-clamp":"number"===typeof o?o.toString():void 0,"--text-color":s?JT(s,e):void 0}}},dP=iP((e,t)=>{const n=uO("Text",cP,e),{lineClamp:o,truncate:r,inline:i,inherit:a,gradient:c,span:u,__staticSelector:d,vars:h,className:p,style:f,classNames:m,styles:g,unstyled:v,variant:y,mod:b,size:w}=n,k=(0,l.A)(n,lP),C=DO({name:["Text",d],props:n,classes:sP,className:p,style:f,classNames:m,styles:g,unstyled:v,vars:h,varsResolver:uP});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({},C("root",{focusable:!0})),{},{ref:t,component:u?"span":"p",variant:y,mod:[{"data-truncate":aP(r),"data-line-clamp":"number"===typeof o,"data-inline":i,"data-inherit":a},b],size:w},k))});dP.classes=sP,dP.displayName="@mantine/core/Text";var hP={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const pP=["className"],fP=(0,o.forwardRef)((e,t)=>{let{className:n}=e,o=(0,l.A)(e,pP);return(0,Ax.jsxs)(XO,(0,s.A)((0,s.A)({component:"span",className:gO(hP.barsLoader,n)},o),{},{ref:t,children:[(0,Ax.jsx)("span",{className:hP.bar}),(0,Ax.jsx)("span",{className:hP.bar}),(0,Ax.jsx)("span",{className:hP.bar})]}))});fP.displayName="@mantine/core/Bars";const mP=["className"],gP=(0,o.forwardRef)((e,t)=>{let{className:n}=e,o=(0,l.A)(e,mP);return(0,Ax.jsxs)(XO,(0,s.A)((0,s.A)({component:"span",className:gO(hP.dotsLoader,n)},o),{},{ref:t,children:[(0,Ax.jsx)("span",{className:hP.dot}),(0,Ax.jsx)("span",{className:hP.dot}),(0,Ax.jsx)("span",{className:hP.dot})]}))});gP.displayName="@mantine/core/Dots";const vP=["className"],yP=(0,o.forwardRef)((e,t)=>{let{className:n}=e,o=(0,l.A)(e,vP);return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({component:"span",className:gO(hP.ovalLoader,n)},o),{},{ref:t}))});yP.displayName="@mantine/core/Oval";const bP=["size","color","type","vars","className","style","classNames","styles","unstyled","loaders","variant","children"],wP={bars:fP,oval:yP,dots:gP},kP={loaders:wP,type:"oval"},CP=(e,t)=>{let{size:n,color:o}=t;return{root:{"--loader-size":BT(n,"loader-size"),"--loader-color":o?JT(o,e):void 0}}},xP=YO((e,t)=>{const n=uO("Loader",kP,e),{size:o,color:r,type:i,vars:a,className:c,style:u,classNames:d,styles:h,unstyled:p,loaders:f,variant:m,children:g}=n,v=(0,l.A)(n,bP),y=DO({name:"Loader",props:n,classes:hP,className:c,style:u,classNames:d,styles:h,unstyled:p,vars:a,varsResolver:CP});return g?(0,Ax.jsx)(XO,(0,s.A)((0,s.A)((0,s.A)({},y("root")),{},{ref:t},v),{},{children:g})):(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({},y("root")),{},{ref:t,component:f[i],variant:m,size:o},v))});xP.defaultLoaders=wP,xP.classes=hP,xP.displayName="@mantine/core/Loader";const SP=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(.9) translateY(".concat("bottom"===e?10:-10,"px)")},transitionProperty:"transform, opacity"}),AP={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:(0,s.A)((0,s.A)({},SP("bottom")),{},{common:{transformOrigin:"center center"}}),"pop-bottom-left":(0,s.A)((0,s.A)({},SP("bottom")),{},{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":(0,s.A)((0,s.A)({},SP("bottom")),{},{common:{transformOrigin:"bottom right"}}),"pop-top-left":(0,s.A)((0,s.A)({},SP("top")),{},{common:{transformOrigin:"top left"}}),"pop-top-right":(0,s.A)((0,s.A)({},SP("top")),{},{common:{transformOrigin:"top right"}})},EP={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function DP(e){let{transition:t,state:n,duration:o,timingFunction:r}=e;const i={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:"".concat(o,"ms"),transitionTimingFunction:r};return"string"===typeof t?t in AP?(0,s.A)((0,s.A)((0,s.A)({transitionProperty:AP[t].transitionProperty},i),AP[t].common),AP[t][EP[n]]):{}:(0,s.A)((0,s.A)((0,s.A)({transitionProperty:t.transitionProperty},i),t.common),t[EP[n]])}function MP(e,t){let{getInitialValueInEffect:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{getInitialValueInEffect:!0};const[r,i]=(0,o.useState)(n?t:function(e){return"undefined"!==typeof window&&"matchMedia"in window&&window.matchMedia(e).matches}(e)),s=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),function(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch(tz){return e.addListener(t),()=>e.removeListener(t)}}(s.current,e=>i(e.matches))},[e]),r}function NP(e,t){const n=(0,o.useRef)(!1);(0,o.useEffect)(()=>()=>{n.current=!1},[]),(0,o.useEffect)(()=>{if(n.current)return e();n.current=!0},t)}function TP(e){let{duration:t,exitDuration:n,timingFunction:r,mounted:i,onEnter:s,onExit:l,onEntered:a,onExited:c,enterDelay:u,exitDelay:d}=e;const h=aO(),p=function(e,t){return MP("(prefers-reduced-motion: reduce)",e,t)}(),f=!!h.respectReducedMotion&&p,[m,g]=(0,o.useState)(f?0:t),[v,y]=(0,o.useState)(i?"entered":"exited"),b=(0,o.useRef)(-1),w=(0,o.useRef)(-1),k=(0,o.useRef)(-1);function C(){window.clearTimeout(b.current),window.clearTimeout(w.current),cancelAnimationFrame(k.current)}const x=e=>{C();const o=e?s:l,r=e?a:c,i=f?0:e?t:n;g(i),0===i?("function"===typeof o&&o(),"function"===typeof r&&r(),y(e?"entered":"exited")):k.current=requestAnimationFrame(()=>{AS.flushSync(()=>{y(e?"pre-entering":"pre-exiting")}),k.current=requestAnimationFrame(()=>{"function"===typeof o&&o(),y(e?"entering":"exiting"),b.current=window.setTimeout(()=>{"function"===typeof r&&r(),y(e?"entered":"exited")},i)})})};return NP(()=>{var e;e=i,C(),"number"===typeof(e?u:d)?w.current=window.setTimeout(()=>{x(e)},e?u:d):x(e)},[i]),(0,o.useEffect)(()=>()=>{C()},[]),{transitionDuration:m,transitionStatus:v,transitionTimingFunction:r||"ease"}}function OP(e){let{keepMounted:t,transition:n="fade",duration:o=250,exitDuration:r=o,mounted:i,children:s,timingFunction:l="ease",onExit:a,onEntered:c,onEnter:u,onExited:d,enterDelay:h,exitDelay:p}=e;const f=fO(),{transitionDuration:m,transitionStatus:g,transitionTimingFunction:v}=TP({mounted:i,exitDuration:r,duration:o,timingFunction:l,onExit:a,onEntered:c,onEnter:u,onExited:d,enterDelay:h,exitDelay:p});return 0===m||"test"===f?i?(0,Ax.jsx)(Ax.Fragment,{children:s({})}):t?s({display:"none"}):null:"exited"===g?t?s({display:"none"}):null:(0,Ax.jsx)(Ax.Fragment,{children:s(DP({transition:n,duration:m,state:g,timingFunction:v}))})}OP.displayName="@mantine/core/Transition";var PP={root:"m_87cf2631"};const _P=["className","component","__staticSelector","unstyled","classNames","styles","style"],LP={__staticSelector:"UnstyledButton"},RP=iP((e,t)=>{const n=uO("UnstyledButton",LP,e),{className:o,component:r="button",__staticSelector:i,unstyled:a,classNames:c,styles:u,style:d}=n,h=(0,l.A)(n,_P),p=DO({name:i,props:n,classes:PP,className:o,style:d,classNames:c,styles:u,unstyled:a});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({},p("root",{focusable:!0})),{},{component:r,ref:t,type:"button"===r?"button":void 0},h))});RP.classes=PP,RP.displayName="@mantine/core/UnstyledButton";var BP={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const IP=["className","style","classNames","styles","unstyled","orientation","vars","borderWidth","variant","mod"],FP={orientation:"horizontal"},jP=(e,t)=>{let{borderWidth:n}=t;return{group:{"--button-border-width":LT(n)}}},zP=YO((e,t)=>{const n=uO("ButtonGroup",FP,e),o=uO("ButtonGroup",FP,e),{className:r,style:i,classNames:a,styles:c,unstyled:u,orientation:d,vars:h,borderWidth:p,variant:f,mod:m}=o,g=(0,l.A)(o,IP),v=DO({name:"ButtonGroup",props:n,classes:BP,className:r,style:i,classNames:a,styles:c,unstyled:u,vars:h,varsResolver:jP,rootSelector:"group"});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({},v("group")),{},{ref:t,variant:f,mod:[{"data-orientation":d},m],role:"group"},g))});zP.classes=BP,zP.displayName="@mantine/core/ButtonGroup";const HP=["className","style","classNames","styles","unstyled","vars","variant","gradient","radius","autoContrast"],VP={},UP=(e,t)=>{let{radius:n,color:o,gradient:r,variant:i,autoContrast:s,size:l}=t;const a=e.variantColorResolver({color:o||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":BT(l,"section-height"),"--section-padding-x":BT(l,"section-padding-x"),"--section-fz":null!==l&&void 0!==l&&l.includes("compact")?jT(l.replace("compact-","")):jT(l),"--section-radius":void 0===n?void 0:FT(n),"--section-bg":o||i?a.background:void 0,"--section-color":a.color,"--section-bd":o||i?a.border:void 0}}},$P=YO((e,t)=>{const n=uO("ButtonGroupSection",VP,e),o=uO("ButtonGroupSection",VP,e),{className:r,style:i,classNames:a,styles:c,unstyled:u,vars:d,variant:h,gradient:p,radius:f,autoContrast:m}=o,g=(0,l.A)(o,HP),v=DO({name:"ButtonGroupSection",props:n,classes:BP,className:r,style:i,classNames:a,styles:c,unstyled:u,vars:d,varsResolver:UP,rootSelector:"groupSection"});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({},v("groupSection")),{},{ref:t,variant:h},g))});$P.classes=BP,$P.displayName="@mantine/core/ButtonGroupSection";const WP=["style","vars","className","color","disabled","children","leftSection","rightSection","fullWidth","variant","radius","loading","loaderProps","gradient","classNames","styles","unstyled","data-disabled","autoContrast","mod"],qP={in:{opacity:1,transform:"translate(-50%, calc(-50% + ".concat(LT(1),"))")},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},GP={},KP=(e,t)=>{let{radius:n,color:o,gradient:r,variant:i,size:s,justify:l,autoContrast:a}=t;const c=e.variantColorResolver({color:o||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":l,"--button-height":BT(s,"button-height"),"--button-padding-x":BT(s,"button-padding-x"),"--button-fz":null!==s&&void 0!==s&&s.includes("compact")?jT(s.replace("compact-","")):jT(s),"--button-radius":void 0===n?void 0:FT(n),"--button-bg":o||i?c.background:void 0,"--button-hover":o||i?c.hover:void 0,"--button-color":c.color,"--button-bd":o||i?c.border:void 0,"--button-hover-color":o||i?c.hoverColor:void 0}}},ZP=iP((e,t)=>{const n=uO("Button",GP,e),{style:o,vars:r,className:i,color:a,disabled:c,children:u,leftSection:d,rightSection:h,fullWidth:p,variant:f,radius:m,loading:g,loaderProps:v,gradient:y,classNames:b,styles:w,unstyled:k,"data-disabled":C,autoContrast:x,mod:S}=n,A=(0,l.A)(n,WP),E=DO({name:"Button",props:n,classes:BP,className:i,style:o,classNames:b,styles:w,unstyled:k,vars:r,varsResolver:KP}),D=!!d,M=!!h;return(0,Ax.jsxs)(RP,(0,s.A)((0,s.A)((0,s.A)({ref:t},E("root",{active:!c&&!g&&!C})),{},{unstyled:k,variant:f,disabled:c||g,mod:[{disabled:c||C,loading:g,block:p,"with-left-section":D,"with-right-section":M},S]},A),{},{children:[(0,Ax.jsx)(OP,{mounted:!!g,transition:qP,duration:150,children:e=>(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({component:"span"},E("loader",{style:e})),{},{"aria-hidden":!0,children:(0,Ax.jsx)(xP,(0,s.A)({color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)"},v))}))}),(0,Ax.jsxs)("span",(0,s.A)((0,s.A)({},E("inner")),{},{children:[d&&(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({component:"span"},E("section")),{},{mod:{position:"left"},children:d})),(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({component:"span",mod:{loading:g}},E("label")),{},{children:u})),h&&(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({component:"span"},E("section")),{},{mod:{position:"right"},children:h}))]}))]}))});ZP.classes=BP,ZP.displayName="@mantine/core/Button",ZP.Group=zP,ZP.GroupSection=$P;var JP={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const XP=["className","style","classNames","styles","unstyled","orientation","vars","borderWidth","variant","mod"],QP={orientation:"horizontal"},YP=(e,t)=>{let{borderWidth:n}=t;return{group:{"--ai-border-width":LT(n)}}},e_=YO((e,t)=>{const n=uO("ActionIconGroup",QP,e),o=uO("ActionIconGroup",QP,e),{className:r,style:i,classNames:a,styles:c,unstyled:u,orientation:d,vars:h,borderWidth:p,variant:f,mod:m}=o,g=(0,l.A)(o,XP),v=DO({name:"ActionIconGroup",props:n,classes:JP,className:r,style:i,classNames:a,styles:c,unstyled:u,vars:h,varsResolver:YP,rootSelector:"group"});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({},v("group")),{},{ref:t,variant:f,mod:[{"data-orientation":d},m],role:"group"},g))});e_.classes=JP,e_.displayName="@mantine/core/ActionIconGroup";const t_=["className","style","classNames","styles","unstyled","vars","variant","gradient","radius","autoContrast"],n_={},o_=(e,t)=>{let{radius:n,color:o,gradient:r,variant:i,autoContrast:s,size:l}=t;const a=e.variantColorResolver({color:o||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":BT(l,"section-height"),"--section-padding-x":BT(l,"section-padding-x"),"--section-fz":jT(l),"--section-radius":void 0===n?void 0:FT(n),"--section-bg":o||i?a.background:void 0,"--section-color":a.color,"--section-bd":o||i?a.border:void 0}}},r_=YO((e,t)=>{const n=uO("ActionIconGroupSection",n_,e),o=uO("ActionIconGroupSection",n_,e),{className:r,style:i,classNames:a,styles:c,unstyled:u,vars:d,variant:h,gradient:p,radius:f,autoContrast:m}=o,g=(0,l.A)(o,t_),v=DO({name:"ActionIconGroupSection",props:n,classes:JP,className:r,style:i,classNames:a,styles:c,unstyled:u,vars:d,varsResolver:o_,rootSelector:"groupSection"});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({},v("groupSection")),{},{ref:t,variant:h},g))});r_.classes=JP,r_.displayName="@mantine/core/ActionIconGroupSection";const i_=["className","unstyled","variant","classNames","styles","style","loading","loaderProps","size","color","radius","__staticSelector","gradient","vars","children","disabled","data-disabled","autoContrast","mod"],s_={},l_=(e,t)=>{let{size:n,radius:o,variant:r,gradient:i,color:s,autoContrast:l}=t;const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:l});return{root:{"--ai-size":BT(n,"ai-size"),"--ai-radius":void 0===o?void 0:FT(o),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},a_=iP((e,t)=>{const n=uO("ActionIcon",s_,e),{className:o,unstyled:r,variant:i,classNames:a,styles:c,style:u,loading:d,loaderProps:h,size:p,color:f,radius:m,__staticSelector:g,gradient:v,vars:y,children:b,disabled:w,"data-disabled":k,autoContrast:C,mod:x}=n,S=(0,l.A)(n,i_),A=DO({name:["ActionIcon",g],props:n,className:o,style:u,classes:JP,classNames:a,styles:c,unstyled:r,vars:y,varsResolver:l_});return(0,Ax.jsxs)(RP,(0,s.A)((0,s.A)((0,s.A)({},A("root",{active:!w&&!d&&!k})),S),{},{unstyled:r,variant:i,size:p,disabled:w||d,ref:t,mod:[{loading:d,disabled:w||k},x],children:[(0,Ax.jsx)(OP,{mounted:!!d,transition:"slide-down",duration:150,children:e=>(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({component:"span"},A("loader",{style:e})),{},{"aria-hidden":!0,children:(0,Ax.jsx)(xP,(0,s.A)({color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)"},h))}))}),(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({component:"span",mod:{loading:d}},A("icon")),{},{children:b}))]}))});function c_(e,t){if("function"===typeof e)return e(t);"object"===typeof e&&null!==e&&"current"in e&&(e.current=t)}function u_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=new Map;return e=>{if(t.forEach(t=>{const n=c_(t,e);n&&o.set(t,n)}),o.size>0)return()=>{t.forEach(e=>{const t=o.get(e);t?t():c_(e,null)}),o.clear()}}}function d_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.useCallback)(u_(...t),t)}function h_(e){return!Array.isArray(e)&&null!==e&&("object"===typeof e&&e.type!==o.Fragment)}a_.classes=JP,a_.displayName="@mantine/core/ActionIcon",a_.Group=e_,a_.GroupSection=r_;const p_={app:100,modal:200,popover:300,overlay:400,max:9999};function f_(e){return p_[e]}function m_(e){var t;const n=o.version;return"string"!==typeof o.version||n.startsWith("18.")?null===e||void 0===e?void 0:e.ref:null===e||void 0===e||null===(t=e.props)||void 0===t?void 0:t.ref}const g_=(0,o.createContext)({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function v_(){return(0,o.useContext)(g_)}function y_(e,t){if("rtl"===e&&(t.includes("right")||t.includes("left"))){const[e,n]=t.split("-"),o="right"===e?"left":"right";return void 0===n?o:"".concat(o,"-").concat(n)}return t}function b_(e,t,n,o){return"center"===e||"center"===o?{top:t}:"end"===e?{bottom:n}:"start"===e?{top:n}:{}}function w_(e,t,n,o,r){return"center"===e||"center"===o?{left:t}:"end"===e?{["ltr"===r?"right":"left"]:n}:"start"===e?{["ltr"===r?"left":"right"]:n}:{}}const k_={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function C_(e){let{position:t,arrowSize:n,arrowOffset:o,arrowRadius:r,arrowPosition:i,arrowX:l,arrowY:a,dir:c}=e;const[u,d="center"]=t.split("-"),h={width:n,height:n,transform:"rotate(45deg)",position:"absolute",[k_[u]]:r},p=-n/2;return"left"===u?(0,s.A)((0,s.A)((0,s.A)({},h),b_(d,a,o,i)),{},{right:p,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}):"right"===u?(0,s.A)((0,s.A)((0,s.A)({},h),b_(d,a,o,i)),{},{left:p,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}):"top"===u?(0,s.A)((0,s.A)((0,s.A)({},h),w_(d,l,o,i,c)),{},{bottom:p,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}):"bottom"===u?(0,s.A)((0,s.A)((0,s.A)({},h),w_(d,l,o,i,c)),{},{top:p,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}):{}}const x_=["position","arrowSize","arrowOffset","arrowRadius","arrowPosition","visible","arrowX","arrowY","style"],S_=(0,o.forwardRef)((e,t)=>{let{position:n,arrowSize:o,arrowOffset:r,arrowRadius:i,arrowPosition:a,visible:c,arrowX:u,arrowY:d,style:h}=e,p=(0,l.A)(e,x_);const{dir:f}=v_();return c?(0,Ax.jsx)("div",(0,s.A)((0,s.A)({},p),{},{ref:t,style:(0,s.A)((0,s.A)({},h),C_({position:n,arrowSize:o,arrowOffset:r,arrowRadius:i,arrowPosition:a,dir:f,arrowX:u,arrowY:d}))})):null});S_.displayName="@mantine/core/FloatingArrow";const A_="undefined"!==typeof document?o.useLayoutEffect:o.useEffect,E_=["target","reuseTargetNode"],D_=["children","target","reuseTargetNode"];function M_(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),"string"===typeof e.className&&t.classList.add(...e.className.split(" ").filter(Boolean)),"object"===typeof e.style&&Object.assign(t.style,e.style),"string"===typeof e.id&&t.setAttribute("id",e.id),t}const N_={},T_=YO((e,t)=>{const n=uO("Portal",N_,e),{children:r,target:i,reuseTargetNode:a}=n,c=(0,l.A)(n,D_),[u,d]=(0,o.useState)(!1),h=(0,o.useRef)(null);return A_(()=>(d(!0),h.current=function(e){let{target:t,reuseTargetNode:n}=e,o=(0,l.A)(e,E_);if(t)return"string"===typeof t?document.querySelector(t)||M_(o):t;if(n){const e=document.querySelector("[data-mantine-shared-portal-node]");if(e)return e;const t=M_(o);return t.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(t),t}return M_(o)}((0,s.A)({target:i,reuseTargetNode:a},c)),c_(t,h.current),i||a||!h.current||document.body.appendChild(h.current),()=>{i||a||!h.current||document.body.removeChild(h.current)}),[i]),u&&h.current?(0,AS.createPortal)((0,Ax.jsx)(Ax.Fragment,{children:r}),h.current):null});T_.displayName="@mantine/core/Portal";const O_=["withinPortal","children"],P_=YO((e,t)=>{let{withinPortal:n=!0,children:o}=e,r=(0,l.A)(e,O_);return"test"!==fO()&&n?(0,Ax.jsx)(T_,(0,s.A)((0,s.A)({ref:t},r),{},{children:o})):(0,Ax.jsx)(Ax.Fragment,{children:o})});P_.displayName="@mantine/core/OptionalPortal";const __={duration:100,transition:"fade"};function L_(e,t){return Array.isArray(e)?[...e].reduce((e,n)=>(0,s.A)((0,s.A)({},e),L_(n,t)),{}):"function"===typeof e?e(t):null==e?{}:e}var R_={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const B_=["children","refProp","withinPortal","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","zIndex","disabled","defaultOpened","variant","vars","portalProps"],I_={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:f_("popover")},F_=(e,t)=>{let{radius:n,color:o}=t;return{tooltip:{"--tooltip-radius":void 0===n?void 0:FT(n),"--tooltip-bg":o?JT(o,e):void 0,"--tooltip-color":o?"var(--mantine-color-white)":void 0}}},j_=YO((e,t)=>{var n,r;const i=uO("TooltipFloating",I_,e),{children:a,refProp:c,withinPortal:u,style:d,className:h,classNames:p,styles:f,unstyled:m,radius:g,color:v,label:y,offset:b,position:w,multiline:k,zIndex:C,disabled:x,defaultOpened:S,variant:A,vars:E,portalProps:D}=i,M=(0,l.A)(i,B_),N=aO(),T=DO({name:"TooltipFloating",props:i,classes:R_,className:h,style:d,classNames:p,styles:f,unstyled:m,rootSelector:"tooltip",vars:E,varsResolver:F_}),{handleMouseMove:O,x:P,y:_,opened:L,boundaryRef:R,floating:B,setOpened:I}=function(e){let{offset:t,position:n,defaultOpened:r}=e;const[i,s]=(0,o.useState)(r),l=(0,o.useRef)(null),{x:a,y:c,elements:u,refs:d,update:h,placement:p}=NE({placement:n,middleware:[MA({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=p.includes("right")?t:n.includes("left")?-1*t:0,m=p.includes("bottom")?t:n.includes("top")?-1*t:0,g=(0,o.useCallback)(e=>{let{clientX:t,clientY:n}=e;d.setPositionReference({getBoundingClientRect:()=>({width:0,height:0,x:t,y:n,left:t+f,top:n+m,right:t,bottom:n})})},[u.reference]);return(0,o.useEffect)(()=>{if(d.floating.current){const e=l.current;e.addEventListener("mousemove",g);const t=Wx(d.floating.current);return t.forEach(e=>{e.addEventListener("scroll",h)}),()=>{e.removeEventListener("mousemove",g),t.forEach(e=>{e.removeEventListener("scroll",h)})}}},[u.reference,d.floating.current,h,g,i]),{handleMouseMove:g,x:a,y:c,opened:i,setOpened:s,boundaryRef:l,floating:d.setFloating}}({offset:b,position:w,defaultOpened:S});if(!h_(a))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const F=d_(R,m_(a),t),j=a.props;return(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(P_,(0,s.A)((0,s.A)({},D),{},{withinPortal:u,children:(0,Ax.jsx)(XO,(0,s.A)((0,s.A)((0,s.A)({},M),T("tooltip",{style:(0,s.A)((0,s.A)({},L_(d,N)),{},{zIndex:C,display:!x&&L?"block":"none",top:null!==(n=_&&Math.round(_))&&void 0!==n?n:"",left:null!==(r=P&&Math.round(P))&&void 0!==r?r:""})})),{},{variant:A,ref:B,mod:{multiline:k},children:y}))})),(0,o.cloneElement)(a,(0,s.A)((0,s.A)({},j),{},{[c]:F,onMouseEnter:e=>{var t;null===(t=j.onMouseEnter)||void 0===t||t.call(j,e),O(e),I(!0)},onMouseLeave:e=>{var t;null===(t=j.onMouseLeave)||void 0===t||t.call(j,e),I(!1)}}))]})});j_.classes=R_,j_.displayName="@mantine/core/TooltipFloating";const z_=(0,o.createContext)(!1),H_=z_.Provider,V_={openDelay:0,closeDelay:0};function U_(e){const{openDelay:t,closeDelay:n,children:o}=uO("TooltipGroup",V_,e);return(0,Ax.jsx)(H_,{value:!0,children:(0,Ax.jsx)(lE,{delay:{open:t,close:n},children:o})})}U_.displayName="@mantine/core/TooltipGroup",U_.extend=e=>e;const $_=o["useId".toString()]||(()=>{});function W_(e){const t=function(){const e=$_();return e?"mantine-".concat(e.replace(/:/g,"")):""}(),[n,r]=(0,o.useState)(t);return A_(()=>{r(function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mantine-").concat(Math.random().toString(36).slice(2,11))}())},[]),"string"===typeof e?e:"undefined"===typeof window?t:n}function q_(e){let{opened:t,floating:n,position:r,positionDependencies:i}=e;const[s,l]=(0,o.useState)(0);(0,o.useEffect)(()=>{if(n.refs.reference.current&&n.refs.floating.current&&t)return pA(n.refs.reference.current,n.refs.floating.current,n.update)},[n.refs.reference.current,n.refs.floating.current,t,s,r]),NP(()=>{n.update()},i),NP(()=>{l(e=>e+1)},[t])}function G_(e){const t=function(e){if(void 0===e)return{shift:!0,flip:!0};const t=(0,s.A)({},e);return void 0===e.shift&&(t.shift=!0),void 0===e.flip&&(t.flip=!0),t}(e.middlewares),n=[DA(e.offset)];return t.shift&&n.push(MA("boolean"===typeof t.shift?{padding:8}:(0,s.A)({padding:8},t.shift))),t.flip&&n.push("boolean"===typeof t.flip?TA():TA(t.flip)),n.push(_A({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push("boolean"===typeof t.inline?PA():PA(t.inline)):e.inline&&n.push(PA()),n}function K_(e){var t,n,r;const[i,s]=(0,o.useState)(e.defaultOpened),l="boolean"===typeof e.opened?e.opened:i,a=(0,o.useContext)(z_),c=W_(),u=(0,o.useCallback)(e=>{s(e),e&&k(c)},[c]),{x:d,y:h,context:p,refs:f,update:m,placement:g,middlewareData:{arrow:{x:v,y:y}={}}}=NE({strategy:e.strategy,placement:e.position,open:l,onOpenChange:u,middleware:G_(e)}),{delay:b,currentId:w,setCurrentId:k}=aE(p,{id:c}),{getReferenceProps:C,getFloatingProps:x}=LE([rE(p,{enabled:null===(t=e.events)||void 0===t?void 0:t.hover,delay:a?b:{open:e.openDelay,close:e.closeDelay},mouseOnly:!(null!==(n=e.events)&&void 0!==n&&n.touch)}),TE(p,{enabled:null===(r=e.events)||void 0===r?void 0:r.focus,visibleOnly:!0}),BE(p,{role:"tooltip"}),ME(p,{enabled:"undefined"===typeof e.opened})]);q_({opened:l,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:f,update:m}}),NP(()=>{var t;null===(t=e.onPositionChange)||void 0===t||t.call(e,g)},[g]);const S=l&&w&&w!==c;return{x:d,y:h,arrowX:v,arrowY:y,reference:f.setReference,floating:f.setFloating,getFloatingProps:x,getReferenceProps:C,isGroupPhase:S,opened:l,placement:g}}const Z_=["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","defaultOpened","withinPortal","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","offset","transitionProps","multiline","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline","variant","keepMounted","vars","portalProps","mod","floatingStrategy","middlewares"],J_={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:f_("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},X_=(e,t)=>{let{radius:n,color:o}=t;return{tooltip:{"--tooltip-radius":void 0===n?void 0:FT(n),"--tooltip-bg":o?JT(o,e):void 0,"--tooltip-color":o?"var(--mantine-color-white)":void 0}}},Q_=YO((e,t)=>{const n=uO("Tooltip",J_,e),r=uO("Tooltip",J_,n),{children:i,position:a,refProp:c,label:u,openDelay:d,closeDelay:h,onPositionChange:p,opened:f,defaultOpened:m,withinPortal:g,radius:v,color:y,classNames:b,styles:w,unstyled:k,style:C,className:x,withArrow:S,arrowSize:A,arrowOffset:E,arrowRadius:D,arrowPosition:M,offset:N,transitionProps:T,multiline:O,events:P,zIndex:_,disabled:L,positionDependencies:R,onClick:B,onMouseEnter:I,onMouseLeave:F,inline:j,variant:z,keepMounted:H,vars:V,portalProps:U,mod:$,floatingStrategy:W,middlewares:q}=r,G=(0,l.A)(r,Z_),{dir:K}=v_(),Z=(0,o.useRef)(null),J=K_({position:y_(K,a),closeDelay:h,openDelay:d,onPositionChange:p,opened:f,defaultOpened:m,events:P,arrowRef:Z,arrowOffset:E,offset:"number"===typeof N?N+(S?A/2:0):N,positionDependencies:[...R,i],inline:j,strategy:W,middlewares:q}),X=DO({name:"Tooltip",props:n,classes:R_,className:x,style:C,classNames:b,styles:w,unstyled:k,rootSelector:"tooltip",vars:V,varsResolver:X_});if(!h_(i))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Q=d_(J.reference,m_(i),t),Y=function(e,t){return(0,s.A)((0,s.A)((0,s.A)({},__),t),e)}(T,{duration:100,transition:"fade"}),ee=i.props;return(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)(P_,(0,s.A)((0,s.A)({},U),{},{withinPortal:g,children:(0,Ax.jsx)(OP,(0,s.A)((0,s.A)({},Y),{},{keepMounted:H,mounted:!L&&!!J.opened,duration:J.isGroupPhase?10:Y.duration,children:e=>{var t,n;return(0,Ax.jsxs)(XO,(0,s.A)((0,s.A)((0,s.A)({},G),{},{"data-fixed":"fixed"===W||void 0,variant:z,mod:[{multiline:O},$]},J.getFloatingProps({ref:J.floating,className:X("tooltip").className,style:(0,s.A)((0,s.A)((0,s.A)({},X("tooltip").style),e),{},{zIndex:_,top:null!==(t=J.y)&&void 0!==t?t:0,left:null!==(n=J.x)&&void 0!==n?n:0})})),{},{children:[u,(0,Ax.jsx)(S_,(0,s.A)({ref:Z,arrowX:J.arrowX,arrowY:J.arrowY,visible:S,position:J.placement,arrowSize:A,arrowOffset:E,arrowRadius:D,arrowPosition:M},X("arrow")))]}))}}))})),(0,o.cloneElement)(i,J.getReferenceProps((0,s.A)((0,s.A)({onClick:B,onMouseEnter:I,onMouseLeave:F,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:gO(x,ee.className)},ee),{},{[c]:Q})))]})});function Y_(e){let{value:t,defaultValue:n,finalValue:r,onChange:i=()=>{}}=e;const[s,l]=(0,o.useState)(void 0!==n?n:r);return void 0!==t?[t,i,!0]:[s,function(e){l(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];null===i||void 0===i||i(e,...n)},!1]}Q_.classes=R_,Q_.displayName="@mantine/core/Tooltip",Q_.Floating=j_,Q_.Group=U_;const eL=["size","style"];function tL(e){let{size:t,style:n}=e,o=(0,l.A)(e,eL);const r=void 0!==t?(0,s.A)({width:LT(t),height:LT(t)},n):n;return(0,Ax.jsx)("svg",(0,s.A)((0,s.A)({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0},o),{},{children:(0,Ax.jsx)("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}))}function nL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=(0,o.createContext)(e);return[e=>{let{children:n,value:o}=e;return(0,Ax.jsx)(t.Provider,{value:o,children:n})},()=>(0,o.useContext)(t)]}const[oL,rL]=nL(),iL={};function sL(e){const{value:t,defaultValue:n,onChange:o,multiple:r,children:i}=uO("ChipGroup",iL,e),[s,l]=Y_({value:t,defaultValue:n,finalValue:r?[]:null,onChange:o});return(0,Ax.jsx)(oL,{value:{isChipSelected:e=>Array.isArray(s)?s.includes(e):e===s,onChange:e=>{const t=e.currentTarget.value;Array.isArray(s)?l(s.includes(t)?s.filter(e=>e!==t):[...s,t]):l(t)},multiple:r},children:i})}sL.displayName="@mantine/core/ChipGroup";var lL={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const aL=["classNames","className","style","styles","unstyled","vars","id","checked","defaultChecked","onChange","value","wrapperProps","type","disabled","children","size","variant","icon","rootRef","autoContrast","mod"],cL={type:"checkbox"},uL=(e,t)=>{let{size:n,radius:o,variant:r,color:i,autoContrast:s}=t;const l=e.variantColorResolver({color:i||e.primaryColor,theme:e,variant:r||"filled",autoContrast:s});return{root:{"--chip-fz":jT(n),"--chip-size":BT(n,"chip-size"),"--chip-radius":void 0===o?void 0:FT(o),"--chip-checked-padding":BT(n,"chip-checked-padding"),"--chip-padding":BT(n,"chip-padding"),"--chip-icon-size":BT(n,"chip-icon-size"),"--chip-bg":i||r?l.background:void 0,"--chip-hover":i||r?l.hover:void 0,"--chip-color":i||r?l.color:void 0,"--chip-bd":i||r?l.border:void 0,"--chip-spacing":BT(n,"chip-spacing")}}},dL=YO((e,t)=>{const n=uO("Chip",cL,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,vars:u,id:d,checked:h,defaultChecked:p,onChange:f,value:m,wrapperProps:g,type:v,disabled:y,children:b,size:w,variant:k,icon:C,rootRef:x,autoContrast:S,mod:A}=n,E=(0,l.A)(n,aL),D=DO({name:"Chip",classes:lL,props:n,className:r,style:i,classNames:o,styles:a,unstyled:c,vars:u,varsResolver:uL}),M=rL(),N=W_(d),{styleProps:T,rest:O}=IO(E),[P,_]=Y_({value:h,defaultValue:p,finalValue:!1,onChange:f}),L=M?{checked:M.isChipSelected(m),onChange:e=>{M.onChange(e),null===f||void 0===f||f(e.currentTarget.checked)},type:M.multiple?"checkbox":"radio"}:{},R=L.checked||P;return(0,Ax.jsxs)(XO,(0,s.A)((0,s.A)((0,s.A)((0,s.A)({size:w,variant:k,ref:x,mod:A},D("root")),T),g),{},{children:[(0,Ax.jsx)("input",(0,s.A)((0,s.A)((0,s.A)({type:v},D("input")),{},{checked:R,onChange:e=>_(e.currentTarget.checked),id:N,disabled:y,ref:t,value:m},L),O)),(0,Ax.jsxs)("label",(0,s.A)((0,s.A)({htmlFor:N,"data-checked":R||void 0,"data-disabled":y||void 0},D("label",{variant:k||"filled"})),{},{children:[R&&(0,Ax.jsx)("span",(0,s.A)((0,s.A)({},D("iconWrapper")),{},{children:C||(0,Ax.jsx)(tL,(0,s.A)({},D("checkIcon")))})),(0,Ax.jsx)("span",{children:b})]}))]}))});dL.classes=lL,dL.displayName="@mantine/core/Chip",dL.Group=sL;var hL={root:"m_4081bf90"};const pL=["classNames","className","style","styles","unstyled","children","gap","align","justify","wrap","grow","preventGrowOverflow","vars","variant","__size","mod"],fL={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},mL=(e,t,n)=>{let{grow:o,preventGrowOverflow:r,gap:i,align:s,justify:l,wrap:a}=t,{childWidth:c}=n;return{root:{"--group-child-width":o&&r?c:void 0,"--group-gap":IT(i),"--group-align":s,"--group-justify":l,"--group-wrap":a}}},gL=YO((e,t)=>{const n=uO("Group",fL,e),{classNames:r,className:i,style:a,styles:c,unstyled:u,children:d,gap:h,align:p,justify:f,wrap:m,grow:g,preventGrowOverflow:v,vars:y,variant:b,__size:w,mod:k}=n,C=(0,l.A)(n,pL),x=function(e){return o.Children.toArray(e).filter(Boolean)}(d),S=x.length,A=IT(null!==h&&void 0!==h?h:"md"),E=DO({name:"Group",props:n,stylesCtx:{childWidth:"calc(".concat(100/S,"% - (").concat(A," - ").concat(A," / ").concat(S,"))")},className:i,style:a,classes:hL,classNames:r,styles:c,unstyled:u,vars:y,varsResolver:mL});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)((0,s.A)({},E("root")),{},{ref:t,variant:b,mod:[{grow:g},k],size:w},C),{},{children:x}))});gL.classes=hL,gL.displayName="@mantine/core/Group";var vL={root:"m_1b7284a3"};const yL=["classNames","className","style","styles","unstyled","withBorder","vars","radius","shadow","variant","mod"],bL={},wL=(e,t)=>{let{radius:n,shadow:o}=t;return{root:{"--paper-radius":void 0===n?void 0:FT(n),"--paper-shadow":HT(o)}}},kL=iP((e,t)=>{const n=uO("Paper",bL,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,withBorder:u,vars:d,radius:h,shadow:p,variant:f,mod:m}=n,g=(0,l.A)(n,yL),v=DO({name:"Paper",props:n,classes:vL,className:r,style:i,classNames:o,styles:a,unstyled:c,vars:d,varsResolver:wL});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({ref:t,mod:[{"data-with-border":u},m]},v("root")),{},{variant:f},g))});function CL(e){const t=(0,o.createContext)(null);return[e=>{let{children:n,value:o}=e;return(0,Ax.jsx)(t.Provider,{value:o,children:n})},()=>{const n=(0,o.useContext)(t);if(null===n)throw new Error(e);return n}]}kL.classes=vL,kL.displayName="@mantine/core/Paper";const[xL,SL]=CL("Card component was not found in tree");var AL={root:"m_e615b15f",section:"m_599a2148"};const EL=["classNames","className","style","styles","vars","withBorder","inheritPadding","mod"],DL={},ML=iP((e,t)=>{const n=uO("CardSection",DL,e),{classNames:o,className:r,style:i,styles:a,vars:c,withBorder:u,inheritPadding:d,mod:h}=n,p=(0,l.A)(n,EL),f=SL();return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({ref:t,mod:[{"with-border":u,"inherit-padding":d},h]},f.getStyles("section",{className:r,style:i,styles:a,classNames:o})),p))});ML.classes=AL,ML.displayName="@mantine/core/CardSection";const NL=["classNames","className","style","styles","unstyled","vars","children","padding"],TL={},OL=(e,t)=>{let{padding:n}=t;return{root:{"--card-padding":IT(n)}}},PL=iP((e,t)=>{const n=uO("Card",TL,e),{classNames:r,className:i,style:a,styles:c,unstyled:u,vars:d,children:h,padding:p}=n,f=(0,l.A)(n,NL),m=DO({name:"Card",props:n,classes:AL,className:i,style:a,classNames:r,styles:c,unstyled:u,vars:d,varsResolver:OL}),g=o.Children.toArray(h),v=g.map((e,t)=>"object"===typeof e&&e&&"type"in e&&e.type===ML?(0,o.cloneElement)(e,{"data-first-section":0===t||void 0,"data-last-section":t===g.length-1||void 0}):e);return(0,Ax.jsx)(xL,{value:{getStyles:m},children:(0,Ax.jsx)(kL,(0,s.A)((0,s.A)((0,s.A)({ref:t,unstyled:u},m("root")),f),{},{children:v}))})});PL.classes=AL,PL.displayName="@mantine/core/Card",PL.Section=ML;var _L={root:"m_3eebeb36",label:"m_9e365f20"};const LL=["classNames","className","style","styles","unstyled","vars","color","orientation","label","labelPosition","mod"],RL={orientation:"horizontal"},BL=(e,t)=>{let{color:n,variant:o,size:r}=t;return{root:{"--divider-color":n?JT(n,e):void 0,"--divider-border-style":o,"--divider-size":BT(r,"divider-size")}}},IL=YO((e,t)=>{const n=uO("Divider",RL,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,vars:u,color:d,orientation:h,label:p,labelPosition:f,mod:m}=n,g=(0,l.A)(n,LL),v=DO({name:"Divider",classes:_L,props:n,className:r,style:i,classNames:o,styles:a,unstyled:c,vars:u,varsResolver:BL});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)((0,s.A)({ref:t,mod:[{orientation:h,"with-label":!!p},m]},v("root")),g),{},{role:"separator",children:p&&(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({component:"span",mod:{position:f}},v("label")),{},{children:p}))}))});IL.classes=_L,IL.displayName="@mantine/core/Divider";var FL={root:"m_18320242","skeleton-fade":"m_299c329c"};const jL=["classNames","className","style","styles","unstyled","vars","width","height","circle","visible","radius","animate","mod"],zL={visible:!0,animate:!0},HL=(e,t)=>{let{width:n,height:o,radius:r,circle:i}=t;return{root:{"--skeleton-height":LT(o),"--skeleton-width":LT(i?o:n),"--skeleton-radius":i?"1000px":void 0===r?void 0:FT(r)}}},VL=YO((e,t)=>{const n=uO("Skeleton",zL,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,vars:u,width:d,height:h,circle:p,visible:f,radius:m,animate:g,mod:v}=n,y=(0,l.A)(n,jL),b=DO({name:"Skeleton",classes:FL,props:n,className:r,style:i,classNames:o,styles:a,unstyled:c,vars:u,varsResolver:HL});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({ref:t},b("root")),{},{mod:[{visible:f,animate:g},v]},y))});VL.classes=FL,VL.displayName="@mantine/core/Skeleton";const UL=(0,o.createContext)(null),$L=UL.Provider;var WL={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const qL=["classNames","className","style","styles","unstyled","vars","spacing"],GL={},KL=(e,t)=>{let{spacing:n}=t;return{group:{"--ag-spacing":IT(n)}}},ZL=YO((e,t)=>{const n=uO("AvatarGroup",GL,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,vars:u,spacing:d}=n,h=(0,l.A)(n,qL),p=DO({name:"AvatarGroup",classes:WL,props:n,className:r,style:i,classNames:o,styles:a,unstyled:c,vars:u,varsResolver:KL,rootSelector:"group"});return(0,Ax.jsx)($L,{value:!0,children:(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({ref:t},p("group")),h))})});function JL(e){return(0,Ax.jsx)("svg",(0,s.A)((0,s.A)({},e),{},{"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ax.jsx)("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}))}ZL.classes=WL,ZL.displayName="@mantine/core/AvatarGroup";const XL=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function QL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=e.split(" ");return 1===n.length?e.slice(0,t).toUpperCase():n.map(e=>e[0]).slice(0,t).join("").toUpperCase()}const YL=["classNames","className","style","styles","unstyled","vars","src","alt","radius","color","gradient","imageProps","children","autoContrast","mod","name","allowedInitialsColors"],eR={},tR=(e,t)=>{let{size:n,radius:o,variant:r,gradient:i,color:s,autoContrast:l,name:a,allowedInitialsColors:c}=t;const u="initials"===s&&"string"===typeof a?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:XL;const n=function(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}(e);return t[Math.abs(n)%t.length]}(a,c):s,d=e.variantColorResolver({color:u||"gray",theme:e,gradient:i,variant:r||"light",autoContrast:l});return{root:{"--avatar-size":BT(n,"avatar-size"),"--avatar-radius":void 0===o?void 0:FT(o),"--avatar-bg":u||r?d.background:void 0,"--avatar-color":u||r?d.color:void 0,"--avatar-bd":u||r?d.border:void 0}}},nR=iP((e,t)=>{const n=uO("Avatar",eR,e),{classNames:r,className:i,style:a,styles:c,unstyled:u,vars:d,src:h,alt:p,radius:f,color:m,gradient:g,imageProps:v,children:y,autoContrast:b,mod:w,name:k,allowedInitialsColors:C}=n,x=(0,l.A)(n,YL),S={withinGroup:!!(0,o.useContext)(UL)},[A,E]=(0,o.useState)(!h),D=DO({name:"Avatar",props:n,classes:WL,className:i,style:a,classNames:r,styles:c,unstyled:u,vars:d,varsResolver:tR});return(0,o.useEffect)(()=>E(!h),[h]),(0,Ax.jsx)(XO,(0,s.A)((0,s.A)((0,s.A)({},D("root")),{},{mod:[{"within-group":S.withinGroup},w],ref:t},x),{},{children:A?(0,Ax.jsx)("span",(0,s.A)((0,s.A)({},D("placeholder")),{},{title:p,children:y||"string"===typeof k&&QL(k)||(0,Ax.jsx)(JL,{})})):(0,Ax.jsx)("img",(0,s.A)((0,s.A)((0,s.A)({},v),D("image")),{},{src:h,alt:p,onError:e=>{var t;E(!0),null===v||void 0===v||null===(t=v.onError)||void 0===t||t.call(v,e)}}))}))});nR.classes=WL,nR.displayName="@mantine/core/Avatar",nR.Group=ZL;const[oR,rR]=nL({size:"sm"});function iR(e){let{classNames:t,styles:n,props:o,stylesCtx:r}=e;const i=aO();return{resolvedClassNames:bO({theme:i,classNames:t,props:o,stylesCtx:r||void 0}),resolvedStyles:CO({theme:i,styles:n,props:o,stylesCtx:r||void 0})}}const sR=["size","style"],lR=(0,o.forwardRef)((e,t)=>{let{size:n="var(--cb-icon-size, 70%)",style:o}=e,r=(0,l.A)(e,sR);return(0,Ax.jsx)("svg",(0,s.A)((0,s.A)({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:(0,s.A)((0,s.A)({},o),{},{width:n,height:n}),ref:t},r),{},{children:(0,Ax.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}))});lR.displayName="@mantine/core/CloseIcon";var aR={root:"m_86a44da5","root--subtle":"m_220c80f2"};const cR=["iconSize","children","vars","radius","className","classNames","style","styles","unstyled","data-disabled","disabled","variant","icon","mod","__staticSelector"],uR={variant:"subtle"},dR=(e,t)=>{let{size:n,radius:o,iconSize:r}=t;return{root:{"--cb-size":BT(n,"cb-size"),"--cb-radius":void 0===o?void 0:FT(o),"--cb-icon-size":LT(r)}}},hR=iP((e,t)=>{const n=uO("CloseButton",uR,e),{iconSize:o,children:r,vars:i,radius:a,className:c,classNames:u,style:d,styles:h,unstyled:p,"data-disabled":f,disabled:m,variant:g,icon:v,mod:y,__staticSelector:b}=n,w=(0,l.A)(n,cR),k=DO({name:b||"CloseButton",props:n,className:c,style:d,classes:aR,classNames:u,styles:h,unstyled:p,vars:i,varsResolver:dR});return(0,Ax.jsxs)(RP,(0,s.A)((0,s.A)((0,s.A)({ref:t},w),{},{unstyled:p,variant:g,disabled:m,mod:[{disabled:m||f},y]},k("root",{variant:g,active:!m&&!f})),{},{children:[v||(0,Ax.jsx)(lR,{}),r]}))});hR.classes=aR,hR.displayName="@mantine/core/CloseButton";const pR=["size","variant","vars","classNames","styles"],fR={},mR=YO((e,t)=>{const n=uO("InputClearButton",fR,e),{size:o,variant:r,vars:i,classNames:a,styles:c}=n,u=(0,l.A)(n,pR),d=rR(),{resolvedClassNames:h,resolvedStyles:p}=iR({classNames:a,styles:c,props:n});return(0,Ax.jsx)(hR,(0,s.A)({variant:r||"transparent",ref:t,size:o||(null===d||void 0===d?void 0:d.size)||"sm",classNames:h,styles:p,__staticSelector:"InputClearButton"},u))});mR.displayName="@mantine/core/InputClearButton";const[gR,vR]=nL({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var yR={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const bR=["classNames","className","style","styles","unstyled","vars","size","__staticSelector","__inheritStyles","variant"],wR={},kR=(e,t)=>{let{size:n}=t;return{description:{"--input-description-size":void 0===n?void 0:"calc(".concat(jT(n)," - ").concat(LT(2),")")}}},CR=YO((e,t)=>{const n=uO("InputDescription",wR,e),o=uO("InputDescription",wR,n),{classNames:r,className:i,style:a,styles:c,unstyled:u,vars:d,size:h,__staticSelector:p,__inheritStyles:f=!0,variant:m}=o,g=(0,l.A)(o,bR),v=vR(),y=DO({name:["InputWrapper",p],props:n,classes:yR,className:i,style:a,classNames:r,styles:c,unstyled:u,rootSelector:"description",vars:d,varsResolver:kR}),b=f&&(null===v||void 0===v?void 0:v.getStyles)||y;return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({component:"p",ref:t,variant:m,size:h},b("description",null!==v&&void 0!==v&&v.getStyles?{className:i,style:a}:void 0)),g))});CR.classes=yR,CR.displayName="@mantine/core/InputDescription";const xR=["classNames","className","style","styles","unstyled","vars","size","__staticSelector","__inheritStyles","variant"],SR={},AR=(e,t)=>{let{size:n}=t;return{error:{"--input-error-size":void 0===n?void 0:"calc(".concat(jT(n)," - ").concat(LT(2),")")}}},ER=YO((e,t)=>{const n=uO("InputError",SR,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,vars:u,size:d,__staticSelector:h,__inheritStyles:p=!0,variant:f}=n,m=(0,l.A)(n,xR),g=DO({name:["InputWrapper",h],props:n,classes:yR,className:r,style:i,classNames:o,styles:a,unstyled:c,rootSelector:"error",vars:u,varsResolver:AR}),v=vR(),y=p&&(null===v||void 0===v?void 0:v.getStyles)||g;return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({component:"p",ref:t,variant:f,size:d},y("error",null!==v&&void 0!==v&&v.getStyles?{className:r,style:i}:void 0)),m))});ER.classes=yR,ER.displayName="@mantine/core/InputError";const DR=["classNames","className","style","styles","unstyled","vars","labelElement","size","required","htmlFor","onMouseDown","children","__staticSelector","variant","mod"],MR={labelElement:"label"},NR=(e,t)=>{let{size:n}=t;return{label:{"--input-label-size":jT(n),"--input-asterisk-color":void 0}}},TR=YO((e,t)=>{const n=uO("InputLabel",MR,e),o=uO("InputLabel",MR,n),{classNames:r,className:i,style:a,styles:c,unstyled:u,vars:d,labelElement:h,size:p,required:f,htmlFor:m,onMouseDown:g,children:v,__staticSelector:y,variant:b,mod:w}=o,k=(0,l.A)(o,DR),C=DO({name:["InputWrapper",y],props:n,classes:yR,className:i,style:a,classNames:r,styles:c,unstyled:u,rootSelector:"label",vars:d,varsResolver:NR}),x=vR(),S=(null===x||void 0===x?void 0:x.getStyles)||C;return(0,Ax.jsxs)(XO,(0,s.A)((0,s.A)((0,s.A)({},S("label",null!==x&&void 0!==x&&x.getStyles?{className:i,style:a}:void 0)),{},{component:h,variant:b,size:p,ref:t,htmlFor:"label"===h?m:void 0,mod:[{required:f},w],onMouseDown:e=>{null===g||void 0===g||g(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault()}},k),{},{children:[v,f&&(0,Ax.jsx)("span",(0,s.A)((0,s.A)({},S("required")),{},{"aria-hidden":!0,children:" *"}))]}))});TR.classes=yR,TR.displayName="@mantine/core/InputLabel";const OR=["classNames","className","style","styles","unstyled","vars","__staticSelector","variant","error","mod"],PR={},_R=YO((e,t)=>{const n=uO("InputPlaceholder",PR,e),o=uO("InputPlaceholder",PR,n),{classNames:r,className:i,style:a,styles:c,unstyled:u,vars:d,__staticSelector:h,variant:p,error:f,mod:m}=o,g=(0,l.A)(o,OR),v=DO({name:["InputPlaceholder",h],props:n,classes:yR,className:i,style:a,classNames:r,styles:c,unstyled:u,rootSelector:"placeholder"});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({},v("placeholder")),{},{mod:[{error:!!f},m],component:"span",variant:p,ref:t},g))});function LR(e,t){let{hasDescription:n,hasError:o}=t;const r=e.findIndex(e=>"input"===e),i=e.slice(0,r),s=e.slice(r+1),l=n&&i.includes("description")||o&&i.includes("error");return{offsetBottom:n&&s.includes("description")||o&&s.includes("error"),offsetTop:l}}_R.classes=yR,_R.displayName="@mantine/core/InputPlaceholder";const RR=["classNames","className","style","styles","unstyled","vars","size","variant","__staticSelector","inputContainer","inputWrapperOrder","label","error","description","labelProps","descriptionProps","errorProps","labelElement","children","withAsterisk","id","required","__stylesApiProps","mod"],BR={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},IR=(e,t)=>{let{size:n}=t;return{label:{"--input-label-size":jT(n),"--input-asterisk-color":void 0},error:{"--input-error-size":void 0===n?void 0:"calc(".concat(jT(n)," - ").concat(LT(2),")")},description:{"--input-description-size":void 0===n?void 0:"calc(".concat(jT(n)," - ").concat(LT(2),")")}}},FR=YO((e,t)=>{const n=uO("InputWrapper",BR,e),{classNames:r,className:i,style:a,styles:c,unstyled:u,vars:d,size:h,variant:p,__staticSelector:f,inputContainer:m,inputWrapperOrder:g,label:v,error:y,description:b,labelProps:w,descriptionProps:k,errorProps:C,labelElement:x,children:S,withAsterisk:A,id:E,required:D,__stylesApiProps:M,mod:N}=n,T=(0,l.A)(n,RR),O=DO({name:["InputWrapper",f],props:M||n,classes:yR,className:i,style:a,classNames:r,styles:c,unstyled:u,vars:d,varsResolver:IR}),P={size:h,variant:p,__staticSelector:f},_=W_(E),L="boolean"===typeof A?A:D,R=(null===C||void 0===C?void 0:C.id)||"".concat(_,"-error"),B=(null===k||void 0===k?void 0:k.id)||"".concat(_,"-description"),I=_,F=!!y&&"boolean"!==typeof y,j=!!b,z="".concat(F?R:""," ").concat(j?B:""),H=z.trim().length>0?z.trim():void 0,V=(null===w||void 0===w?void 0:w.id)||"".concat(_,"-label"),U=v&&(0,Ax.jsx)(TR,(0,s.A)((0,s.A)((0,s.A)({labelElement:x,id:V,htmlFor:I,required:L},P),w),{},{children:v}),"label"),$=j&&(0,Ax.jsx)(CR,(0,s.A)((0,s.A)((0,s.A)({},k),P),{},{size:(null===k||void 0===k?void 0:k.size)||P.size,id:(null===k||void 0===k?void 0:k.id)||B,children:b}),"description"),W=(0,Ax.jsx)(o.Fragment,{children:m(S)},"input"),q=F&&(0,o.createElement)(ER,(0,s.A)((0,s.A)((0,s.A)({},C),P),{},{size:(null===C||void 0===C?void 0:C.size)||P.size,key:"error",id:(null===C||void 0===C?void 0:C.id)||R}),y),G=g.map(e=>{switch(e){case"label":return U;case"input":return W;case"description":return $;case"error":return q;default:return null}});return(0,Ax.jsx)(gR,{value:(0,s.A)({getStyles:O,describedBy:H,inputId:I,labelId:V},LR(g,{hasDescription:j,hasError:F})),children:(0,Ax.jsx)(XO,(0,s.A)((0,s.A)((0,s.A)({ref:t,variant:p,size:h,mod:[{error:!!y},N]},O("root")),T),{},{children:G}))})});FR.classes=yR,FR.displayName="@mantine/core/InputWrapper";const jR=["classNames","className","style","styles","unstyled","required","__staticSelector","__stylesApiProps","size","wrapperProps","error","disabled","leftSection","leftSectionProps","leftSectionWidth","rightSection","rightSectionProps","rightSectionWidth","rightSectionPointerEvents","leftSectionPointerEvents","variant","vars","pointer","multiline","radius","id","withAria","withErrorStyles","mod","inputSize","__clearSection","__clearable","__defaultRightSection"],zR={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},HR=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":BT(t.size,"input-height"),"--input-fz":jT(t.size),"--input-radius":void 0===t.radius?void 0:FT(t.radius),"--input-left-section-width":void 0!==t.leftSectionWidth?LT(t.leftSectionWidth):void 0,"--input-right-section-width":void 0!==t.rightSectionWidth?LT(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?BT(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),VR=iP((e,t)=>{const n=uO("Input",zR,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,required:u,__staticSelector:d,__stylesApiProps:h,size:p,wrapperProps:f,error:m,disabled:g,leftSection:v,leftSectionProps:y,leftSectionWidth:b,rightSection:w,rightSectionProps:k,rightSectionWidth:C,rightSectionPointerEvents:x,leftSectionPointerEvents:S,variant:A,vars:E,pointer:D,multiline:M,radius:N,id:T,withAria:O,withErrorStyles:P,mod:_,inputSize:L,__clearSection:R,__clearable:B,__defaultRightSection:I}=n,F=(0,l.A)(n,jR),{styleProps:j,rest:z}=IO(F),H=vR(),V={offsetBottom:null===H||void 0===H?void 0:H.offsetBottom,offsetTop:null===H||void 0===H?void 0:H.offsetTop},U=DO({name:["Input",d],props:h||n,classes:yR,className:r,style:i,classNames:o,styles:a,unstyled:c,stylesCtx:V,rootSelector:"wrapper",vars:E,varsResolver:HR}),$=O?{required:u,disabled:g,"aria-invalid":!!m,"aria-describedby":null===H||void 0===H?void 0:H.describedBy,id:(null===H||void 0===H?void 0:H.inputId)||T}:{},W=w||B&&R||I;return(0,Ax.jsx)(oR,{value:{size:p||"sm"},children:(0,Ax.jsxs)(XO,(0,s.A)((0,s.A)((0,s.A)((0,s.A)({},U("wrapper")),j),f),{},{mod:[{error:!!m&&P,pointer:D,disabled:g,multiline:M,"data-with-right-section":!!W,"data-with-left-section":!!v},_],variant:A,size:p,children:[v&&(0,Ax.jsx)("div",(0,s.A)((0,s.A)((0,s.A)({},y),{},{"data-position":"left"},U("section",{className:null===y||void 0===y?void 0:y.className,style:null===y||void 0===y?void 0:y.style})),{},{children:v})),(0,Ax.jsx)(XO,(0,s.A)((0,s.A)((0,s.A)({component:"input"},z),$),{},{ref:t,required:u,mod:{disabled:g,error:!!m&&P},variant:A,__size:L},U("input"))),W&&(0,Ax.jsx)("div",(0,s.A)((0,s.A)((0,s.A)({},k),{},{"data-position":"right"},U("section",{className:null===k||void 0===k?void 0:k.className,style:null===k||void 0===k?void 0:k.style})),{},{children:W}))]}))})});VR.classes=yR,VR.Wrapper=FR,VR.Label=TR,VR.Error=ER,VR.Description=CR,VR.Placeholder=_R,VR.ClearButton=mR,VR.displayName="@mantine/core/Input";const UR=["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","__stylesApiProps","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk","variant","vars","mod"];const $R=["inputProps","wrapperProps"],WR={__staticSelector:"InputBase",withAria:!0},qR=iP((e,t)=>{const n=function(e,t,n){const o=uO(e,t,n),{label:r,description:i,error:a,required:c,classNames:u,styles:d,className:h,unstyled:p,__staticSelector:f,__stylesApiProps:m,errorProps:g,labelProps:v,descriptionProps:y,wrapperProps:b,id:w,size:k,style:C,inputContainer:x,inputWrapperOrder:S,withAsterisk:A,variant:E,vars:D,mod:M}=o,N=(0,l.A)(o,UR),{styleProps:T,rest:O}=IO(N),P=(0,s.A)({label:r,description:i,error:a,required:c,classNames:u,className:h,__staticSelector:f,__stylesApiProps:m||o,errorProps:g,labelProps:v,descriptionProps:y,unstyled:p,styles:d,size:k,style:C,inputContainer:x,inputWrapperOrder:S,withAsterisk:A,variant:E,id:w,mod:M},b);return(0,s.A)((0,s.A)({},O),{},{classNames:u,styles:d,unstyled:p,wrapperProps:(0,s.A)((0,s.A)({},P),T),inputProps:{required:c,classNames:u,styles:d,unstyled:p,size:k,__staticSelector:f,__stylesApiProps:m||o,error:a,variant:E,id:w}})}("InputBase",WR,e),{inputProps:o,wrapperProps:r}=n,i=(0,l.A)(n,$R);return(0,Ax.jsx)(VR.Wrapper,(0,s.A)((0,s.A)({},r),{},{children:(0,Ax.jsx)(VR,(0,s.A)((0,s.A)((0,s.A)({},o),i),{},{ref:t}))}))});qR.classes=(0,s.A)((0,s.A)({},VR.classes),VR.Wrapper.classes),qR.displayName="@mantine/core/InputBase";const GR={},KR=YO((e,t)=>{const n=uO("TextInput",GR,e);return(0,Ax.jsx)(qR,(0,s.A)((0,s.A)({component:"input",ref:t},n),{},{__staticSelector:"TextInput"}))});function ZR(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}KR.classes=qR.classes,KR.displayName="@mantine/core/TextInput";const JR=["mousedown","touchstart"];var XR={root:"m_9814e45f"};const QR=["classNames","className","style","styles","unstyled","vars","fixed","center","children","radius","zIndex","gradient","blur","color","backgroundOpacity","mod"],YR={zIndex:f_("modal")},eB=(e,t)=>{let{gradient:n,color:o,backgroundOpacity:r,blur:i,radius:s,zIndex:l}=t;return{root:{"--overlay-bg":n||(void 0!==o||void 0!==r)&&QT(o||"#000",null!==r&&void 0!==r?r:.6)||void 0,"--overlay-filter":i?"blur(".concat(LT(i),")"):void 0,"--overlay-radius":void 0===s?void 0:FT(s),"--overlay-z-index":null===l||void 0===l?void 0:l.toString()}}},tB=iP((e,t)=>{const n=uO("Overlay",YR,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,vars:u,fixed:d,center:h,children:p,radius:f,zIndex:m,gradient:g,blur:v,color:y,backgroundOpacity:b,mod:w}=n,k=(0,l.A)(n,QR),C=DO({name:"Overlay",props:n,classes:XR,className:r,style:i,classNames:o,styles:a,unstyled:c,vars:u,varsResolver:eB});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)((0,s.A)({ref:t},C("root")),{},{mod:[{center:h,fixed:d},w]},k),{},{children:p}))});tB.classes=XR,tB.displayName="@mantine/core/Overlay";const[nB,oB]=CL("Popover component was not found in the tree");const rB=()=>{};function iB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{active:!0};return"function"===typeof e&&t.active?n=>{var o;"Escape"===n.key&&(e(n),null===(o=t.onTrigger)||void 0===o||o.call(t))}:t.onKeyDown||rB}const sB=/input|select|textarea|button|object/,lB="a, input, select, textarea, button, object, [tabindex]";function aB(e){return"none"===e.style.display}function cB(e){let t=e.getAttribute("tabindex");return null===t&&(t=void 0),parseInt(t,10)}function uB(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(cB(e));return(sB.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&function(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||"hidden"===e.getAttribute("type"))return!1;let t=e;for(;t&&t!==document.body&&11!==t.nodeType;){if(aB(t))return!1;t=t.parentNode}return!0}(e)}function dB(e){const t=cB(e);return(Number.isNaN(t)||t>=0)&&uB(e)}function hB(e,t){const n=(o=e,Array.from(o.querySelectorAll(lB)).filter(dB));var o;if(!n.length)return void t.preventDefault();const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const l=i.activeElement;if("INPUT"===l.tagName&&"radio"===l.getAttribute("type")){const e=n.filter(e=>"radio"===e.getAttribute("type")&&e.getAttribute("name")===l.getAttribute("name"));s=e.includes(r)}if(!s)return;t.preventDefault();const a=n[t.shiftKey?n.length-1:0];a&&a.focus()}function pB(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,o.useRef)(null),n=e=>{let t=e.querySelector("[data-autofocus]");if(!t){const n=Array.from(e.querySelectorAll(lB));t=n.find(dB)||n.find(uB)||null,!t&&uB(e)&&(t=e)}t&&t.focus({preventScroll:!0})},r=(0,o.useCallback)(o=>{e&&null!==o&&t.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),t.current=o):t.current=null)},[e]);return(0,o.useEffect)(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const o=e=>{"Tab"===e.key&&t.current&&hB(t.current,e)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e]),r}var fB={root:"m_515a97f8"};const mB=["classNames","className","style","styles","unstyled","vars"],gB={},vB=YO((e,t)=>{const n=uO("VisuallyHidden",gB,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,vars:u}=n,d=(0,l.A)(n,mB),h=DO({name:"VisuallyHidden",classes:fB,props:n,className:r,style:i,classNames:o,styles:a,unstyled:c});return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({component:"span",ref:t},h("root")),d))});function yB(e){let{children:t,active:n=!0,refProp:r="ref",innerRef:i}=e;const s=d_(pB(n),i);return h_(t)?(0,o.cloneElement)(t,{[r]:s}):t}function bB(e){return(0,Ax.jsx)(vB,(0,s.A)({tabIndex:-1,"data-autofocus":!0},e))}vB.classes=fB,vB.displayName="@mantine/core/VisuallyHidden",yB.displayName="@mantine/core/FocusTrap",bB.displayName="@mantine/core/FocusTrapInitialFocus",yB.InitialFocus=bB;var wB={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const kB=["className","style","vars","children","onKeyDownCapture","variant","classNames","styles"],CB={},xB=YO((e,t)=>{var n,r,i,a,c;const u=uO("PopoverDropdown",CB,e),{className:d,style:h,vars:p,children:f,onKeyDownCapture:m,variant:g,classNames:v,styles:y}=u,b=(0,l.A)(u,kB),w=oB(),k=function(e){let{opened:t,shouldReturnFocus:n=!0}=e;const r=(0,o.useRef)(null),i=()=>{var e;r.current&&"focus"in r.current&&"function"===typeof r.current.focus&&(null===(e=r.current)||void 0===e||e.focus({preventScroll:!0}))};return NP(()=>{let e=-1;const o=t=>{"Tab"===t.key&&window.clearTimeout(e)};return document.addEventListener("keydown",o),t?r.current=document.activeElement:n&&(e=window.setTimeout(i,10)),()=>{window.clearTimeout(e),document.removeEventListener("keydown",o)}},[t,n]),i}({opened:w.opened,shouldReturnFocus:w.returnFocus}),C=w.withRoles?{"aria-labelledby":w.getTargetId(),id:w.getDropdownId(),role:"dialog",tabIndex:-1}:{},x=d_(t,w.floating);return w.disabled?null:(0,Ax.jsx)(P_,(0,s.A)((0,s.A)({},w.portalProps),{},{withinPortal:w.withinPortal,children:(0,Ax.jsx)(OP,(0,s.A)((0,s.A)({mounted:w.opened},w.transitionProps),{},{transition:(null===(n=w.transitionProps)||void 0===n?void 0:n.transition)||"fade",duration:null!==(r=null===(i=w.transitionProps)||void 0===i?void 0:i.duration)&&void 0!==r?r:150,keepMounted:w.keepMounted,exitDuration:"number"===typeof(null===(a=w.transitionProps)||void 0===a?void 0:a.exitDuration)?w.transitionProps.exitDuration:null===(c=w.transitionProps)||void 0===c?void 0:c.duration,children:e=>{var t,n;return(0,Ax.jsx)(yB,{active:w.trapFocus&&w.opened,innerRef:x,children:(0,Ax.jsxs)(XO,(0,s.A)((0,s.A)((0,s.A)((0,s.A)({},C),b),{},{variant:g,onKeyDownCapture:iB(()=>{var e,t;null===(e=w.onClose)||void 0===e||e.call(w),null===(t=w.onDismiss)||void 0===t||t.call(w)},{active:w.closeOnEscape,onTrigger:k,onKeyDown:m}),"data-position":w.placement,"data-fixed":"fixed"===w.floatingStrategy||void 0},w.getStyles("dropdown",{className:d,props:u,classNames:v,styles:y,style:[(0,s.A)((0,s.A)({},e),{},{zIndex:w.zIndex,top:null!==(t=w.y)&&void 0!==t?t:0,left:null!==(n=w.x)&&void 0!==n?n:0,width:"target"===w.width?void 0:LT(w.width)}),w.resolvedStyles.dropdown,null===y||void 0===y?void 0:y.dropdown,h]})),{},{children:[f,(0,Ax.jsx)(S_,(0,s.A)({ref:w.arrowRef,arrowX:w.arrowX,arrowY:w.arrowY,visible:w.withArrow,position:w.placement,arrowSize:w.arrowSize,arrowRadius:w.arrowRadius,arrowOffset:w.arrowOffset,arrowPosition:w.arrowPosition},w.getStyles("arrow",{props:u,classNames:v,styles:y})))]}))})}}))}))});xB.classes=wB,xB.displayName="@mantine/core/PopoverDropdown";const SB=["children","refProp","popupType"],AB={refProp:"ref",popupType:"dialog"},EB=YO((e,t)=>{const n=uO("PopoverTarget",AB,e),{children:r,refProp:i,popupType:a}=n,c=(0,l.A)(n,SB);if(!h_(r))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const u=c,d=oB(),h=d_(d.reference,m_(r),t),p=d.withRoles?{"aria-haspopup":a,"aria-expanded":d.opened,"aria-controls":d.getDropdownId(),id:d.getTargetId()}:{};return(0,o.cloneElement)(r,(0,s.A)((0,s.A)((0,s.A)((0,s.A)({},u),p),d.targetProps),{},{className:gO(d.targetProps.className,u.className,r.props.className),[i]:h},d.controlled?null:{onClick:d.onToggle}))});EB.displayName="@mantine/core/PopoverTarget";const DB=["rects","availableWidth","availableHeight"];function MB(e,t){const n=function(e){if(void 0===e)return{shift:!0,flip:!0};const t=(0,s.A)({},e);return void 0===e.shift&&(t.shift=!0),void 0===e.flip&&(t.flip=!0),t}(e.middlewares),o=[DA(e.offset)];return n.shift&&o.push(MA("boolean"===typeof n.shift?{limiter:NA(),padding:5}:(0,s.A)({limiter:NA(),padding:5},n.shift))),n.flip&&o.push("boolean"===typeof n.flip?TA():TA(n.flip)),n.inline&&o.push("boolean"===typeof n.inline?PA():PA(n.inline)),o.push(_A({element:e.arrowRef,padding:e.arrowOffset})),(n.size||"target"===e.width)&&o.push(OA((0,s.A)((0,s.A)({},"boolean"===typeof n.size?{}:n.size),{},{apply(o){var r,i;let{rects:a,availableWidth:c,availableHeight:u}=o,d=(0,l.A)(o,DB);const h=null!==(r=null===(i=t().refs.floating.current)||void 0===i?void 0:i.style)&&void 0!==r?r:{};n.size&&("object"===typeof n.size&&n.size.apply?n.size.apply((0,s.A)({rects:a,availableWidth:c,availableHeight:u},d)):Object.assign(h,{maxWidth:"".concat(c,"px"),maxHeight:"".concat(u,"px")})),"target"===e.width&&Object.assign(h,{width:"".concat(a.reference.width,"px")})}}))),o}const NB=["children","position","offset","onPositionChange","positionDependencies","opened","transitionProps","onExitTransitionEnd","onEnterTransitionEnd","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","unstyled","classNames","styles","closeOnClickOutside","withinPortal","portalProps","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onDismiss","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","__staticSelector","withRoles","disabled","returnFocus","variant","keepMounted","vars","floatingStrategy","withOverlay","overlayProps"],TB={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:f_("popover"),__staticSelector:"Popover",width:"max-content"},OB=(e,t)=>{let{radius:n,shadow:o}=t;return{dropdown:{"--popover-radius":void 0===n?void 0:FT(n),"--popover-shadow":HT(o)}}};function PB(e){var t,n;const r=uO("Popover",TB,e),{children:i,position:a,offset:c,onPositionChange:u,positionDependencies:d,opened:h,transitionProps:p,onExitTransitionEnd:f,onEnterTransitionEnd:m,width:g,middlewares:v,withArrow:y,arrowSize:b,arrowOffset:w,arrowRadius:k,arrowPosition:C,unstyled:x,classNames:S,styles:A,closeOnClickOutside:E,withinPortal:D,portalProps:M,closeOnEscape:N,clickOutsideEvents:T,trapFocus:O,onClose:P,onDismiss:_,onOpen:L,onChange:R,zIndex:B,radius:I,shadow:F,id:j,defaultOpened:z,__staticSelector:H,withRoles:V,disabled:U,returnFocus:$,variant:W,keepMounted:q,vars:G,floatingStrategy:K,withOverlay:Z,overlayProps:J}=r,X=(0,l.A)(r,NB),Q=DO({name:H,props:r,classes:wB,classNames:S,styles:A,unstyled:x,rootSelector:"dropdown",vars:G,varsResolver:OB}),{resolvedStyles:Y}=iR({classNames:S,styles:A,props:r}),ee=(0,o.useRef)(null),[te,ne]=(0,o.useState)(null),[oe,re]=(0,o.useState)(null),{dir:ie}=v_(),se=W_(j),le=function(e){const[t,n]=Y_({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=(0,o.useRef)(t),i=NE({strategy:e.strategy,placement:e.position,middleware:MB(e,()=>i)});return q_({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:i}),NP(()=>{var t;null===(t=e.onPositionChange)||void 0===t||t.call(e,i.placement)},[i.placement]),NP(()=>{var n,o;t!==r.current&&(t?null===(n=e.onOpen)||void 0===n||n.call(e):null===(o=e.onClose)||void 0===o||o.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:i,controlled:"boolean"===typeof e.opened,opened:t,onClose:()=>{t&&!e.disabled&&n(!1)},onToggle:()=>!e.disabled&&n(!t)}}({middlewares:v,width:g,position:y_(ie,a),offset:"number"===typeof c?c+(y?b/2:0):c,arrowRef:ee,arrowOffset:w,onPositionChange:u,positionDependencies:d,opened:h,defaultOpened:z,onChange:R,onOpen:L,onClose:P,onDismiss:_,strategy:K,disabled:U});!function(e,t,n){const r=(0,o.useRef)(null);(0,o.useEffect)(()=>{const o=t=>{const{target:o}=null!==t&&void 0!==t?t:{};if(Array.isArray(n)){const r=(null===o||void 0===o?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&"HTML"!==o.tagName;n.every(e=>!!e&&!t.composedPath().includes(e))&&!r&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||JR).forEach(e=>document.addEventListener(e,o)),()=>{(t||JR).forEach(e=>document.removeEventListener(e,o))}},[r,e,n])}(()=>{E&&(le.onClose(),null===_||void 0===_||_())},T,[te,oe]);const ae=(0,o.useCallback)(e=>{ne(e),le.floating.refs.setReference(e)},[le.floating.refs.setReference]),ce=(0,o.useCallback)(e=>{re(e),le.floating.refs.setFloating(e)},[le.floating.refs.setFloating]),ue=(0,o.useCallback)(()=>{var e;null===p||void 0===p||null===(e=p.onExited)||void 0===e||e.call(p),null===f||void 0===f||f()},[null===p||void 0===p?void 0:p.onExited,f]),de=(0,o.useCallback)(()=>{var e;null===p||void 0===p||null===(e=p.onEntered)||void 0===e||e.call(p),null===m||void 0===m||m()},[null===p||void 0===p?void 0:p.onEntered,m]);return(0,Ax.jsxs)(nB,{value:{returnFocus:$,disabled:U,controlled:le.controlled,reference:ae,floating:ce,x:le.floating.x,y:le.floating.y,arrowX:null===(t=le.floating)||void 0===t||null===(t=t.middlewareData)||void 0===t||null===(t=t.arrow)||void 0===t?void 0:t.x,arrowY:null===(n=le.floating)||void 0===n||null===(n=n.middlewareData)||void 0===n||null===(n=n.arrow)||void 0===n?void 0:n.y,opened:le.opened,arrowRef:ee,transitionProps:(0,s.A)((0,s.A)({},p),{},{onExited:ue,onEntered:de}),width:g,withArrow:y,arrowSize:b,arrowOffset:w,arrowRadius:k,arrowPosition:C,placement:le.floating.placement,trapFocus:O,withinPortal:D,portalProps:M,zIndex:B,radius:I,shadow:F,closeOnEscape:N,onDismiss:_,onClose:le.onClose,onToggle:le.onToggle,getTargetId:()=>"".concat(se,"-target"),getDropdownId:()=>"".concat(se,"-dropdown"),withRoles:V,targetProps:X,__staticSelector:H,classNames:S,styles:A,unstyled:x,variant:W,keepMounted:q,getStyles:Q,resolvedStyles:Y,floatingStrategy:K},children:[i,Z&&(0,Ax.jsx)(OP,{transition:"fade",mounted:le.opened,duration:(null===p||void 0===p?void 0:p.duration)||250,exitDuration:(null===p||void 0===p?void 0:p.exitDuration)||250,children:e=>(0,Ax.jsx)(P_,{withinPortal:D,children:(0,Ax.jsx)(tB,(0,s.A)((0,s.A)({},J),Q("overlay",{className:null===J||void 0===J?void 0:J.className,style:[e,null===J||void 0===J?void 0:J.style]})))})})]})}PB.Target=EB,PB.Dropdown=xB,PB.displayName="@mantine/core/Popover",PB.extend=e=>e;const[_B,LB]=CL("Menu component was not found in the tree");var RB={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const BB=["classNames","className","style","styles","vars"],IB={},FB=YO((e,t)=>{const n=uO("MenuDivider",IB,e),{classNames:o,className:r,style:i,styles:a,vars:c}=n,u=(0,l.A)(n,BB),d=LB();return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({ref:t},d.getStyles("divider",{className:r,style:i,styles:a,classNames:o})),u))});function jB(e,t){return n=>{null===e||void 0===e||e(n),null===t||void 0===t||t(n)}}FB.classes=RB,FB.displayName="@mantine/core/MenuDivider";const zB=["classNames","className","style","styles","vars","onMouseEnter","onMouseLeave","onKeyDown","children"],HB={},VB=YO((e,t)=>{const n=uO("MenuDropdown",HB,e),{classNames:r,className:i,style:a,styles:c,vars:u,onMouseEnter:d,onMouseLeave:h,onKeyDown:p,children:f}=n,m=(0,l.A)(n,zB),g=(0,o.useRef)(null),v=LB(),y=jB(p,e=>{var t;"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),null===(t=g.current)||void 0===t||null===(t=t.querySelectorAll("[data-menu-item]:not(:disabled)")[0])||void 0===t||t.focus())}),b=jB(d,()=>("hover"===v.trigger||"click-hover"===v.trigger)&&v.openDropdown()),w=jB(h,()=>("hover"===v.trigger||"click-hover"===v.trigger)&&v.closeDropdown());return(0,Ax.jsxs)(PB.Dropdown,(0,s.A)((0,s.A)((0,s.A)({},m),{},{onMouseEnter:b,onMouseLeave:w,role:"menu","aria-orientation":"vertical",ref:d_(t,g)},v.getStyles("dropdown",{className:i,style:a,styles:c,classNames:r,withStaticClass:!1})),{},{tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:y,children:[v.withInitialFocusPlaceholder&&(0,Ax.jsx)("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),f]}))});function UB(e){let{parentSelector:t,siblingSelector:n,onKeyDown:o,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:l}=e;return e=>{var a;null===o||void 0===o||o(e);const c=Array.from((null===(a=ZR(e.currentTarget,t))||void 0===a?void 0:a.querySelectorAll(n))||[]).filter(n=>function(e,t,n){return ZR(e,n)===ZR(t,n)}(e.currentTarget,n,t)),u=c.findIndex(t=>e.currentTarget===t),d=function(e,t,n){for(let o=e+1;o<t.length;o+=1)if(!t[o].disabled)return o;if(n)for(let o=0;o<t.length;o+=1)if(!t[o].disabled)return o;return e}(u,c,r),h=function(e,t,n){for(let o=e-1;o>=0;o-=1)if(!t[o].disabled)return o;if(n)for(let o=t.length-1;o>-1;o-=1)if(!t[o].disabled)return o;return e}(u,c,r),p="rtl"===s?h:d,f="rtl"===s?d:h;switch(e.key){case"ArrowRight":"horizontal"===l&&(e.stopPropagation(),e.preventDefault(),c[p].focus(),i&&c[p].click());break;case"ArrowLeft":"horizontal"===l&&(e.stopPropagation(),e.preventDefault(),c[f].focus(),i&&c[f].click());break;case"ArrowUp":"vertical"===l&&(e.stopPropagation(),e.preventDefault(),c[h].focus(),i&&c[h].click());break;case"ArrowDown":"vertical"===l&&(e.stopPropagation(),e.preventDefault(),c[d].focus(),i&&c[d].click());break;case"Home":e.stopPropagation(),e.preventDefault(),!c[0].disabled&&c[0].focus();break;case"End":{e.stopPropagation(),e.preventDefault();const t=c.length-1;!c[t].disabled&&c[t].focus();break}}}}VB.classes=RB,VB.displayName="@mantine/core/MenuDropdown";const $B=["classNames","className","style","styles","vars","color","closeMenuOnClick","leftSection","rightSection","children","disabled","data-disabled"],WB={},qB=iP((e,t)=>{const n=uO("MenuItem",WB,e),{classNames:r,className:i,style:a,styles:c,vars:u,color:d,closeMenuOnClick:h,leftSection:p,rightSection:f,children:m,disabled:g,"data-disabled":v}=n,y=(0,l.A)(n,$B),b=LB(),w=aO(),{dir:k}=v_(),C=(0,o.useRef)(null),x=b.getItemIndex(C.current),S=y,A=jB(S.onMouseLeave,()=>b.setHovered(-1)),E=jB(S.onMouseEnter,()=>b.setHovered(b.getItemIndex(C.current))),D=jB(S.onClick,()=>{v||("boolean"===typeof h?h&&b.closeDropdownImmediately():b.closeOnItemClick&&b.closeDropdownImmediately())}),M=jB(S.onFocus,()=>b.setHovered(b.getItemIndex(C.current))),N=d?w.variantColorResolver({color:d,theme:w,variant:"light"}):void 0,T=d?ZT({color:d,theme:w}):null;return(0,Ax.jsxs)(RP,(0,s.A)((0,s.A)((0,s.A)({},y),{},{unstyled:b.unstyled,tabIndex:b.menuItemTabIndex,onFocus:M},b.getStyles("item",{className:i,style:a,styles:c,classNames:r})),{},{ref:d_(C,t),role:"menuitem",disabled:g,"data-menu-item":!0,"data-disabled":g||v||void 0,"data-hovered":b.hovered===x||void 0,"data-mantine-stop-propagation":!0,onMouseEnter:E,onMouseLeave:A,onClick:D,onKeyDown:UB({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:b.loop,dir:k,orientation:"vertical",onKeyDown:S.onKeyDown}),__vars:{"--menu-item-color":null!==T&&void 0!==T&&T.isThemeColor&&void 0===(null===T||void 0===T?void 0:T.shade)?"var(--mantine-color-".concat(T.color,"-6)"):null===N||void 0===N?void 0:N.color,"--menu-item-hover":null===N||void 0===N?void 0:N.hover},children:[p&&(0,Ax.jsx)("div",(0,s.A)((0,s.A)({},b.getStyles("itemSection",{styles:c,classNames:r})),{},{"data-position":"left",children:p})),m&&(0,Ax.jsx)("div",(0,s.A)((0,s.A)({},b.getStyles("itemLabel",{styles:c,classNames:r})),{},{children:m})),f&&(0,Ax.jsx)("div",(0,s.A)((0,s.A)({},b.getStyles("itemSection",{styles:c,classNames:r})),{},{"data-position":"right",children:f}))]}))});qB.classes=RB,qB.displayName="@mantine/core/MenuItem";const GB=["classNames","className","style","styles","vars"],KB={},ZB=YO((e,t)=>{const n=uO("MenuLabel",KB,e),{classNames:o,className:r,style:i,styles:a,vars:c}=n,u=(0,l.A)(n,GB),d=LB();return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({ref:t},d.getStyles("label",{className:r,style:i,styles:a,classNames:o})),u))});ZB.classes=RB,ZB.displayName="@mantine/core/MenuLabel";const JB=["children","refProp"],XB={refProp:"ref"},QB=(0,o.forwardRef)((e,t)=>{const n=uO("MenuTarget",XB,e),{children:r,refProp:i}=n,a=(0,l.A)(n,JB);if(!h_(r))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=LB(),u=r.props,d=jB(u.onClick,()=>{"click"===c.trigger?c.toggleDropdown():"click-hover"===c.trigger&&(c.setOpenedViaClick(!0),c.opened||c.openDropdown())}),h=jB(u.onMouseEnter,()=>("hover"===c.trigger||"click-hover"===c.trigger)&&c.openDropdown()),p=jB(u.onMouseLeave,()=>{"hover"===c.trigger?c.closeDropdown():"click-hover"!==c.trigger||c.openedViaClick||c.closeDropdown()});return(0,Ax.jsx)(PB.Target,(0,s.A)((0,s.A)({refProp:i,popupType:"menu",ref:t},a),{},{children:(0,o.cloneElement)(r,{onClick:d,onMouseEnter:h,onMouseLeave:p,"data-expanded":!!c.opened||void 0})}))});QB.displayName="@mantine/core/MenuTarget";const YB=["children","onOpen","onClose","opened","defaultOpened","trapFocus","onChange","closeOnItemClick","loop","closeOnEscape","trigger","openDelay","closeDelay","classNames","styles","unstyled","variant","vars","menuItemTabIndex","keepMounted","withInitialFocusPlaceholder"],eI={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function tI(e){const t=uO("Menu",eI,e),{children:n,onOpen:r,onClose:i,opened:a,defaultOpened:c,trapFocus:u,onChange:d,closeOnItemClick:h,loop:p,closeOnEscape:f,trigger:m,openDelay:g,closeDelay:v,classNames:y,styles:b,unstyled:w,variant:k,vars:C,menuItemTabIndex:x,keepMounted:S,withInitialFocusPlaceholder:A}=t,E=(0,l.A)(t,YB),D=DO({name:"Menu",classes:RB,props:t,classNames:y,styles:b,unstyled:w}),[M,{setHovered:N,resetHovered:T}]=function(){const[e,t]=(0,o.useState)(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}(),[O,P]=Y_({value:a,defaultValue:c,finalValue:!1,onChange:d}),[_,L]=(0,o.useState)(!1),R=()=>{P(!1),L(!1),O&&(null===i||void 0===i||i())},B=()=>{P(!0),!O&&(null===r||void 0===r||r())},I=()=>{O?R():B()},{openDropdown:F,closeDropdown:j}=function(e){let{open:t,close:n,openDelay:r,closeDelay:i}=e;const s=(0,o.useRef)(-1),l=(0,o.useRef)(-1),a=()=>{window.clearTimeout(s.current),window.clearTimeout(l.current)};return(0,o.useEffect)(()=>a,[]),{openDropdown:()=>{a(),0===r||void 0===r?t():s.current=window.setTimeout(t,r)},closeDropdown:()=>{a(),0===i||void 0===i?n():l.current=window.setTimeout(n,i)}}}({open:B,close:R,closeDelay:v,openDelay:g}),{resolvedClassNames:z,resolvedStyles:H}=iR({classNames:y,styles:b,props:t});return NP(()=>{T()},[O]),(0,Ax.jsx)(_B,{value:{getStyles:D,opened:O,toggleDropdown:I,getItemIndex:e=>function(e,t,n){var o;return n?Array.from((null===(o=ZR(n,t))||void 0===o?void 0:o.querySelectorAll(e))||[]).findIndex(e=>e===n):null}("[data-menu-item]","[data-menu-dropdown]",e),hovered:M,setHovered:N,openedViaClick:_,setOpenedViaClick:L,closeOnItemClick:h,closeDropdown:"click"===m?R:j,openDropdown:"click"===m?B:F,closeDropdownImmediately:R,loop:p,trigger:m,unstyled:w,menuItemTabIndex:x,withInitialFocusPlaceholder:A},children:(0,Ax.jsx)(PB,(0,s.A)((0,s.A)({},E),{},{opened:O,onChange:I,defaultOpened:c,trapFocus:!S&&u,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:H,unstyled:w,variant:k,keepMounted:S,children:n}))})}function nI(e,t){return n=>{if("string"!==typeof n||0===n.trim().length)throw new Error(t);return"".concat(e,"-").concat(n)}}function oI(e){let{color:t,theme:n,autoContrast:o}=e;if(!("boolean"===typeof o?o:n.autoContrast))return"var(--mantine-color-white)";return ZT({color:t||n.primaryColor,theme:n}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function rI(e,t){return oI({color:e.colors[e.primaryColor][WT(e,t)],theme:e,autoContrast:null})}function iI(e,t){return"boolean"===typeof e?e:t.autoContrast}tI.extend=e=>e,tI.withProps=function(e){const t=e;return e=>{const n=(0,o.forwardRef)((n,o)=>(0,Ax.jsx)(t,(0,s.A)((0,s.A)((0,s.A)({},e),n),{},{ref:o})));return n.extend=t.extend,n.displayName="WithProps(".concat(t.displayName,")"),n}}(tI),tI.classes=RB,tI.displayName="@mantine/core/Menu",tI.Item=qB,tI.Label=ZB,tI.Dropdown=VB,tI.Target=QB,tI.Divider=FB;const[sI,lI]=CL("Tabs component was not found in the tree");var aI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const cI=["children","className","grow","justify","classNames","styles","style","mod"],uI={},dI=YO((e,t)=>{const n=uO("TabsList",uI,e),{children:o,className:r,grow:i,justify:a,classNames:c,styles:u,style:d,mod:h}=n,p=(0,l.A)(n,cI),f=lI();return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)((0,s.A)({},p),f.getStyles("list",{className:r,style:d,classNames:c,styles:u,props:n,variant:f.variant})),{},{ref:t,role:"tablist",variant:f.variant,mod:[{grow:i,orientation:f.orientation,placement:"vertical"===f.orientation&&f.placement,inverted:f.inverted},h],"aria-orientation":f.orientation,__vars:{"--tabs-justify":a},children:o}))});dI.classes=aI,dI.displayName="@mantine/core/TabsList";const hI=["children","className","value","classNames","styles","style","mod","keepMounted"],pI={},fI=YO((e,t)=>{const n=uO("TabsPanel",pI,e),{children:o,className:r,value:i,classNames:a,styles:c,style:u,mod:d,keepMounted:h}=n,p=(0,l.A)(n,hI),f=lI(),m=f.value===i,g=f.keepMounted||h||m?o:null;return(0,Ax.jsx)(XO,(0,s.A)((0,s.A)((0,s.A)({},p),f.getStyles("panel",{className:r,classNames:a,styles:c,style:[u,m?void 0:{display:"none"}],props:n})),{},{ref:t,mod:[{orientation:f.orientation},d],role:"tabpanel",id:f.getPanelId(i),"aria-labelledby":f.getTabId(i),children:g}))});fI.classes=aI,fI.displayName="@mantine/core/TabsPanel";const mI=["className","children","rightSection","leftSection","value","onClick","onKeyDown","disabled","color","style","classNames","styles","vars","mod","tabIndex"],gI={},vI=YO((e,t)=>{const n=uO("TabsTab",gI,e),{className:o,children:r,rightSection:i,leftSection:a,value:c,onClick:u,onKeyDown:d,disabled:h,color:p,style:f,classNames:m,styles:g,vars:v,mod:y,tabIndex:b}=n,w=(0,l.A)(n,mI),k=aO(),{dir:C}=v_(),x=lI(),S=c===x.value,A={classNames:m,styles:g,props:n};return(0,Ax.jsxs)(RP,(0,s.A)((0,s.A)((0,s.A)({},w),x.getStyles("tab",(0,s.A)({className:o,style:f,variant:x.variant},A))),{},{disabled:h,unstyled:x.unstyled,variant:x.variant,mod:[{active:S,disabled:h,orientation:x.orientation,inverted:x.inverted,placement:"vertical"===x.orientation&&x.placement},y],ref:t,role:"tab",id:x.getTabId(c),"aria-selected":S,tabIndex:void 0!==b?b:S||null===x.value?0:-1,"aria-controls":x.getPanelId(c),onClick:e=>{x.onChange(x.allowTabDeactivation&&c===x.value?null:c),null===u||void 0===u||u(e)},__vars:{"--tabs-color":p?JT(p,k):void 0},onKeyDown:UB({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:x.activateTabWithKeyboard,loop:x.loop,orientation:x.orientation||"horizontal",dir:C,onKeyDown:d}),children:[a&&(0,Ax.jsx)("span",(0,s.A)((0,s.A)({},x.getStyles("tabSection",A)),{},{"data-position":"left",children:a})),r&&(0,Ax.jsx)("span",(0,s.A)((0,s.A)({},x.getStyles("tabLabel",A)),{},{children:r})),i&&(0,Ax.jsx)("span",(0,s.A)((0,s.A)({},x.getStyles("tabSection",A)),{},{"data-position":"right",children:i}))]}))});vI.classes=aI,vI.displayName="@mantine/core/TabsTab";const yI=["defaultValue","value","onChange","orientation","children","loop","id","activateTabWithKeyboard","allowTabDeactivation","variant","color","radius","inverted","placement","keepMounted","classNames","styles","unstyled","className","style","vars","autoContrast","mod"],bI="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",wI={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},kI=(e,t)=>{let{radius:n,color:o,autoContrast:r}=t;return{root:{"--tabs-radius":FT(n),"--tabs-color":JT(o,e),"--tabs-text-color":iI(r,e)?oI({color:o,theme:e,autoContrast:r}):void 0}}},CI=YO((e,t)=>{const n=uO("Tabs",wI,e),{defaultValue:o,value:r,onChange:i,orientation:a,children:c,loop:u,id:d,activateTabWithKeyboard:h,allowTabDeactivation:p,variant:f,color:m,radius:g,inverted:v,placement:y,keepMounted:b,classNames:w,styles:k,unstyled:C,className:x,style:S,vars:A,autoContrast:E,mod:D}=n,M=(0,l.A)(n,yI),N=W_(d),[T,O]=Y_({value:r,defaultValue:o,finalValue:null,onChange:i}),P=DO({name:"Tabs",props:n,classes:aI,className:x,style:S,classNames:w,styles:k,unstyled:C,vars:A,varsResolver:kI});return(0,Ax.jsx)(sI,{value:{placement:y,value:T,orientation:a,id:N,loop:u,activateTabWithKeyboard:h,getTabId:nI("".concat(N,"-tab"),bI),getPanelId:nI("".concat(N,"-panel"),bI),onChange:O,allowTabDeactivation:p,variant:f,color:m,radius:g,inverted:v,keepMounted:b,unstyled:C,getStyles:P},children:(0,Ax.jsx)(XO,(0,s.A)((0,s.A)((0,s.A)({ref:t,id:N,variant:f,mod:[{orientation:a,inverted:"horizontal"===a&&v,placement:"vertical"===a&&y},D]},P("root")),M),{},{children:c}))})});CI.classes=aI,CI.displayName="@mantine/core/Tabs",CI.Tab=vI,CI.Panel=fI,CI.List=dI;var xI={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const SI=["classNames","className","style","styles","unstyled","vars","transitionProps","loaderProps","overlayProps","visible","zIndex"],AI={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:f_("overlay")},EI=(e,t)=>{let{zIndex:n}=t;return{root:{"--lo-z-index":null===n||void 0===n?void 0:n.toString()}}},DI=YO((e,t)=>{const n=uO("LoadingOverlay",AI,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,vars:u,transitionProps:d,loaderProps:h,overlayProps:p,visible:f,zIndex:m}=n,g=(0,l.A)(n,SI),v=aO(),y=DO({name:"LoadingOverlay",classes:xI,props:n,className:r,style:i,classNames:o,styles:a,unstyled:c,vars:u,varsResolver:EI}),b=(0,s.A)((0,s.A)({},AI.overlayProps),p);return(0,Ax.jsx)(OP,(0,s.A)((0,s.A)({transition:"fade"},d),{},{mounted:!!f,children:e=>(0,Ax.jsxs)(XO,(0,s.A)((0,s.A)((0,s.A)({},y("root",{style:e})),{},{ref:t},g),{},{children:[(0,Ax.jsx)(xP,(0,s.A)((0,s.A)({},y("loader")),{},{unstyled:c},h)),(0,Ax.jsx)(tB,(0,s.A)((0,s.A)((0,s.A)({},b),y("overlay")),{},{darkHidden:!0,unstyled:c,color:(null===p||void 0===p?void 0:p.color)||v.white})),(0,Ax.jsx)(tB,(0,s.A)((0,s.A)((0,s.A)({},b),y("overlay")),{},{lightHidden:!0,unstyled:c,color:(null===p||void 0===p?void 0:p.color)||v.colors.dark[5]}))]}))}))});DI.classes=xI,DI.displayName="@mantine/core/LoadingOverlay";const MI=["onChange","children","multiple","accept","name","form","resetRef","disabled","capture","inputProps"],NI={multiple:!1},TI=(0,o.forwardRef)((e,t)=>{const n=uO("FileButton",NI,e),{onChange:r,children:i,multiple:a,accept:c,name:u,form:d,resetRef:h,disabled:p,capture:f,inputProps:m}=n,g=(0,l.A)(n,MI),v=(0,o.useRef)(null);return c_(h,()=>{v.current&&(v.current.value="")}),(0,Ax.jsxs)(Ax.Fragment,{children:[(0,Ax.jsx)("input",(0,s.A)({style:{display:"none"},type:"file",accept:c,multiple:a,onChange:e=>{r(a?Array.from(e.currentTarget.files):e.currentTarget.files[0]||null)},ref:d_(t,v),name:u,form:d,capture:f},m)),i((0,s.A)({onClick:()=>{var e;!p&&(null===(e=v.current)||void 0===e||e.click())}},g))]})});TI.displayName="@mantine/core/FileButton";const OI=["unstyled","vars","onChange","value","defaultValue","multiple","accept","name","form","valueComponent","clearable","clearButtonProps","readOnly","capture","fileInputProps","rightSection","size","placeholder","component","resetRef","classNames","styles"],PI={valueComponent:e=>{let{value:t}=e;return(0,Ax.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):null===t||void 0===t?void 0:t.name})}},_I=YO((e,t)=>{const n=uO("FileInput",PI,e),{unstyled:r,vars:i,onChange:a,value:c,defaultValue:u,multiple:d,accept:h,name:p,form:f,valueComponent:m,clearable:g,clearButtonProps:v,readOnly:y,capture:b,fileInputProps:w,rightSection:k,size:C,placeholder:x,component:S,resetRef:A,classNames:E,styles:D}=n,M=(0,l.A)(n,OI),N=(0,o.useRef)(null),{resolvedClassNames:T,resolvedStyles:O}=iR({classNames:E,styles:D,props:n}),[P,_]=Y_({value:c,defaultValue:u,onChange:a,finalValue:d?[]:null}),L=Array.isArray(P)?0!==P.length:null!==P,R=k||(g&&L&&!y?(0,Ax.jsx)(hR,(0,s.A)((0,s.A)({},v),{},{variant:"subtle",onClick:()=>_(d?[]:null),size:C,unstyled:r})):null);(0,o.useEffect)(()=>{var e;(Array.isArray(P)&&0===P.length||null===P)&&(null===(e=N.current)||void 0===e||e.call(N))},[P]);const B=m;return(0,Ax.jsx)(TI,{onChange:_,multiple:d,accept:h,name:p,form:f,resetRef:d_(N,A),disabled:y,capture:b,inputProps:w,children:e=>(0,Ax.jsx)(qR,(0,s.A)((0,s.A)((0,s.A)({component:S||"button",ref:t,rightSection:R},e),M),{},{__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:C,classNames:E,styles:D,children:L?(0,Ax.jsx)(B,{value:P}):(0,Ax.jsx)(VR.Placeholder,{__staticSelector:"FileInput",classNames:T,styles:O,children:x})}))})});_I.classes=qR.classes,_I.displayName="@mantine/core/FileInput";const LI=_I;var RI={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const BI=["classNames","className","style","styles","unstyled","vars","radius","color","gradient","leftSection","rightSection","children","variant","fullWidth","autoContrast","circle","mod"],II={},FI=(e,t)=>{let{radius:n,color:o,gradient:r,variant:i,size:s,autoContrast:l}=t;const a=e.variantColorResolver({color:o||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:l});return{root:{"--badge-height":BT(s,"badge-height"),"--badge-padding-x":BT(s,"badge-padding-x"),"--badge-fz":BT(s,"badge-fz"),"--badge-radius":void 0===n?void 0:FT(n),"--badge-bg":o||i?a.background:void 0,"--badge-color":o||i?a.color:void 0,"--badge-bd":o||i?a.border:void 0,"--badge-dot-color":"dot"===i?JT(o,e):void 0}}},jI=iP((e,t)=>{const n=uO("Badge",II,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,vars:u,radius:d,color:h,gradient:p,leftSection:f,rightSection:m,children:g,variant:v,fullWidth:y,autoContrast:b,circle:w,mod:k}=n,C=(0,l.A)(n,BI),x=DO({name:"Badge",props:n,classes:RI,className:r,style:i,classNames:o,styles:a,unstyled:c,vars:u,varsResolver:FI});return(0,Ax.jsxs)(XO,(0,s.A)((0,s.A)((0,s.A)({variant:v,mod:[{block:y,circle:w,"with-right-section":!!m,"with-left-section":!!f},k]},x("root",{variant:v})),{},{ref:t},C),{},{children:[f&&(0,Ax.jsx)("span",(0,s.A)((0,s.A)({},x("section")),{},{"data-position":"left",children:f})),(0,Ax.jsx)("span",(0,s.A)((0,s.A)({},x("label")),{},{children:g})),m&&(0,Ax.jsx)("span",(0,s.A)((0,s.A)({},x("section")),{},{"data-position":"right",children:m}))]}))});jI.classes=RI,jI.displayName="@mantine/core/Badge";const zI={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var HI={root:"m_8bffd616"};const VI=["classNames","className","style","styles","unstyled","vars","gap","rowGap","columnGap","align","justify","wrap","direction"],UI={},$I=iP((e,t)=>{const n=uO("Flex",UI,e),{classNames:o,className:r,style:i,styles:a,unstyled:c,vars:u,gap:d,rowGap:h,columnGap:p,align:f,justify:m,wrap:g,direction:v}=n,y=(0,l.A)(n,VI),b=DO({name:"Flex",classes:HI,props:n,className:r,style:i,classNames:o,styles:a,unstyled:c,vars:u}),w=aO(),k=KO(),C=GO({styleProps:{gap:d,rowGap:h,columnGap:p,align:f,justify:m,wrap:g,direction:v},theme:w,data:zI});return(0,Ax.jsxs)(Ax.Fragment,{children:[C.hasResponsiveStyles&&(0,Ax.jsx)(OO,{selector:".".concat(k),styles:C.styles,media:C.media}),(0,Ax.jsx)(XO,(0,s.A)((0,s.A)({ref:t},b("root",{className:k,style:VT(C.inlineStyles)})),y))]})});function WI(e){return"auto"===e||"dark"===e||"light"===e}function qI(){let e,{key:t="mantine-color-scheme-value"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{get:e=>{if("undefined"===typeof window)return e;try{const n=window.localStorage.getItem(t);return WI(n)?n:e}catch(n){return e}},set:e=>{try{window.localStorage.setItem(t,e)}catch(n){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",n)}},subscribe:n=>{e=e=>{e.storageArea===window.localStorage&&e.key===t&&WI(e.newValue)&&n(e.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}function GI(){const e=aO(),t=pO(),n=MO(e.breakpoints).reduce((t,n)=>{const o=e.breakpoints[n].includes("px"),r=function(e){const t=function(e){var t;return"string"===typeof e&&e.includes("var(--mantine-scale)")?null===(t=e.match(/^calc\((.*?)\)$/))||void 0===t?void 0:t[1].split("*")[0].trim():e}(e);return"number"===typeof t?t:"string"===typeof t?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?16*Number(t.replace("rem","")):t.includes("em")?16*Number(t.replace("em","")):Number(t):NaN}(e.breakpoints[n]),i=o?"".concat(r-.1,"px"):RT(r-.1),s=o?"".concat(r,"px"):RT(r);return"".concat(t,"@media (max-width: ").concat(i,") {.mantine-visible-from-").concat(n," {display: none !important;}}@media (min-width: ").concat(s,") {.mantine-hidden-from-").concat(n," {display: none !important;}}")},"");return(0,Ax.jsx)("style",{"data-mantine-styles":"classes",nonce:null===t||void 0===t?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function KI(e){return Object.entries(e).map(e=>{let[t,n]=e;return"".concat(t,": ").concat(n,";")}).join("")}function ZI(e,t){return(Array.isArray(e)?e:[e]).reduce((e,t)=>"".concat(t,"{").concat(e,"}"),t)}function JI(e){let{theme:t,color:n,colorScheme:o,name:r=n,withColorValues:i=!0}=e;if(!t.colors[n])return{};if("light"===o){const e=WT(t,"light"),o={["--mantine-color-".concat(r,"-text")]:"var(--mantine-color-".concat(r,"-filled)"),["--mantine-color-".concat(r,"-filled")]:"var(--mantine-color-".concat(r,"-").concat(e,")"),["--mantine-color-".concat(r,"-filled-hover")]:"var(--mantine-color-".concat(r,"-").concat(9===e?8:e+1,")"),["--mantine-color-".concat(r,"-light")]:YT(t.colors[n][e],.1),["--mantine-color-".concat(r,"-light-hover")]:YT(t.colors[n][e],.12),["--mantine-color-".concat(r,"-light-color")]:"var(--mantine-color-".concat(r,"-").concat(e,")"),["--mantine-color-".concat(r,"-outline")]:"var(--mantine-color-".concat(r,"-").concat(e,")"),["--mantine-color-".concat(r,"-outline-hover")]:YT(t.colors[n][e],.05)};return i?(0,s.A)({["--mantine-color-".concat(r,"-0")]:t.colors[n][0],["--mantine-color-".concat(r,"-1")]:t.colors[n][1],["--mantine-color-".concat(r,"-2")]:t.colors[n][2],["--mantine-color-".concat(r,"-3")]:t.colors[n][3],["--mantine-color-".concat(r,"-4")]:t.colors[n][4],["--mantine-color-".concat(r,"-5")]:t.colors[n][5],["--mantine-color-".concat(r,"-6")]:t.colors[n][6],["--mantine-color-".concat(r,"-7")]:t.colors[n][7],["--mantine-color-".concat(r,"-8")]:t.colors[n][8],["--mantine-color-".concat(r,"-9")]:t.colors[n][9]},o):o}const l=WT(t,"dark"),a={["--mantine-color-".concat(r,"-text")]:"var(--mantine-color-".concat(r,"-4)"),["--mantine-color-".concat(r,"-filled")]:"var(--mantine-color-".concat(r,"-").concat(l,")"),["--mantine-color-".concat(r,"-filled-hover")]:"var(--mantine-color-".concat(r,"-").concat(9===l?8:l+1,")"),["--mantine-color-".concat(r,"-light")]:YT(t.colors[n][Math.max(0,l-2)],.15),["--mantine-color-".concat(r,"-light-hover")]:YT(t.colors[n][Math.max(0,l-2)],.2),["--mantine-color-".concat(r,"-light-color")]:"var(--mantine-color-".concat(r,"-").concat(Math.max(l-5,0),")"),["--mantine-color-".concat(r,"-outline")]:"var(--mantine-color-".concat(r,"-").concat(Math.max(l-4,0),")"),["--mantine-color-".concat(r,"-outline-hover")]:YT(t.colors[n][Math.max(l-4,0)],.05)};return i?(0,s.A)({["--mantine-color-".concat(r,"-0")]:t.colors[n][0],["--mantine-color-".concat(r,"-1")]:t.colors[n][1],["--mantine-color-".concat(r,"-2")]:t.colors[n][2],["--mantine-color-".concat(r,"-3")]:t.colors[n][3],["--mantine-color-".concat(r,"-4")]:t.colors[n][4],["--mantine-color-".concat(r,"-5")]:t.colors[n][5],["--mantine-color-".concat(r,"-6")]:t.colors[n][6],["--mantine-color-".concat(r,"-7")]:t.colors[n][7],["--mantine-color-".concat(r,"-8")]:t.colors[n][8],["--mantine-color-".concat(r,"-9")]:t.colors[n][9]},a):a}function XI(e,t,n){MO(t).forEach(o=>Object.assign(e,{["--mantine-".concat(n,"-").concat(o)]:t[o]}))}$I.classes=HI,$I.displayName="@mantine/core/Flex";const QI=e=>{const t=WT(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:LT(e.defaultRadius),o={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":"var(--mantine-color-".concat(e.primaryColor,"-filled)"),"--mantine-primary-color-filled-hover":"var(--mantine-color-".concat(e.primaryColor,"-filled-hover)"),"--mantine-primary-color-light":"var(--mantine-color-".concat(e.primaryColor,"-light)"),"--mantine-primary-color-light-hover":"var(--mantine-color-".concat(e.primaryColor,"-light-hover)"),"--mantine-primary-color-light-color":"var(--mantine-color-".concat(e.primaryColor,"-light-color)")},light:{"--mantine-primary-color-contrast":rI(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":"var(--mantine-color-".concat(e.primaryColor,"-").concat(t,")"),"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":rI(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":"var(--mantine-color-".concat(e.primaryColor,"-4)"),"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};XI(o.variables,e.breakpoints,"breakpoint"),XI(o.variables,e.spacing,"spacing"),XI(o.variables,e.fontSizes,"font-size"),XI(o.variables,e.lineHeights,"line-height"),XI(o.variables,e.shadows,"shadow"),XI(o.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((t,n)=>{o.variables["--mantine-primary-color-".concat(n)]="var(--mantine-color-".concat(e.primaryColor,"-").concat(n,")")}),MO(e.colors).forEach(t=>{const n=e.colors[t];if(function(e){return!!e&&"object"===typeof e&&"mantine-virtual-color"in e}(n))return Object.assign(o.light,JI({theme:e,name:n.name,color:n.light,colorScheme:"light",withColorValues:!0})),void Object.assign(o.dark,JI({theme:e,name:n.name,color:n.dark,colorScheme:"dark",withColorValues:!0}));n.forEach((e,n)=>{o.variables["--mantine-color-".concat(t,"-").concat(n)]=e}),Object.assign(o.light,JI({theme:e,color:t,colorScheme:"light",withColorValues:!1})),Object.assign(o.dark,JI({theme:e,color:t,colorScheme:"dark",withColorValues:!1}))});const r=e.headings.sizes;return MO(r).forEach(t=>{o.variables["--mantine-".concat(t,"-font-size")]=r[t].fontSize,o.variables["--mantine-".concat(t,"-line-height")]=r[t].lineHeight,o.variables["--mantine-".concat(t,"-font-weight")]=r[t].fontWeight||e.headings.fontWeight}),o};const YI=QI(tO);function eF(e){let{cssVariablesSelector:t,deduplicateCssVariables:n}=e;const o=aO(),r=pO(),i=function(e){let{theme:t,generator:n}=e;const o=QI(t),r=null===n||void 0===n?void 0:n(t);return r?oO(o,r):o}({theme:o,generator:hO().cssVariablesResolver}),s=":root"===t&&n,l=function(e,t){const n=KI(e.variables),o=n?ZI(t,n):"",r=KI(e.dark),i=KI(e.light),s=r?ZI("".concat(t,":host"===t?'([data-mantine-color-scheme="dark"])':'[data-mantine-color-scheme="dark"]'),r):"",l=i?ZI("".concat(t,":host"===t?'([data-mantine-color-scheme="light"])':'[data-mantine-color-scheme="light"]'),i):"";return"".concat(o).concat(s).concat(l)}(s?function(e){const t={variables:{},light:{},dark:{}};return MO(e.variables).forEach(n=>{YI.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),MO(e.light).forEach(n=>{YI.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),MO(e.dark).forEach(n=>{YI.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}(i):i,t);return l?(0,Ax.jsx)("style",{"data-mantine-styles":!0,nonce:null===r||void 0===r?void 0:r(),dangerouslySetInnerHTML:{__html:"".concat(l).concat(s?"":(a=t,"\n  ".concat(a,'[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }\n  ').concat(a,'[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }\n')))}}):null;var a}function tF(e,t){var n,o;const r="undefined"!==typeof window&&"matchMedia"in window&&(null===(n=window.matchMedia("(prefers-color-scheme: dark)"))||void 0===n?void 0:n.matches),i="auto"!==e?e:r?"dark":"light";null===(o=t())||void 0===o||o.setAttribute("data-mantine-color-scheme",i)}function nF(e){let{theme:t,children:n,getStyleNonce:r,withStaticClasses:i=!0,withGlobalClasses:s=!0,deduplicateCssVariables:l=!0,withCssVariables:a=!0,cssVariablesSelector:c=":root",classNamesPrefix:u="mantine",colorSchemeManager:d=qI(),defaultColorScheme:h="light",getRootElement:p=()=>document.documentElement,cssVariablesResolver:f,forceColorScheme:m,stylesTransform:g,env:v}=e;const{colorScheme:y,setColorScheme:b,clearColorScheme:w}=function(e){let{manager:t,defaultColorScheme:n,getRootElement:r,forceColorScheme:i}=e;const s=(0,o.useRef)(null),[l,a]=(0,o.useState)(()=>t.get(n)),c=i||l,u=(0,o.useCallback)(e=>{i||(tF(e,r),a(e),t.set(e))},[t.set,c,i]),d=(0,o.useCallback)(()=>{a(n),tF(n,r),t.clear()},[t.clear,n]);return(0,o.useEffect)(()=>(t.subscribe(u),t.unsubscribe),[t.subscribe,t.unsubscribe]),A_(()=>{tF(t.get(n),r)},[]),(0,o.useEffect)(()=>{var e;if(i)return tF(i,r),()=>{};void 0===i&&tF(l,r),"undefined"!==typeof window&&"matchMedia"in window&&(s.current=window.matchMedia("(prefers-color-scheme: dark)"));const t=e=>{"auto"===l&&tF(e.matches?"dark":"light",r)};return null===(e=s.current)||void 0===e||e.addEventListener("change",t),()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.removeEventListener("change",t)}},[l,i]),{colorScheme:c,setColorScheme:u,clearColorScheme:d}}({defaultColorScheme:h,forceColorScheme:m,manager:d,getRootElement:p});return function(e){let{respectReducedMotion:t,getRootElement:n}=e;A_(()=>{var e;t&&(null===(e=n())||void 0===e||e.setAttribute("data-respect-reduced-motion","true"))},[t])}({respectReducedMotion:(null===t||void 0===t?void 0:t.respectReducedMotion)||!1,getRootElement:p}),(0,Ax.jsx)(dO.Provider,{value:{colorScheme:y,setColorScheme:b,clearColorScheme:w,getRootElement:p,classNamesPrefix:u,getStyleNonce:r,cssVariablesResolver:f,cssVariablesSelector:c,withStaticClasses:i,stylesTransform:g,env:v},children:(0,Ax.jsxs)(cO,{theme:t,children:[a&&(0,Ax.jsx)(eF,{cssVariablesSelector:c,deduplicateCssVariables:l}),s&&(0,Ax.jsx)(GI,{}),n]})})}function oF(){let{onBlur:e,onFocus:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,o.useRef)(null),[r,i]=(0,o.useState)(!1),s=(0,o.useRef)(!1),l=e=>{i(e),s.current=e},a=e=>{s.current||(l(!0),null===t||void 0===t||t(e))},c=t=>{s.current&&!function(e){return e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement&&e.currentTarget.contains(e.relatedTarget)}(t)&&(l(!1),null===e||void 0===e||e(t))};return(0,o.useEffect)(()=>{const e=n.current;if(e)return e.addEventListener("focusin",a),e.addEventListener("focusout",c),()=>{null===e||void 0===e||e.removeEventListener("focusin",a),null===e||void 0===e||e.removeEventListener("focusout",c)}},[a,c]),{ref:n,focused:r}}eF.displayName="@mantine/CssVariables",function(){const e=console.error;console.error=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];n.length>1&&"string"===typeof n[0]&&n[0].toLowerCase().includes("extra attributes from the server")&&"string"===typeof n[1]&&n[1].toLowerCase().includes("data-mantine-color-scheme")||e(...n)}}(),nF.displayName="@mantine/core/MantineProvider";const rF=["className","children","mainTooltip","secondaryTooltip","icon","isSelected","isDisabled","onClick","label","variant"],iF=["className","text","icon","isSelected","mainTooltip","secondaryTooltip","onClick","onMouseEnter"],sF=["className","children"],lF=["className","children","headerText","selected","onFocus","onBlur","tabIndex"],aF=["className","children"],cF=["className","children"],uF=["authorInfo","timeString","edited"],dF=["className","showActions","authorInfo","timeString","edited","actions","children"],hF=["className","autoFocus","onFocus","onBlur","editor","editable"],pF=["className","name","label","variant","icon","value","autoFocus","placeholder","disabled","onKeyDown","onChange","onSubmit","autoComplete","rightSection"],fF=["children","onOpenChange","position","sub"],mF=["children","onOpenChange","position","sub"],gF=["className","children","icon","checked","subTrigger","onClick"],vF=["children","sub"],yF=["className","children","sub"],bF=["className"],wF=["className","children"],kF=["className","children","icon","onClick","onDragEnd","onDragStart","draggable","label"],CF=["className","tabs","defaultOpenTab","openTab","setOpenTab","loading"],xF=["className","children","onClick","label"],SF=["className","accept","value","placeholder","onChange"],AF=["className","children"],EF=["className","value","placeholder","onKeyDown","onChange"],DF=["opened","position","children"],MF=["children"],NF=["className","children","variant"],TF=["className","children"],OF=["className","children","icon","onClick","onDragEnd","onDragStart","draggable","label"],PF=["className","children","id"],_F=["className","children"],LF=["className","isSelected","onClick","item","id"],RF=["className","children"],BF=["className"],IF=["className","children","id","columns"],FF=["className","children","columns"],jF=["className","isSelected","onClick","item","id"],zF=["className","children","columns"],HF=["children","className","onMouseDown","onClick"],VF=["className","children","draggable","onDragStart","onDragEnd","style","label"],UF=["className","children","onMouseEnter","onMouseLeave","variant"],$F=["className","items","isDisabled"],WF=["className","theme"],qF=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function e(o){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--bn";for(const i in o){const s=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),l="".concat(r,"-").concat(s);"object"!=typeof o[i]?("number"==typeof o[i]&&(o[i]="".concat(o[i],"px")),n?t.style.removeProperty(l):t.style.setProperty(l,o[i].toString())):e(o[i],l)}}(e),[]},GF=(e,t)=>qF(e,t),KF={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},ZF=e=>(0,Ax.jsxs)(rP,{gap:0,className:"bn-tooltip",children:[(0,Ax.jsx)(dP,{size:"sm",lineClamp:5,children:e.mainTooltip}),e.secondaryTooltip&&(0,Ax.jsx)(dP,{size:"xs",lineClamp:5,children:e.secondaryTooltip})]}),JF=(0,o.forwardRef)((e,t)=>{const{className:n,children:r,mainTooltip:i,secondaryTooltip:a,icon:c,isSelected:u,isDisabled:d,onClick:h,label:p,variant:f}=e,m=(0,l.A)(e,rF);wy(m,!1);const[g,v]=(0,o.useState)(!1),y=r?(0,Ax.jsx)(ZP,(0,s.A)((0,s.A)({"aria-label":p,className:n,onMouseDown:e=>{xy()&&e.currentTarget.focus()},onClick:e=>{v(!0),null==h||h(e)},onPointerLeave:()=>v(!1),"aria-pressed":u,"data-selected":u||void 0,"data-test":i?i.slice(0,1).toLowerCase()+i.replace(/\s+/g,"").slice(1):void 0,size:"compact"===f?"compact-xs":"xs",disabled:d||!1,ref:t},m),{},{children:r})):(0,Ax.jsx)(a_,(0,s.A)((0,s.A)({className:n,"aria-label":p,onMouseDown:e=>{xy()&&e.currentTarget.focus()},onClick:e=>{v(!0),null==h||h(e)},onPointerLeave:()=>v(!1),"aria-pressed":u,"data-selected":u||void 0,"data-test":i?i.slice(0,1).toLowerCase()+i.replace(/\s+/g,"").slice(1):void 0,size:"compact"===f?20:30,disabled:d||!1,ref:t},m),{},{children:c}));return i?(0,Ax.jsx)(Q_,{disabled:g,withinPortal:!1,label:(0,Ax.jsx)(ZF,{mainTooltip:i,secondaryTooltip:a}),children:y}):y}),XF=(0,o.forwardRef)((e,t)=>{const{className:n,text:r,icon:i,isSelected:s,mainTooltip:a,secondaryTooltip:c,onClick:u,onMouseEnter:d}=e;wy((0,l.A)(e,iF),!1);const[h,p]=(0,o.useState)(!1),f=(0,Ax.jsxs)(dL,{className:n,checked:!0===s,wrapperProps:{onMouseEnter:d,onMouseLeave:()=>p(!1),onClick:e=>{p(!0),null==u||u(e)}},variant:"light",icon:null,ref:t,children:[(0,Ax.jsx)("span",{children:i}),(0,Ax.jsx)("span",{children:r})]});return!a||h?f:(0,Ax.jsx)(Q_,{refProp:"rootRef",withinPortal:!1,label:(0,Ax.jsx)(ZF,{mainTooltip:a,secondaryTooltip:c}),children:f})}),QF=(0,o.forwardRef)((e,t)=>{const{className:n,children:o}=e;return wy((0,l.A)(e,sF)),(0,Ax.jsx)(gL,{className:n,ref:t,children:o})}),YF=(0,o.forwardRef)((e,t)=>{const{className:n,children:r,headerText:i,selected:s,onFocus:a,onBlur:c,tabIndex:u}=e;wy((0,l.A)(e,lF),!1);const d=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var e;s&&(null==(e=d.current)||e.scrollIntoView({behavior:"smooth",block:"center"}))},[s]),(0,Ax.jsxs)(PL,{className:Cy(n,s?"selected":""),onFocus:a,onBlur:c,tabIndex:u,ref:BM([t,d]),children:[i&&(0,Ax.jsx)(dP,{className:"bn-header-text",children:i}),r]})}),ej=(0,o.forwardRef)((e,t)=>{const{className:n,children:o}=e;return wy((0,l.A)(e,aF),!1),(0,Ax.jsx)(PL.Section,{className:n,ref:t,children:o})}),tj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o}=e;return wy((0,l.A)(e,cF),!1),(0,Ax.jsx)(IL,{className:n,label:(0,Ax.jsx)(dP,{children:o}),ref:t})}),nj=(0,o.forwardRef)((e,t)=>{const{authorInfo:n,timeString:o,edited:r}=e;return wy((0,l.A)(e,uF),!1),"loading"===n?(0,Ax.jsxs)(gL,{children:[(0,Ax.jsx)(VL,{height:24,width:24}),(0,Ax.jsx)("div",{children:(0,Ax.jsx)(VL,{height:12,width:100})})]}):(0,Ax.jsxs)(gL,{children:[(0,Ax.jsx)(nR,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),(0,Ax.jsxs)(dP,{fz:"sm",fw:"bold",children:[n.username,(0,Ax.jsxs)(dP,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[o," ",r&&"(edited)"]})]})]})}),oj=(0,o.forwardRef)((e,t)=>{const{className:n,showActions:r,authorInfo:i,timeString:a,edited:c,actions:u,children:d}=e,h=(0,l.A)(e,dF),{hovered:p,ref:f}=function(){const[e,t]=(0,o.useState)(!1),n=(0,o.useRef)(null),r=(0,o.useCallback)(()=>t(!0),[]),i=(0,o.useCallback)(()=>t(!1),[]);return(0,o.useEffect)(()=>{const e=n.current;if(e)return e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",i),()=>{null===e||void 0===e||e.removeEventListener("mouseenter",r),null===e||void 0===e||e.removeEventListener("mouseleave",i)}},[n.current]),{ref:n,hovered:e}}(),{focused:m,ref:g}=oF(),v=BM([t,f]);return wy(h,!1),(0,Ax.jsxs)(gL,{pos:"relative",ref:v,className:n,children:[u&&(!0===r||void 0===r||"hover"===r&&p||m)?(0,Ax.jsx)(gL,{ref:g,style:{position:"absolute",right:0,top:0,zIndex:10},children:u}):null,(0,Ax.jsx)(nj,(0,s.A)({},e)),d]})}),rj=(0,o.forwardRef)((e,t)=>{const{className:n,autoFocus:o,onFocus:r,onBlur:i,editor:s,editable:a}=e;return wy((0,l.A)(e,hF),!1),(0,Ax.jsx)(Jj,{autoFocus:o,className:n,editor:e.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:t,onFocus:r,onBlur:i,children:(0,Ax.jsx)(hN,{formattingToolbar:ij})})}),ij=()=>{const e=cN([]).filter(e=>"nestBlockButton"!==e.key&&"unnestBlockButton"!==e.key);return(0,Ax.jsx)(uN,{blockTypeSelectItems:[],children:e})},sj=(0,o.forwardRef)((e,t)=>{const{className:n,name:o,label:r,variant:i,icon:s,value:a,autoFocus:c,placeholder:u,disabled:d,onKeyDown:h,onChange:p,onSubmit:f,autoComplete:m,rightSection:g}=e;return wy((0,l.A)(e,pF)),(0,Ax.jsx)(KR,{size:"xs",className:Cy(n||"","large"===i?"bn-mt-input-large":""),ref:t,name:o,label:r,leftSection:s,value:a,autoFocus:c,"data-autofocus":c?"true":void 0,rightSection:g,placeholder:u,disabled:d,onKeyDown:h,onChange:p,onSubmit:f,autoComplete:m})});var lj={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},aj=o.createContext&&o.createContext(lj),cj=["attr","size","title"];function uj(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dj(){return dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},dj.apply(this,arguments)}function hj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function pj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hj(Object(n),!0).forEach(function(t){fj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fj(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mj(e){return e&&e.map((e,t)=>o.createElement(e.tag,pj({key:t},e.attr),mj(e.child)))}function gj(e){return t=>o.createElement(vj,dj({attr:pj({},e.attr)},t),mj(e.child))}function vj(e){var t=t=>{var n,{attr:r,size:i,title:s}=e,l=uj(e,cj),a=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),o.createElement("svg",dj({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:n,style:pj(pj({color:e.color||t.color},t.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&o.createElement("title",null,s),e.children)};return void 0!==aj?o.createElement(aj.Consumer,null,e=>t(e)):t(lj)}function yj(e){return gj({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function bj(e){return gj({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}const wj=(0,o.createContext)(void 0),kj=(0,o.forwardRef)((e,t)=>{const{children:n,onOpenChange:r,position:i,sub:s}=e;wy((0,l.A)(e,fF));const[a,c]=(0,o.useState)(!1),u=(0,o.useRef)(null),d=(0,o.useRef)(),h=(0,o.useCallback)(()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{c(!1)},250)},[]),p=(0,o.useCallback)(()=>{d.current&&clearTimeout(d.current),c(!0)},[]);return(0,Ax.jsx)(wj.Provider,{value:{onMenuMouseOver:p,onMenuMouseLeave:h},children:(0,Ax.jsx)(tI.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:u_(t,u),onMouseOver:p,onMouseLeave:h,children:(0,Ax.jsx)(tI,{portalProps:{target:u.current?u.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onChange:r,position:i,children:n})})})}),Cj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o,icon:r,checked:i,subTrigger:a,onClick:c}=e,u=(0,l.A)(e,gF);return wy(u,!1),a?(0,Ax.jsxs)("div",(0,s.A)((0,s.A)({onClick:e=>{e.preventDefault(),e.stopPropagation()},ref:t},u),{},{children:[o,(0,Ax.jsx)(bj,{size:15})]})):(0,Ax.jsx)(tI.Item,(0,s.A)((0,s.A)({className:n,ref:t,leftSection:r,rightSection:i?(0,Ax.jsx)(tL,{size:10}):!1===i?(0,Ax.jsx)("div",{className:"bn-tick-space"}):null,onClick:c},u),{},{children:o}))}),xj=(0,o.forwardRef)((e,t)=>{const{className:n,children:r,sub:i}=e;wy((0,l.A)(e,yF));const s=(0,o.useContext)(wj);return(0,Ax.jsx)(tI.Dropdown,{className:n,ref:t,onMouseOver:null==s?void 0:s.onMenuMouseOver,onMouseLeave:null==s?void 0:s.onMenuMouseLeave,children:r})}),Sj=(0,o.forwardRef)((e,t)=>{const{className:n}=e;return wy((0,l.A)(e,bF)),(0,Ax.jsx)(tI.Divider,{className:n,ref:t})}),Aj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o}=e;return wy((0,l.A)(e,wF)),(0,Ax.jsx)(tI.Label,{className:n,ref:t,children:o})}),Ej=(0,o.forwardRef)((e,t)=>{const{className:n,children:o,icon:r,onClick:i,onDragEnd:a,onDragStart:c,draggable:u,label:d}=e,h=(0,l.A)(e,kF);return wy(h,!1),r?(0,Ax.jsx)(a_,(0,s.A)((0,s.A)({size:24,className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:c,draggable:u,"aria-label":d},h),{},{children:r})):(0,Ax.jsx)(ZP,(0,s.A)((0,s.A)({className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:c,draggable:u,"aria-label":d},h),{},{children:o}))}),Dj=(0,o.forwardRef)((e,t)=>{const{className:n,tabs:o,defaultOpenTab:r,openTab:i,setOpenTab:s,loading:a}=e;return wy((0,l.A)(e,CF)),(0,Ax.jsx)(gL,{className:n,ref:t,children:(0,Ax.jsxs)(CI,{value:i,defaultValue:r,onChange:s,children:[a&&(0,Ax.jsx)(DI,{visible:a}),(0,Ax.jsx)(CI.List,{children:o.map(e=>(0,Ax.jsx)(CI.Tab,{"data-test":"".concat(e.name.toLowerCase(),"-tab"),value:e.name,children:e.name},e.name))}),o.map(e=>(0,Ax.jsx)(CI.Panel,{value:e.name,children:e.tabPanel},e.name))]})})}),Mj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o,onClick:r,label:i}=e,a=(0,l.A)(e,xF);return wy(a),(0,Ax.jsx)(ZP,(0,s.A)((0,s.A)({size:"xs","aria-label":i,className:n,ref:t,onClick:r},a),{},{children:o}))}),Nj=(0,o.forwardRef)((e,t)=>{const{className:n,accept:o,value:r,placeholder:i,onChange:a}=e,c=(0,l.A)(e,SF);return wy(c),(0,Ax.jsx)(LI,(0,s.A)({size:"xs",className:n,ref:t,accept:o,value:r,placeholder:i,onChange:a},c))}),Tj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o}=e;return wy((0,l.A)(e,AF)),(0,Ax.jsx)("div",{className:n,ref:t,children:o})}),Oj=(0,o.forwardRef)((e,t)=>{const{className:n,value:o,placeholder:r,onKeyDown:i,onChange:s}=e;return wy((0,l.A)(e,EF)),(0,Ax.jsx)(KR,{size:"xs","data-test":"embed-input",className:n,ref:t,value:o,placeholder:r,onKeyDown:i,onChange:s})}),Pj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o,variant:r}=e;return wy((0,l.A)(e,NF)),(0,Ax.jsx)(xB,{className:n,ref:t,children:o})}),_j=(0,o.forwardRef)((e,t)=>{const{className:n,children:o}=e,r=(0,l.A)(e,TF);return wy(r,!1),(0,Ax.jsx)(gL,(0,s.A)((0,s.A)({align:"center",gap:0,className:n,ref:t},r),{},{children:o}))}),Lj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o,icon:r,onClick:i,onDragEnd:a,onDragStart:c,draggable:u,label:d}=e,h=(0,l.A)(e,OF);return wy(h,!1),r?(0,Ax.jsx)(a_,(0,s.A)((0,s.A)({size:24,className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:c,draggable:u,"aria-label":d},h),{},{children:r})):(0,Ax.jsx)(ZP,(0,s.A)((0,s.A)({className:n,ref:t,onClick:i,onDragEnd:a,onDragStart:c,draggable:u,"aria-label":d},h),{},{children:o}))}),Rj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o,id:r}=e;return wy((0,l.A)(e,PF)),(0,Ax.jsx)(rP,{gap:0,className:n,ref:t,id:r,role:"listbox",children:o})}),Bj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o}=e;return wy((0,l.A)(e,_F)),(0,Ax.jsx)(gL,{className:n,ref:t,children:(0,Ax.jsx)(gL,{className:"bn-mt-suggestion-menu-item-title",children:o})})}),Ij=(0,o.forwardRef)((e,t)=>{const{className:n,isSelected:r,onClick:i,item:s,id:a}=e;wy((0,l.A)(e,LF));const c=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(!c.current||!r)return;const e=TT(c.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));"top"===e?c.current.scrollIntoView(!0):"bottom"===e&&c.current.scrollIntoView(!1)},[r]),(0,Ax.jsxs)(gL,{gap:0,className:n,ref:u_(t,c),id:a,role:"option",onMouseDown:e=>e.preventDefault(),onClick:i,"aria-selected":r||void 0,children:[s.icon&&(0,Ax.jsx)(gL,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:s.icon}),(0,Ax.jsxs)(rP,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[(0,Ax.jsx)(dP,{className:"bn-mt-suggestion-menu-item-title",children:s.title}),(0,Ax.jsx)(dP,{className:"bn-mt-suggestion-menu-item-subtitle",children:s.subtext})]}),s.badge&&(0,Ax.jsx)(gL,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:(0,Ax.jsx)(jI,{size:"xs",children:s.badge})})]})}),Fj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o}=e;return wy((0,l.A)(e,RF)),(0,Ax.jsx)(gL,{className:n,ref:t,children:o})}),jj=(0,o.forwardRef)((e,t)=>{const{className:n}=e;return wy((0,l.A)(e,BF)),(0,Ax.jsx)(xP,{className:n,type:"dots",size:16,ref:t})}),zj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o,id:r,columns:i}=e;return wy((0,l.A)(e,IF)),(0,Ax.jsx)("div",{className:n,style:{gridTemplateColumns:"repeat(".concat(i,", 1fr)")},ref:t,id:r,role:"grid",children:o})}),Hj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o,columns:r}=e;return wy((0,l.A)(e,FF)),(0,Ax.jsx)(gL,{className:n,style:{gridColumn:"1 / ".concat(r+1)},ref:t,children:(0,Ax.jsx)(gL,{className:"bn-mt-suggestion-menu-item-title",children:o})})}),Vj=(0,o.forwardRef)((e,t)=>{const{className:n,isSelected:r,onClick:i,item:s,id:a}=e;wy((0,l.A)(e,jF));const c=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(!c.current||!r)return;const e=TT(c.current,document.querySelector(".bn-grid-suggestion-menu"));"top"===e?c.current.scrollIntoView(!0):"bottom"===e&&c.current.scrollIntoView(!1)},[r]),(0,Ax.jsx)("div",{className:n,ref:u_(t,c),id:a,role:"option",onClick:i,"aria-selected":r||void 0,children:s.icon})}),Uj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o,columns:r}=e;return wy((0,l.A)(e,zF)),(0,Ax.jsx)(xP,{className:n,style:{gridColumn:"1 / ".concat(r+1)},type:"dots",ref:t})}),$j=(0,o.forwardRef)((e,t)=>{const{children:n,className:o,onMouseDown:r,onClick:i}=e,a=(0,l.A)(e,HF);return wy(a,!1),(0,Ax.jsx)(ZP,(0,s.A)((0,s.A)({className:o,ref:t,onMouseDown:r,onClick:i},a),{},{children:n}))}),Wj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o,draggable:r,onDragStart:i,onDragEnd:a,style:c,label:u}=e,d=(0,l.A)(e,VF);return wy(d,!1),(0,Ax.jsx)(ZP,(0,s.A)((0,s.A)({className:n,ref:t,"aria-label":u,draggable:r,onDragStart:i,onDragEnd:a,style:c},d),{},{children:o}))}),qj=(0,o.forwardRef)((e,t)=>{const{className:n,children:o,onMouseEnter:r,onMouseLeave:i,variant:s}=e;wy((0,l.A)(e,UF));const{ref:a,focused:c}=oF(),u=u_(t,a,pB(c));return(0,Ax.jsx)($I,{className:n,ref:u,role:"toolbar",onMouseEnter:r,onMouseLeave:i,gap:"action-toolbar"===s?2:void 0,children:o})}),Gj=(0,o.forwardRef)((e,t)=>{const{className:n,items:o,isDisabled:r}=e;wy((0,l.A)(e,$F));const i=o.filter(e=>e.isSelected)[0];return i?(0,Ax.jsxs)(tI,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:r,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[(0,Ax.jsx)(tI.Target,{children:(0,Ax.jsx)(ZP,{onMouseDown:e=>{xy()&&e.currentTarget.focus()},leftSection:i.icon,rightSection:(0,Ax.jsx)(yj,{}),size:"xs",variant:"subtle",disabled:r,children:i.text})}),(0,Ax.jsx)(tI.Dropdown,{className:n,ref:t,children:o.map(e=>(0,Ax.jsx)(tI.Item,{onClick:e.onClick,leftSection:e.icon,rightSection:e.isSelected?(0,Ax.jsx)(tL,{size:10,className:"bn-tick-icon"}):(0,Ax.jsx)("div",{className:"bn-tick-space"}),disabled:e.isDisabled,children:e.text},e.text))})]}):null}),Kj={FormattingToolbar:{Root:qj,Button:JF,Select:Gj},FilePanel:{Root:Dj,Button:Mj,FileInput:Nj,TabPanel:Tj,TextInput:Oj},GridSuggestionMenu:{Root:zj,Item:Vj,EmptyItem:Hj,Loader:Uj},LinkToolbar:{Root:qj,Button:JF,Select:Gj},SideMenu:{Root:_j,Button:Lj},SuggestionMenu:{Root:Rj,Item:Ij,EmptyItem:Bj,Label:Fj,Loader:jj},TableHandle:{Root:Wj,ExtendButton:$j},Generic:{Badge:{Root:XF,Group:QF},Form:{Root:e=>(0,Ax.jsx)("div",{children:e.children}),TextInput:sj},Menu:{Root:e=>{const{children:t,onOpenChange:n,position:o,sub:r}=e;return wy((0,l.A)(e,mF)),r?(0,Ax.jsx)(kj,(0,s.A)({},e)):(0,Ax.jsx)(tI,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:o,children:t})},Trigger:e=>{const{children:t,sub:n}=e;return wy((0,l.A)(e,vF)),(0,Ax.jsx)(tI.Target,{children:t})},Dropdown:xj,Divider:Sj,Label:Aj,Item:Cj,Button:Ej},Popover:{Root:e=>{const{opened:t,position:n,children:o}=e;return wy((0,l.A)(e,DF)),(0,Ax.jsx)(PB,{withinPortal:!1,opened:t,position:n,children:o})},Trigger:e=>{const{children:t}=e;return wy((0,l.A)(e,MF)),(0,Ax.jsx)(EB,{children:t})},Content:Pj},Toolbar:{Root:qj,Button:JF,Select:Gj}},Comments:{Comment:oj,Editor:rj,Card:YF,CardSection:ej,ExpandSectionsPrompt:tj}},Zj={activeClassName:""},Jj=e=>{const{className:t,theme:n}=e,r=(0,l.A)(e,WF),i=pD(),a=sT(),c=(null==i?void 0:i.colorSchemePreference)||a,u=(0,o.useCallback)(e=>{if(e&&((e=>{qF(KF,e,!0)})(e),"object"==typeof n))return"light"in n&&"dark"in n?void GF(n["dark"===c?"dark":"light"],e):void GF(n,e)},[c,n]),d="string"==typeof n?n:"no-preference"!==c?c:"light";return(0,Ax.jsx)(yD.Provider,{value:Kj,children:(0,Ax.jsx)(nF,{theme:Zj,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:(0,Ax.jsx)(hT,(0,s.A)((0,s.A)({"data-mantine-color-scheme":d,className:Cy("bn-mantine",t||""),theme:"object"==typeof n?void 0:n},r),{},{ref:u}))})})},Xj=function(e,t){const n=_y({name:e.type,inline:!0,group:"inline",selectable:"styled"===e.content,atom:"none"===e.content,content:"styled"===e.content?"inline*":"",addAttributes:()=>Ty(e.propSchema),addKeyboardShortcuts:()=>rb(e),parseHTML:()=>lb(e),renderHTML(n){let{node:o}=n;const r=this.options.editor,i=tb(o,r.schema.inlineContentSchema,r.schema.styleSchema),s=t.render;return ob(mT(e=>(0,Ax.jsx)(s,{inlineContent:i,updateInlineContent:()=>{},contentRef:e}),r),e.type,o.attrs,e.propSchema)},addNodeView(){const n=this.options.editor;return o=>sD(o=>{const r=nD().nodeViewContentRef;if(!r)throw new Error("nodeViewContentRef is not set");const i=t.render;return(0,Ax.jsx)(NT,{inlineContentProps:o.node.attrs,inlineContentType:e.type,propSchema:e.propSchema,children:(0,Ax.jsx)(i,{contentRef:r,inlineContent:tb(o.node,n.schema.inlineContentSchema,n.schema.styleSchema),updateInlineContent:e=>{const t=Sb([e],n.pmSchema);n.transact(e=>e.replaceWith(o.getPos(),o.getPos()+o.node.nodeSize,t))}})})},{className:"bn-ic-react-node-view-renderer",as:"span"})(o)}});return ib(e,{node:n})}({type:"mention",propSchema:{user:{default:"Unknown"}},content:"none"},{render:e=>(0,Ax.jsxs)("span",{style:{backgroundColor:"#8400ff33"},children:["@",e.inlineContent.props.user]})}),Qj=ok.create({inlineContentSpecs:(0,s.A)((0,s.A)({},qw),{},{mention:Xj})});const Yj=function(){const e=wD({schema:Qj,initialContent:[{type:"paragraph",content:"Welcome to this demo!"},{type:"paragraph",content:[{type:"mention",props:{user:"Steve"}},{type:"text",text:" <- This is an example mention",styles:{}}]},{type:"paragraph",content:"Press the '@' key to open the mentions menu and add another"},{type:"paragraph"}]});return(0,Ax.jsxs)(Jj,{editor:e,sideMenu:!1,formattingToolbar:!1,children:[(0,Ax.jsx)(uN,{}),(0,Ax.jsx)(zN,{triggerCharacter:"@",getItems:async t=>tk((e=>["Steve","Bob","Joe","Mike"].map(t=>({title:t,onItemClick:()=>{e.insertInlineContent([{type:"mention",props:{user:t}}," "])}})))(e),t)})]})},ez=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then(t=>{let{getCLS:n,getFID:o,getFCP:r,getLCP:i,getTTFB:s}=t;n(e),o(e),r(e),i(e),s(e)})};i.createRoot(document.getElementById("root")).render((0,Ax.jsx)(o.StrictMode,{children:(0,Ax.jsx)(Yj,{})})),ez()})();
//# sourceMappingURL=main.5cb9d422.js.map